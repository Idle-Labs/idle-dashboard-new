"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[8415,7658,8194,745,1608,8024],{3148:function(t,e,n){n.r(e),n.d(e,{AssetGeneralData:function(){return j},AssetGeneralDataField:function(){return v}});var i=n(1413),a=n(7276),s=n(55967),o=n(54447),r=n(79681),l=n(15542),d=n(1669),c=n(12056),u=n(75712),x=n(6940),p=n(96699),m=n(3498),h=n(70820),f=n(45263),g=function(t){var e=t.generalData,n=(0,p.Fg)(),i=(0,r.qM)();return e.tooltip?(0,f.jsxs)(m.Ug,{spacing:1,alignItems:"center",children:[(0,f.jsx)(l.Translation,{component:m.xv,translation:e.label,textStyle:"captionSmall"}),(0,f.jsx)(h.u,{hasArrow:!0,placement:"top",label:i(e.tooltip),children:(0,f.jsx)(x.TooltipContent,{children:(0,f.jsx)(s.I5p,{color:n.colors.cta,size:16})})})]}):(0,f.jsx)(l.Translation,{component:m.xv,translation:e.label,textStyle:"captionSmall"})},v=function(t){var e=t.generalData;return(0,f.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,f.jsxs)(m.Ug,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(g,{generalData:e}),e.inlineField&&(0,f.jsx)(u.AssetProvider.GeneralData,{section:"asset",field:e.inlineField})]}),(0,f.jsx)(u.AssetProvider.GeneralData,(0,i.Z)({section:"asset",field:e.field},e.props))]})},j=function(t){var e=t.assetId,n=(0,d.w)().selectors.selectAssetById,i=(0,a.useMemo)((function(){return n&&n(e)}),[n,e]),s=(0,a.useMemo)((function(){return(null===i||void 0===i?void 0:i.type)&&c.A[i.type]}),[i]);return(0,f.jsx)(u.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,f.jsxs)(o.Card.Dark,{children:[(0,f.jsx)(m.MI,{spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],children:(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.slice(0,5).map((function(t){return(0,f.jsx)(v,{generalData:t},"field_".concat(t.field))})))}),(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.length)>5&&(0,f.jsx)(m.MI,{pt:6,mt:6,spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],borderTop:"1px solid",borderTopColor:"divider",children:null===s||void 0===s?void 0:s.generalDataFields.slice(5).map((function(t){return(0,f.jsx)(v,{generalData:t},"field_".concat(t.field))}))})]})})}},37658:function(t,e,n){n.r(e),n.d(e,{InteractiveComponent:function(){return p}});var i=n(29439),a=n(7276),s=n(55967),o=n(66288),r=n(15542),l=n(3498),d=n(43127),c=n(18147),u=n(4710),x=n(45263),p=function(t){var e=t.assetId,n=t.vaultId,p=t.actions,m=(0,o.X)().isMobile,h=(0,a.useState)(!1),f=(0,i.Z)(h,2),g=f[0],v=f[1],j=(0,a.useState)(!1),b=(0,i.Z)(j,2),y=b[0],w=b[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.gC,{left:0,zIndex:[40,0],spacing:[0,6],id:"right-side",width:["100vw","27em"],height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],bg:m?"rgba(0, 0, 0, 0.5)":void 0,sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[(0,x.jsxs)(l.gC,{bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[m&&(0,x.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,x.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.exit",component:d.zx,leftIcon:(0,x.jsx)(s.sG8,{size:24}),onClick:function(){return v(!1)}}),(0,x.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:["common.show","navBar.transactions"],component:d.zx,onClick:function(){return w(!0)}})]}),(0,x.jsx)(u.OperativeComponent,{flex:1,minHeight:m?"auto":"590px",borderRadius:m?0:void 0,assetId:e,actions:p})]}),(0,x.jsxs)(l.gC,{flex:1,bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[y?0:"100vh",0],sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[m&&(0,x.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,x.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.back",component:d.zx,leftIcon:(0,x.jsx)(s.sG8,{size:24}),onClick:function(){return w(!1)}}),(0,x.jsx)(r.Translation,{textStyle:"ctaStatic",translation:"assets.assetDetails.assetHistory.transactionHistory",component:l.xv})]}),(0,x.jsx)(c.TransactionList,{assetIds:[n],fullHeightOnMobile:!0,maxH:["100%",600]})]})]}),m&&(0,x.jsx)(l.kC,{p:4,left:0,bottom:0,border:0,width:"100%",zIndex:[10,0],bg:"card.bgDark",position:"fixed",children:(0,x.jsx)(r.Translation,{component:d.zx,translation:["common.start","common.deposit"],variant:"ctaFull",onClick:function(){return v(!0)}})})]})}},59058:function(t,e,n){n.r(e),n.d(e,{Unstake:function(){return b}});var i=n(74165),a=n(15861),s=n(33482),o=n(55967),r=n(88935),l=n(7276),d=n(43127),c=n(3498),u=n(15542),x=n(1669),p=n(23023),m=n(78951),h=n(4710),f=n(86393),g=n(75712),v=n(99594),j=n(45263),b=function(t){var e,n,b,y=t.itemIndex,w=(0,r.Y)().account,C=(0,g.useAssetProvider)(),S=C.asset,k=C.vault,T=(0,h.useOperativeComponent)(),I=T.dispatch,M=T.activeItem,D=T.setActionIndex,Z=(0,x.w)(),A=Z.stakingData,z=Z.selectors.selectVaultPrice,R=(0,p.R)(),L=R.sendTransaction,P=R.setGasLimit,E=R.state.block,F=(0,l.useMemo)((function(){var t;return(0,v.d5)(null===A||void 0===A||null===(t=A.position)||void 0===t?void 0:t.deposited)}),[A]),H=(0,l.useMemo)((function(){var t,e;return!(null===A||void 0===A||null===(t=A.position)||void 0===t||!t.lockEnd||!E)&&(0,v.qF)(null===A||void 0===A||null===(e=A.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,v.qF)(1e3*E.timestamp))}),[A,E]),B=(0,l.useMemo)((function(){var t,e;return null!==A&&void 0!==A&&null!==(t=A.position)&&void 0!==t&&t.lockEnd?(0,v.p6)(null===A||void 0===A||null===(e=A.position)||void 0===e?void 0:e.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[A]),O=(0,l.useCallback)((function(){w&&H&&k&&"getWithdrawContractSendMethod"in k&&"getWithdrawParams"in k&&k instanceof s.y&&(0,a.Z)((0,i.Z)().mark((function t(){var e,n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=k.getWithdrawParams(),n=k.getWithdrawContractSendMethod(e),L(k.id,k.id,n);case 3:case"end":return t.stop()}}),t)})))()}),[w,H,k,L]),U=(0,l.useCallback)((0,a.Z)((0,i.Z)().mark((function t(){var e,n,a,o,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&"getWithdrawContractSendMethod"in k&&"getWithdrawParams"in k&&k instanceof s.y){t.next=2;break}return t.abrupt("return");case 2:if(e=k.getMethodDefaultGasLimit("unstake"),w&&H){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===w||void 0===w?void 0:w.address},a=k.getWithdrawParams(),o=k.getWithdrawContractSendMethod(a),t.next=10,(0,v.$K)(o,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return r=t.t0,t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)}))),[w,k,H]);(0,l.useEffect)((function(){M===y&&(0,a.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:e=t.sent,P(e);case 4:case"end":return t.stop()}}),t)})))()}),[M,y,U,P]),(0,l.useEffect)((function(){M===y&&(I({type:"SET_ASSET",payload:S}),z&&k&&(I({type:"SET_AMOUNT",payload:(0,v.gA)(F).toString()}),I({type:"SET_DEFAULT_AMOUNT",payload:(0,v.gA)(F).toString()})))}),[k,S,F,z,M,y,I,O]);var _=(0,l.useMemo)((function(){return w?(0,j.jsx)(u.Translation,{component:d.zx,translation:"common.withdraw",disabled:!H,onClick:O,variant:"ctaFull"}):(0,j.jsx)(f.ConnectWalletButton,{variant:"ctaFull"})}),[w,H,O]);return(0,j.jsx)(g.AssetProvider,{flex:1,width:"100%",assetId:null===S||void 0===S?void 0:S.id,children:(0,j.jsxs)(c.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:null!==A&&void 0!==A&&null!==(e=A.position)&&void 0!==e&&e.lockEnd?8:0,children:[(0,j.jsx)(c.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:null!==A&&void 0!==A&&null!==(n=A.position)&&void 0!==n&&n.lockEnd?H?(0,j.jsx)(c.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,j.jsxs)(c.gC,{spacing:6,children:[(0,j.jsx)(o.ppH,{size:72}),(0,j.jsxs)(c.gC,{spacing:4,children:[(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.canWithdrawLock",params:{amount:(0,v.dm)(F),asset:null===S||void 0===S?void 0:S.name},textStyle:"captionSmall",textAlign:"center"})]})]})}):(0,j.jsxs)(c.gC,{py:20,flex:1,spacing:6,px:[6,10],width:"100%",children:[(0,j.jsx)(o.FKe,{size:72}),(0,j.jsxs)(c.gC,{spacing:4,children:[(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.lockNotExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.waitUntilLockExpired",params:{lockEndDate:B},textStyle:"captionSmall",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:d.zx,translation:"staking.increaseLock",onClick:function(){return D(0)},variant:"ctaPrimary",px:10})]})]}):(0,j.jsx)(c.M5,{px:6,flex:1,width:"100%",children:(0,j.jsxs)(c.gC,{spacing:5,children:[(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.noStake",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:c.xv,translation:"staking.stakeBeforeUnstake",textStyle:"captionSmall",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:d.zx,translation:"common.stake",onClick:function(){return D(0)},variant:"ctaPrimary",px:10})]})})}),(null===A||void 0===A||null===(b=A.position)||void 0===b?void 0:b.lockEnd)&&H&&(0,j.jsxs)(c.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[H&&(0,j.jsx)(m.EstimatedGasFees,{}),_]})]})})}},58194:function(t,e,n){n.r(e),n.d(e,{ReactTable:function(){return m}});var i=n(1413),a=n(29439),s=n(7276),o=n(55967),r=n(63591),l=n(96699),d=n(3498),c=n(26720),u=n(67503),x=n(45263),p=function(t){var e=t.column,n=(0,l.Fg)();return(0,x.jsxs)(d.kC,{alignItems:"center",layerStyle:"tableHeader",justifyContent:"space-between",children:[e.render("Header"),e.canSort&&(0,x.jsxs)(d.kC,{direction:"column",children:[(0,x.jsx)(o.rWj,{size:20,fill:e.isSorted&&e.isSortedDesc?n.colors.primary:n.colors.table.arrow,"aria-label":"sorted ascending",style:{position:"absolute"}}),(0,x.jsx)(o.Ix0,{size:20,fill:e.isSorted?e.isSortedDesc?n.colors.table.arrow:n.colors.primary:n.colors.table.arrow,"aria-label":"sorted descending",style:{marginTop:10}})]})]})},m=function(t){var e=t.columns,n=t.data,m=t.page,h=t.rowsPerPage,f=t.displayHeaders,g=void 0===f||f,v=t.onRowClick,j=t.onToggleRow,b=t.initialState,y=(0,l.Fg)(),w=(0,c.ff)("black","white"),C=(0,s.useState)(null),S=(0,a.Z)(C,2),k=S[0],T=S[1],I=(0,r.useTable)({columns:e,data:n,initialState:b},r.useSortBy),M=I.getTableProps,D=I.getTableBodyProps,Z=I.headerGroups,A=I.rows,z=I.prepareRow,R=(0,s.useCallback)((function(t){T((function(e){return e===t?null:t}))}),[T]);(0,s.useEffect)((function(){if(j)return j(k)}),[j,k]);var L=(0,s.useMemo)((function(){return h&&m?A.slice(h*(m-1),h*m):A}),[A,m,h]),P=(0,s.useMemo)((function(){return L.map((function(t){var e=!1;return z(t),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Tr,(0,i.Z)((0,i.Z)({},t.getRowProps()),{},{tabIndex:t.index,layerStyle:"tableRow",backgroundColor:k===t?"card.bgLight":"initial",onClick:function(){var e;return(null===(e=t.subRows)||void 0===e?void 0:e.length)>0?R(t):null===v||void 0===v?void 0:v(t)},cursor:v?"pointer":void 0,children:t.cells.map((function(n,a){var s,r=!e&&"none"!==n.column.display,l=a===t.cells.length-1;r&&(e=!0);var c=r?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:l?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,x.jsx)(u.Td,(0,i.Z)((0,i.Z)({},n.getCellProps()),{},{display:n.column.display,sx:c,children:(0,x.jsxs)(d.Ug,{flex:1,width:"full",justifyContent:"space-between",children:[n.render("Cell"),l&&(null===(s=t.subRows)||void 0===s?void 0:s.length)>0&&(k===t?(0,x.jsx)(o.rWj,{size:24,color:y.colors.primary}):(0,x.jsx)(o.Ix0,{size:24,color:y.colors.primary}))]})}))}))})),k===t&&t.subRows.map((function(t){return z(t),(0,x.jsx)(u.Tr,(0,i.Z)((0,i.Z)({},t.getRowProps()),{},{tabIndex:t.index,layerStyle:"tableRow",backgroundColor:"button.bgHover",onClick:function(){return null===v||void 0===v?void 0:v(t)},cursor:v?"pointer":void 0,children:t.cells.map((function(n,a){var s=!e&&"none"!==n.column.display,o=a===t.cells.length-1;s&&(e=!0);var r=s?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:o?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,x.jsx)(u.Td,(0,i.Z)((0,i.Z)({},n.getCellProps()),{},{display:n.column.display,sx:r,children:n.render("Cell")}))}))}))}))]})}))}),[R,k,z,y,L,v]);return(0,x.jsxs)(u.iA,(0,i.Z)((0,i.Z)({variant:"clickable",size:{base:"sm",md:"md"}},M()),{},{children:[g&&(0,x.jsx)(u.hr,{children:Z.map((function(t){var e=!1;return(0,x.jsx)(u.Tr,(0,i.Z)((0,i.Z)({},t.getHeaderGroupProps()),{},{children:t.headers.map((function(n,a){var o=!e&&"none"!==n.display,r=a===t.headers.length-1;o&&(e=!0);var l=o?{paddingLeft:0,paddingRight:4}:r?{paddingLeft:4,paddingRight:0}:{paddingLeft:4,paddingRight:4};return(0,s.createElement)(u.Th,(0,i.Z)((0,i.Z)({},n.getHeaderProps(n.getSortByToggleProps({title:void 0}))),{},{color:"gray.500",fontWeight:400,display:n.display,textAlign:n.textAlign,_hover:{color:n.canSort?w:"gray.500"},style:l,key:"th_".concat(a)}),(0,x.jsx)(p,{column:n}))}))}))}))}),(0,x.jsx)(u.p3,(0,i.Z)((0,i.Z)({},D()),{},{children:P}))]}))}},80745:function(t,e,n){n.r(e),n.d(e,{Scrollable:function(){return l}});var i=n(1413),a=n(45987),s=(n(7276),n(3498)),o=n(45263),r=["children"],l=function(t){var e=t.children,n=(0,a.Z)(t,r);return(0,o.jsx)(s.kC,(0,i.Z)((0,i.Z)({flex:1,width:"100%",overflowY:"auto",overflowX:"hidden",direction:"column",alignItems:"flex-start"},n),{},{children:e}))}},48415:function(t,e,n){n.r(e),n.d(e,{Staking:function(){return T}});var i=n(99594),a=n(7276),s=n(54447),o=n(44888),r=n(86059),l=n(58383),d=n(66288),c=n(67041),u=n(88935),x=n(61617),p=n(59058),m=n(96362),h=n(97778),f=n(15542),g=n(87099),v=n(1669),j=n(75712),b=n(72258),y=n(3498),w=n(37658),C=n(3148),S=n(87577),k=n(45263),T=function(){var t=(0,u.Y)().account,e=(0,d.X)().isMobile,n=(0,v.w)(),T=n.isVaultsPositionsLoaded,I=n.stakingData,M=n.selectors,D=M.selectVaultsByType,Z=M.selectAssetById,A=M.selectVaultTransactions,z=(0,a.useMemo)((function(){if(Z){var t=(0,l.Zs)(o.x5,g.MI);return t&&Z(t.address)}}),[Z]),R=(0,a.useMemo)((function(){var t;return D&&(null===(t=D("STK"))||void 0===t?void 0:t[0])}),[D]),L=(0,a.useMemo)((function(){return Z&&R&&Z(R.id)}),[Z,R]),P=(0,a.useMemo)((function(){return T&&R&&A(R.id)}),[T,R,A]),E=(0,a.useMemo)((function(){return(P&&P.reduce((function(t,e){switch(e.action){case"stake":t.totalDeposited=t.totalDeposited.plus(e.underlyingAmount);break;case"unstake":t.totalDeposited=t.totalDeposited.minus(e.underlyingAmount)}return t.totalDeposited.lte(0)?t.startTimestamp=null:t.startTimestamp||(t.startTimestamp=e.timeStamp),t}),{startTimestamp:null,totalDeposited:(0,i.gA)(0)})).startTimestamp}),[P]),F=(0,a.useMemo)((function(){if(!E||!I)return null;var t=Math.round(Date.now()/1e3)-E;return(0,i.gA)(I.position.claimable).div(I.position.deposited).times(g.eG).div(t).times(100)}),[E,I]),H=[{type:"stake",component:c.Stake,label:"common.stake",steps:[{type:"approve",component:m.Approve,props:{amountUsd:null},label:"modals.approve.header"}]},{type:"unstake",label:"common.unstake",component:p.Unstake,steps:[]}],B=(0,a.useMemo)((function(){if(!t||!I||I.position.deposited.lte(0))return null;return(0,k.jsxs)(y.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,k.jsx)(f.Translation,{translation:"staking.yourstkIDLE",component:y.xv,textStyle:"heading",fontSize:"h3"}),(0,k.jsx)(y.MI,{columns:[2,4],spacing:[6,20],children:[{field:"stakingDeposited",props:{fontSize:"h3",textStyle:"heading"},label:"assets.assetDetails.generalData.totalIDLEStaked",tooltip:"assets.assetDetails.tooltips.totalIDLEStaked"},{field:"stkIDLEBalance",props:{fontSize:"h3",textStyle:"heading"},label:"common.balance",tooltip:"assets.assetDetails.tooltips.stkIDLEBalance"},{field:"stakingEndDate",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.lockEndDate",label:"assets.assetDetails.generalData.lockedUntil"},{field:"stakingShare",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.stakingShare",label:"defi.share"}].map((function(t){return(0,k.jsx)(C.AssetGeneralDataField,{generalData:t},"field_".concat(t.field))}))})]})}),[t,I]),O=(0,a.useMemo)((function(){var n,i;if(!t||!I||I.position.deposited.lte(0)||!R)return null;var a=R.getClaimRewardsContractSendMethod();return e?(0,k.jsx)(j.AssetProvider,{wrapFlex:!1,assetId:z.id,children:(0,k.jsx)(s.Card,{p:6,children:(0,k.jsxs)(y.gC,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,k.jsx)(y.Ug,{width:"full",justifyContent:"space-between",children:(0,k.jsx)(x.AssetLabel,{assetId:z.id})}),(0,k.jsxs)(y.Ug,{width:"full",justifyContent:"space-between",children:[(0,k.jsxs)(y.gC,{spacing:1,alignItems:"flex-start",children:[(0,k.jsx)(f.Translation,{component:y.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,k.jsx)(y.Ug,{spacing:1,justifyContent:"flex-start",children:(0,k.jsx)(r.Amount.Percentage,{value:F,textStyle:"heading",fontSize:"h3"})})]}),(0,k.jsxs)(y.gC,{spacing:1,alignItems:"flex-end",children:[(0,k.jsx)(f.Translation,{component:y.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,k.jsx)(h.TokenAmount,{assetId:null===I||void 0===I||null===(n=I.IDLE.asset)||void 0===n?void 0:n.id,showIcon:!1,amount:I.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]})]}),(0,k.jsx)(b.TransactionButton,{text:"defi.claim",vaultId:R.id,assetId:R.id,contractSendMethod:a,actionType:"claim",amount:I.position.claimable.toString(),width:"100%",disabled:I.position.claimable.lte(0)})]})})}):(0,k.jsx)(s.Card,{p:6,px:8,width:"100%",children:(0,k.jsxs)(y.Kq,{width:"100%",spacing:[0,6],direction:["column","row"],flexWrap:["wrap","nowrap"],justifyContent:["flex-start","space-between"],children:[(0,k.jsx)(x.AssetLabel,{assetId:z.id}),(0,k.jsxs)(y.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,k.jsx)(f.Translation,{component:y.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,k.jsx)(r.Amount.Percentage,{value:F,fontSize:"h3",textStyle:"heading"})]}),(0,k.jsxs)(y.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,k.jsx)(f.Translation,{component:y.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,k.jsx)(h.TokenAmount,{assetId:null===I||void 0===I||null===(i=I.IDLE.asset)||void 0===i?void 0:i.id,showIcon:!1,amount:I.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]}),(0,k.jsx)(b.TransactionButton,{text:"defi.claim",vaultId:R.id,assetId:R.id,contractSendMethod:a,actionType:"claim",amount:I.position.claimable.toString(),width:["100%","150px"],disabled:I.position.claimable.lte(0)})]})})}),[t,e,I,z,F,R]);return(0,k.jsxs)(y.xu,{width:"100%",children:[(0,k.jsx)(y.gC,{spacing:6,my:[10,16],width:"100%",direction:["column","row"],justifyContent:"flex-start",alignItems:["center","flex-start"],children:(0,k.jsx)(f.Translation,{translation:"navBar.stakeIDLE",component:y.X6,as:"h2",size:"3xl"})}),(0,k.jsxs)(y.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,k.jsx)(y.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,k.jsxs)(y.gC,{spacing:10,width:"100%",alignItems:"flex-start",children:[B,O,(0,k.jsxs)(y.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,k.jsx)(f.Translation,{translation:"staking.globalstkIDLE",component:y.xv,textStyle:"heading",fontSize:"h3"}),(0,k.jsx)(C.AssetGeneralData,{assetId:null===L||void 0===L?void 0:L.id}),(0,k.jsx)(s.Card.Dark,{children:(0,k.jsx)(f.Translation,{isHtml:!0,translation:"strategies.staking.description",component:y.xv})})]}),(0,k.jsx)(S.StakingDistributedRewards,{})]})}),(0,k.jsx)(w.InteractiveComponent,{vaultId:null===L||void 0===L?void 0:L.id,assetId:null===R||void 0===R?void 0:R.id,actions:H})]})]})}},87577:function(t,e,n){n.r(e),n.d(e,{StakingDistributedRewards:function(){return k}});var i=n(1413),a=n(29439),s=n(54447),o=n(79681),r=n(87099),l=n(58383),d=n(66288),c=n(88935),u=n(58194),x=n(7276),p=n(15542),m=n(97778),h=n(1669),f=n(55967),g=n(48024),v=n(10658),j=n(96699),b=n(89030),y=n(3498),w=n(43127),C=n(99594),S=n(45263),k=function(){var t=(0,j.Fg)(),e=(0,o.qM)(),n=(0,d.X)().isMobile,k=(0,x.useState)(1),T=(0,a.Z)(k,2),I=T[0],M=T[1],D=(0,h.w)().stakingData,Z=(0,c.Y)(),A=Z.chainId,z=Z.explorer,R=(0,x.useCallback)((function(t){var e=(0,C.QG)(A,z,t.original.hash);return(0,C.xw)(e)}),[A,z]),L=(0,x.useMemo)((function(){return A?(0,l.Zs)(A,r.MI):null}),[A]),P=(0,x.useMemo)((function(){return D?D.rewards:[]}),[D]),E=(0,x.useMemo)((function(){return Math.max(1,Math.ceil(P.length/5))}),[P]),F=(0,x.useMemo)((function(){return[{id:"date",accessor:"timeStamp",Header:e("transactionRow.date"),Cell:function(t){var e=t.value;return(0,S.jsx)(b.N2,{noOfLines:2,isLoaded:!!e,children:(0,S.jsx)(y.xv,{textStyle:"tableCell",children:(0,C.p6)(1e3*+e,"YYYY/MM/DD HH:mm",!0)})})},sortType:C._O},{id:"amount",accessor:"value",Header:e("transactionRow.amount"),Cell:function(t){var e=t.value,n=(0,C.I0)(e,null===L||void 0===L?void 0:L.decimals);return(0,S.jsx)(b.N2,{noOfLines:2,isLoaded:!!e,children:(0,S.jsx)(m.TokenAmount,{assetId:null===L||void 0===L?void 0:L.address,amount:n,size:"xs",textStyle:"tableCell"})})},sortType:C._O},{id:"hash",accessor:"hash",Header:e("transactionRow.hash"),Cell:function(t){var e=t.value;return(0,S.jsx)(b.N2,{noOfLines:2,isLoaded:!!e,children:(0,S.jsx)(v.TransactionLink,{hash:e})})},sortType:C.YC}]}),[e,L]);return(0,S.jsxs)(y.gC,{spacing:4,width:"full",children:[n?(0,S.jsxs)(y.gC,{spacing:0,width:"full",alignItems:"flex-start",children:[(0,S.jsx)(p.Translation,{textAlign:"left",translation:"staking.distributedRewards",component:s.Card.Heading}),(0,S.jsx)(s.Card,{children:P.slice(5*(I-1),5*I).map((function(t){var e=(0,i.Z)((0,i.Z)({},t),{},{idlePrice:(0,C.gA)(1),action:"distributed",assetId:null===L||void 0===L?void 0:L.address,idleAmount:(0,C.I0)(t.value,null===L||void 0===L?void 0:L.decimals),underlyingAmount:(0,C.I0)(t.value,null===L||void 0===L?void 0:L.decimals)});return(0,S.jsx)(g.TransactionItem,{transaction:e},"tx_".concat(e.hash))}))})]}):(0,S.jsxs)(s.Card,{mt:10,children:[(0,S.jsx)(p.Translation,{translation:"staking.distributedRewards",component:s.Card.Heading}),(0,S.jsx)(u.ReactTable,{columns:F,data:P,page:I,rowsPerPage:5,initialState:{sortBy:[{id:"date",desc:!1}]},onRowClick:R})]}),(0,S.jsx)(y.kC,{width:"100%",alignItems:"center",justifyContent:"flex-end",children:(0,S.jsxs)(y.Ug,{spacing:2,children:[(0,S.jsx)(w.zx,{variant:"link",minW:"auto",onClick:function(){M((function(t){return Math.max(1,t-1)}))},children:(0,S.jsx)(f.lrP,{color:1===I?t.colors.ctaDisabled:t.colors.primary})}),(0,S.jsxs)(y.xv,{textStyle:"ctaStatic",children:[I,"/",E]}),(0,S.jsx)(w.zx,{variant:"link",minW:"auto",onClick:function(){M((function(t){return Math.min(E,t+1)}))},children:(0,S.jsx)(f.KEG,{color:I===E?t.colors.ctaDisabled:t.colors.primary})})]})})]})}},72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return j},TransactionButtonValue:function(){return v}});var i=n(1413),a=n(29439),s=n(45987),o=(n(81608),n(55967)),r=n(53293),l=n(7276),d=n(15542),c=n(23023),u=n(96699),x=n(52486),p=n(3498),m=n(43127),h=n(45263),f=["text","contractSendMethod"],g=["text","amount","assetId","vaultId","actionType","contractSendMethod"],v=function(t){var e,n=t.text,r=t.contractSendMethod,m=(0,s.Z)(t,f),g=(0,u.Fg)(),v=(0,l.useRef)(null),j=(0,l.useState)(null),b=(0,a.Z)(j,2),y=b[0],w=b[1],C=(0,c.R)(),S=C.state.transaction,k=C.cleanTransaction,T=(0,l.useMemo)((function(){var t;return JSON.stringify(null===S||void 0===S||null===(t=S.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(r._method)}),[S,r]),I=(0,l.useMemo)((function(){return T&&S.status&&["pending","success","failed"].includes(S.status)&&S.estimatedTime}),[S,T]),M=(0,l.useMemo)((function(){return I&&"pending"===S.status?S.estimatedTime:.5}),[I,S]),D=(0,l.useCallback)((function(){if(!S.timestamp||!S.estimatedTime)return null;var t=+S.timestamp+1e3*S.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));w(e),e&&(v.current=setTimeout((function(){D()}),1e3))}),[S]);(0,l.useEffect)((function(){var t;T&&("success"===S.status||"failed"===S.status?(v.current&&(clearInterval(v.current),v.current=null),"success"!==S.status&&4001===(null===(t=S.error)||void 0===t?void 0:t.code)||setTimeout((function(){k()}),4e3)):"pending"!==S.status||v.current||D())}),[T,S.status,D,k,null===(e=S.error)||void 0===e?void 0:e.code]);var Z=(0,l.useMemo)((function(){var t;if(T)switch(null===S||void 0===S?void 0:S.status){case"created":return(0,h.jsx)(x.$,{size:"sm"});case"pending":return S.timestamp&&S.estimatedTime&&y?(0,h.jsxs)(p.xv,{textStyle:"ctaStatic",children:[y,"s"]}):(0,h.jsx)(x.$,{size:"sm"});case"success":return(0,h.jsx)(p.kC,(0,i.Z)((0,i.Z)({},m),{},{alignItems:"center",justifyContent:"center",children:(0,h.jsx)(o.ddU,{size:24,color:g.colors.green[400]})}));case"failed":if(4001!==(null===(t=S.error)||void 0===t?void 0:t.code))return(0,h.jsx)(p.kC,(0,i.Z)((0,i.Z)({},m),{},{alignItems:"center",justifyContent:"center",children:(0,h.jsx)(o.lTq,{size:24,color:g.colors.red[400]})}))}return(0,h.jsx)(d.Translation,{translation:n,textStyle:"ctaStatic"})}),[T,y,S,n,g,m]),A=(0,l.useMemo)((function(){switch(S.status){case"success":case"failed":return"transparent";default:return"primary"}}),[S]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.kC,{top:0,left:0,bottom:0,bg:A,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(M,"s"),animationName:I?"progress":"none",animationPlayState:I?"running":"stopped"},children:(0,h.jsx)(p.kC,{left:0,width:m.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:Z})}),Z]})},j=function(t){var e=t.text,n=t.amount,o=t.assetId,d=t.vaultId,u=t.actionType,x=t.contractSendMethod,p=(0,s.Z)(t,g),f=(0,r.Z)(),j=(0,a.Z)(f,2),b=j[0],y=j[1].width,w=(0,c.R)(),C=w.sendTransaction,S=w.state.transaction,k=(0,l.useMemo)((function(){var t;return JSON.stringify(null===S||void 0===S||null===(t=S.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(x._method)}),[S,x]),T=(0,l.useCallback)((function(){if("created"!==S.status&&"pending"!==S.status)return C(d,o,x,u,n)}),[S,d,o,x,u,n,C]),I=(0,l.useMemo)((function(){var t;if(!k)return"primary";switch(S.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=S.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[k,S]);return(0,h.jsx)(m.zx,(0,i.Z)((0,i.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:y||"auto",borderColor:I,onClick:function(){return T()},ref:b,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},p),{},{children:(0,h.jsx)(v,{text:e,contractSendMethod:x,width:y})}))}},48024:function(t,e,n){n.r(e),n.d(e,{TransactionItem:function(){return c}});var i=n(99594),a=n(87099),s=n(3498),o=n(97778),r=n(15542),l=n(10658),d=n(45263),c=function(t){var e=t.transaction;return(0,d.jsxs)(s.gC,{mb:2,pb:4,spacing:4,width:"100%",alignItems:"flex-start",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,d.jsxs)(s.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(s.Ug,{spacing:3,direction:"row",alignItems:"center",children:(0,d.jsx)(r.Translation,{component:s.xv,translation:"transactionRow.".concat(e.action),textStyle:"captionSmall"})}),(0,d.jsx)(s.xv,{textStyle:"captionSmall",children:(0,i.p6)(1e3*+e.timeStamp,a.Cu)})]}),(0,d.jsxs)(s.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(o.TokenAmount,{assetId:e.assetId,amount:e.underlyingAmount,size:"xs",textStyle:"tableCell"}),(0,d.jsx)(l.TransactionLink,{hash:e.hash})]})]})}},18147:function(t,e,n){n.r(e),n.d(e,{TransactionList:function(){return b}});var i=n(1413),a=n(93433),s=n(29439),o=n(45987),r=n(99594),l=n(7276),d=n(54447),c=n(88935),u=n(80745),x=n(3498),p=n(89030),m=n(15542),h=n(1669),f=n(53293),g=n(48024),v=n(45263),j=["assetIds","showTitleOnMobile","fullHeightOnMobile"],b=function(t){var e=t.assetIds,n=t.showTitleOnMobile,b=void 0!==n&&n,y=t.fullHeightOnMobile,w=void 0!==y&&y,C=(0,o.Z)(t,j),S=(0,c.Y)().account,k=(0,f.Z)(),T=(0,s.Z)(k,2),I=T[0],M=T[1],D=(0,h.w)(),Z=D.isPortfolioLoaded,A=D.isVaultsPositionsLoaded,z=D.selectors,R=z.selectVaultTransactions,L=z.selectVaultGauge,P=(0,l.useMemo)((function(){return S&&e&&R&&L?e.reduce((function(t,e){var n=L(e),i=R(e),s=n?R(n.id):[];return[].concat((0,a.Z)(t),(0,a.Z)(i),(0,a.Z)(s))}),[]):[]}),[S,e,R,L]),E=(0,l.useMemo)((function(){return Z&&(!S||A)}),[Z,S,A]),F=(0,l.useMemo)((function(){return E?P.length>0?(0,r.Pf)(P,"timeStamp","desc").map((function(t,e){return(0,v.jsx)(g.TransactionItem,{transaction:t},"tx_".concat(e))})):(0,v.jsx)(x.kC,{flex:1,minH:250,width:"100%",alignItems:"center",justifyContent:"center",children:(0,v.jsx)(m.Translation,{component:x.xv,translation:"assets.assetDetails.assetHistory.emptyTransactions"})}):(0,v.jsxs)(x.gC,{spacing:4,width:"100%",children:[(0,v.jsx)(p.Od,{width:"100%",height:10}),(0,v.jsx)(p.Od,{width:"100%",height:10}),(0,v.jsx)(p.Od,{width:"100%",height:10}),(0,v.jsx)(p.Od,{width:"100%",height:10})]})}),[E,P]);return(0,v.jsx)(d.Card,(0,i.Z)((0,i.Z)({flex:1},C),{},{children:(0,v.jsxs)(x.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",ref:I,justifyContent:"flex-start",children:[(0,v.jsx)(m.Translation,{display:b?"block":["none","block"],component:d.Card.Heading,translation:"assets.assetDetails.assetHistory.transactionHistory"}),(0,v.jsx)(u.Scrollable,{maxH:[w?"100%":280,Math.max((null===M||void 0===M?void 0:M.height)||400)],children:F})]})}))}},81608:function(t,e,n){n.r(e),e.default={}}}]);