"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[1309],{63330:function(t,e,n){n.r(e),n.d(e,{AssetPage:function(){return E}});var a=n(1413),s=n(29439),i=n(76566),r=n(65963),o=n(79681),l=n(16120),c=n(95173),d=n(98428),u=n(39807),p=n(66288),x=n(39195),m=n(3717),f=n(86698),g=n(61617),v=n(29482),h=n(97901),j=n(96362),b=n(15542),y=n(98365),w=n(85267),C=n(1669),S=n(75712),A=n(7276),k=n(61925),I=n(99594),T=n(88089),M=n(3498),D=n(37658),P=n(40398),Z=n(45263),E=function(){var t=(0,c.s0)(),e=(0,o.qM)(),n=(0,u.f)().openModal,E=(0,p.X)(),U=E.isMobile,z=E.environment,B=(0,w.m)(),_=B.params,F=B.location,N=B.searchParams,G=(0,A.useState)(0),L=(0,s.Z)(G,2),R=L[0],O=L[1],W=(0,A.useState)(0),H=(0,s.Z)(W,2),q=H[0],K=H[1],V=(0,x.Y)(),X=V.isChainLoaded,Q=V.chainId,Y=V.network,$=V.setChainId,J=(0,A.useState)(),tt=(0,s.Z)(J,2),et=tt[0],nt=tt[1],at=(0,A.useMemo)((function(){return N}),[N]),st=(0,s.Z)(at,2),it=st[0],rt=st[1],ot=(0,A.useState)({startDate:null,endDate:null}),lt=(0,s.Z)(ot,2),ct=lt[0],dt=lt[1],ut=(0,A.useState)(P.WE["6MONTHS"]),pt=(0,s.Z)(ut,2),xt=pt[0],mt=pt[1],ft=(0,A.useMemo)((function(){return!!ct.startDate&&!!ct.endDate}),[ct]);(0,A.useEffect)((function(){ft&&mt(void 0)}),[ft,mt]),(0,A.useEffect)((function(){xt&&dt({endDate:null,startDate:null})}),[xt,dt]);var gt=(0,C.w)(),vt=gt.vaultsNetworks,ht=gt.isPortfolioLoaded,jt=gt.portfolioTimestamp,bt=gt.assetsDataTimestamp,yt=gt.isPortfolioAccountReady,wt=gt.selectors,Ct=wt.selectAssetById,St=wt.selectVaultById,At=wt.selectVaultGauge,kt=wt.selectAssetBalance,It=wt.selectAssetPriceUsd,Tt=wt.selectNetworkByVaultId,Mt=(0,A.useMemo)((function(){return Ct&&Ct(_.asset)}),[Ct,_.asset]),Dt=(0,A.useMemo)((function(){return St&&St(_.asset)}),[St,_.asset]),Pt=(0,A.useCallback)((function(){var a=Tt(_.asset);return!a||+a===+Q||(K(0),n({cta:"network.switchTo",title:"common.switchNetwork",body:"modals.assets.vaultWrongNetwork"},"lg",!0,{cta:{network:r.QW[a].name},body:{network:null===Y||void 0===Y?void 0:Y.chainName,correctNetwork:r.QW[a].chainName}},[{props:{variant:"ctaPrimary"},function:function(){return $(a)},text:e("network.switchTo",{network:r.QW[a].name})},{props:{height:12},text:e("common.close"),function:function(){return F&&t(F.pathname.replace("/".concat(_.asset),""))}}]),!1)}),[Q,_.asset,Tt,$,Y,e,n,F,t,K]);(0,A.useEffect)((function(){X&&ht&&!(0,I.xb)(vt)&&Pt()}),[Pt,ht,X,vt,Dt,Mt]),(0,A.useEffect)((function(){Mt&&K(Date.now())}),[Mt]);var Zt=(0,A.useMemo)((function(){if(!Mt||!kt||null===Mt||void 0===Mt||!Mt.underlyingId||!It)return(0,I.gA)(0);var t=kt(Mt.underlyingId),e=It(Mt.underlyingId);return(0,I.d5)(t).times((0,I.d5)(e))}),[Mt,kt,It]),Et=(0,A.useMemo)((function(){return At&&At(_.asset)}),[At,_.asset]),Ut=(0,A.useMemo)((function(){return Et&&Ct&&Ct(Et.id)}),[Ct,Et]),zt=(0,A.useMemo)((function(){var t;return Ut&&"gaugeData"in Ut&&null!==(t=Ut.gaugeData)&&void 0!==t&&t.rewards?Object.values(Ut.gaugeData.rewards).reduce((function(t,e){return t.plus((0,I.d5)(e.balance))}),(0,I.gA)(0)):(0,I.gA)(0)}),[Ut]);(0,A.useEffect)((function(){if(ht&&Ct&&F&&q)return Pt()&&!Mt?t(F.pathname.replace("/".concat(_.asset),"")):void 0}),[ht,Ct,Pt,q,Mt,_.asset,F,t]),(0,A.useEffect)((function(){!(yt&&Mt&&et!==(null===Mt||void 0===Mt?void 0:Mt.id)&&jt&&bt)||jt>bt||bt>q||((0,I.AV)(Mt,Zt),nt(Mt.id))}),[Mt,jt,Zt,bt,yt,q,et,nt]);var Bt=(0,A.useMemo)((function(){var t=[{id:"earn",label:"navBar.earn",component:i.Earn,actions:[{type:"deposit",component:h.Deposit,label:"common.deposit",steps:[{type:"approve",component:j.Approve,label:"modals.approve.header"}]},{type:"withdraw",label:"common.withdraw",component:y.Withdraw,steps:[]}]}],e=Et&&"enabled"in Et&&!Et.enabled;Et&&(!e||(0,I.d5)(null===Ut||void 0===Ut?void 0:Ut.balance).gt(0)||(0,I.d5)(zt).gt(0))&&t.push({id:"gauge",label:"navBar.gauge",component:l.GaugeStaking,icon:e&&((0,I.gA)(null===Ut||void 0===Ut?void 0:Ut.balance).gt(0)||(0,I.d5)(zt).gt(0))?{src:"".concat(P.pm,"vaults/deprecated.png"),tooltip:"trade.vaults.GG.disabled",props:{width:5,height:5}}:null,actions:[{type:"stake",component:h.Deposit,label:"common.stake",steps:[{type:"approve",component:j.Approve,label:"modals.approve.header"}]},{type:"unstake",label:"common.unstake",component:y.Withdraw,steps:[]}]});var n=!(null!==Dt&&void 0!==Dt&&Dt.flags)||void 0===Dt.flags.statsEnabled||Dt.flags.statsEnabled;return(0,I.xW)("stats",z)&&n&&t.push({id:"stats",label:"navBar.stats",component:f.AssetStats,componentProps:{timeframe:xt,dateRange:ct,assetOnly:!0,showHeader:!1,showAssetStrategy:!0}}),t}),[Dt,Et,Ut,xt,ct,z,zt]),_t=(0,A.useMemo)((function(){return it.get("tab")}),[it]);(0,A.useEffect)((function(){if(_t){var t=Bt.find((function(t){return t.id.toString()===_t.toString()}));if(t){var e=Bt.indexOf(t);O(e)}else O(0)}else O(0)}),[Bt,_t,O]);var Ft=(0,A.useMemo)((function(){return Bt[R]&&"gauge"===Bt[R].id&&Et?Et.id:null===Mt||void 0===Mt?void 0:Mt.id}),[Bt,R,Mt,Et]),Nt=(0,A.useMemo)((function(){return Bt[R]}),[Bt,R]),Gt=(0,A.useMemo)((function(){return Nt.component}),[Nt]),Lt=(0,A.useCallback)((function(t){var e=Bt[t];e&&rt("?tab=".concat(e.id))}),[Bt,rt]),Rt=(0,A.useMemo)((function(){return(0,Z.jsx)(T.mQ,{variant:"unstyled",index:R,width:["100%","auto"],children:(0,Z.jsx)(T.td,{children:Bt.map((function(t,e){return(0,Z.jsx)(d.IconTab,{width:["".concat(100/Bt.length,"%"),"auto"],icon:t.icon,onClick:function(){return Lt(e)},children:(0,Z.jsx)(b.Translation,{translation:t.label})},"tab_".concat(e))}))})})}),[Bt,Lt,R]),Ot=(0,A.useMemo)((function(){return Nt.actions?(0,Z.jsx)(D.InteractiveComponent,{vaultId:null===Mt||void 0===Mt?void 0:Mt.id,assetId:Ft,actions:Nt.actions}):null}),[Nt,Mt,Ft]),Wt=(0,A.useMemo)((function(){return(0,Z.jsxs)(M.Ug,{mb:[0,"3 !important"],spacing:4,pl:[0,"stats"===Nt.id?5:0],justifyContent:["center","flex-end"],borderLeft:U||"stats"!==Nt.id?"none":"1px solid",borderLeftColor:"divider",children:[(0,Z.jsxs)(M.Ug,{spacing:1,children:[(0,Z.jsx)(v.ProductTag,{type:null===Mt||void 0===Mt?void 0:Mt.type,fontSize:"md",h:8}),(0,Z.jsx)(S.AssetProvider.Strategies,{h:8,w:8})]}),(0,Z.jsx)(M.Ug,{pl:4,borderLeft:"1px solid",borderLeftColor:"divider",children:(0,Z.jsx)(S.AssetProvider.Protocols,{tooltipDisabled:!0,size:"sm",children:(0,Z.jsx)(S.AssetProvider.ProtocolIcon,{size:"sm"})})})]})}),[Nt,Mt,U]),Ht=(0,A.useMemo)((function(){return(0,Z.jsxs)(M.Kq,{spacing:[0,5],direction:["column","row"],children:["stats"===Nt.id&&(0,Z.jsxs)(M.Kq,{spacing:2,mt:[3,"-15px"],width:["full","auto"],direction:["column","row"],alignItems:["auto","center"],justifyContent:["flex-start","center"],children:[(0,Z.jsx)(k.TimeframeSelector,{variant:"button",timeframe:xt,setTimeframe:mt,width:["100%","auto"],justifyContent:["center","initial"]}),(0,Z.jsx)(m.DatePicker,{selected:ft,setDateRange:dt})]}),!U&&Wt]})}),[Nt,U,xt,mt,ft,dt,Wt]);return(0,Z.jsx)(S.AssetProvider,{wrapFlex:!0,assetId:_.asset,children:(0,Z.jsxs)(M.xu,{width:"100%",children:[(0,Z.jsx)(M.kC,{my:[10,14],width:"100%",id:"asset-top-header",direction:["column","row"],justifyContent:["center","space-between"],children:(0,Z.jsxs)(M.Kq,{width:"100%",spacing:[4,8],alignItems:"center",justifyContent:"center",direction:["column","row"],children:[(0,Z.jsx)(g.AssetLabel,{assetId:_.asset,fontSize:"h2",extraFields:["statusBadge"]}),U&&Wt,(0,Z.jsxs)(M.Kq,{flex:1,spacing:0,width:["100%","auto"],justifyContent:"space-between",borderBottom:[0,"1px solid"],direction:["column","row"],borderColor:["divider","divider"],children:[(0,Z.jsx)(M.Ug,{width:["full","auto"],borderBottom:["1px solid",0],borderColor:"divider",children:Rt}),Ht]})]})}),(0,Z.jsxs)(M.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,Z.jsx)(M.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,Z.jsx)(Gt,(0,a.Z)({},Bt[R].componentProps))}),Ot]})]})})}},16120:function(t,e,n){n.r(e),n.d(e,{GaugeStaking:function(){return h}});var a=n(29439),s=n(54447),i=n(40398),r=n(86059),o=n(7276),l=n(15542),c=n(1669),d=n(85267),u=n(99594),p=n(75712),x=n(3148),m=n(72258),f=n(3498),g=n(30422),v=n(45263),h=function(){var t,e,n,h,j,b=(0,d.m)().params,y=(0,o.useState)(0),w=(0,a.Z)(y,2),C=w[0],S=w[1],A=(0,o.useState)(),k=(0,a.Z)(A,2),I=k[0],T=k[1],M=(0,c.w)(),D=M.portfolioTimestamp,P=M.assetsDataTimestamp,Z=M.isPortfolioAccountReady,E=M.selectors,U=E.selectAssetById,z=E.selectVaultGauge,B=E.selectAssetBalance,_=E.selectAssetPriceUsd,F=(0,o.useMemo)((function(){return U&&U(b.asset)}),[U,b.asset]),N=(0,o.useMemo)((function(){return F&&z&&z(F.id)}),[z,F]),G=(0,o.useMemo)((function(){return U&&N&&U(N.id)}),[N,U]),L=(0,o.useMemo)((function(){return Object.keys(i.A2).find((function(t){return i.A2[t].route===b.strategy}))}),[b]),R=(0,o.useMemo)((function(){return L&&i.A2[L].color}),[L]),O=(0,o.useMemo)((function(){if(!N)return null;var t=i.A2[N.type];return null!==t&&void 0!==t&&t.carouselItems?(0,v.jsx)(g.StrategyDescriptionCarousel,{color:R,strategy:N.type,delay:1e4}):null}),[N,R]),W=(0,o.useMemo)((function(){var t;return(null===G||void 0===G?void 0:G.vaultPosition)&&(0,u.gA)(null===G||void 0===G||null===(t=G.vaultPosition)||void 0===t?void 0:t.underlying.redeemable).div(G.totalSupply)}),[G]),H=(0,o.useMemo)((function(){if(!G||null===G||void 0===G||!G.underlyingId||!B||!_)return(0,u.gA)(0);var t=B(G.underlyingId),e=_(G.underlyingId);return(0,u.d5)(t).times((0,u.d5)(e))}),[G,B,_]),q=(0,o.useMemo)((function(){return N&&"description"in N&&N.description?(0,v.jsx)(s.Card.Dark,{children:(0,v.jsx)(f.xv,{dangerouslySetInnerHTML:{__html:N.description}})}):null}),[N]);return(0,o.useEffect)((function(){G&&S(Date.now())}),[G]),(0,o.useEffect)((function(){!(Z&&G&&I!==(null===G||void 0===G?void 0:G.id)&&D&&P)||D>P||P>C||((0,u.AV)(G,H),T(G.id))}),[G,D,H,P,Z,C,I,T]),(0,v.jsxs)(f.gC,{spacing:10,width:"100%",children:[q,G.vaultPosition&&(0,v.jsx)(p.AssetProvider,{wrapFlex:!1,assetId:N.id,children:(0,v.jsxs)(f.MI,{width:"100%",columns:[2,4],spacing:[10,14],alignItems:"flex-start",children:[(0,v.jsxs)(f.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.deposited",textStyle:"titleSmall"}),(0,v.jsxs)(f.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(p.AssetProvider.Deposited,{textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"heading",fontSize:"h3"})]})]}),(0,v.jsxs)(f.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.share",textStyle:"titleSmall"}),(0,v.jsx)(p.AssetProvider.GaugeShare,{minValue:.01,textStyle:"heading",fontSize:"h3"})]}),(0,v.jsxs)(f.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.idleDistribution",textStyle:"titleSmall"}),(0,v.jsxs)(f.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(p.AssetProvider.GaugeUserDistribution,{suffix:" ".concat(null===(t=N.rewardToken)||void 0===t?void 0:t.token),textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(l.Translation,{component:f.xv,translation:["/","common.day"],textStyle:"captionSmall",textTransform:"lowercase"})]})]}),(0,v.jsxs)(f.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.additionalRewards",textStyle:"titleSmall"}),(0,v.jsx)(f.gC,{spacing:2,children:(null===(e=N.multiRewardsTokens)||void 0===e?void 0:e.length)>0&&G.gaugeData?Object.keys(null===(n=G.gaugeData)||void 0===n?void 0:n.rewards).map((function(t){var e=G.gaugeData.rewards[t];if(t===N.rewardToken.address)return null;var n=U(t);return(0,v.jsxs)(f.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(r.Amount,{value:e.rate.times(W),suffix:" ".concat(n.token),textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(l.Translation,{component:f.xv,translation:["/","common.day"],textStyle:"captionSmall",textTransform:"lowercase"})]},"reward_".concat(t))})):(0,v.jsx)(f.xv,{textStyle:"heading",fontSize:"h3",children:"-"})})]})]})}),(0,v.jsxs)(f.gC,{spacing:6,width:"100%",alignItems:"flex-start",children:[(0,v.jsx)(l.Translation,{component:f.X6,as:"h3",size:"md",translation:"defi.rewards"}),(0,v.jsx)(f.gC,{spacing:4,width:"100%",children:(0,u.xb)(null===(h=G.gaugeData)||void 0===h?void 0:h.rewards)?null:Object.keys(null===(j=G.gaugeData)||void 0===j?void 0:j.rewards).map((function(t){var e=G.gaugeData.rewards[t],n=N.getClaimRewardsContractSendMethod(t);return(0,v.jsx)(p.AssetProvider,{wrapFlex:!1,assetId:t,children:(0,v.jsx)(s.Card,{p:6,px:8,width:"100%",children:(0,v.jsxs)(f.Kq,{width:"100%",spacing:[4,0],alignItems:"center",direction:["column","row"],justifyContent:"space-between",children:[(0,v.jsxs)(f.MI,{width:"100%",spacing:[6,0],columns:[2,4],children:[(0,v.jsxs)(f.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.asset",textStyle:"captionSmall"}),(0,v.jsx)(p.AssetProvider.GeneralData,{size:"xs",field:"asset"})]}),(0,v.jsxs)(f.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.apy",textStyle:"captionSmall"}),(0,v.jsx)(r.Amount.Percentage,{textStyle:"tableCell",value:e.apr})]}),(0,v.jsxs)(f.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.dailyDistribution",textStyle:"captionSmall"}),(0,v.jsxs)(f.Ug,{spacing:1,width:"100%",children:[(0,v.jsx)(r.Amount,{textStyle:"tableCell",value:e.rate}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"tableCell"})]})]}),(0,v.jsxs)(f.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:f.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,v.jsxs)(f.Ug,{spacing:1,width:"100%",children:[(0,v.jsx)(r.Amount,{textStyle:"tableCell",value:e.balance}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"tableCell"})]})]})]}),(0,v.jsx)(m.TransactionButton,{text:"defi.claim",vaultId:F.id,assetId:t,contractSendMethod:n,actionType:"claim",amount:e.balance.toString(),width:["100%","150px"],disabled:e.balance.lte(0)})]})})},"reward_".concat(t))}))})]}),(0,v.jsx)(x.AssetGeneralData,{assetId:null===N||void 0===N?void 0:N.id}),O]})}},98428:function(t,e,n){n.r(e),n.d(e,{IconTab:function(){return x}});var a=n(1413),s=n(7276),i=n(79681),r=n(88089),o=n(96699),l=n(43127),c=n(3498),d=n(70820),u=n(2092),p=n(45263),x=s.forwardRef((function(t,e){var n=(0,i.qM)(),s=(0,r.xD)((0,a.Z)((0,a.Z)({},t),{},{ref:e})),x=(0,o.jC)("Tabs",(0,a.Z)((0,a.Z)({},s),{},{variant:"unstyled"}));return(0,p.jsx)(l.zx,(0,a.Z)((0,a.Z)({background:"transparent",borderRadius:0,__css:x.tab},s),{},{children:(0,p.jsxs)(c.Ug,{spacing:2,width:"full",justifyContent:"center",children:[s.children,t.icon&&(0,p.jsx)(d.u,{hasArrow:!0,placement:"top",label:t.icon.tooltip?n(t.icon.tooltip):"",children:(0,p.jsx)(u.Ee,(0,a.Z)({src:t.icon.src},t.icon.props))})]})}))}))},37658:function(t,e,n){n.r(e),n.d(e,{InteractiveComponent:function(){return x}});var a=n(29439),s=n(7276),i=n(55967),r=n(66288),o=n(15542),l=n(3498),c=n(43127),d=n(18147),u=n(4710),p=n(45263),x=function(t){var e=t.assetId,n=t.vaultId,x=t.actions,m=(0,r.X)().isMobile,f=(0,s.useState)(!1),g=(0,a.Z)(f,2),v=g[0],h=g[1],j=(0,s.useState)(!1),b=(0,a.Z)(j,2),y=b[0],w=b[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l.gC,{left:0,zIndex:[40,0],spacing:[0,6],id:"right-side",width:["100vw","27em"],height:["100vh","auto"],position:["fixed","relative"],top:[v?0:"100vh",0],bg:m?"rgba(0, 0, 0, 0.5)":void 0,sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[(0,p.jsxs)(l.gC,{bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[v?0:"100vh",0],sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[m&&(0,p.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.exit",component:c.zx,leftIcon:(0,p.jsx)(i.sG8,{size:24}),onClick:function(){return h(!1)}}),(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:["common.show","navBar.transactions"],component:c.zx,onClick:function(){return w(!0)}})]}),(0,p.jsx)(u.OperativeComponent,{flex:1,minHeight:m?"auto":"590px",borderRadius:m?0:void 0,assetId:e,actions:x})]}),(0,p.jsxs)(l.gC,{flex:1,bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[y?0:"100vh",0],sx:m?{transition:"top 0.3s ease-in-out"}:{},children:[m&&(0,p.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.back",component:c.zx,leftIcon:(0,p.jsx)(i.sG8,{size:24}),onClick:function(){return w(!1)}}),(0,p.jsx)(o.Translation,{textStyle:"ctaStatic",translation:"assets.assetDetails.assetHistory.transactionHistory",component:l.xv})]}),(0,p.jsx)(d.TransactionList,{assetIds:[n],fullHeightOnMobile:!0,maxH:["100%",600]})]})]}),m&&(0,p.jsx)(l.kC,{p:4,left:0,bottom:0,border:0,width:"100%",zIndex:[10,0],bg:"card.bgDark",position:"fixed",children:(0,p.jsx)(o.Translation,{component:c.zx,translation:["common.start","common.deposit"],variant:"ctaFull",onClick:function(){return h(!0)}})})]})}},96362:function(t,e,n){n.r(e),n.d(e,{Approve:function(){return C}});var a=n(74165),s=n(15861),i=n(29439),r=n(54447),o=n(99594),l=n(87099),c=n(55967),d=n(39195),u=n(72230),p=n(7276),x=n(15542),m=n(1128),f=n(23023),g=n(3498),v=n(65984),h=n(43127),j=n(78951),b=n(4710),y=n(75712),w=n(45263),C=function(t){var e=t.amountUsd,n=t.goBack,C=t.itemIndex,S=(0,d.Y)().account,A=(0,b.useOperativeComponent)(),k=A.defaultAmount,I=A.dispatch,T=A.activeItem,M=(0,p.useState)(k),D=(0,i.Z)(M,2),P=D[0],Z=D[1],E=(0,y.useAssetProvider)(),U=E.underlyingAsset,z=E.vault,B=E.translate,_=E.theme,F=(0,p.useState)(!1),N=(0,i.Z)(F,2),G=N[0],L=N[1],R=(0,p.useState)(k),O=(0,i.Z)(R,2),W=O[0],H=O[1],q=(0,f.R)(),K=q.sendTransaction,V=q.setGasLimit;(0,p.useEffect)((function(){Z(k)}),[k]);var X=(0,p.useCallback)((0,s.Z)((0,a.Z)().mark((function t(){var e,n,s,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z&&"getAllowanceContractSendMethod"in z&&"getAllowanceParams"in z){t.next=2;break}return t.abrupt("return");case 2:if(e={from:null===S||void 0===S?void 0:S.address},n=z.getAllowanceParams(l.Uf),s=z.getAllowanceContractSendMethod(n)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,o.$K)(s,e);case 9:return i=t.sent,t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)}))),[S,z]),Q=(0,p.useCallback)((function(){if(z&&"getAllowanceContractSendMethod"in z&&"getAllowanceParams"in z){var t=z.getAllowanceParams(W),e=z.getAllowanceContractSendMethod(t);e&&K(z.id,null===U||void 0===U?void 0:U.id,e)}}),[W,z,U,K]);return(0,p.useEffect)((function(){var t=G?P:l.Uf;H(t),T===C&&I({type:"SET_AMOUNT",payload:t})}),[G,P,I,T,C]),(0,p.useEffect)((function(){T===C&&(0,s.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:e=t.sent,V(e);case 4:case"end":return t.stop()}}),t)})))()}),[T,C,X,V]),(0,w.jsxs)(g.gC,{flex:1,width:"100%",alignItems:"flex-start",children:[(0,w.jsx)(u.NavBar,{goBack:n,translation:"modals.approve.header",params:{asset:null===U||void 0===U?void 0:U.name}}),(0,w.jsx)(g.kC,{p:14,pt:20,flex:1,children:(0,w.jsxs)(g.gC,{spacing:6,children:[(0,w.jsx)(c.PG4,{size:72}),(0,w.jsx)(x.Translation,{component:g.xv,prefix:"".concat(B("modals.approve.routerName")," "),translation:"modals.approve.body",params:{asset:null===U||void 0===U?void 0:U.name},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsxs)(g.gC,{width:"100%",spacing:6,children:[(0,w.jsxs)(g.Ug,{py:2,width:"100%",justifyContent:"space-between",borderTop:"1px solid ".concat(_.colors.divider),borderBottom:"1px solid ".concat(_.colors.divider),children:[(0,w.jsx)(x.Translation,{component:g.xv,translation:"trade.allowance",textStyle:"captionSmall"}),(0,w.jsxs)(g.Ug,{spacing:1,children:[(0,w.jsx)(x.Translation,{component:g.xv,translation:"trade.unlimited",textStyle:["captionSmall","clickable"],fontWeight:700,color:G?"ctaDisabled":"primary",onClick:function(){return L(!1)}}),(0,w.jsx)(v.r,{size:"sm",isChecked:G,onChange:function(t){return L(t.target.checked)}}),(0,w.jsx)(x.Translation,{component:g.xv,translation:"trade.exact",textStyle:["captionSmall","clickable"],fontWeight:700,color:G?"primary":"ctaDisabled",onClick:function(){return L(!0)}})]})]}),G&&(0,w.jsxs)(g.Ug,{children:[(0,w.jsx)(y.AssetProvider.Icon,{size:"sm"}),(0,w.jsx)(r.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,w.jsx)(m.InputAmount,{inputHeight:6,amount:P,amountUsd:e,setAmount:Z})})]})]}),(0,w.jsx)(x.Translation,{component:h.zx,translation:"common.approve",onClick:Q,variant:"ctaFull"})]})}),(0,w.jsx)(j.EstimatedGasFees,{})]})}},97901:function(t,e,n){n.r(e),n.d(e,{Deposit:function(){return P}});var a=n(74165),s=n(15861),i=n(29439),r=n(5128),o=n(54447),l=n(87099),c=n(4432),d=n(13708),u=n(39195),p=n(61617),x=n(15542),m=n(39177),f=n(1128),g=n(85267),v=n(1669),h=n(7276),j=n(23023),b=n(78951),y=n(4710),w=n(43127),C=n(52486),S=n(3498),A=n(2092),k=n(66624),I=n(86393),T=n(75712),M=n(99594),D=n(45263),P=function(t){var e=t.itemIndex,n=(0,h.useState)(""),P=(0,i.Z)(n,2),Z=P[0],E=P[1],U=(0,h.useState)("0"),z=(0,i.Z)(U,2),B=z[0],_=z[1],F=(0,h.useState)(0),N=(0,i.Z)(F,2),G=N[0],L=N[1],R=(0,u.Y)().account,O=(0,g.m)().searchParams,W=(0,j.R)(),H=W.sendTransaction,q=W.setGasLimit,K=W.state.transaction,V=(0,v.w)().selectors,X=V.selectAssetPriceUsd,Q=V.selectAssetBalance,Y=(0,T.useAssetProvider)(),$=Y.asset,J=Y.vault,tt=Y.underlyingAsset,et=Y.translate,nt=(0,y.useOperativeComponent)(),at=nt.dispatch,st=nt.activeItem,it=nt.activeStep,rt=nt.executeAction,ot=nt.setActionIndex,lt=(0,h.useMemo)((function(){return O}),[O]),ct=(0,i.Z)(lt,1)[0],dt=(0,h.useMemo)((function(){var t;return J&&"flags"in J&&(null===(t=J.flags)||void 0===t?void 0:t.referralEnabled)}),[J]),ut=(0,h.useMemo)((function(){var t;return J&&"flags"in J&&(null===(t=J.flags)||void 0===t?void 0:t.depositsDisabled)}),[J]),pt=(0,h.useMemo)((function(){if(dt){var t=ct.get("_referral");if((0,M.fF)(t)&&t!==l.r_)return t}}),[dt,ct]),xt=(0,h.useMemo)((function(){return Q?Q(null===tt||void 0===tt?void 0:tt.id):(0,M.gA)(0)}),[Q,null===tt||void 0===tt?void 0:tt.id]);(0,h.useEffect)((function(){if(X&&tt){var t=X(tt.id),e=parseFloat((0,M.gA)(B).times(t).toString())||0;L(e)}}),[tt,B,X,at]),(0,h.useEffect)((function(){rt||it!==e||"success"!==K.status||_("")}),[rt,K.status,it,e]);var mt=(0,h.useMemo)((function(){return J&&(!("enabled"in J)||J.enabled)&&$&&"deprecated"!==(null===$||void 0===$?void 0:$.status)}),[J,$]),ft=(0,h.useMemo)((function(){return(0,M.d5)(null===$||void 0===$?void 0:$.limit).lt(l.jq)?(0,M.d5)(null===$||void 0===$?void 0:$.limit):(0,M.gA)(0)}),[$]),gt=(0,h.useMemo)((function(){return!!ft.gt(0)&&(0,M.gA)(null===$||void 0===$?void 0:$.totalTvl).gte(ft)}),[$,ft]),vt=(0,h.useMemo)((function(){if(E(""),gt||!mt||ut||"paused"===(null===$||void 0===$?void 0:$.status))return!0;if((0,M.gA)(B).isNaN()||(0,M.gA)(B).lte(0))return!0;if((0,M.gA)(B).gt(xt))return E(et("trade.errors.insufficientFundsForAmount",{symbol:null===tt||void 0===tt?void 0:tt.name})),!0;if(ft.gt(0)&&(0,M.gA)(null===$||void 0===$?void 0:$.totalTvl).plus(B).gt(ft)){var t=ft.minus((0,M.gA)(null===$||void 0===$?void 0:$.totalTvl));return E(et("trade.errors.limitCapReached",{limit:t.toFixed(2),symbol:null===tt||void 0===tt?void 0:tt.name})),!0}return"started"===K.status}),[$,B,ft,gt,mt,K,ut,xt,tt,et]),ht=(0,h.useCallback)((0,s.Z)((0,a.Z)().mark((function t(){var e,n,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tt&&J&&"getAllowanceContract"in J){t.next=2;break}return t.abrupt("return",(0,M.gA)(0));case 2:if(null!==R&&void 0!==R&&R.address){t.next=4;break}return t.abrupt("return",(0,M.gA)(0));case 4:if(e=J.getAllowanceContract()){t.next=7;break}return t.abrupt("return",(0,M.gA)(0));case 7:return n=(0,M.WP)(J),t.next=10,(0,M.RC)(e,R.address,n);case 10:return s=t.sent,t.abrupt("return",(0,M.I0)(s,tt.decimals));case 12:case"end":return t.stop()}}),t)}))),[tt,J,null===R||void 0===R?void 0:R.address]),jt=(0,h.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];R&&!vt&&J&&"getDepositContractSendMethod"in J&&"getDepositParams"in J&&(0,s.Z)((0,a.Z)().mark((function e(){var n,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,ht();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=(0,M.gA)(B);case 7:e.t0.gte(B)?(s=pt&&"flags"in J&&null!==(n=J.flags)&&void 0!==n&&n.referralEnabled?J.getDepositParams(B,pt):J.getDepositParams(B),i=J.getDepositContractSendMethod(s),(0,d.tM)($,G),H(J.id,null===tt||void 0===tt?void 0:tt.id,i)):at({type:"SET_ACTIVE_STEP",payload:1});case 9:case"end":return e.stop()}}),e)})))()}),[R,vt,pt,B,G,J,$,tt,at,ht,H]),bt=(0,h.useCallback)((function(){null!==tt&&void 0!==tt&&tt.balance&&_(tt.balance.toString())}),[tt]),yt=(0,h.useCallback)((0,s.Z)((0,a.Z)().mark((function t(){var e,n,s,i,o,l,c,d,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(J&&"getDepositContractSendMethod"in J&&"getDepositParams"in J){t.next=2;break}return t.abrupt("return");case 2:return n=J.getMethodDefaultGasLimit("deposit"),t.next=5,ht();case 5:if(s=t.sent,R&&!xt.lte(0)&&!s.lte(0)){t.next=8;break}return t.abrupt("return",n);case 8:return i=r.Z.minimum(xt,s),o={from:null===R||void 0===R?void 0:R.address},l=i.toFixed(),c=pt&&"flags"in J&&null!==(e=J.flags)&&void 0!==e&&e.referralEnabled?J.getDepositParams(l,pt):J.getDepositParams(l),d=J.getDepositContractSendMethod(c),t.next=15,(0,M.$K)(d,o);case 15:if(t.t0=t.sent,t.t0){t.next=18;break}t.t0=n;case 18:return u=t.t0,t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)}))),[R,J,pt,ht,xt]);(0,h.useEffect)((function(){st===e&&(0,s.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt();case 2:e=t.sent,q(e);case 4:case"end":return t.stop()}}),t)})))()}),[st,e,yt,q]),(0,h.useEffect)((function(){st===e&&(at({type:"SET_AMOUNT",payload:B}),at({type:"SET_DEFAULT_AMOUNT",payload:B}),at({type:"SET_ASSET",payload:tt}),rt&&(jt(!1),at({type:"SET_EXECUTE_ACTION",payload:!1})))}),[B,st,tt,e,at,rt,jt]);var wt=(0,h.useMemo)((function(){return R?(0,D.jsx)(x.Translation,{component:w.zx,translation:"common.deposit",disabled:vt,onClick:jt,variant:"ctaFull",children:"started"===K.status&&(0,D.jsx)(C.$,{size:"sm"})}):(0,D.jsx)(I.ConnectWalletButton,{variant:"ctaFull"})}),[R,vt,K,jt]),Ct=(0,h.useMemo)((function(){return pt?(0,D.jsx)(o.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,D.jsxs)(S.gC,{spacing:1,children:[(0,D.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"defi.depositWithReferral"}),(0,D.jsx)(m.AddressLink,{address:pt,text:pt,fontSize:"sm"})]})}):null}),[pt]),St=(0,h.useMemo)((function(){return J&&"messages"in J?J.messages:void 0}),[J]),At=(0,h.useMemo)((function(){return!mt&&xt.gt(0)?(0,D.jsx)(o.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,D.jsxs)(S.Ug,{spacing:3,width:"full",children:[(0,D.jsx)(A.Ee,{src:"".concat(c.pm,"vaults/deprecated.png"),width:6,height:6}),(0,D.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"trade.vaults.".concat(null===$||void 0===$?void 0:$.type,".disabled"),textAlign:"left"}),(0,D.jsx)(x.Translation,{component:w.zx,translation:"trade.vaults.".concat(null===$||void 0===$?void 0:$.type,".disabledCta"),fontSize:"xs",height:"auto",width:"auto",py:3,px:7,onClick:function(){return ot(1)}})]})}):$&&"production"!==(null===$||void 0===$?void 0:$.status)?(0,D.jsx)(o.Card.Dark,{p:2,border:0,children:(0,D.jsx)(S.gC,{spacing:2,width:"full",justifyContent:"center",children:(0,D.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"trade.actions.deposit.messages.".concat($.status),textAlign:"center"})})}):gt?(0,D.jsx)(o.Card.Dark,{py:2,pl:4,pr:2,border:0,children:(0,D.jsxs)(S.Ug,{spacing:4,width:"full",children:[(0,D.jsx)(A.Ee,{src:"".concat(c.pm,"vaults/experimental.png"),width:6,height:6}),(0,D.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"trade.actions.deposit.messages.limitCapReached",isHtml:!0,params:{limit:"".concat(ft.toFixed(0)," ").concat(null===tt||void 0===tt?void 0:tt.token)},textAlign:"left"})]})}):(null===St||void 0===St?void 0:St.deposit)&&(0,D.jsx)(o.Card.Dark,{p:2,border:0,children:(0,D.jsx)(x.Translation,{textStyle:"captionSmaller",translation:St.deposit,isHtml:!0,textAlign:"center"})})}),[$,gt,ft,tt,mt,xt,St,ot]);return(0,D.jsx)(T.AssetProvider,{flex:1,width:"100%",assetId:null===$||void 0===$?void 0:$.underlyingId,children:(0,D.jsxs)(S.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,D.jsxs)(S.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,D.jsxs)(S.Ug,{width:"100%",spacing:[3,4],alignItems:"flex-start",children:[(0,D.jsx)(S.xu,{pt:8,children:(0,D.jsx)(p.AssetLabel,{assetId:null===$||void 0===$?void 0:$.id})}),(0,D.jsxs)(S.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,D.jsx)(o.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,D.jsxs)(S.gC,{spacing:2,alignItems:"flex-start",children:[(0,D.jsx)(f.InputAmount,{amount:B,amountUsd:G,setAmount:_}),(0,D.jsxs)(S.Ug,{width:"100%",justifyContent:"space-between",children:[(0,D.jsxs)(S.Ug,{spacing:1,children:[(0,D.jsx)(x.Translation,{component:S.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,D.jsx)(T.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,D.jsx)(w.zx,{variant:"selector",onClick:bt,children:"MAX"})]})]})}),Z&&(0,D.jsx)(S.xv,{textStyle:"captionSmaller",color:"orange",children:Z})]})]}),Ct,At,(0,D.jsx)(k.DynamicActionFields,{assetId:null===$||void 0===$?void 0:$.id,action:"deposit",amount:B,amountUsd:G})]}),(0,D.jsxs)(S.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,D.jsx)(b.EstimatedGasFees,{}),wt]})]})})}}}]);