"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[5586],{15586:function(e,r,t){t.r(r),t.d(r,{AlchemyProvider:function(){return _},AlchemyWebSocketProvider:function(){return N},AnkrProvider:function(){return I},BaseProvider:function(){return a.Zk},CloudflareProvider:function(){return j},EtherscanProvider:function(){return F},FallbackProvider:function(){return ue},Formatter:function(){return f.Mb},InfuraProvider:function(){return he},InfuraWebSocketProvider:function(){return fe},IpcProvider:function(){return ce},JsonRpcBatchProvider:function(){return de},JsonRpcProvider:function(){return b.r},JsonRpcSigner:function(){return b.C},NodesmithProvider:function(){return ve},PocketProvider:function(){return be},Provider:function(){return n.zt},Resolver:function(){return a.H2},StaticJsonRpcProvider:function(){return E},UrlJsonRpcProvider:function(){return P},Web3Provider:function(){return Pe},WebSocketProvider:function(){return h.q},getDefaultProvider:function(){return Ze},getNetwork:function(){return o.H},isCommunityResourcable:function(){return f.Ed},isCommunityResource:function(){return f.Gp},showThrottleMessage:function(){return f.vh}});var n=t(12442),o=t(83663),a=t(39907),i=t(15671),s=t(43144),u=t(97326),c=t(60136),l=t(29388),p=t(99138),f=t(4301),h=t(56082),d=t(78663),m=t(49229),v=t(74165),g=t(11752),k=t(61120),b=t(58256),w=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(r){a(r)}}function s(e){try{u(n.throw(e))}catch(r){a(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}u((n=n.apply(e,r||[])).next())}))},y=new d.Yd(m.i),E=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"detectNetwork",value:function(){var e=this,r=Object.create(null,{detectNetwork:{get:function(){return(0,g.Z)((0,k.Z)(t.prototype),"detectNetwork",e)}}});return w(this,void 0,void 0,(0,v.Z)().mark((function e(){var t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=this.network)){e.next=7;break}return e.next=4,r.detectNetwork.call(this);case 4:(t=e.sent)||y.throwError("no network detected",d.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&((0,p.zG)(this,"_network",t),this.emit("network",t,null));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})))}}]),t}(b.r),P=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var o;(0,i.Z)(this,t),y.checkAbstract(this instanceof t?this.constructor:void 0,t),e=(0,p.tu)(this instanceof t?this.constructor:void 0,"getNetwork")(e),n=(0,p.tu)(this instanceof t?this.constructor:void 0,"getApiKey")(n);var a=(0,p.tu)(this instanceof t?this.constructor:void 0,"getUrl")(e,n);return o=r.call(this,a,e),"string"===typeof n?(0,p.zG)((0,u.Z)(o),"apiKey",n):null!=n&&Object.keys(n).forEach((function(e){(0,p.zG)((0,u.Z)(o),e,n[e])})),o}return(0,s.Z)(t,[{key:"_startPending",value:function(){y.warn("WARNING: API provider does not support pending filters")}},{key:"isCommunityResource",value:function(){return!1}},{key:"getSigner",value:function(e){return y.throwError("API provider does not support signing",d.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}},{key:"listAccounts",value:function(){return Promise.resolve([])}}],[{key:"getApiKey",value:function(e){return e}},{key:"getUrl",value:function(e,r){return y.throwError("not implemented; sub-classes must override getUrl",d.Yd.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}]),t}(E),x=new d.Yd(m.i),Z="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",N=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var o;(0,i.Z)(this,t);var a=new _(e,n),s=a.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");return o=r.call(this,s,a.network),(0,p.zG)((0,u.Z)(o),"apiKey",a.apiKey),o}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.apiKey===Z}}]),t}(h.q),_=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.apiKey===Z}}],[{key:"getWebSocketProvider",value:function(e,r){return new N(e,r)}},{key:"getApiKey",value:function(e){return null==e?Z:(e&&"string"!==typeof e&&x.throwArgumentError("invalid apiKey","apiKey",e),e)}},{key:"getUrl",value:function(e,r){var t=null;switch(e.name){case"homestead":t="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":t="eth-goerli.g.alchemy.com/v2/";break;case"matic":t="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":t="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":t="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":t="arb-goerli.g.alchemy.com/v2/";break;case"optimism":t="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":t="opt-goerli.g.alchemy.com/v2/";break;default:x.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+t+r,throttleCallback:function(e,t){return r===Z&&(0,f.vh)(),Promise.resolve(!0)}}}}]),t}(P),T=new d.Yd(m.i),R="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function A(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return T.throwArgumentError("unsupported network","name",e)}var I=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.apiKey===R}}],[{key:"getApiKey",value:function(e){return null==e?R:e}},{key:"getUrl",value:function(e,r){null==r&&(r=R);var t={allowGzip:!0,url:"https://"+A(e.name)+r,throttleCallback:function(e,t){return r.apiKey===R&&(0,f.vh)(),Promise.resolve(!0)}};return null!=r.projectSecret&&(t.user="",t.password=r.projectSecret),t}}]),t}(P),S=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(r){a(r)}}function s(e){try{u(n.throw(e))}catch(r){a(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}u((n=n.apply(e,r||[])).next())}))},O=new d.Yd(m.i),j=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"perform",value:function(e,r){var n=this,o=Object.create(null,{perform:{get:function(){return(0,g.Z)((0,k.Z)(t.prototype),"perform",n)}}});return S(this,void 0,void 0,(0,v.Z)().mark((function t(){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("getBlockNumber"!==e){t.next=5;break}return t.next=3,o.perform.call(this,"getBlock",{blockTag:"latest"});case 3:return n=t.sent,t.abrupt("return",n.number);case 5:return t.abrupt("return",o.perform.call(this,e,r));case 6:case"end":return t.stop()}}),t,this)})))}}],[{key:"getApiKey",value:function(e){return null!=e&&O.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}},{key:"getUrl",value:function(e,r){var t=null;if("homestead"===e.name)t="https://cloudflare-eth.com/";else O.throwArgumentError("unsupported network","network",arguments[0]);return t}}]),t}(P),C=t(80928),B=t(22521),U=t(99610),q=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(r){a(r)}}function s(e){try{u(n.throw(e))}catch(r){a(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}u((n=n.apply(e,r||[])).next())}))},K=new d.Yd(m.i);function G(e){var r={};for(var t in e)if(null!=e[t]){var n=e[t];"type"===t&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?(0,C.$P)((0,C.Dv)(n)):"accessList"===t?"["+(0,B.accessListify)(n).map((function(e){return'{address:"'.concat(e.address,'",storageKeys:["').concat(e.storageKeys.join('","'),'"]}')})).join(",")+"]":(0,C.Dv)(n),r[t]=n)}return r}function Y(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!==typeof e.message||!e.message.match(/^OK/)){var r=new Error("invalid response");throw r.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(r.throttleRetry=!0),r}return e.result}function D(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){var r=new Error("throttled response");throw r.result=JSON.stringify(e),r.throttleRetry=!0,r}if("2.0"!=e.jsonrpc){var t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){var n=new Error(e.error.message||"unknown error");throw e.error.code&&(n.code=e.error.code),e.error.data&&(n.data=e.error.data),n}return e.result}function z(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function L(e,r,t){if("call"===e&&r.code===d.Yd.errors.SERVER_ERROR){var n=r.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){var o=n.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),(0,C.A7)(o))return o;K.throwError("missing revert data in call exception",d.Yd.errors.CALL_EXCEPTION,{error:r,data:"0x"})}}var a=r.message;throw r.code===d.Yd.errors.SERVER_ERROR&&(r.error&&"string"===typeof r.error.message?a=r.error.message:"string"===typeof r.body?a=r.body:"string"===typeof r.responseText&&(a=r.responseText)),(a=(a||"").toLowerCase()).match(/insufficient funds/)&&K.throwError("insufficient funds for intrinsic transaction cost",d.Yd.errors.INSUFFICIENT_FUNDS,{error:r,method:e,transaction:t}),a.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&K.throwError("nonce has already been used",d.Yd.errors.NONCE_EXPIRED,{error:r,method:e,transaction:t}),a.match(/another transaction with same nonce/)&&K.throwError("replacement fee too low",d.Yd.errors.REPLACEMENT_UNDERPRICED,{error:r,method:e,transaction:t}),a.match(/execution failed due to an exception|execution reverted/)&&K.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",d.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:r,method:e,transaction:t}),r}var F=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var o;return(0,i.Z)(this,t),o=r.call(this,e),(0,p.zG)((0,u.Z)(o),"baseUrl",o.getBaseUrl()),(0,p.zG)((0,u.Z)(o),"apiKey",n||null),o}return(0,s.Z)(t,[{key:"getBaseUrl",value:function(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return K.throwArgumentError("unsupported network","network",this.network.name)}},{key:"getUrl",value:function(e,r){var t=Object.keys(r).reduce((function(e,t){var n=r[t];return null!=n&&(e+="&".concat(t,"=").concat(n)),e}),""),n=this.apiKey?"&apikey=".concat(this.apiKey):"";return"".concat(this.baseUrl,"/api?module=").concat(e).concat(t).concat(n)}},{key:"getPostUrl",value:function(){return"".concat(this.baseUrl,"/api")}},{key:"getPostData",value:function(e,r){return r.module=e,r.apikey=this.apiKey,r}},{key:"fetch",value:function(e,r,t){return q(this,void 0,void 0,(0,v.Z)().mark((function n(){var o,a,i,s,u,c,l=this;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t?this.getPostUrl():this.getUrl(e,r),a=t?this.getPostData(e,r):null,i="proxy"===e?D:Y,this.emit("debug",{action:"request",request:o,provider:this}),s={url:o,throttleSlotInterval:1e3,throttleCallback:function(e,r){return l.isCommunityResource()&&(0,f.vh)(),Promise.resolve(!0)}},u=null,a&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},u=Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("&")),n.next=9,(0,U.rd)(s,u,i||D);case 9:return c=n.sent,this.emit("debug",{action:"response",request:o,response:(0,p.p$)(c),provider:this}),n.abrupt("return",c);case 12:case"end":return n.stop()}}),n,this)})))}},{key:"detectNetwork",value:function(){return q(this,void 0,void 0,(0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.network);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"perform",value:function(e,r){var n=this,o=Object.create(null,{perform:{get:function(){return(0,g.Z)((0,k.Z)(t.prototype),"perform",n)}}});return q(this,void 0,void 0,(0,v.Z)().mark((function t(){var n,a,i,s,u,c,l,p,f;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="getBlockNumber"===t.t0?3:"getGasPrice"===t.t0?4:"getBalance"===t.t0?5:"getTransactionCount"===t.t0?6:"getCode"===t.t0?7:"getStorageAt"===t.t0?8:"sendTransaction"===t.t0?9:"getBlock"===t.t0?10:"getTransaction"===t.t0?13:"getTransactionReceipt"===t.t0?14:"call"===t.t0?15:"estimateGas"===t.t0?29:"getLogs"===t.t0?41:"getEtherPrice"===t.t0?65:72;break;case 3:return t.abrupt("return",this.fetch("proxy",{action:"eth_blockNumber"}));case 4:return t.abrupt("return",this.fetch("proxy",{action:"eth_gasPrice"}));case 5:return t.abrupt("return",this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag}));case 6:return t.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag}));case 7:return t.abrupt("return",this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag}));case 8:return t.abrupt("return",this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag}));case 9:return t.abrupt("return",this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch((function(e){return L("sendTransaction",e,r.signedTransaction)})));case 10:if(!r.blockTag){t.next=12;break}return t.abrupt("return",this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"}));case 12:throw new Error("getBlock by blockHash not implemented");case 13:return t.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash}));case 14:return t.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash}));case 15:if("latest"===r.blockTag){t.next=17;break}throw new Error("EtherscanProvider does not support blockTag for call");case 17:return(n=G(r.transaction)).module="proxy",n.action="eth_call",t.prev=20,t.next=23,this.fetch("proxy",n,!0);case 23:return t.abrupt("return",t.sent);case 26:return t.prev=26,t.t1=t.catch(20),t.abrupt("return",L("call",t.t1,r.transaction));case 29:return(a=G(r.transaction)).module="proxy",a.action="eth_estimateGas",t.prev=32,t.next=35,this.fetch("proxy",a,!0);case 35:return t.abrupt("return",t.sent);case 38:return t.prev=38,t.t2=t.catch(32),t.abrupt("return",L("estimateGas",t.t2,r.transaction));case 41:return i={action:"getLogs"},r.filter.fromBlock&&(i.fromBlock=z(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=z(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&K.throwError("unsupported topic count",d.Yd.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),1===r.filter.topics.length&&("string"===typeof(s=r.filter.topics[0])&&66===s.length||K.throwError("unsupported topic format",d.Yd.errors.UNSUPPORTED_OPERATION,{topic0:s}),i.topic0=s)),t.next=48,this.fetch("logs",i);case 48:u=t.sent,c={},l=0;case 51:if(!(l<u.length)){t.next=64;break}if(null==(p=u[l]).blockHash){t.next=55;break}return t.abrupt("continue",61);case 55:if(null!=c[p.blockNumber]){t.next=60;break}return t.next=58,this.getBlock(p.blockNumber);case 58:(f=t.sent)&&(c[p.blockNumber]=f.hash);case 60:p.blockHash=c[p.blockNumber];case 61:l++,t.next=51;break;case 64:return t.abrupt("return",u);case 65:if("homestead"===this.network.name){t.next=67;break}return t.abrupt("return",0);case 67:return t.t3=parseFloat,t.next=70,this.fetch("stats",{action:"ethprice"});case 70:return t.t4=t.sent.ethusd,t.abrupt("return",(0,t.t3)(t.t4));case 72:return t.abrupt("break",73);case 73:return t.abrupt("return",o.perform.call(this,e,r));case 74:case"end":return t.stop()}}),t,this,[[20,26],[32,38]])})))}},{key:"getHistory",value:function(e,r,t){return q(this,void 0,void 0,(0,v.Z)().mark((function n(){var o,a,i=this;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.resolveName(e);case 2:return n.t0=n.sent,n.t1=null==r?0:r,n.t2=null==t?99999999:t,o={action:"txlist",address:n.t0,startblock:n.t1,endblock:n.t2,sort:"asc"},n.next=8,this.fetch("account",o);case 8:return a=n.sent,n.abrupt("return",a.map((function(e){["contractAddress","to"].forEach((function(r){""==e[r]&&delete e[r]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);var r=i.formatter.transactionResponse(e);return e.timeStamp&&(r.timestamp=parseInt(e.timeStamp)),r})));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"isCommunityResource",value:function(){return null==this.apiKey}}]),t}(a.Zk),W=t(82895),M=t(27547),J=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(r){a(r)}}function s(e){try{u(n.throw(e))}catch(r){a(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}u((n=n.apply(e,r||[])).next())}))},H=new d.Yd(m.i);function $(){return(new Date).getTime()}function V(e){for(var r=null,t=0;t<e.length;t++){var n=e[t];if(null==n)return null;r?r.name===n.name&&r.chainId===n.chainId&&(r.ensAddress===n.ensAddress||null==r.ensAddress&&null==n.ensAddress)||H.throwArgumentError("provider mismatch","networks",e):r=n}return r}function X(e,r){e=e.slice().sort();var t=Math.floor(e.length/2);if(e.length%2)return e[t];var n=e[t-1],o=e[t];return null!=r&&Math.abs(n-o)>r?null:(n+o)/2}function Q(e){if(null===e)return"null";if("number"===typeof e||"boolean"===typeof e)return JSON.stringify(e);if("string"===typeof e)return e;if(W.O$.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map((function(e){return Q(e)})));if("object"===typeof e){var r=Object.keys(e);return r.sort(),"{"+r.map((function(r){var t=e[r];return t="function"===typeof t?"[function]":Q(t),JSON.stringify(r)+":"+t})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}var ee=1;function re(e){var r=null,t=null,n=new Promise((function(n){r=function(){t&&(clearTimeout(t),t=null),n()},t=setTimeout(r,e)}));return{cancel:r,getPromise:function(){return n},wait:function(e){return n=n.then(e)}}}var te=[d.Yd.errors.CALL_EXCEPTION,d.Yd.errors.INSUFFICIENT_FUNDS,d.Yd.errors.NONCE_EXPIRED,d.Yd.errors.REPLACEMENT_UNDERPRICED,d.Yd.errors.UNPREDICTABLE_GAS_LIMIT],ne=["address","args","errorArgs","errorSignature","method","transaction"];function oe(e,r){var t={weight:e.weight};return Object.defineProperty(t,"provider",{get:function(){return e.provider}}),e.start&&(t.start=e.start),r&&(t.duration=r-e.start),e.done&&(e.error?t.error=e.error:t.result=e.result||null),t}function ae(e,r,t){var n=Q;switch(r){case"getBlockNumber":return function(r){var t=r.map((function(e){return e.result})),n=X(r.map((function(e){return e.result})),2);if(null!=n)return n=Math.ceil(n),t.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){var r=e.map((function(e){return e.result}));return r.sort(),r[Math.floor(r.length/2)]};case"getEtherPrice":return function(e){return X(e.map((function(e){return e.result})))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=(0,p.DC)(e)).confirmations=-1,Q(e))};break;case"getBlock":n=t.includeTransactions?function(e){return null==e?null:((e=(0,p.DC)(e)).transactions=e.transactions.map((function(e){return(e=(0,p.DC)(e)).confirmations=-1,e})),Q(e))}:function(e){return null==e?null:Q(e)};break;default:throw new Error("unknown method: "+r)}return function(e,r){return function(t){var n={};t.forEach((function(r){var t=e(r.result);n[t]||(n[t]={count:0,result:r.result}),n[t].count++}));for(var o=Object.keys(n),a=0;a<o.length;a++){var i=n[o[a]];if(i.count>=r)return i.result}}}(n,e.quorum)}function ie(e,r){return J(this,void 0,void 0,(0,v.Z)().mark((function t(){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!=(n=e.provider).blockNumber&&n.blockNumber>=r||-1===r)){t.next=3;break}return t.abrupt("return",n);case 3:return t.abrupt("return",(0,U.$l)((function(){return new Promise((function(t,o){setTimeout((function(){return n.blockNumber>=r?t(n):e.cancelled?t(null):t(void 0)}),0)}))}),{oncePoll:n}));case 4:case"end":return t.stop()}}),t)})))}function se(e,r,t,n){return J(this,void 0,void 0,(0,v.Z)().mark((function o(){var a,i;return(0,v.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=e.provider,o.t0=t,o.next="getBlockNumber"===o.t0||"getGasPrice"===o.t0?4:"getEtherPrice"===o.t0?5:"getBalance"===o.t0||"getTransactionCount"===o.t0||"getCode"===o.t0?8:"getStorageAt"===o.t0?13:"getBlock"===o.t0?18:"call"===o.t0||"estimateGas"===o.t0?23:"getTransaction"===o.t0||"getTransactionReceipt"===o.t0?30:"getLogs"===o.t0?31:37;break;case 4:return o.abrupt("return",a[t]());case 5:if(!a.getEtherPrice){o.next=7;break}return o.abrupt("return",a.getEtherPrice());case 7:return o.abrupt("break",37);case 8:if(!n.blockTag||!(0,C.A7)(n.blockTag)){o.next=12;break}return o.next=11,ie(e,r);case 11:a=o.sent;case 12:return o.abrupt("return",a[t](n.address,n.blockTag||"latest"));case 13:if(!n.blockTag||!(0,C.A7)(n.blockTag)){o.next=17;break}return o.next=16,ie(e,r);case 16:a=o.sent;case 17:return o.abrupt("return",a.getStorageAt(n.address,n.position,n.blockTag||"latest"));case 18:if(!n.blockTag||!(0,C.A7)(n.blockTag)){o.next=22;break}return o.next=21,ie(e,r);case 21:a=o.sent;case 22:return o.abrupt("return",a[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash));case 23:if(!n.blockTag||!(0,C.A7)(n.blockTag)){o.next=27;break}return o.next=26,ie(e,r);case 26:a=o.sent;case 27:if("call"!==t||!n.blockTag){o.next=29;break}return o.abrupt("return",a[t](n.transaction,n.blockTag));case 29:return o.abrupt("return",a[t](n.transaction));case 30:return o.abrupt("return",a[t](n.transactionHash));case 31:if(!((i=n.filter).fromBlock&&(0,C.A7)(i.fromBlock)||i.toBlock&&(0,C.A7)(i.toBlock))){o.next=36;break}return o.next=35,ie(e,r);case 35:a=o.sent;case 36:return o.abrupt("return",a.getLogs(i));case 37:return o.abrupt("return",H.throwError("unknown method error",d.Yd.errors.UNKNOWN_ERROR,{method:t,params:n}));case 38:case"end":return o.stop()}}),o)})))}var ue=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,o){var a;(0,i.Z)(this,t),0===e.length&&H.throwArgumentError("missing providers","providers",e);var s=e.map((function(e,r){if(n.zt.isProvider(e)){var t=(0,f.Gp)(e)?2e3:750;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:1})}var o=(0,p.DC)(e);null==o.priority&&(o.priority=1),null==o.stallTimeout&&(o.stallTimeout=(0,f.Gp)(e)?2e3:750),null==o.weight&&(o.weight=1);var a=o.weight;return(a%1||a>512||a<1)&&H.throwArgumentError("invalid weight; must be integer in [1, 512]","providers[".concat(r,"].weight"),a),Object.freeze(o)})),c=s.reduce((function(e,r){return e+r.weight}),0);null==o?o=c/2:o>c&&H.throwArgumentError("quorum will always fail; larger than total weight","quorum",o);var l=V(s.map((function(e){return e.provider.network})));return null==l&&(l=new Promise((function(e,r){setTimeout((function(){a.detectNetwork().then(e,r)}),0)}))),a=r.call(this,l),(0,p.zG)((0,u.Z)(a),"providerConfigs",Object.freeze(s)),(0,p.zG)((0,u.Z)(a),"quorum",o),a._highestBlockNumber=-1,a}return(0,s.Z)(t,[{key:"detectNetwork",value:function(){return J(this,void 0,void 0,(0,v.Z)().mark((function e(){var r;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.providerConfigs.map((function(e){return e.provider.getNetwork()})));case 2:return r=e.sent,e.abrupt("return",V(r));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"perform",value:function(e,r){return J(this,void 0,void 0,(0,v.Z)().mark((function t(){var n,o,a,i,s,u,c,l,f,h,m=this;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("sendTransaction"!==e){t.next=13;break}return t.next=3,Promise.all(this.providerConfigs.map((function(e){return e.provider.sendTransaction(r.signedTransaction).then((function(e){return e.hash}),(function(e){return e}))})));case 3:n=t.sent,o=0;case 5:if(!(o<n.length)){t.next=12;break}if("string"!==typeof(a=n[o])){t.next=9;break}return t.abrupt("return",a);case 9:o++,t.next=5;break;case 12:throw n[0];case 13:if(-1!==this._highestBlockNumber||"getBlockNumber"===e){t.next=16;break}return t.next=16,this.getBlockNumber();case 16:i=ae(this,e,r),(s=(0,M.y)(this.providerConfigs.map(p.DC))).sort((function(e,r){return e.priority-r.priority})),u=this._highestBlockNumber,c=0,l=!0,f=(0,v.Z)().mark((function t(){var n,o,a,f,h,d,g;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=$(),o=s.filter((function(e){return e.runner&&n-e.start<e.stallTimeout})).reduce((function(e,r){return e+r.weight}),0),a=function(){var t=s[c++],n=ee++;t.start=$(),t.staller=re(t.stallTimeout),t.staller.wait((function(){t.staller=null})),t.runner=se(t,u,e,r).then((function(o){t.done=!0,t.result=o,m.listenerCount("debug")&&m.emit("debug",{action:"request",rid:n,backend:oe(t,$()),request:{method:e,params:(0,p.p$)(r)},provider:m})}),(function(o){t.done=!0,t.error=o,m.listenerCount("debug")&&m.emit("debug",{action:"request",rid:n,backend:oe(t,$()),request:{method:e,params:(0,p.p$)(r)},provider:m})})),m.listenerCount("debug")&&m.emit("debug",{action:"request",rid:n,backend:oe(t,null),request:{method:e,params:(0,p.p$)(r)},provider:m}),o+=t.weight};o<m.quorum&&c<s.length;)a();if(f=[],s.forEach((function(e){!e.done&&e.runner&&(f.push(e.runner),e.staller&&f.push(e.staller.getPromise()))})),!f.length){t.next=9;break}return t.next=9,Promise.race(f);case 9:if(!((h=s.filter((function(e){return e.done&&null==e.error}))).length>=m.quorum)){t.next=19;break}if(void 0===(d=i(h))){t.next=15;break}return s.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0})),t.abrupt("return",{v:d});case 15:if(l){t.next=18;break}return t.next=18,re(100).getPromise();case 18:l=!1;case 19:if(g=s.reduce((function(e,r){if(!r.done||null==r.error)return e;var t=r.error.code;return te.indexOf(t)>=0&&(e[t]||(e[t]={error:r.error,weight:0}),e[t].weight+=r.weight),e}),{}),Object.keys(g).forEach((function(e){var r=g[e];if(!(r.weight<m.quorum)){s.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0}));var t=r.error,n={};ne.forEach((function(e){null!=t[e]&&(n[e]=t[e])})),H.throwError(t.reason||t.message,e,n)}})),0!==s.filter((function(e){return!e.done})).length){t.next=23;break}return t.abrupt("return","break");case 23:case"end":return t.stop()}}),t)}));case 23:return t.delegateYield(f(),"t0",25);case 25:if("break"!==(h=t.t0)){t.next=28;break}return t.abrupt("break",32);case 28:if("object"!==typeof h){t.next=30;break}return t.abrupt("return",h.v);case 30:t.next=23;break;case 32:return s.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0})),t.abrupt("return",H.throwError("failed to meet quorum",d.Yd.errors.SERVER_ERROR,{method:e,params:r,results:s.map((function(e){return oe(e)})),provider:this}));case 34:case"end":return t.stop()}}),t,this)})))}}]),t}(a.Zk),ce=null,le=new d.Yd(m.i),pe="84842078b09946638c03157f83405213",fe=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var o;(0,i.Z)(this,t);var a=new he(e,n),s=a.connection;s.password&&le.throwError("INFURA WebSocket project secrets unsupported",d.Yd.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});var c=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");return o=r.call(this,c,e),(0,p.zG)((0,u.Z)(o),"apiKey",a.projectId),(0,p.zG)((0,u.Z)(o),"projectId",a.projectId),(0,p.zG)((0,u.Z)(o),"projectSecret",a.projectSecret),o}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.projectId===pe}}]),t}(h.q),he=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.projectId===pe}}],[{key:"getWebSocketProvider",value:function(e,r){return new fe(e,r)}},{key:"getApiKey",value:function(e){var r={apiKey:pe,projectId:pe,projectSecret:null};return null==e||("string"===typeof e?r.projectId=e:null!=e.projectSecret?(le.assertArgument("string"===typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),le.assertArgument("string"===typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}},{key:"getUrl",value:function(e,r){var t=null;switch(e?e.name:"unknown"){case"homestead":t="mainnet.infura.io";break;case"goerli":t="goerli.infura.io";break;case"sepolia":t="sepolia.infura.io";break;case"matic":t="polygon-mainnet.infura.io";break;case"maticmum":t="polygon-mumbai.infura.io";break;case"optimism":t="optimism-mainnet.infura.io";break;case"optimism-goerli":t="optimism-goerli.infura.io";break;case"arbitrum":t="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":t="arbitrum-goerli.infura.io";break;default:le.throwError("unsupported network",d.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={allowGzip:!0,url:"https://"+t+"/v3/"+r.projectId,throttleCallback:function(e,t){return r.projectId===pe&&(0,f.vh)(),Promise.resolve(!0)}};return null!=r.projectSecret&&(n.user="",n.password=r.projectSecret),n}}]),t}(P),de=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"send",value:function(e,r){var t=this,n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);var o={request:n,resolve:null,reject:null},a=new Promise((function(e,r){o.resolve=e,o.reject=r}));return this._pendingBatch.push(o),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((function(){var e=t._pendingBatch;t._pendingBatch=null,t._pendingBatchAggregator=null;var r=e.map((function(e){return e.request}));return t.emit("debug",{action:"requestBatch",request:(0,p.p$)(r),provider:t}),(0,U.rd)(t.connection,JSON.stringify(r)).then((function(n){t.emit("debug",{action:"response",request:r,response:n,provider:t}),e.forEach((function(e,r){var t=n[r];if(t.error){var o=new Error(t.error.message);o.code=t.error.code,o.data=t.error.data,e.reject(o)}else e.resolve(t.result)}))}),(function(n){t.emit("debug",{action:"response",error:n,request:r,provider:t}),e.forEach((function(e){e.reject(n)}))}))}),10)),a}}]),t}(b.r),me=new d.Yd(m.i),ve=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,null,[{key:"getApiKey",value:function(e){return e&&"string"!==typeof e&&me.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}},{key:"getUrl",value:function(e,r){me.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");var t=null;switch(e.name){case"homestead":t="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":t="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":t="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":t="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":t="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:me.throwArgumentError("unsupported network","network",arguments[0])}return t+"?apiKey="+r}}]),t}(P),ge=new d.Yd(m.i),ke="62e1ad51b37b8e00394bda3b",be=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"isCommunityResource",value:function(){return this.applicationId===ke}}],[{key:"getApiKey",value:function(e){var r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?r.applicationId=ke:"string"===typeof e?r.applicationId=e:null!=e.applicationSecretKey?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:ge.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}},{key:"getUrl",value:function(e,r){var t=null;switch(e?e.name:"unknown"){case"goerli":t="eth-goerli.gateway.pokt.network";break;case"homestead":t="eth-mainnet.gateway.pokt.network";break;case"kovan":t="poa-kovan.gateway.pokt.network";break;case"matic":t="poly-mainnet.gateway.pokt.network";break;case"maticmum":t="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":t="eth-rinkeby.gateway.pokt.network";break;case"ropsten":t="eth-ropsten.gateway.pokt.network";break;default:ge.throwError("unsupported network",d.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={headers:{},url:"https://".concat(t,"/v1/lb/").concat(r.applicationId)};return null!=r.applicationSecretKey&&(n.user="",n.password=r.applicationSecretKey),n}}]),t}(P),we=new d.Yd(m.i),ye=1;function Ee(e,r){var t="Web3LegacyFetcher";return function(e,n){var o=this,a={method:e,params:n,id:ye++,jsonrpc:"2.0"};return new Promise((function(e,n){o.emit("debug",{action:"request",fetcher:t,request:(0,p.p$)(a),provider:o}),r(a,(function(r,i){if(r)return o.emit("debug",{action:"response",fetcher:t,error:r,request:a,provider:o}),n(r);if(o.emit("debug",{action:"response",fetcher:t,request:a,response:i,provider:o}),i.error){var s=new Error(i.error.message);return s.code=i.error.code,s.data=i.error.data,n(s)}e(i.result)}))}))}}var Pe=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var o;(0,i.Z)(this,t),null==e&&we.throwArgumentError("missing provider","provider",e);var a=null,s=null,c=null;return"function"===typeof e?(a="unknown:",s=e):(!(a=e.host||e.path||"")&&e.isMetaMask&&(a="metamask"),c=e,e.request?(""===a&&(a="eip-1193:"),s=function(e){return function(r,t){var n=this;null==t&&(t=[]);var o={method:r,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:(0,p.p$)(o),provider:this}),e.request(o).then((function(e){return n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:o,response:e,provider:n}),e}),(function(e){throw n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:o,error:e,provider:n}),e}))}}(e)):e.sendAsync?s=Ee(0,e.sendAsync.bind(e)):e.send?s=Ee(0,e.send.bind(e)):we.throwArgumentError("unsupported provider","provider",e),a||(a="unknown:")),o=r.call(this,a,n),(0,p.zG)((0,u.Z)(o),"jsonRpcFetchFunc",s),(0,p.zG)((0,u.Z)(o),"provider",c),o}return(0,s.Z)(t,[{key:"send",value:function(e,r){return this.jsonRpcFetchFunc(e,r)}}]),t}(b.r),xe=new d.Yd(m.i);function Ze(e,r){if(null==e&&(e="homestead"),"string"===typeof e){var t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new b.r(e);case"ws":case"wss":return new h.q(e);default:xe.throwArgumentError("unsupported URL scheme","network",e)}}var n=(0,o.H)(e);return n&&n._defaultProvider||xe.throwError("unsupported getDefaultProvider network",d.Yd.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),n._defaultProvider({FallbackProvider:ue,AlchemyProvider:_,AnkrProvider:I,CloudflareProvider:j,EtherscanProvider:F,InfuraProvider:he,JsonRpcProvider:b.r,NodesmithProvider:ve,PocketProvider:be,Web3Provider:Pe,IpcProvider:ce},r)}},56082:function(e,r,t){t.d(r,{q:function(){return E}});var n=t(74165),o=t(15671),a=t(43144),i=t(82963),s=t(97326),u=t(60136),c=t(29388),l=t(11752),p=t(61120),f=t(82895),h=t(99138),d=t(58256),m=t(78663),v=t(49229),g=null;try{if(null==(g=WebSocket))throw new Error("inject please")}catch(P){var k=new m.Yd(v.i);g=function(){k.throwError("WebSockets not supported in this environment",m.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var b=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(r){a(r)}}function s(e){try{u(n.throw(e))}catch(r){a(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}u((n=n.apply(e,r||[])).next())}))},w=new m.Yd(v.i),y=1,E=function(e){(0,u.Z)(t,e);var r=(0,c.Z)(t);function t(e,n){var a,u;(0,o.Z)(this,t),"any"===n&&w.throwError("WebSocketProvider does not support 'any' network yet",m.Yd.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(u="string"===typeof e?r.call(this,e,n):r.call(this,"_websocket",n))._pollingInterval=-1,u._wsReady=!1,"string"===typeof e?(0,h.zG)((0,s.Z)(u),"_websocket",new g(u.connection.url)):(0,h.zG)((0,s.Z)(u),"_websocket",e),(0,h.zG)((0,s.Z)(u),"_requests",{}),(0,h.zG)((0,s.Z)(u),"_subs",{}),(0,h.zG)((0,s.Z)(u),"_subIds",{}),(0,h.zG)((0,s.Z)(u),"_detectNetwork",(0,l.Z)((a=(0,s.Z)(u),(0,p.Z)(t.prototype)),"detectNetwork",a).call(a)),u.websocket.onopen=function(){u._wsReady=!0,Object.keys(u._requests).forEach((function(e){u.websocket.send(u._requests[e].payload)}))},u.websocket.onmessage=function(e){var r=e.data,t=JSON.parse(r);if(null!=t.id){var n=String(t.id),o=u._requests[n];if(delete u._requests[n],void 0!==t.result)o.callback(null,t.result),u.emit("debug",{action:"response",request:JSON.parse(o.payload),response:t.result,provider:(0,s.Z)(u)});else{var a=null;t.error?(a=new Error(t.error.message||"unknown error"),(0,h.zG)(a,"code",t.error.code||null),(0,h.zG)(a,"response",r)):a=new Error("unknown error"),o.callback(a,void 0),u.emit("debug",{action:"response",error:a,request:JSON.parse(o.payload),provider:(0,s.Z)(u)})}}else if("eth_subscription"===t.method){var i=u._subs[t.params.subscription];i&&i.processFunc(t.params.result)}else console.warn("this should not happen")};var c=setInterval((function(){u.emit("poll")}),1e3);return c.unref&&c.unref(),(0,i.Z)(u)}return(0,a.Z)(t,[{key:"websocket",get:function(){return this._websocket}},{key:"detectNetwork",value:function(){return this._detectNetwork}},{key:"pollingInterval",get:function(){return 0},set:function(e){w.throwError("cannot set polling interval on WebSocketProvider",m.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}},{key:"resetEventsBlock",value:function(e){w.throwError("cannot reset events block on WebSocketProvider",m.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}},{key:"poll",value:function(){return b(this,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))}},{key:"polling",set:function(e){e&&w.throwError("cannot set polling on WebSocketProvider",m.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}},{key:"send",value:function(e,r){var t=this,n=y++;return new Promise((function(o,a){var i=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});t.emit("debug",{action:"request",request:JSON.parse(i),provider:t}),t._requests[String(n)]={callback:function(e,r){return e?a(e):o(r)},payload:i},t._wsReady&&t.websocket.send(i)}))}},{key:"_subscribe",value:function(e,r,t){return b(this,void 0,void 0,(0,n.Z)().mark((function o(){var a,i,s=this;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null==(a=this._subIds[e])&&(a=Promise.all(r).then((function(e){return s.send("eth_subscribe",e)})),this._subIds[e]=a),n.next=4,a;case 4:i=n.sent,this._subs[i]={tag:e,processFunc:t};case 6:case"end":return n.stop()}}),o,this)})))}},{key:"_startEvent",value:function(e){var r=this;switch(e.type){case"block":this._subscribe("block",["newHeads"],(function(e){var t=f.O$.from(e.number).toNumber();r._emitted.block=t,r.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(function(e){r.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(function(t){null==t.removed&&(t.removed=!1),r.emit(e.filter,r.formatter.filterLog(t))}));break;case"tx":var t=function(e){var t=e.hash;r.getTransactionReceipt(t).then((function(e){e&&r.emit(t,e)}))};t(e),this._subscribe("tx",["newHeads"],(function(e){r._events.filter((function(e){return"tx"===e.type})).forEach(t)}));break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}},{key:"_stopEvent",value:function(e){var r=this,t=e.tag;if("tx"===e.type){if(this._events.filter((function(e){return"tx"===e.type})).length)return;t="tx"}else if(this.listenerCount(e.event))return;var n=this._subIds[t];n&&(delete this._subIds[t],n.then((function(e){r._subs[e]&&(delete r._subs[e],r.send("eth_unsubscribe",[e]))})))}},{key:"destroy",value:function(){return b(this,void 0,void 0,(0,n.Z)().mark((function e(){var r=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.websocket.readyState!==g.CONNECTING){e.next=3;break}return e.next=3,new Promise((function(e){r.websocket.onopen=function(){e(!0)},r.websocket.onerror=function(){e(!1)}}));case 3:this.websocket.close(1e3);case 4:case"end":return e.stop()}}),e,this)})))}}],[{key:"defaultUrl",value:function(){return"ws://localhost:8546"}}]),t}(d.r)},27547:function(e,r,t){function n(e){for(var r=(e=e.slice()).length-1;r>0;r--){var t=Math.floor(Math.random()*(r+1)),n=e[r];e[r]=e[t],e[t]=n}return e}t.d(r,{y:function(){return n}})}}]);