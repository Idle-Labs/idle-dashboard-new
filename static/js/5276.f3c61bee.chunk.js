"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[5276,219],{75276:function(e,t,n){n.r(t),n.d(t,{CompositionChart:function(){return h}});var r=n(7276),i=n(99594),a=n(79681),o=n(96699),u=n(3498),l=n(66288),s=n(90219),d=n(1669),c=n(1494),f=n(45263),h=function(e){var t=e.assetIds,n=e.strategies,h=e.type,g=(0,o.Fg)(),p=(0,a.qM)(),v=(0,l.X)().isMobile,m=(0,d.w)().protocolToken,y=(0,c.O)({assetIds:t,strategies:n}),x=y.colors,A=y.compositions,b=(0,r.useCallback)((function(e){var t;if("assets"===h){var n=A[h].reduce((function(e,t){return e+t.value}),0),r=function(e){return"$".concat((0,i.dm)(e))},a=null===e||void 0===e||null===(t=e.extraData)||void 0===t?void 0:t.asset,o=(null===a||void 0===a?void 0:a.icon)||(null===m||void 0===m?void 0:m.icon),u=(null===a||void 0===a?void 0:a.name)||p("dashboard.portfolio.totalChart"),l=r(e?e.value:n);return e&&!a?null:(0,f.jsxs)(f.Fragment,{children:[o&&(0,f.jsx)("image",{y:"35%",href:o,height:"34",width:"34",textAnchor:"middle",x:v?"44.5%":"46.5%"}),(0,f.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:l}),(0,f.jsx)("text",{x:"50%",y:"61%",fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",fill:g.colors.cta,children:u})]})}}),[m,A,g,p,h,v]),j=(0,r.useCallback)((function(){var e;return(0,f.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:(e=0,"$".concat((0,i.dm)(e)))})}),[]);return(0,f.jsx)(u.xu,{height:350,width:"100%",children:A&&A[h]&&A[h].length?(0,f.jsx)(s.DonutChart,{colors:x[h],data:A[h],getSliceData:b}):(0,f.jsx)(s.DonutChart,{getSliceData:j,colors:{placeholder1:"#555B67"},data:[{value:100,label:"placeholder1"}]})})}},90219:function(e,t,n){n.r(t),n.d(t,{DonutChart:function(){return x},PieChart:function(){return p}});var r=n(45987),i=n(1413),a=n(29439),o=n(14380),u=n(7276),l=n(28547),s=n(87563),d=n(68165),c=n(77806),f=n(45263),h=["data","colors","getSliceData"],g={top:0,right:0,bottom:0,left:0};function p(e){var t=e.data,n=e.colors,r=e.width,s=e.height,d=e.margin,h=void 0===d?g:d,p=e.donutThickness,v=void 0===p?30:p,m=e.animate,x=void 0===m||m,A=e.getSliceData,b=(0,u.useState)(null),j=(0,a.Z)(b,2),M=j[0],Z=j[1],w=r-h.left-h.right,k=s-h.top-h.bottom,C=Math.min(w,k)/2,D=k/2,O=w/2,P=t.map((function(e){return e.label})),I=P.map((function(e){return n[e]})),S=(0,l.Z)({domain:P,range:I}),z=A&&A(M);return(0,f.jsxs)("svg",{width:r,height:s,children:[(0,f.jsx)("rect",{rx:14,width:r,height:s,fill:"url('#visx-pie-gradient')"}),z,(0,f.jsx)(o.Z,{top:D+h.top,left:O+h.left,children:(0,f.jsx)(c.Z,{padAngle:0,cornerRadius:0,pieValue:function(e){return e.value},outerRadius:C,innerRadius:C-v,data:t,children:function(e){return(0,f.jsx)(y,(0,i.Z)((0,i.Z)({},e),{},{animate:x,onMouseOver:function(e){var t=e.data;return Z(t)},getKey:function(e){return e.data.label},onMouseOut:function(){return Z(null)},getColor:function(e){return S(e.data.label)}}))}})})]})}var v=function(e){var t=e.endAngle;return{startAngle:t>Math.PI?2*Math.PI:0,endAngle:t>Math.PI?2*Math.PI:0,opacity:0}},m=function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,opacity:1}};function y(e){var t=e.animate,n=e.arcs,r=e.path,a=e.getKey,o=e.getColor,u=e.onMouseOut,l=e.onMouseOver,s=e.onClickDatum;return(0,d.useTransition)(n,{from:t?v:m,enter:m,update:m,leave:t?v:m,keys:a})((function(e,t){return(0,f.jsx)("g",{children:(0,f.jsx)(d.animated.path,{d:(0,d.interpolate)([e.startAngle,e.endAngle],(function(e,n){return r((0,i.Z)((0,i.Z)({},t),{},{startAngle:e,endAngle:n}))})),fill:o(t),onClick:function(){return s&&s(t)},onMouseOver:function(){return l&&l(t)},onMouseOut:function(){return u&&u(t)},onTouchStart:function(){return s&&s(t)}})},Math.random())}))}var x=function(e){var t=e.data,n=e.colors,a=e.getSliceData,o=(0,r.Z)(e,h);return(0,f.jsx)(s.Z,{debounceTime:10,children:function(e){return(0,f.jsx)(p,(0,i.Z)({data:t,colors:n,width:e.width,height:e.height,getSliceData:a},o))}})}},1494:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(93433),i=n(4942),a=n(1413),o=n(7276),u=n(99594),l=n(79681),s=n(12056),d=n(1669),c=function(e){var t=e.assetIds,n=e.strategies,c=(0,l.qM)(),f=(0,d.w)().selectors,h=f.selectAssetById,g=f.selectAssetsByIds,p=(0,o.useMemo)((function(){return g?g(t):[]}),[t,g]),v=Object.keys(s.A).reduce((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},t,{balance:(0,u.gA)(0),deposited:(0,u.gA)(0),weightedRealizedApy:(0,u.gA)(0)}))}),{}),m=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,u.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),v)}),[p,n,v]),y=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=h(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,u.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[p,n,h]),x={assets:[],strategies:[]};x.strategies=(0,o.useMemo)((function(){return Object.keys(m).map((function(e){return{label:c(s.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:s.A[e],deposited:parseFloat(m[e].deposited)},value:parseFloat(m[e].balance)}}))}),[m,c]),x.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var i=h(t);return!i||i.type&&(!n||n.includes(i.type))?e:[].concat((0,r.Z)(e),[{label:i.name,extraData:{asset:i},value:parseFloat(y[t])}])}),[])}),[y,h,n]);var A={assets:{},strategies:{}};return A.strategies=(0,o.useMemo)((function(){return Object.values(s.A).reduce((function(e,t){var n=c(t.label);return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},n,t.color))}),{})}),[c]),A.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var n=h(t);if(!n)return e;var r=n.name;return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},r,n.color))}),{})}),[y,h]),{colors:A,compositions:x}}}}]);