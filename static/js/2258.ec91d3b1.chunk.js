"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2258,1608],{72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return M},TransactionButtonValue:function(){return C}});var i=n(1413),r=n(29439),o=n(45987),a=(n(81608),n(74285)),s=n(98258),u=n(82172),c=n(55967),d=n(15542),l=n(1669),f=n(53293),m=n(23023),h=n(7276),v=n(96699),p=n(52486),w=n(3498),g=n(43127),x=n(45263),y=["text","contractSendMethod"],b=["text","amount","assetId","vaultId","actionType","contractSendMethod"],C=function(t){var e,n=t.text,a=t.contractSendMethod,s=(0,o.Z)(t,y),u=(0,v.Fg)(),l=(0,h.useRef)(null),f=(0,h.useState)(null),g=(0,r.Z)(f,2),b=g[0],C=g[1],M=(0,m.R)(),S=M.state.transaction,T=M.cleanTransaction,Z=(0,h.useMemo)((function(){var t;return JSON.stringify(null===S||void 0===S||null===(t=S.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(a._method)}),[S,a]),j=(0,h.useMemo)((function(){return Z&&S.status&&["pending","success","failed"].includes(S.status)&&S.estimatedTime}),[S,Z]),k=(0,h.useMemo)((function(){return j&&"pending"===S.status?S.estimatedTime:.5}),[j,S]),I=(0,h.useCallback)((function(){if(!S.timestamp||!S.estimatedTime)return null;var t=+S.timestamp+1e3*S.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));C(e),e&&(l.current=setTimeout((function(){I()}),1e3))}),[S]);(0,h.useEffect)((function(){var t;Z&&("success"===S.status||"failed"===S.status?(l.current&&(clearInterval(l.current),l.current=null),"success"!==S.status&&4001===(null===(t=S.error)||void 0===t?void 0:t.code)||setTimeout((function(){T()}),4e3)):"pending"!==S.status||l.current||I())}),[Z,S.status,I,T,null===(e=S.error)||void 0===e?void 0:e.code]);var _=(0,h.useMemo)((function(){var t;if(Z)switch(null===S||void 0===S?void 0:S.status){case"created":return(0,x.jsx)(p.$,{size:"sm"});case"pending":return S.timestamp&&S.estimatedTime&&b?(0,x.jsxs)(w.xv,{textStyle:"ctaStatic",children:[b,"s"]}):(0,x.jsx)(p.$,{size:"sm"});case"success":return(0,x.jsx)(w.kC,(0,i.Z)((0,i.Z)({},s),{},{alignItems:"center",justifyContent:"center",children:(0,x.jsx)(c.ddU,{size:24,color:u.colors.green[400]})}));case"failed":if(4001!==(null===(t=S.error)||void 0===t?void 0:t.code))return(0,x.jsx)(w.kC,(0,i.Z)((0,i.Z)({},s),{},{alignItems:"center",justifyContent:"center",children:(0,x.jsx)(c.lTq,{size:24,color:u.colors.red[400]})}))}return(0,x.jsx)(d.Translation,{translation:n,textStyle:"ctaStatic"})}),[Z,b,S,n,u,s]),z=(0,h.useMemo)((function(){switch(S.status){case"success":case"failed":return"transparent";default:return"primary"}}),[S]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w.kC,{top:0,left:0,bottom:0,bg:z,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(k,"s"),animationName:j?"progress":"none",animationPlayState:j?"running":"stopped"},children:(0,x.jsx)(w.kC,{left:0,width:s.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:_})}),_]})},M=function(t){var e=t.text,n=t.amount,c=t.assetId,d=t.vaultId,v=t.actionType,p=t.contractSendMethod,w=(0,o.Z)(t,b),y=(0,f.Z)(),M=(0,r.Z)(y,2),S=M[0],T=M[1].width,Z=(0,a.Um)(),j=(0,r.Z)(Z,2)[1],k=(0,l.w)().selectors.selectAssetById,I=(0,m.R)(),_=I.sendTransaction,z=I.state.transaction,E=(0,u.Y)(),N=E.chainId,F=E.isNetworkCorrect,L=E.setChainId,O=(0,h.useMemo)((function(){var t;return JSON.stringify(null===z||void 0===z||null===(t=z.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(p._method)}),[z,p]),B=(0,h.useMemo)((function(){return k?k(c):null}),[k,c]),J=(0,h.useCallback)((function(){if("created"!==z.status&&"pending"!==z.status){var t=(0,s.G1)(null===B||void 0===B?void 0:B.chainId);return!F&&t?j({chainId:t.id}):B.chainId!==N?L(B.chainId):_(d,c,p,v,n)}}),[z,d,c,N,p,v,n,_,B,j,L,F]),R=(0,h.useMemo)((function(){var t;if(!O)return"primary";switch(z.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=z.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[O,z]),A=(0,h.useMemo)((function(){return!!w.disabled}),[w]);return(0,x.jsx)(g.zx,(0,i.Z)((0,i.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:T||"auto",borderColor:R,onClick:function(){return J()},ref:S,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},w),{},{disabled:A,children:(0,x.jsx)(C,{text:e,contractSendMethod:p,width:T})}))}},53293:function(t,e,n){n.d(e,{Z:function(){return d}});var i=n(74165),r=n(15861),o=n(29439),a=n(7276),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=null;return function(){n&&clearTimeout(n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];n=setTimeout(e,t,r)}},u={x:0,y:0,top:0,left:0,width:0,height:0,right:0,bottom:0};function c(t){var e=t.getBoundingClientRect();return{x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom}}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,a.useState)(null),n=(0,o.Z)(e,2),d=n[0],l=n[1],f=(0,a.useState)(u),m=(0,o.Z)(f,2),h=m[0],v=m[1],p=(0,a.useCallback)((function(t){l(t)}),[]);return(0,a.useLayoutEffect)((function(){if("undefined"!==typeof window&&d){var e=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.requestAnimationFrame((function(){v(c(d))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e();var n=s(t||100,e);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}}}),[d,t]),[p,h,d]}},81608:function(t,e,n){n.r(e),e.default={}}}]);