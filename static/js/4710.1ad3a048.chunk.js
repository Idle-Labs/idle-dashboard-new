"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[4710,4447,2230],{54447:function(t,e,n){n.r(e),n.d(e,{Card:function(){return v},CardFlex:function(){return f},Dark:function(){return p},Light:function(){return x},Outline:function(){return h}});var i=n(1413),a=n(45987),r=n(3498),s=n(45263),o=["children"],l=["children","layerStyle"],c=["children","layerStyle"],u=["children"],d=["children"],m=["children"],v=function(t){var e=t.children,n=t.layerStyle,o=(0,a.Z)(t,l);return(0,s.jsx)(r.xu,(0,i.Z)((0,i.Z)({width:"100%",position:"relative",layerStyle:n||"card"},o),{},{children:e}))},f=function(t){var e=t.children,n=t.layerStyle,o=(0,a.Z)(t,c);return(0,s.jsx)(r.kC,(0,i.Z)((0,i.Z)({width:"100%",layerStyle:n||"card"},o),{},{children:e}))},p=function(t){var e=t.children,n=(0,a.Z)(t,u),r=["cardDark"].concat(t.layerStyle);return(0,s.jsx)(v,(0,i.Z)((0,i.Z)({},n),{},{layerStyle:r,children:e}))},x=function(t){var e=t.children,n=(0,a.Z)(t,d),r=["cardLight"].concat(t.layerStyle);return(0,s.jsx)(v,(0,i.Z)((0,i.Z)({},n),{},{layerStyle:r,children:e}))},h=function(t){var e=t.children,n=(0,a.Z)(t,m),r=["cardOutline"].concat(t.layerStyle);return(0,s.jsx)(v,(0,i.Z)((0,i.Z)({},n),{},{layerStyle:r,children:e}))};v.Dark=p,v.Light=x,v.Flex=f,v.Outline=h,v.Heading=function(t){var e=t.children,n=(0,a.Z)(t,o);return(0,s.jsx)(r.X6,(0,i.Z)((0,i.Z)({as:"h3",size:"md",mb:6},n),{},{children:e}))}},53673:function(t,e,n){n.r(e),n.d(e,{ChakraCarousel:function(){return f}});var i=n(1413),a=n(29439),r=n(7276),s=n(3498),o=n(53293),l=n(59470),c=n(83336),u=n(79243),d=n(45263),m=(0,l.E)(s.kC),v={stiffness:400,type:"spring",damping:60,mass:3},f=function(t){var e=t.children,n=t.gap,s=t.activeItem,o=void 0===s?0:s,l=t.enableDragging,c=void 0!==l&&l,u=(0,r.useState)(!1),m=(0,a.Z)(u,2),v=m[0],f=m[1],g=(0,r.useState)(.35),y=(0,a.Z)(g,2),j=y[0],S=y[1],T=(0,r.useState)(0),C=(0,a.Z)(T,2),I=C[0],Z=C[1],b=(0,r.useState)(o),k=(0,a.Z)(b,2),w=k[0],A=k[1],E=(0,r.useState)(0),_=(0,a.Z)(E,2),M=_[0],z=_[1],U=(0,r.useState)(0),O=(0,a.Z)(U,2),P=O[0],L=O[1],N=(0,r.useCallback)((function(t){return Z(t)}),[]),F=(0,r.useMemo)((function(){return r.Children.map(e,(function(t,e){return-Math.abs((P+n)*e)}))}),[e,P,n]);(0,r.useEffect)((function(){(o>0||o<F.length-1)&&A(o)}),[F,o]),(0,r.useEffect)((function(){L(I-n),S(.65),z(1)}),[I,n]);var B={setTrackIsActive:f,initSliderWidth:N,setActiveItem:A,activeItem:w,constraint:M,itemWidth:P,positions:F,gap:n},D={setTrackIsActive:f,enableDragging:c,trackIsActive:v,setActiveItem:A,sliderWidth:I,activeItem:w,constraint:M,multiplier:j,itemWidth:P,positions:F,gap:n},W={setTrackIsActive:f,trackIsActive:v,setActiveItem:A,activeItem:w,constraint:M,itemWidth:P,positions:F,gap:n};return(0,d.jsx)(p,(0,i.Z)((0,i.Z)({},B),{},{children:(0,d.jsx)(x,(0,i.Z)((0,i.Z)({},D),{},{children:r.Children.map(e,(function(t,e){return(0,r.createElement)(h,(0,i.Z)((0,i.Z)({},W),{},{index:e,key:e}),t)}))}))}))},p=function(t){var e=t.initSliderWidth,n=t.children,i=t.gap,l=(0,o.Z)(),c=(0,a.Z)(l,2),u=c[0],m=c[1].width;return(0,r.useLayoutEffect)((function(){return e(Math.round(m))}),[m,e]),(0,d.jsx)(s.kC,{flex:1,ref:u,w:{base:"100%",md:"calc(100% + ".concat(i,"px)")},ml:{base:0,md:"-".concat(i/2,"px")},mt:0,px:"".concat(i/2,"px"),position:"relative",overflow:"hidden",_before:{bgGradient:"linear(to-r, base.d400, transparent)",position:"absolute",w:"".concat(i/2,"px"),content:"''",zIndex:1,h:"100%",left:0,top:0},_after:{bgGradient:"linear(to-l, base.d400, transparent)",position:"absolute",w:"".concat(i/2,"px"),content:"''",zIndex:1,h:"100%",right:0,top:0},children:n})},x=function(t){var e=t.setTrackIsActive,n=t.enableDragging,o=t.trackIsActive,l=t.setActiveItem,f=t.activeItem,p=t.constraint,x=t.multiplier,h=t.itemWidth,g=t.positions,y=t.children,j=(0,r.useState)(0),S=(0,a.Z)(j,2),T=S[0],C=S[1],I=(0,c._)(),Z=(0,u.c)(0),b=(0,r.useRef)(null),k=(0,r.useCallback)((function(){return I.start({x:g[f],transition:(0,i.Z)({},v)})}),[f,I,g]),w=(0,r.useCallback)((function(t){return b.current.contains(t.target)?e(!0):e(!1)}),[e]),A=(0,r.useCallback)((function(t){o&&(f<g.length-p&&("ArrowRight"!==t.key&&"ArrowUp"!==t.key||(t.preventDefault(),l((function(t){return t+1})))),f>g.length-g.length&&("ArrowLeft"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),l((function(t){return t-1})))))}),[o,l,f,p,g.length]);(0,r.useEffect)((function(){k(g)}),[w,k,A,g]);var E=n?{drag:"x",cursor:"grab",onDragStart:function(){return C(g[f])},onDragEnd:function(t,e){var n=e.offset.x,a=e.velocity.x*x,r=T+(1===(a<0||n<0?1:-1)?Math.min(a,n):Math.max(a,n)),s=g.reduce((function(t,e){return Math.abs(e-r)<Math.abs(t-r)?e:t}),0);s<g[g.length-p]?(l(g.length-p),I.start({x:g[g.length-p],transition:(0,i.Z)({velocity:e.velocity.x},v)})):(l(g.indexOf(s)),I.start({x:s,transition:(0,i.Z)({velocity:e.velocity.x},v)}))},_active:{cursor:"grabbing"}}:{};return(0,d.jsx)(d.Fragment,{children:h?(0,d.jsx)(s.gC,{ref:b,spacing:5,alignItems:"stretch",children:(0,d.jsx)(m,(0,i.Z)((0,i.Z)({flex:1,dragConstraints:b,animate:I,style:{x:Z},minWidth:"min-content",flexWrap:"nowrap"},E),{},{children:y}))}):null})},h=function(t){var e=t.setTrackIsActive,n=t.setActiveItem,i=t.activeItem,o=t.constraint,l=t.itemWidth,c=t.positions,u=t.children,m=t.index,v=t.gap,f=(0,r.useState)(!1),p=(0,a.Z)(f,2),x=p[0],h=p[1];return(0,d.jsx)(s.kC,{onFocus:function(){return e(!0)},onBlur:function(){x&&m+1===c.length&&e(!1),h(!1)},onKeyUp:function(t){return"Tab"===t.key&&!(i===c.length-o)&&n(m)},onKeyDown:function(t){return"Tab"===t.key&&h(!0)},w:"".concat(l,"px"),_notLast:{mr:"".concat(v,"px")},children:u})}},72230:function(t,e,n){n.r(e),n.d(e,{NavBar:function(){return u}});var i=n(1413),a=n(45987),r=(n(7276),n(3498)),s=n(55967),o=n(15542),l=n(45263),c=["goBack","close","height"],u=function(t){var e=t.goBack,n=t.close,u=t.height,d=(0,a.Z)(t,c);return(0,l.jsxs)(r.Ug,{width:"100%",position:"relative",alignItems:"center",height:u||"24px",justifyContent:"flex-start",children:[e&&(0,l.jsx)(r.kC,{zIndex:1,position:"relative",children:(0,l.jsx)(s.sG8,{size:24,onClick:function(){return e()},style:{cursor:"pointer"}})}),(0,l.jsx)(r.kC,{zIndex:0,width:"100%",justifyContent:"center",position:e?"absolute":"relative",children:(0,l.jsx)(o.Translation,(0,i.Z)({component:r.xv,textStyle:"ctaStatic","aria-selected":!0},d))}),n&&(0,l.jsx)(r.kC,{top:0,right:0,zIndex:1,position:"absolute",children:(0,l.jsx)(s.lTq,{size:24,onClick:function(){return n()},style:{cursor:"pointer"}})})]})}},4710:function(t,e,n){n.r(e),n.d(e,{OperativeComponent:function(){return P},useOperativeComponent:function(){return O}});var i=n(45987),a=n(1413),r=n(29439),s=n(79681),o=n(44888),l=n(86059),c=n(87099),u=n(54447),d=n(88935),m=n(72230),v=n(15542),f=n(85267),p=n(1669),x=n(53673),h=n(23023),g=n(75712),y=n(99594),j=n(7276),S=n(55967),T=n(3498),C=n(43127),I=n(13961),Z=n(96209),b=n(89030),k=n(88089),w=n(45263),A=["assetId","actions","defaultActiveIndex"],E=function(t){var e=t.goBack,n=(0,s.qM)(),i=(0,j.useRef)(null),a=(0,f.m)().searchParams,o=(0,d.Y)(),l=o.chainId,u=o.explorer,x=(0,g.useAssetProvider)(),Z=x.underlyingAsset,b=x.theme,k=x.asset,A=(0,j.useState)(0),E=(0,r.Z)(A,2),_=E[0],M=E[1],z=(0,j.useState)(1),U=(0,r.Z)(z,2),P=U[0],L=U[1],N=(0,j.useState)(null),F=(0,r.Z)(N,2),B=F[0],D=F[1],W=(0,j.useState)(null),R=(0,r.Z)(W,2),G=R[0],q=R[1],Y=(0,j.useState)(null),V=(0,r.Z)(Y,2),K=V[0],Q=V[1],X=O(),H=X.amount,J=X.actionType,$=X.baseActionType,tt=X.activeStep,et=X.activeItem,nt=(0,h.R)(),it=nt.state.transaction,at=nt.retry,rt=nt.cleanTransaction,st=(0,p.w)().selectors,ot=st.selectAssetById,lt=st.selectAssetPriceUsd,ct=st.selectVaultById,ut=st.selectVaultGauge,dt=(0,j.useMemo)((function(){return a}),[a]),mt=(0,r.Z)(dt,2)[1],vt=(0,j.useMemo)((function(){return(null===k||void 0===k?void 0:k.id)&&ct&&ct(k.id)}),[ct,null===k||void 0===k?void 0:k.id]),ft=(0,j.useMemo)((function(){return(null===k||void 0===k?void 0:k.id)&&ut&&ut(k.id)}),[ut,null===k||void 0===k?void 0:k.id]),pt=(0,j.useMemo)((function(){return it.actionType||J}),[J,it.actionType]),xt=(0,j.useMemo)((function(){return it.amount?(0,y.d5)(it.amount):(0,y.d5)(H)}),[H,it.amount]),ht=(0,j.useMemo)((function(){if(!Z||!lt)return(0,y.gA)(0);var t=lt(Z.id);return(0,y.d5)(xt).times(t)}),[Z,xt,lt]),gt=(0,j.useMemo)((function(){return it.amount?(0,y.gA)(it.amount).isNaN()?it.amount:(0,y.dm)((0,y.d5)(it.amount),8):H===c.Uf?n("trade.unlimited"):(0,y.dm)((0,y.d5)(H),8)}),[H,n,it.amount]),yt=(0,j.useCallback)((function(t){if(t&&it.status&&"pending"===it.status){var e=Math.max(0,Math.ceil((t-Date.now())/1e3));(!B||e>B)&&D(e),e<=0||(i.current=setTimeout((function(){yt(t)}),1e3))}}),[B,it]);(0,j.useEffect)((function(){var t,e;it.status&&["success","failed"].includes(it.status)&&(i.current&&clearTimeout(i.current),D(0),i.current=null,M(P),["deposit","stake"].includes(pt)&&"success"===it.status&&K!==(null===(t=it.transaction)||void 0===t?void 0:t.hash)&&((0,y.gZ)(k,ht,it.transaction),Q(null===(e=it.transaction)||void 0===e?void 0:e.hash)))}),[k,null===it||void 0===it?void 0:it.status,K,ht,M,P]),(0,j.useEffect)((function(){if(null!==it&&void 0!==it&&it.estimatedTime&&null!==it&&void 0!==it&&it.timestamp&&"pending"===(null===it||void 0===it?void 0:it.status)&&!G){var t=1e3*(null===it||void 0===it?void 0:it.estimatedTime),e=+(null===it||void 0===it?void 0:it.timestamp)+1e3*(null===it||void 0===it?void 0:it.estimatedTime);q(e),L(t),M(t),yt(e)}}),[it,G,yt]);var jt=(0,j.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("pending"!==(null===it||void 0===it?void 0:it.status))return rt(),M(0),D(null),L(1),q(null),i.current&&clearTimeout(i.current),i.current=null,e(t)}),[null===it||void 0===it?void 0:it.status,rt,e]);(0,j.useEffect)((function(){null!==it&&void 0!==it&&it.status||!et||tt||jt(!1)}),[null===it||void 0===it?void 0:it.status,et,tt,jt]);var St=(0,j.useMemo)((function(){if(it.amount&&(0,y.gA)(it.amount).isNaN())return"";if(!ot)return null===Z||void 0===Z?void 0:Z.name;var t=ot(it.assetId);return(null===t||void 0===t?void 0:t.name)||(null===Z||void 0===Z?void 0:Z.name)}),[ot,null===Z||void 0===Z?void 0:Z.name,it.assetId,it.amount]),Tt=(0,j.useMemo)((function(){var t,e,n,i;switch(null===it||void 0===it?void 0:it.status){case"pending":return(0,w.jsx)(v.Translation,{component:T.xv,translation:0===B?"modals.status.body.long":"modals.".concat(pt,".status.pending"),textStyle:"heading",fontSize:"h3",textAlign:"center"});case"success":return(0,w.jsxs)(T.gC,{spacing:4,children:[(0,w.jsx)(v.Translation,{component:T.xv,translation:"modals.".concat(pt,".status.success"),params:{asset:St,amount:gt},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(null===vt||void 0===vt||null===(t=vt.messages)||void 0===t||null===(e=t.actions)||void 0===e?void 0:e[pt])&&(0,w.jsx)(v.Translation,{pb:2,translation:null===vt||void 0===vt||null===(n=vt.messages)||void 0===n||null===(i=n.actions)||void 0===i?void 0:i[pt],textStyle:"captionSmall",textAlign:"center"}),"deposit"===pt&&ft?(0,w.jsxs)(T.gC,{spacing:4,children:[(0,w.jsx)(v.Translation,{translation:"trade.depositGauge",textAlign:"center"}),(0,w.jsx)(v.Translation,{component:C.zx,translation:"trade.actions.".concat(pt,".status.success.buttonGauge"),onClick:function(){jt(),setTimeout((function(){return mt("?tab=gauge")}),1e3)},variant:"ctaFull"}),(0,w.jsx)(v.Translation,{component:C.zx,translation:"trade.actions.".concat(pt,".status.success.button"),onClick:function(){jt()},variant:"ctaPrimaryOutline",width:"100%"})]}):tt?(0,w.jsx)(v.Translation,{component:C.zx,translation:"common.".concat($),onClick:function(){return jt(!0)},variant:"ctaPrimary",px:10}):(0,w.jsx)(v.Translation,{component:C.zx,translation:"trade.actions.".concat(pt,".status.success.button"),onClick:function(){return jt()},variant:"ctaPrimary",px:10})]});case"failed":return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v.Translation,{component:T.xv,translation:"modals.".concat(pt,".status.failed"),params:{asset:St,amount:y.dm},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(v.Translation,{component:T.xv,translation:"modals.status.body.failed",params:{asset:St,amount:y.dm},textStyle:"captionSmall",textAlign:"center"}),(0,w.jsx)(v.Translation,{component:C.zx,translation:"common.retry",leftIcon:(0,w.jsx)(S.Ffb,{size:24}),onClick:function(){at()},variant:"ctaPrimary",px:10}),(0,w.jsx)(v.Translation,{component:T.xv,translation:"common.cancel",textStyle:["cta","link"],onClick:function(){return jt()}})]});default:return null}}),[null===it||void 0===it?void 0:it.status,vt,pt,St,gt,B,tt,$,jt,at,mt,ft]),Ct=(0,j.useMemo)((function(){return!(null===it||void 0===it||!it.estimatedTime)&&"pending"===(null===it||void 0===it?void 0:it.status)&&0===B}),[null===it||void 0===it?void 0:it.estimatedTime,null===it||void 0===it?void 0:it.status,B]),It=(0,j.useMemo)((function(){return(null===it||void 0===it||!it.status||!["success","failed"].includes(null===it||void 0===it?void 0:it.status))&&(!(null!==it&&void 0!==it&&it.estimatedTime)||Ct)}),[it,Ct]),Zt=(0,j.useMemo)((function(){return null===it||void 0===it||!it.status||It?"blue.400":["success","pending"].includes(null===it||void 0===it?void 0:it.status)?"green.400":"red.400"}),[null===it||void 0===it?void 0:it.status,It]),bt=(0,j.useMemo)((function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(T.xu,{height:5,children:(0,w.jsx)(v.Translation,{component:T.xv,translation:"pending"===(null===it||void 0===it?void 0:it.status)?null!==it&&void 0!==it&&it.estimatedTime?"modals.status.estimatedTime":"modals.status.calculateEstimatedTime":"",textStyle:"captionSmaller",textAlign:"center"})}),(0,w.jsx)(T.xu,{width:"125px",height:"125px",bg:"card.bgLight",borderRadius:"50%",position:"relative",children:(0,w.jsx)(I.D8,{size:145,top:"-10px",left:"-10px",thickness:"5px",position:"absolute",value:_,max:P,trackColor:"card.bgLight",color:Zt,isIndeterminate:It,sx:{".chakra-progress__indicator":{transitionTimingFunction:"ease",transitionProperty:"stroke-dasharray",transitionDuration:"pending"===(null===it||void 0===it?void 0:it.status)&&null!==it&&void 0!==it&&it.estimatedTime?"".concat(null===it||void 0===it?void 0:it.estimatedTime,"s"):"0.6s"}},children:"pending"===(null===it||void 0===it?void 0:it.status)?!!B&&(0,w.jsx)(I.ip,{textStyle:["bold","h2"],children:B>3600?">1h":B>1800?">30m":"".concat(B,"s")}):"success"===(null===it||void 0===it?void 0:it.status)?(0,w.jsx)(I.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,w.jsx)(S.ddU,{size:50,color:b.colors.green[400]})}):"failed"===(null===it||void 0===it?void 0:it.status)&&(0,w.jsx)(I.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,w.jsx)(S.lTq,{size:50,color:b.colors.red[400]})})})})]})}),[null===it||void 0===it?void 0:it.status,null===it||void 0===it?void 0:it.estimatedTime,It,Zt,P,B,_,b]),kt=(0,j.useMemo)((function(){var t="pending"!==(null===it||void 0===it?void 0:it.status)&&jt;return(0,w.jsx)(m.NavBar,{goBack:t?function(){return t()}:void 0,translation:"modals.status.header.".concat(null===it||void 0===it?void 0:it.status)})}),[null===it||void 0===it?void 0:it.status,jt]);return(0,w.jsxs)(w.Fragment,{children:[kt,(0,w.jsx)(T.kC,{p:14,flex:1,width:"100%",children:(0,w.jsxs)(T.gC,{spacing:4,children:[bt,Tt]})}),(null===it||void 0===it?void 0:it.hash)&&(0,w.jsx)(T.Ug,{spacing:1,width:"100%",justifyContent:"center",children:(0,w.jsx)(v.Translation,{component:T.rU,translation:"defi.viewOnChain",textStyle:"link",fontSize:"sm",fontWeight:700,isExternal:!0,href:(0,y.QG)(l,u,it.hash)})})]})},_=function(t){var e=t.save,n=(0,h.R)(),i=n.state,a=i.estimatedFeesUsd,r=i.estimatedTimes,s=i.gasPrices,d=i.transactionSpeed,f=n.setTransactionSpeed;return(0,w.jsxs)(T.gC,{p:4,flex:1,width:"100%",justifyContent:"space-between",children:[(0,w.jsx)(m.NavBar,{height:"auto",mb:10,translation:"common.transactionSpeed"}),(0,w.jsx)(T.gC,{p:0,flex:1,spacing:2,width:"100%",justifyContent:"flex-start",children:Object.keys(o.U_).map((function(t){var e=o.U_[t],n=d===e;return(0,w.jsx)(u.Card.Outline,{px:4,py:4,style:{cursor:"pointer"},width:"100%","aria-selected":n,layerStyle:["cardInteractive"],bg:n?"card.bgLight":"transparent",onClick:function(){return f(e)},children:(0,w.jsxs)(T.Ug,{spacing:4,width:"100%",alignItems:"center",children:[(0,w.jsxs)(T.Ug,{spacing:2,width:"40%",alignItems:"center",children:[(0,w.jsx)(Z.Y8,{colorScheme:"blue",isChecked:n}),(0,w.jsxs)(T.Ug,{flex:1,spacing:1,alignItems:"center",children:[(0,w.jsx)(v.Translation,{component:T.xv,whiteSpace:"nowrap",textStyle:["tableCell","primary"],translation:"modals.send.sendForm.".concat(e)}),(0,w.jsx)(b.N2,{noOfLines:1,isLoaded:!!s,width:"100%",children:(0,w.jsx)(l.Amount,{prefix:"(",suffix:")",decimals:0,textStyle:"captionSmaller",fontWeight:"600",color:"primary",value:null===s||void 0===s?void 0:s[e]})})]})]}),(0,w.jsxs)(T.gC,{spacing:2,width:"25%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,w.jsx)(v.Translation,{component:T.xv,textStyle:"captionSmall",translation:"common.gasFee"}),(0,w.jsx)(b.N2,{noOfLines:1,isLoaded:!!a,width:"100%",children:(0,w.jsx)(l.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:c.EI,value:null===a||void 0===a?void 0:a[e]})})]}),(0,w.jsxs)(T.gC,{spacing:2,width:"35%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,w.jsx)(v.Translation,{component:T.xv,textStyle:"captionSmall",translation:"modals.status.estimatedTime"}),(0,w.jsx)(b.N2,{noOfLines:1,isLoaded:!!r,width:"100%",children:(0,w.jsx)(T.xv,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",children:(0,y.mr)(null===r||void 0===r?void 0:r[e])})})]})]})},"transactionSpeed_".concat(e))}))}),(0,w.jsx)(v.Translation,{component:C.zx,translation:"common.save",onClick:function(){return e()},variant:"ctaFull"})]})},M={amount:"",asset:null,activeStep:0,activeItem:0,actionType:"",defaultAmount:"",baseActionType:"",dispatch:function(){},executeAction:!1,setActionIndex:function(){}},z=function(t,e){switch(e.type){case"SET_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{amount:e.payload});case"SET_ASSET":return(0,a.Z)((0,a.Z)({},t),{},{asset:e.payload});case"SET_EXECUTE_ACTION":return(0,a.Z)((0,a.Z)({},t),{},{executeAction:e.payload});case"SET_DEFAULT_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{defaultAmount:e.payload});case"SET_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{actionType:e.payload});case"SET_BASE_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{baseActionType:e.payload});case"SET_ACTIVE_STEP":return(0,a.Z)((0,a.Z)({},t),{},{activeStep:e.payload});default:return(0,a.Z)({},t)}},U=(0,j.createContext)(M),O=function(){return(0,j.useContext)(U)},P=function(t){var e=t.assetId,n=t.actions,o=t.defaultActiveIndex,d=void 0===o?0:o,f=(0,i.Z)(t,A),I=(0,j.useRef)(null),Z=(0,s.qM)(),b=(0,j.useState)(0),O=(0,r.Z)(b,2),P=O[0],L=O[1],N=(0,j.useReducer)(z,M),F=(0,r.Z)(N,2),B=F[0],D=F[1],W=(0,j.useState)(d),R=(0,r.Z)(W,2),G=R[0],q=R[1],Y=(0,j.useState)(!1),V=(0,r.Z)(Y,2),K=V[0],Q=V[1],X=(0,p.w)().selectors.selectAssetById,H=(0,h.R)(),J=H.state,$=J.gasPrice,tt=J.transaction,et=H.retry,nt=H.cleanTransaction,it=H.updateGasPrices,at=(0,j.useMemo)((function(){return n[G]}),[n,G]),rt=(0,j.useMemo)((function(){return n[G].component}),[n,G]),st=(0,j.useMemo)((function(){return B.activeStep?at.steps[B.activeStep-1]:at}),[at,B.activeStep]);(0,j.useEffect)((function(){L(B.activeStep)}),[B.activeStep]),(0,j.useEffect)((function(){return I.current&&(clearInterval(I.current),I.current=null),tt.status&&!["success","failed"].includes(tt.status)||(I.current=setInterval((function(){it()}),2e4)),function(){I.current&&(clearInterval(I.current),I.current=null)}}),[tt,it]),(0,j.useEffect)((function(){var t=st?st.type:at.type;D({type:"SET_ACTION_TYPE",payload:t}),D({type:"SET_BASE_ACTION_TYPE",payload:at.type})}),[at,st]);var ot=(0,j.useMemo)((function(){return tt.actionType||B.actionType}),[B.actionType,tt.actionType]),lt=(0,j.useMemo)((function(){var t,e;if(!X)return null===(t=B.asset)||void 0===t?void 0:t.name;var n=X(tt.assetId);return(null===n||void 0===n?void 0:n.name)||(null===(e=B.asset)||void 0===e?void 0:e.name)}),[X,B.asset,tt.assetId]),ct=(0,j.useMemo)((function(){return tt.amount?tt.amount:B.amount===c.Uf?"".concat(Z("trade.unlimited")," ").concat(lt):parseFloat(B.amount)}),[B.amount,lt,Z,tt.amount]);(0,j.useEffect)((function(){var t,e=at.steps.length+1;switch(null===tt||void 0===tt?void 0:tt.status){case"created":return L(e);case"pending":return L(e+1);case"failed":return 4001===(null===(t=tt.error)||void 0===t?void 0:t.code)?(nt(),L(B.activeStep)):L(e+1);case"success":L(e+1),B.activeStep&&D({type:"SET_EXECUTE_ACTION",payload:!0})}}),[tt,nt,at,B.activeStep]);var ut=(0,j.useMemo)((function(){return P>at.steps.length?null:K?(0,w.jsx)(T.kC,{top:5,right:8,zIndex:11,position:"absolute",children:(0,w.jsx)(S.lTq,{size:24,style:{cursor:"pointer"},onClick:function(){return Q((function(t){return!t}))}})}):(0,w.jsx)(C.zx,{p:2,right:4,zIndex:11,borderRadius:8,variant:"ctaBlue",position:"absolute",onClick:function(){return Q((function(t){return!t}))},children:(0,w.jsxs)(T.Ug,{spacing:1,children:[(0,w.jsx)(S.Qpb,{color:"primary",size:24}),(0,w.jsx)(l.Amount,{decimals:0,abbreviate:!1,textStyle:"titleSmall",color:"primary",value:$})]})})}),[at,P,$,K,Q]),dt=(0,j.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?D({type:"SET_ACTIVE_STEP",payload:0}):L(B.activeStep)}),[D,L,B.activeStep]);return(0,w.jsx)(g.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,w.jsx)(U.Provider,{value:(0,a.Z)((0,a.Z)({},B),{},{activeItem:P,dispatch:D,setActionIndex:q}),children:(0,w.jsxs)(u.Card.Flex,(0,a.Z)((0,a.Z)({p:4,width:"100%",overflow:"hidden",minHeight:"590px",direction:"column",position:"relative",alignItems:"flex-start",id:"operative-component"},f),{},{children:[ut,K&&(0,w.jsx)(T.gC,{top:0,left:0,flex:1,zIndex:10,bg:"card.bg",width:"100%",height:"100%",position:"absolute",id:"transaction-speed-selector",children:(0,w.jsx)(_,{save:function(){return Q(!1)}})}),(0,w.jsxs)(x.ChakraCarousel,{gap:0,activeItem:P,children:[(0,w.jsxs)(T.kC,{flex:1,width:"100%",direction:"column",alignItems:"flex-start",children:[(0,w.jsx)(T.Ug,{alignItems:"center",justifyContent:"space-between",id:"operative-component-header",children:(0,w.jsx)(k.mQ,{defaultIndex:0,variant:"button",index:G,onChange:function(t){q(t)},children:(0,w.jsx)(k.td,{children:n.map((function(t,e){return(0,w.jsx)(v.Translation,{mr:2,component:k.OK,translation:t.label},"action_".concat(e))}))})})}),(0,w.jsx)(T.kC,{flex:1,width:"100%",children:!!rt&&(0,w.jsx)(rt,{itemIndex:0})})]}),n[G].steps.map((function(t,e){var n=t.component;return(0,w.jsx)(n,(0,a.Z)({itemIndex:e+1,goBack:function(){return D({type:"SET_ACTIVE_STEP",payload:e})}},t.props),"step_".concat(e))})),(0,w.jsxs)(T.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:[(0,w.jsx)(m.NavBar,{goBack:function(){return L(B.activeStep)},translation:"modals.confirm.".concat(ot,".header")}),(0,w.jsx)(T.M5,{p:14,flex:1,width:"100%",children:(0,w.jsxs)(T.gC,{spacing:6,children:[(0,w.jsx)(S.lTP,{size:72}),(0,w.jsx)(v.Translation,{component:T.xv,translation:"trade.confirmTransactionWallet",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsxs)(T.gC,{spacing:1,children:[(0,w.jsx)(v.Translation,{component:T.xv,translation:"modals.".concat(ot,".status.confirm"),params:{},textStyle:"captionSmall",textAlign:"center"}),(0,w.jsx)(T.Ug,{children:(0,y.gA)(ct).isNaN()?(0,w.jsx)(T.xv,{textStyle:"bold",children:ct}):(0,w.jsx)(l.Amount,{textStyle:"bold",value:ct,minPrecision:parseFloat(ct)<1?5:3,suffix:" ".concat(lt)})})]})]})}),(0,w.jsxs)(T.Ug,{spacing:1,width:"100%",justifyContent:"center",children:[(0,w.jsx)(v.Translation,{component:T.xv,translation:"trade.transactionDontAppear",textStyle:"captionSmall"}),(0,w.jsx)(v.Translation,{component:T.xv,translation:"common.retry",textStyle:["captionSmall","link","bold"],onClick:function(){return et()}})]})]}),(0,w.jsx)(T.gC,{flex:1,spacing:0,alignItems:"flex-start",id:"transaction-status",children:(0,w.jsx)(E,{goBack:dt})})]})]}))})})}},53293:function(t,e,n){n.d(e,{Z:function(){return u}});var i=n(74165),a=n(15861),r=n(29439),s=n(7276),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=null;return function(){n&&clearTimeout(n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];n=setTimeout(e,t,a)}},l={x:0,y:0,top:0,left:0,width:0,height:0,right:0,bottom:0};function c(t){var e=t.getBoundingClientRect();return{x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom}}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,s.useState)(null),n=(0,r.Z)(e,2),u=n[0],d=n[1],m=(0,s.useState)(l),v=(0,r.Z)(m,2),f=v[0],p=v[1],x=(0,s.useCallback)((function(t){d(t)}),[]);return(0,s.useLayoutEffect)((function(){if("undefined"!==typeof window&&u){var e=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.requestAnimationFrame((function(){p(c(u))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e();var n=o(t||100,e);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}}}),[u,t]),[x,f,u]}}}]);