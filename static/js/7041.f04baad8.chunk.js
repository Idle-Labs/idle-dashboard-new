"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[7041,1617,1128,2734,6624,8951,907],{61617:function(e,t,n){n.r(t),n.d(t,{AssetLabel:function(){return u}});var a=n(1413),i=n(45987),r=n(3498),o=n(75712),s=n(45263),l=["assetId","size","spacing","extraFields"],u=function(e){var t=e.assetId,n=e.size,u=void 0===n?"sm":n,d=e.spacing,c=e.extraFields,m=(0,i.Z)(e,l);return(0,s.jsx)(o.AssetProvider,{wrapFlex:!1,assetId:t,children:(0,s.jsxs)(r.Ug,{spacing:d,alignItems:"center",justifyContent:"flex-start",children:[(0,s.jsx)(o.AssetProvider.Icon,{size:u}),(0,s.jsx)(o.AssetProvider.Name,(0,a.Z)({textStyle:"heading",fontSize:["15px","h3"],whiteSpace:"nowrap"},m)),null===c||void 0===c?void 0:c.map((function(e){return(0,s.jsx)(o.AssetProvider.GeneralData,{field:e},"extraField_".concat(e))}))]})})}},1128:function(e,t,n){n.r(t),n.d(t,{InputAmount:function(){return c}});var a=n(7276),i=n(99594),r=n(3498),o=n(3497),s=n(86059),l=n(1669),u=n(75712),d=n(45263),c=function(e){var t=e.inputHeight,n=e.amount,c=e.amountUsd,m=e.setAmount,v=e.isDisabled,p=void 0!==v&&v,f=(0,u.useAssetProvider)(),x=f.asset,g=f.underlyingAsset,h=(0,l.w)().selectors,y=h.selectAssetPriceUsd,b=h.selectVaultPrice,k=(0,a.useMemo)((function(){if(c)return(0,i.gA)(c);if(y&&b&&g&&x){var e=y(g.id),t=b(x.id);return"underlying"===x.type?parseFloat((0,i.gA)(n).times(e).toString())||0:parseFloat((0,i.gA)(n).times(e).times(t).toString())||0}}),[x,g,n,c,b,y]);return(0,d.jsxs)(r.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(o.II,{height:t,flex:1,type:"number",placeholder:"0",variant:"balance",value:(0,i.gA)(n).toString(),onChange:function(e){var t=e.target.value;m(Math.max(0,parseFloat(t)).toString())},disabled:p}),null!==c&&(0,d.jsx)(s.Amount.Usd,{abbreviateThresold:1e4,textStyle:"captionSmall",color:"brightGreen",prefix:"\u2248 $",value:(0,i.d5)(k).toString()})]})}},52734:function(e,t,n){n.r(t),n.d(t,{InputDate:function(){return d}});var a=n(1413),i=n(45987),r=(n(7276),n(99594)),o=n(3498),s=n(3497),l=n(45263),u=["inputHeight","value","setValue"],d=function(e){var t=e.inputHeight,n=e.value,d=e.setValue,c=(0,i.Z)(e,u);return(0,l.jsx)(o.Ug,{width:"100%",justifyContent:"space-between",children:(0,l.jsx)(s.II,(0,a.Z)({type:"date",height:t,flex:1,placeholder:"",variant:"balance",value:n||"",onChange:function(e){var t=e.target.value,n=(0,r.qF)(t).isValid()?(0,r.qF)(t):null;d(n)}},c))})}},66624:function(e,t,n){n.r(t),n.d(t,{DynamicActionFields:function(){return y}});var a=n(93433),i=n(1413),r=n(45987),o=n(5128),s=n(7276),l=n(87099),u=n(12056),d=n(86059),c=n(60062),m=n(99594),v=n(15542),p=n(1669),f=n(3498),x=n(45263),g=["assetId","field","amount","amountUsd","stakingPower"],h=function(e){var t,n,a=e.assetId,l=e.field,u=e.amount,h=e.amountUsd,y=e.stakingPower,b=(0,r.Z)(e,g),k=(0,p.w)(),A=k.stakingData,S=k.helpers.vaultFunctionsHelper,j=k.selectors,M=j.selectAssetById,w=j.selectVaultById,C=j.selectVaultGauge,I=(0,s.useMemo)((function(){return a&&M&&M(a)}),[a,M]),Z=(0,s.useMemo)((function(){return I&&M&&M(I.underlyingId)}),[I,M]),D=(0,s.useMemo)((function(){return a&&w&&w(a)}),[a,w]),F=(0,s.useMemo)((function(){return a&&C&&C(a)}),[a,C]),T=(0,s.useMemo)((function(){return F&&M&&M(F.id)}),[F,M]),Y=(0,s.useMemo)((function(){return(0,m.gA)(I.tvl).plus((0,m.d5)(u))}),[I,u]),E=(0,s.useMemo)((function(){return null===S||void 0===S?void 0:S.getVaultNewApr(I,D,(0,m.gA)(u))}),[I,D,u,S]),P=(0,s.useMemo)((function(){if((0,m.d5)(E).gt(0)){var e=(0,m.Bs)((0,m.d5)(E).div(100)).times(100),t=I.apyBreakdown?Object.keys(I.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var n=null===T||void 0===T?void 0:T.gaugeData;if(n){var a=(0,m.d5)(null===n||void 0===n?void 0:n.totalSupply).plus((0,m.d5)(u)),i=(0,m.d5)(null===n||void 0===n?void 0:n.totalSupply).div(a),r=I.apyBreakdown[t].times(i);return e.plus(r)}return e.plus(I.apyBreakdown[t]);case"harvest":var o=(0,m.gA)(I.tvl).div(Y),s=I.apyBreakdown[t].times(o);return e.plus(s);case"rewards":var l=(0,m.gA)(I.tvl).div(Y),d=I.apyBreakdown[t].times(l);return e.plus(d);default:return e.plus(I.apyBreakdown[t])}}),(0,m.gA)(0)):(0,m.gA)(0);return(0,m.gA)(e).plus(t)}return(0,m.d5)(null===I||void 0===I?void 0:I.apy)}),[I,u,Y,T,E]),U=(0,s.useMemo)((function(){return(0,m.d5)(h).gt(0)}),[h]),B=(0,s.useMemo)((function(){var e;return(0,m.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[I]),O=(0,s.useMemo)((function(){var e;return(0,m.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[I]),_=(0,s.useMemo)((function(){var e,t;return"flags"in D&&(0,m.d5)(null===(e=D.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?O.times(null===(t=D.flags)||void 0===t?void 0:t.withdrawFee):(0,m.gA)(0)}),[D,O]),z=(0,s.useMemo)((function(){var e;return o.Z.maximum(0,(0,m.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(_))}),[_,I]),L=(0,s.useMemo)((function(){return o.Z.minimum(1,(0,m.d5)(h).div(O))}),[h,O]),q=(0,s.useMemo)((function(){return o.Z.minimum(z,L.times(z))}),[z,L]),N=(0,s.useMemo)((function(){var e;return o.Z.maximum(0,(0,m.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===I||void 0===I?void 0:I.fee))}),[I]),V=(0,s.useMemo)((function(){return o.Z.minimum(N,(0,m.d5)(q).times(null===I||void 0===I?void 0:I.fee))}),[N,q,I]);D instanceof c.C&&(z=z.plus(V),q=q.plus(V));var G=U&&(0,m.d5)(u).lte(B),H="cta",$=null;switch(l){case"boost":var W=P&&null!==I&&void 0!==I&&null!==(t=I.baseApr)&&void 0!==t&&t.gt(0)?P.div(null===I||void 0===I?void 0:I.baseApr):(0,m.gA)(0);$=(0,x.jsxs)(f.xv,(0,i.Z)((0,i.Z)({},b),{},{textStyle:"titleSmall",color:"primary",children:[W.gt(9999)?">9999":W.toFixed(2),"x"]}));break;case"overperformance":var Q=(0,m.d5)(h).times((0,m.gA)(null===I||void 0===I?void 0:I.baseApr).div(100)),R=(0,m.d5)(h).times((0,m.gA)(null===I||void 0===I?void 0:I.apy).div(100)),K=U?R.minus(Q):null;$=(0,x.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},b),{},{value:K,suffix:"/year"}));break;case"newApy":$=(0,x.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},b),{},{value:P}));break;case"totalGain":$=(0,x.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:q.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},b),{},{value:G?q:null}));break;case"fee":$=(0,x.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:V.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},b),{},{value:G?-V:null}));break;case"withdrawFee":(0,m.d5)(null===(n=D.flags)||void 0===n?void 0:n.withdrawFee).gt(0)&&(H="orange",$=(0,x.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:_.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},b),{},{value:G?-_:null})));break;case"depositLimit":H="orange";var X=o.Z.maximum(0,(0,m.d5)(I.limit).minus(I.totalTvl).minus((0,m.d5)(u)));$=(0,x.jsx)(d.Amount,(0,i.Z)((0,i.Z)({suffix:" ".concat(Z.token),decimals:2,textStyle:"titleSmall",color:H},b),{},{value:X}));break;case"netGain":var J=o.Z.minimum(z.minus(V),(0,m.d5)(q).minus(V));$=(0,x.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:J.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},b),{},{value:G?J:null}));break;case"coverage":var ee=M(null===D||void 0===D?void 0:D.vaultConfig.Tranches.BB.address),te=ee.tvl&&Y?ee.tvl.div(Y).times(100):0;$=(0,x.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},b),{},{value:te}));break;case"stakingPoolShare":if(A){var ne=(0,m.d5)(u).div(A.stkIDLE.totalSupply.plus((0,m.d5)(u))).times(100);$=(0,x.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},b),{},{value:ne}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":$=(0,x.jsx)(d.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},b),{},{value:u}));break;case"stakingApy":if(A){var ae=(0,m.d5)(y).times(A.maxApr);$=(0,x.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},b),{},{value:ae}))}break;default:return null}return $?(0,x.jsxs)(f.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,x.jsx)(v.Translation,{component:f.xv,translation:"dynamicActionFields.".concat(l),textStyle:"captionSmall",color:H}),$]}):null},y=function(e){var t=(0,p.w)().selectors,n=t.selectAssetById,r=t.selectVaultById,o=e.assetId,d=e.action,c=(0,s.useMemo)((function(){return o&&n&&n(o)}),[o,n]),v=(0,s.useMemo)((function(){return o&&r&&r(o)}),[o,r]),g=(0,s.useMemo)((function(){return(null===v||void 0===v?void 0:v.type)&&u.A[v.type]}),[v]),y=(0,s.useMemo)((function(){return(0,m.d5)(null===c||void 0===c?void 0:c.limit).lt(l.jq)?(0,m.d5)(null===c||void 0===c?void 0:c.limit):(0,m.gA)(0)}),[c]),b=(0,s.useMemo)((function(){return!!y.gt(0)&&(0,m.gA)(null===c||void 0===c?void 0:c.totalTvl).gte(y)}),[c,y]),k=(0,s.useMemo)((function(){var e,t;if(null===g||void 0===g||null===(e=g.dynamicActionFields)||void 0===e||!e[d])return null;var n=null===g||void 0===g?void 0:g.dynamicActionFields[d];return v&&"flags"in v&&(null===(t=v.flags)||void 0===t?void 0:t.showLimitCap)&&"deposit"===d&&y.gt(0)&&!b&&(n=["depositLimit"].concat((0,a.Z)(n))),n}),[d,v,g,b,y]);return k?(0,x.jsx)(f.gC,{spacing:2,width:"100%",children:k.map((function(t){return(0,x.jsx)(h,(0,i.Z)((0,i.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}},78951:function(e,t,n){n.r(t),n.d(t,{EstimatedGasFees:function(){return v}});var a=n(7276),i=n(87099),r=n(86059),o=n(96699),s=n(3498),l=n(55967),u=n(39195),d=n(15542),c=n(23023),m=n(45263),v=function(){var e=(0,o.Fg)(),t=(0,u.Y)().chainToken,n=(0,c.R)().state,v=n.transactionSpeed,p=n.estimatedFees,f=n.estimatedFeesUsd,x=(0,a.useMemo)((function(){return p?p[v]:null}),[p,v]),g=(0,a.useMemo)((function(){return f?f[v]:null}),[f,v]);return(0,m.jsxs)(s.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,m.jsx)(l.Qpb,{color:e.colors.ctaDisabled,size:24}),(0,m.jsx)(d.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,m.jsx)(r.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:i.EI,value:g}),g&&(0,m.jsx)(r.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===t||void 0===t?void 0:t.symbol,")"),value:x,decimals:4})]})}},67041:function(e,t,n){n.r(t),n.d(t,{Stake:function(){return E}});var a=n(93433),i=n(74165),r=n(15861),o=n(29439),s=n(5128),l=n(54447),u=n(55967),d=n(38457),c=n(42828),m=n(13708),v=n(13461),p=n(33482),f=n(52734),x=n(39195),g=n(61617),h=n(15542),y=n(1128),b=n(1669),k=n(7276),A=n(23023),S=n(4710),j=n(78951),M=n(66624),w=n(86393),C=n(75712),I=n(87099),Z=n(43127),D=n(3498),F=n(88089),T=n(99594),Y=n(45263),E=function(e){var t=e.itemIndex,n=e.chainIds,E=void 0===n?[]:n,P=(0,k.useState)(""),U=(0,o.Z)(P,2),B=U[0],O=U[1],_=(0,k.useState)("0"),z=(0,o.Z)(_,2),L=z[0],q=z[1],N=(0,k.useState)(""),V=(0,o.Z)(N,2),G=V[0],H=V[1],$=(0,k.useState)(0),W=(0,o.Z)($,2),Q=W[0],R=W[1],K=(0,k.useState)(null),X=(0,o.Z)(K,2),J=X[0],ee=X[1],te=(0,v.x)().web3,ne=(0,x.Y)(),ae=ne.account,ie=ne.setChainId,re=ne.checkChainEnabled,oe=(0,C.useAssetProvider)(),se=oe.asset,le=oe.vault,ue=oe.underlyingAsset,de=oe.translate,ce=(0,A.R)(),me=ce.sendTransaction,ve=ce.setGasLimit,pe=ce.state,fe=pe.transaction,xe=pe.block,ge=(0,S.useOperativeComponent)(),he=ge.dispatch,ye=ge.activeItem,be=ge.activeStep,ke=ge.executeAction,Ae=ge.setActionIndex,Se=(0,b.w)(),je=Se.stakingData,Me=Se.selectors,we=Me.selectAssetBalance,Ce=Me.selectAssetPriceUsd,Ie=(0,k.useMemo)((function(){return re(E)}),[E,re]),Ze=(0,k.useMemo)((function(){return we?we(null===ue||void 0===ue?void 0:ue.id):(0,T.gA)(0)}),[we,null===ue||void 0===ue?void 0:ue.id]),De=(0,k.useMemo)((function(){if(Ce&&ue){var e=Ce(ue.id);return(0,T.d5)(L).times(e)}}),[ue,L,Ce]),Fe=(0,k.useMemo)((function(){return[{type:"amount",action:"increaseAmount",label:"staking.increaseAmount"},{type:"time",action:"increaseTime",label:"staking.increaseTime"}]}),[]),Te=(0,k.useMemo)((function(){var e,t;return!(null===je||void 0===je||null===(e=je.position)||void 0===e||!e.lockEnd||!xe)&&(0,T.qF)(null===je||void 0===je||null===(t=je.position)||void 0===t?void 0:t.lockEnd).isSameOrBefore((0,T.qF)(1e3*xe.timestamp))}),[je,xe]),Ye=(0,k.useMemo)((function(){var e;return null===je||void 0===je||null===(e=je.position)||void 0===e?void 0:e.deposited.gt(0)}),[je]),Ee=(0,k.useMemo)((function(){return Ye?Fe[Q]:null}),[Ye,Fe,Q]),Pe=(0,k.useMemo)((function(){return Ee?Ee.type:null}),[Ee]),Ue=(0,k.useMemo)((function(){return Ee?Ee.action:"stake"}),[Ee]),Be=(0,k.useMemo)((function(){var e,t;return null!==je&&void 0!==je&&null!==(e=je.position)&&void 0!==e&&e.lockEnd?(0,T.qF)(null===je||void 0===je||null===(t=je.position)||void 0===t?void 0:t.lockEnd).add(I.Bv,"second"):(0,T.qF)().add(I.z1,"second")}),[je]),Oe=(0,k.useMemo)((function(){return(0,T.qF)().add(I.$O,"second")}),[]),_e=(0,k.useMemo)((function(){var e;if("amount"===Pe&&null!==je&&void 0!==je&&null!==(e=je.position)&&void 0!==e&&e.lockEnd)return Math.round(je.position.lockEnd/1e3);var t=(0,T.qF)(),n=J&&J.set("hour",t.hour()).set("minute",t.minute()).set("second",t.second());return n?Math.round(n.toDate().getTime()/1e3):0}),[Pe,je,J]),ze=(0,k.useMemo)((function(){var e=Math.max(0,_e-Math.round(Date.now()/1e3));return(0,T.gA)(e).div(I.$O)}),[_e]),Le=(0,k.useMemo)((function(){var e;return(0,T.d5)(null===je||void 0===je||null===(e=je.position)||void 0===e?void 0:e.deposited)}),[je]),qe=(0,k.useMemo)((function(){var e,t;return"time"===Pe&&null!==je&&void 0!==je&&je.position?null===je||void 0===je||null===(t=je.position)||void 0===t?void 0:t.deposited.times(ze):(0,T.d5)(null===je||void 0===je||null===(e=je.position)||void 0===e?void 0:e.balance).plus((0,T.d5)(L).times(ze))}),[Pe,je,ze,L]);(0,k.useEffect)((function(){var e;null!==je&&void 0!==je&&null!==(e=je.position)&&void 0!==e&&e.lockEnd&&"time"===Pe&&ee(Be)}),[je,ee,Pe,Be]);var Ne=(0,k.useCallback)((function(){return J&&J.startOf("day").isSameOrAfter(Be.startOf("day"))&&J.startOf("day").isSameOrBefore(Oe.startOf("day"))}),[J,Be,Oe]),Ve=(0,k.useMemo)((function(){return[{label:"staking.6months",value:6,timeframe:"month"},{label:"staking.1year",value:1,timeframe:"year"},{label:"staking.4years",value:I.$O,timeframe:"second"}]}),[]),Ge=(0,k.useMemo)((function(){if(O(""),H(""),!Pe||"amount"===Pe){if((0,T.gA)(L).isNaN()||(0,T.gA)(L).lte(0))return!0;if((0,T.gA)(L).gt(Ze))return O(de("trade.errors.insufficientFundsForAmount",{symbol:null===ue||void 0===ue?void 0:ue.name})),!0}return!(Pe&&"time"!==Pe||Ne())&&(H(de("time"===Pe?"trade.errors.stakingIncreaseLockEndDateNotCorrect":"trade.errors.stakingLockEndDateNotCorrect")),!0)}),[L,Pe,Ne,Ze,ue,de]),He=(0,k.useCallback)((0,r.Z)((0,i.Z)().mark((function e(){var t,n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue&&le&&"getAllowanceContract"in le){e.next=2;break}return e.abrupt("return",(0,T.gA)(0));case 2:if(null!==ae&&void 0!==ae&&ae.address){e.next=4;break}return e.abrupt("return",(0,T.gA)(0));case 4:if(t=le.getAllowanceContract()){e.next=7;break}return e.abrupt("return",(0,T.gA)(0));case 7:return n=(0,T.WP)(le),e.next=10,(0,T.RC)(t,ae.address,n);case 10:return a=e.sent,e.abrupt("return",(0,T.I0)(a,ue.decimals));case 12:case"end":return e.stop()}}),e)}))),[ue,le,null===ae||void 0===ae?void 0:ae.address]),$e=(0,k.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ae&&!Ge&&le&&"getDepositContractSendMethod"in le&&"getDepositParams"in le&&le instanceof p.y&&(0,r.Z)((0,i.Z)().mark((function t(){var n,r,o,s,l,u,d,c,v,p,f,x;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ye){t.next=26;break}if(!e){t.next=7;break}return t.next=4,He();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=(0,T.gA)(L);case 8:if(!t.t0.gte(L)){t.next=23;break}if(n=_e,r=(0,a.Z)(Ve).pop(),(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))!==(0,T.qF)().add(r.value,r.timeframe).format("YYYY-MM-DD")){t.next=17;break}return t.next=15,(0,T.Qg)(te);case 15:(o=t.sent)&&(n=+o.timestamp+I.$O);case 17:(0,m.tM)(se,De),s=le.getDepositParams(L,n),l=le.getDepositContractSendMethod(s),me(le.id,null===ue||void 0===ue?void 0:ue.id,l,Ue),t.next=24;break;case 23:he({type:"SET_ACTIVE_STEP",payload:1});case 24:t.next=51;break;case 26:t.t1=Pe,t.next="amount"===t.t1?29:"time"===t.t1?39:50;break;case 29:if(!e){t.next=35;break}return t.next=32,He();case 32:t.t2=t.sent,t.next=36;break;case 35:t.t2=(0,T.gA)(L);case 36:return t.t2.gte(L)?(u=le.getIncreaseAmountParams(L),d=le.getIncreaseAmountContractSendMethod(u),me(le.id,null===ue||void 0===ue?void 0:ue.id,d,Ue)):he({type:"SET_ACTIVE_STEP",payload:1}),t.abrupt("break",51);case 39:if(c=_e,v=(0,a.Z)(Ve).pop(),(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))!==(0,T.qF)().add(v.value,v.timeframe).format("YYYY-MM-DD")){t.next=46;break}return t.next=44,(0,T.Qg)(te);case 44:(p=t.sent)&&(c=+p.timestamp+I.$O);case 46:return f=le.getIncreaseTimeParams(c),x=le.getIncreaseTimeContractSendMethod(f),me(le.id,null===ue||void 0===ue?void 0:ue.id,x,Ue,(0,T.p6)(J,"YYYY-MM-DD HH:mm",!0)),t.abrupt("break",51);case 50:return t.abrupt("break",51);case 51:case"end":return t.stop()}}),t)})))()}),[ae,se,Ye,Ue,Pe,Ge,L,De,Ve,te,J,_e,le,ue,he,He,me]);(0,k.useEffect)((function(){ke||be!==t||"success"!==fe.status||q("")}),[ke,fe.status,be,t]);var We=(0,k.useCallback)((function(){null!==ue&&void 0!==ue&&ue.balance&&q(ue.balance.toString())}),[ue]),Qe=(0,k.useCallback)((0,r.Z)((0,i.Z)().mark((function e(){var t,n,a,r,o,l,u,d,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le&&"getDepositContractSendMethod"in le&&"getDepositParams"in le&&le instanceof p.y){e.next=2;break}return e.abrupt("return");case 2:if(t=le.getMethodDefaultGasLimit("stake"),ae&&!Ze.lte(0)&&Ne()){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,He();case 7:if(!(n=e.sent).lte(0)){e.next=10;break}return e.abrupt("return",t);case 10:if(a=s.Z.minimum(Ze,n),r={from:null===ae||void 0===ae?void 0:ae.address},o=null,Ye?"amount"===Pe?(u=le.getIncreaseAmountParams(a.toFixed()),o=le.getIncreaseAmountContractSendMethod(u)):"time"===Pe&&(d=le.getIncreaseTimeParams(_e),o=le.getIncreaseTimeContractSendMethod(d)):(l=le.getDepositParams(a.toFixed(),_e),o=le.getDepositContractSendMethod(l)),o){e.next=16;break}return e.abrupt("return",t);case 16:return e.next=18,(0,T.$K)(o,r);case 18:if(e.t0=e.sent,e.t0){e.next=21;break}e.t0=t;case 21:return c=e.t0,e.abrupt("return",c);case 23:case"end":return e.stop()}}),e)}))),[ae,Ye,Pe,le,Ne,_e,He,Ze]);(0,k.useEffect)((function(){ye===t&&(0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:t=e.sent,ve(t);case 4:case"end":return e.stop()}}),e)})))()}),[ye,t,Qe,ve]),(0,k.useEffect)((function(){ye===t&&(he({type:"SET_AMOUNT",payload:L}),he({type:"SET_DEFAULT_AMOUNT",payload:L}),he({type:"SET_ASSET",payload:ue}),ke&&($e(!1),he({type:"SET_EXECUTE_ACTION",payload:!1})))}),[L,ye,ue,t,he,ke,$e]);var Re=(0,k.useMemo)((function(){return ae?(0,Y.jsx)(h.Translation,{component:Z.zx,translation:"staking.".concat(Ue),disabled:Ge,onClick:$e,variant:"ctaFull"}):(0,Y.jsx)(w.ConnectWalletButton,{variant:"ctaFull"})}),[ae,Ge,Ue,$e]),Ke=(0,k.useCallback)((function(e,t){var n=(0,T.dU)((0,T.dk)((0,T.qF)().add(e,t),Be),Oe);ee(n)}),[ee,Be,Oe]),Xe=(0,k.useCallback)((function(e){R(e)}),[R]),Je=(0,k.useMemo)((function(){return Ye&&"amount"!==Pe?null:(0,Y.jsxs)(D.Ug,{width:"100%",spacing:[3,4],alignItems:"flex-start",children:[(0,Y.jsx)(D.xu,{pt:8,width:"110px",children:(0,Y.jsx)(g.AssetLabel,{assetId:null===se||void 0===se?void 0:se.id})}),(0,Y.jsxs)(D.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,Y.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,Y.jsxs)(D.gC,{spacing:2,alignItems:"flex-start",children:[(0,Y.jsx)(y.InputAmount,{amount:L,amountUsd:null,setAmount:q}),(0,Y.jsxs)(D.Ug,{width:"100%",justifyContent:"space-between",children:[(0,Y.jsxs)(D.Ug,{spacing:1,children:[(0,Y.jsx)(h.Translation,{component:D.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,Y.jsx)(C.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,Y.jsx)(Z.zx,{variant:"selector",onClick:We,children:"MAX"})]})]})}),B&&(0,Y.jsx)(D.xv,{textStyle:"captionSmaller",color:"orange",children:B})]})]})}),[se,L,q,B,We,Ye,Pe]),et=(0,k.useMemo)((function(){return Ye&&"time"!==Pe?null:(0,Y.jsxs)(D.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,Y.jsx)(D.xu,{pt:8,width:"110px",children:(0,Y.jsx)(h.Translation,{translation:"staking.lockEnd",textStyle:"titleSmall",fontSize:"md",color:"primary",whiteSpace:"nowrap"})}),(0,Y.jsxs)(D.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,Y.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,Y.jsxs)(D.gC,{spacing:2,alignItems:"flex-start",children:[(0,Y.jsx)(f.InputDate,{value:null===J||void 0===J?void 0:J.format("YYYY-MM-DD"),setValue:ee,min:Be.format("YYYY-MM-DD"),max:Oe.format("YYYY-MM-DD")}),(0,Y.jsx)(D.MI,{spacing:1,width:"100%",columns:Ve.length,justifyContent:"space-between",children:Ve.map((function(e){var t=(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))===(0,T.qF)().add(e.value,e.timeframe).format("YYYY-MM-DD");return(0,Y.jsx)(h.Translation,{translation:e.label,component:Z.zx,variant:"selector","aria-selected":t,onClick:function(){return Ke(e.value,e.timeframe)}},"option_".concat(e.label))}))})]})}),G&&(0,Y.jsx)(D.xv,{textStyle:"captionSmaller",color:"orange",children:G})]})]})}),[Ye,Pe,J,ee,Be,Oe,Ve,Ke,G]);return(0,Y.jsx)(C.AssetProvider,{flex:1,width:"100%",assetId:null===se||void 0===se?void 0:se.underlyingId,children:Ie?Te?(0,Y.jsx)(D.M5,{px:10,flex:1,width:"100%",children:(0,Y.jsxs)(D.gC,{spacing:6,children:[(0,Y.jsx)(u.ppH,{size:72}),(0,Y.jsxs)(D.gC,{spacing:4,children:[(0,Y.jsx)(h.Translation,{component:D.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,Y.jsx)(h.Translation,{component:D.xv,translation:"staking.canWithdrawLock",params:{amount:(0,T.dm)(Le),asset:null===se||void 0===se?void 0:se.name},textStyle:"captionSmall",textAlign:"center"}),(0,Y.jsx)(h.Translation,{component:Z.zx,translation:"common.unstake",onClick:function(){return Ae(1)},variant:"ctaPrimary",px:10})]})]})}):(0,Y.jsxs)(D.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,Y.jsxs)(D.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[Ye&&(0,Y.jsx)(F.mQ,{width:"100%",defaultIndex:0,variant:"buttonTertiary",onChange:Xe,children:(0,Y.jsx)(F.td,{width:"100%",children:(0,Y.jsx)(D.MI,{spacing:2,width:"100%",columns:Fe.length,children:Fe.map((function(e){return(0,Y.jsx)(h.Translation,{component:F.OK,translation:e.label},"option_".concat(e.label))}))})})}),Je,et,qe.gt(0)&&(0,Y.jsx)(M.DynamicActionFields,{assetId:null===se||void 0===se?void 0:se.id,action:Ue,amount:qe.toFixed(),amountUsd:qe.toFixed(),stakingPower:ze})]}),(0,Y.jsxs)(D.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,Y.jsx)(j.EstimatedGasFees,{}),Re]})]}):(0,Y.jsx)(D.M5,{px:10,flex:1,width:"100%",children:(0,Y.jsxs)(D.gC,{spacing:6,children:[(0,Y.jsx)(c.p8b,{size:72}),(0,Y.jsxs)(D.gC,{spacing:4,children:[(0,Y.jsx)(h.Translation,{component:D.xv,translation:"staking.networkNotSupported",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,Y.jsx)(h.Translation,{component:D.xv,translation:"staking.switchToMainnet",textStyle:"captionSmall",textAlign:"center"}),(0,Y.jsx)(h.Translation,{component:Z.zx,translation:"common.switchNetwork",onClick:function(){return ie(d.zS)},variant:"ctaPrimary",px:10})]})]})})})}}}]);