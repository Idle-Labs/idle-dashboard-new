"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[5276,219],{75276:function(e,t,n){n.r(t),n.d(t,{CompositionChart:function(){return f}});var r=n(7276),a=n(99594),i=n(79681),o=n(96699),u=n(3498),l=n(66288),s=n(90219),c=n(1669),d=n(1494),h=n(45263),f=function(e){var t=e.assetIds,n=e.strategies,f=e.type,g=(0,o.Fg)(),v=(0,i.qM)(),p=(0,l.X)().isMobile,m=(0,c.w)().protocolToken,y=(0,d.O)({assetIds:t,strategies:n}),b=y.compositions,A=y.colors,x=(0,r.useCallback)((function(e){var t;if("assets"===f){var n=b[f].reduce((function(e,t){return e+t.value}),0),r=function(e){return"$".concat((0,a.dm)(e))},i=null===e||void 0===e||null===(t=e.extraData)||void 0===t?void 0:t.asset,o=(null===i||void 0===i?void 0:i.icon)||(null===m||void 0===m?void 0:m.icon),u=(null===i||void 0===i?void 0:i.name)||v("dashboard.portfolio.totalChart"),l=r(e?e.value:n);return e&&!i?null:(0,h.jsxs)(h.Fragment,{children:[o&&(0,h.jsx)("image",{y:"35%",href:o,height:"34",width:"34",textAnchor:"middle",x:p?"44.5%":"46.5%"}),(0,h.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:l}),(0,h.jsx)("text",{x:"50%",y:"61%",fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",fill:g.colors.cta,children:u})]})}}),[m,b,g,v,f,p]);return(0,h.jsx)(u.xu,{height:350,width:"100%",children:b&&b[f]&&b[f].length?(0,h.jsx)(s.DonutChart,{colors:A[f],data:b[f],getSliceData:x}):(0,h.jsx)(s.DonutChart,{colors:{placeholder1:"#4c515d",placeholder2:"#2a3243",placeholder3:"#727680"},data:[{value:40,label:"placeholder1"},{value:60,label:"placeholder2"},{value:30,label:"placeholder3"}]})})}},90219:function(e,t,n){n.r(t),n.d(t,{DonutChart:function(){return m},PieChart:function(){return f}});var r=n(1413),a=n(29439),i=n(14380),o=n(7276),u=n(28547),l=n(87563),s=n(68165),c=n(77806),d=n(45263),h={top:0,right:0,bottom:0,left:0};function f(e){var t=e.data,n=e.colors,l=e.width,s=e.height,f=e.margin,g=void 0===f?h:f,v=e.animate,m=void 0===v||v,y=e.getSliceData,b=(0,o.useState)(null),A=(0,a.Z)(b,2),x=A[0],M=A[1],j=l-g.left-g.right,Z=s-g.top-g.bottom,w=Math.min(j,Z)/2,C=Z/2,k=j/2,O=t.map((function(e){return e.label})),P=O.map((function(e){return n[e]})),D=(0,u.Z)({domain:O,range:P}),I=y&&y(x);return(0,d.jsxs)("svg",{width:l,height:s,children:[(0,d.jsx)("rect",{rx:14,width:l,height:s,fill:"url('#visx-pie-gradient')"}),I,(0,d.jsx)(i.Z,{top:C+g.top,left:k+g.left,children:(0,d.jsx)(c.Z,{padAngle:0,cornerRadius:0,pieValue:function(e){return e.value},outerRadius:w,innerRadius:w-30,data:t,children:function(e){return(0,d.jsx)(p,(0,r.Z)((0,r.Z)({},e),{},{animate:m,onMouseOver:function(e){var t=e.data;return M(t)},getKey:function(e){return e.data.label},onMouseOut:function(){return M(null)},getColor:function(e){return D(e.data.label)}}))}})})]})}var g=function(e){var t=e.endAngle;return{startAngle:t>Math.PI?2*Math.PI:0,endAngle:t>Math.PI?2*Math.PI:0,opacity:0}},v=function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,opacity:1}};function p(e){var t=e.animate,n=e.arcs,a=e.path,i=e.getKey,o=e.getColor,u=e.onMouseOut,l=e.onMouseOver,c=e.onClickDatum;return(0,s.useTransition)(n,{from:t?g:v,enter:v,update:v,leave:t?g:v,keys:i})((function(e,t){return(0,d.jsx)("g",{children:(0,d.jsx)(s.animated.path,{d:(0,s.interpolate)([e.startAngle,e.endAngle],(function(e,n){return a((0,r.Z)((0,r.Z)({},t),{},{startAngle:e,endAngle:n}))})),fill:o(t),onClick:function(){return c&&c(t)},onMouseOver:function(){return l&&l(t)},onMouseOut:function(){return u&&u(t)},onTouchStart:function(){return c&&c(t)}})},Math.random())}))}var m=function(e){var t=e.data,n=e.colors,r=e.getSliceData;return(0,d.jsx)(l.Z,{debounceTime:10,children:function(e){return(0,d.jsx)(f,{data:t,colors:n,width:e.width,height:e.height,getSliceData:r})}})}},1494:function(e,t,n){n.d(t,{O:function(){return d}});var r=n(93433),a=n(4942),i=n(1413),o=n(7276),u=n(99594),l=n(79681),s=n(12056),c=n(1669),d=function(e){var t=e.assetIds,n=e.strategies,d=(0,l.qM)(),h=(0,c.w)().selectors,f=h.selectAssetById,g=h.selectAssetsByIds,v=(0,o.useMemo)((function(){return g?g(t):[]}),[t,g]),p=Object.keys(s.A).reduce((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},t,{balance:(0,u.gA)(0),weightedRealizedApy:(0,u.gA)(0)}))}),{}),m=(0,o.useMemo)((function(){return v.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition&&!(0,u.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).isNaN()?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable)),e):e}),p)}),[v,n,p]),y=(0,o.useMemo)((function(){return v.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=f(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,u.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[v,n,f]),b={assets:[],strategies:[]};b.strategies=(0,o.useMemo)((function(){return Object.keys(m).map((function(e){return{label:d(s.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:s.A[e]},value:parseFloat(m[e].balance)}}))}),[m,d]),b.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var a=f(t);return!a||a.type&&(!n||n.includes(a.type))?e:[].concat((0,r.Z)(e),[{label:a.name,extraData:{asset:a},value:parseFloat(y[t])}])}),[])}),[y,f,n]);var A={assets:{},strategies:{}};return A.strategies=(0,o.useMemo)((function(){return Object.values(s.A).reduce((function(e,t){var n=d(t.label);return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},n,t.color))}),{})}),[d]),A.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var n=f(t);if(!n)return e;var r=n.name;return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},r,n.color))}),{})}),[y,f]),{colors:A,compositions:b}}}}]);