"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2839,4219],{82839:function(e,t,n){n.r(t),n.d(t,{CompositionChart:function(){return h}});var r=n(71233),a=n(12115),i=n(92508),o=n(65304),u=n(52137),l=n(94219),s=n(9579),c=n(70396),d=n(37881),h=function(e){var t=e.assetIds,n=e.strategies,h=e.type,f=(0,o.Fg)(),g=(0,i.qM)(),p=(0,s.w)().protocolToken,v=(0,c.O)({assetIds:t,strategies:n}),m=v.compositions,y=v.colors,b=(0,r.useCallback)((function(e){var t;if("assets"===h){var n=m[h].reduce((function(e,t){return e+t.value}),0),r=function(e){return"$".concat((0,a.dm)(e))},i=null===e||void 0===e||null===(t=e.extraData)||void 0===t?void 0:t.asset,o=(null===i||void 0===i?void 0:i.icon)||(null===p||void 0===p?void 0:p.icon),u=(null===i||void 0===i?void 0:i.name)||g("dashboard.portfolio.totalChart"),l=r(e?e.value:n);return e&&!i?null:(0,d.jsxs)(d.Fragment,{children:[o&&(0,d.jsx)("image",{y:"35%",x:"46.5%",href:o,height:"34",width:"34",textAnchor:"middle"}),(0,d.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:l}),(0,d.jsx)("text",{x:"50%",y:"61%",fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",fill:f.colors.cta,children:u})]})}}),[p,m,f,g,h]);return(0,d.jsx)(u.xu,{height:350,width:"100%",children:m&&m[h]&&m[h].length?(0,d.jsx)(l.DonutChart,{colors:y[h],data:m[h],getSliceData:b}):(0,d.jsx)(l.DonutChart,{colors:{placeholder1:"#4c515d",placeholder2:"#2a3243",placeholder3:"#727680"},data:[{value:40,label:"placeholder1"},{value:60,label:"placeholder2"},{value:30,label:"placeholder3"}]})})}},94219:function(e,t,n){n.r(t),n.d(t,{DonutChart:function(){return m},PieChart:function(){return f}});var r=n(1413),a=n(29439),i=n(46922),o=n(71233),u=n(98197),l=n(50285),s=n(90071),c=n(11030),d=n(37881),h={top:0,right:0,bottom:0,left:0};function f(e){var t=e.data,n=e.colors,l=e.width,s=e.height,f=e.margin,g=void 0===f?h:f,p=e.animate,m=void 0===p||p,y=e.getSliceData,b=(0,o.useState)(null),x=(0,a.Z)(b,2),A=x[0],j=x[1],M=l-g.left-g.right,Z=s-g.top-g.bottom,w=Math.min(M,Z)/2,k=Z/2,C=M/2,O=t.map((function(e){return e.label})),D=O.map((function(e){return n[e]})),I=(0,u.Z)({domain:O,range:D}),P=y&&y(A);return(0,d.jsxs)("svg",{width:l,height:s,children:[(0,d.jsx)("rect",{rx:14,width:l,height:s,fill:"url('#visx-pie-gradient')"}),P,(0,d.jsx)(i.Z,{top:k+g.top,left:C+g.left,children:(0,d.jsx)(c.Z,{padAngle:0,cornerRadius:0,pieValue:function(e){return e.value},outerRadius:w,innerRadius:w-30,data:t,children:function(e){return(0,d.jsx)(v,(0,r.Z)((0,r.Z)({},e),{},{animate:m,onMouseOver:function(e){var t=e.data;return j(t)},getKey:function(e){return e.data.label},onMouseOut:function(){return j(null)},getColor:function(e){return I(e.data.label)}}))}})})]})}var g=function(e){var t=e.endAngle;return{startAngle:t>Math.PI?2*Math.PI:0,endAngle:t>Math.PI?2*Math.PI:0,opacity:0}},p=function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,opacity:1}};function v(e){var t=e.animate,n=e.arcs,a=e.path,i=e.getKey,o=e.getColor,u=e.onMouseOut,l=e.onMouseOver,c=e.onClickDatum;return(0,s.useTransition)(n,{from:t?g:p,enter:p,update:p,leave:t?g:p,keys:i})((function(e,t,n){n.key;return(0,d.jsx)("g",{children:(0,d.jsx)(s.animated.path,{d:(0,s.interpolate)([e.startAngle,e.endAngle],(function(e,n){return a((0,r.Z)((0,r.Z)({},t),{},{startAngle:e,endAngle:n}))})),fill:o(t),onClick:function(){return c&&c(t)},onMouseOver:function(){return l&&l(t)},onMouseOut:function(){return u&&u(t)},onTouchStart:function(){return c&&c(t)}})},Math.random())}))}var m=function(e){var t=e.data,n=e.colors,r=e.getSliceData;return(0,d.jsx)(l.Z,{debounceTime:10,children:function(e){return(0,d.jsx)(f,{data:t,colors:n,width:e.width,height:e.height,getSliceData:r})}})}},70396:function(e,t,n){n.d(t,{O:function(){return d}});var r=n(93433),a=n(4942),i=n(1413),o=n(71233),u=n(12115),l=n(92508),s=n(7453),c=n(9579),d=function(e){var t=e.assetIds,n=e.strategies,d=(0,l.qM)(),h=(0,c.w)().selectors,f=h.selectAssetById,g=h.selectAssetsByIds,p=(0,o.useMemo)((function(){return g?g(t):[]}),[t,g]),v=Object.keys(s.A).reduce((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},t,{balance:(0,u.gA)(0),weightedRealizedApy:(0,u.gA)(0)}))}),{}),m=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){return t.type&&t.vaultPosition?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable)),e):e}),v)}),[p,n,v]),y=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=f(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,u.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[p,n,f]),b={assets:[],strategies:[]};b.strategies=(0,o.useMemo)((function(){return Object.keys(m).map((function(e){return{label:d(s.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:s.A[e]},value:parseFloat(m[e].balance)}}))}),[m,d]),b.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var a=f(t);return!a||a.type&&(!n||n.includes(a.type))?e:[].concat((0,r.Z)(e),[{label:a.name,extraData:{asset:a},value:parseFloat(y[t])}])}),[])}),[y,f,n]);var x={assets:{},strategies:{}};return x.strategies=(0,o.useMemo)((function(){return Object.values(s.A).reduce((function(e,t){var n=d(t.label);return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},n,t.color))}),{})}),[d]),x.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var n=f(t);if(!n)return e;var r=n.name;return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},r,n.color))}),{})}),[y,f]),{colors:x,compositions:b}}}}]);
//# sourceMappingURL=2839.7771efa8.chunk.js.map