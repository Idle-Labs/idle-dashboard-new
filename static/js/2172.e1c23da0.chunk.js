"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2172,494,8129],{60494:function(e,t,n){n.r(t),n.d(t,{SearchBar:function(){return u}});var a=n(29439),i=n(55967),r=n(79681),s=n(7276),l=n(66288),o=n(3498),c=n(3497),d=n(45263),u=function(e){var t=e.placeholder,n=e.handleSearchChange,u=(0,l.X)().theme,f=(0,r.qM)(),x=(0,s.useState)(""),g=(0,a.Z)(x,2),p=g[0],h=g[1];return(0,s.useEffect)((function(){n(p)}),[p,n]),(0,d.jsx)(o.Ug,{children:(0,d.jsxs)(c.BZ,{children:[(0,d.jsx)(c.II,{type:"text",placeholder:f(t),variant:"search",onChange:function(e){return h(e.target.value)}}),(0,d.jsx)(c.xH,{children:(0,d.jsx)(i.vU7,{size:24,color:u.colors.cta})})]})})}},88129:function(e,t,n){n.r(t),n.d(t,{StrategyOverview:function(){return h}});var a=n(1413),i=n(29439),r=n(23537),s=n(7276),l=n(86059),o=n(15542),c=n(1669),d=n(9597),u=n(3498),f=n(43127),x=n(89030),g=n(1494),p=n(45263),h=function(e){var t=e.textProps,n=e.showHeader,h=void 0===n||n,m=e.showLoading,v=void 0===m||m,j=e.strategies,y=(0,s.useState)(!0),w=(0,i.Z)(y,2),b=w[0],A=w[1],S=(0,c.w)(),C=S.isPortfolioAccountReady,T=S.vaultsPositions,I=(0,g.O)({assetIds:Object.keys(T),strategies:j}).compositions,Z=(0,s.useMemo)((function(){return I.strategies.filter((function(e){return j.includes(e.extraData.strategy.type)})).reduce((function(e,t){return e.redeemable=e.redeemable.plus(t.value),e.earnings=e.earnings.plus(t.extraData.earnings),e.deposited=e.deposited.plus(t.extraData.deposited),e.realizedApy=e.realizedApy.plus((0,r.gA)(t.extraData.avgRealizedApy).times(t.value)),e}),{earnings:(0,r.gA)(0),deposited:(0,r.gA)(0),redeemable:(0,r.gA)(0),realizedApy:(0,r.gA)(0)})}),[I,j]);return Z.realizedApy=Z.redeemable.gt(0)?Z.realizedApy.div(Z.redeemable):(0,r.gA)(0),v||C?(0,p.jsxs)(u.gC,{spacing:4,width:"full",alignItems:"flex-start",children:[h&&(0,p.jsxs)(u.Ug,{height:10,spacing:2,children:[(0,p.jsx)(o.Translation,{translation:"defi.yourWallet",textStyle:"heading",color:"primary",fontSize:"lg"}),(0,p.jsx)(f.zx,{variant:"unstyled",onClick:function(){return A((function(e){return!e}))},children:b?(0,p.jsx)(d.Zju,{size:24,color:"white"}):(0,p.jsx)(d.I0d,{size:24,color:"white"})})]}),(0,p.jsxs)(u.MI,{columns:3,width:"full",spacing:[2,10],justifyContent:"space-between",children:[(0,p.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,p.jsx)(o.Translation,{translation:"defi.deposits",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,p.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,p.jsx)(l.Amount.Usd,(0,a.Z)({value:Z.deposited,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:b?{}:{filter:"blur(7px)"}},t))})]}),(0,p.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,p.jsx)(o.Translation,{translation:"defi.earnings",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,p.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,p.jsx)(l.Amount.Usd,(0,a.Z)({value:Z.earnings,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:b?{}:{filter:"blur(7px)"}},t))})]}),(0,p.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,p.jsx)(o.Translation,{translation:"defi.realizedApy",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,p.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,p.jsx)(l.Amount.Percentage,(0,a.Z)({value:Z.realizedApy,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:b?{}:{filter:"blur(7px)"}},t))})]})]})]}):null}},52172:function(e,t,n){n.r(t),n.d(t,{TableField:function(){return M},Tranches:function(){return P}});var a=n(93433),i=n(1413),r=n(29439),s=n(54447),l=n(79681),o=n(95173),c=n(86059),d=n(55967),u=n(4432),f=n(39807),x=n(66288),g=n(60494),p=n(75349),h=n(82172),m=n(58316),v=n(15542),j=n(1669),y=n(75712),w=n(7276),b=n(88129),A=n(72877),S=n(23537),C=n(89030),T=n(3498),I=n(43127),Z=n(2092),k=n(82137),z=n(45263),M=function(e){var t=e.field,n=e.row,a=e.value,i=e.showLoader,r=void 0===i||i,s=n.original.id;return r?(0,z.jsx)(C.N2,{noOfLines:2,isLoaded:!!a,children:(0,z.jsx)(y.AssetProvider,{assetId:s,children:(0,z.jsx)(y.AssetProvider.GeneralData,{section:"strategy",field:t})})}):(0,z.jsx)(y.AssetProvider,{assetId:s,children:(0,z.jsx)(y.AssetProvider.GeneralData,{section:"strategy",field:t})})},P=function(){var e=(0,o.s0)(),t=(0,l.qM)(),n=(0,h.Y)().account,P=(0,f.f)(),U=P.openModal,_=P.closeModal,O=(0,x.X)(),B=O.theme,N=O.isMobile,L=O.environment,F=(0,w.useState)(null),E=(0,r.Z)(F,2),H=E[0],R=E[1],V=(0,w.useState)(null),D=(0,r.Z)(V,2),W=D[0],q=D[1],G=(0,w.useState)(null),K=(0,r.Z)(G,2),X=K[0],$=K[1],J=(0,w.useState)(null),Y=(0,r.Z)(J,2),Q=Y[0],ee=Y[1],te=(0,w.useState)(Object.keys(A.p5).map((function(e){return+e}))),ne=(0,r.Z)(te,2),ae=ne[0],ie=(ne[1],(0,w.useState)(Object.keys(A.p5).map((function(e){return+e})))),re=(0,r.Z)(ie,2),se=re[0],le=(re[1],(0,j.w)()),oe=le.vaults,ce=le.protocolData,de=le.isVaultsLoaded,ue=le.isPortfolioLoaded,fe=le.selectors,xe=fe.selectVaultById,ge=fe.selectAssetById,pe=fe.selectAssetsByIds,he=fe.selectVaultPosition,me=fe.selectVaultsWithBalance,ve=fe.selectVaultsAssetsByType,je=fe.selectVaultsAssetsWithBalance,ye=(0,w.useMemo)((function(){return A.RB.find((function(e){return"yield-tranches"===e.route}))}),[]),we=(0,w.useMemo)((function(){return Object.keys(A.A2).filter((function(e){return!!A.A2[e].visible}))}),[]),be=(0,w.useMemo)((function(){return(null===ye||void 0===ye?void 0:ye.strategies)||[]}),[ye]),Ae=(0,w.useMemo)((function(){return null===be||void 0===be?void 0:be[0]}),[be]),Se=(0,w.useMemo)((function(){return Object.values(A.BO).filter((function(e){return(0,S.wD)(e,L)}))}),[L]),Ce=(0,w.useCallback)((function(t,n,a){return(0,S.fU)(n,a,t.original),e("/earn/".concat(t.original.id))}),[e]),Te=(0,w.useCallback)((function(t){var n=pe(t.vaults);return(0,z.jsxs)(T.gC,{pb:4,spacing:3,children:[(0,z.jsxs)(T.Ug,{px:4,width:"full",alignItems:"center",justifyContent:"flex-start",children:[(0,z.jsx)(T.Ug,{width:["33%","27%"],children:(0,z.jsx)(v.Translation,{translation:"defi.asset",textStyle:"captionSmaller"})}),(0,z.jsx)(T.Ug,{width:["33%","28%"],children:(0,z.jsx)(v.Translation,{translation:"defi.tvl",textStyle:"captionSmaller"})}),(0,z.jsx)(T.Ug,{width:["33%","27%"],children:(0,z.jsx)(v.Translation,{translation:"defi.apy",textStyle:"captionSmaller"})})]}),n.map((function(t){var n=he(t.id);return(0,z.jsx)(y.AssetProvider,{wrapFlex:!1,assetId:t.id,children:(0,z.jsx)(s.Card.Flex,{px:4,py:3,cursor:"pointer",layerStyle:"cardLight",onClick:function(){e("/earn/".concat(t.id)),_()},children:(0,z.jsxs)(T.Ug,{width:"full",alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(T.Ug,{width:"25%",children:(0,z.jsx)(y.AssetProvider.GeneralData,{field:"asset"})}),(0,z.jsx)(T.Ug,{width:"25%",children:(0,z.jsx)(y.AssetProvider.PoolUsd,{fontWeight:600})}),(0,z.jsx)(T.Ug,{width:"25%",children:(0,z.jsx)(y.AssetProvider.Apy,{addRewards:!0,fontWeight:600})}),!N&&(0,z.jsx)(T.Ug,{height:"100%",alignItems:"stretch",justifyContent:"flex-end",children:(0,z.jsx)(v.Translation,{translation:(0,S.d5)(null===n||void 0===n?void 0:n.usd.deposited).gt(0)?"common.manage":"common.deposit",component:I.zx,width:"full",height:"auto",variant:"ctaPrimary",size:"sm",onClick:function(){e("/earn/".concat(t.id)),_()}})})]})})},"index_".concat(t))}))]})}),[pe,N,he,e,_]),Ie=(0,w.useCallback)((function(t){var n=xe(t),a={AA:ge(null===n||void 0===n?void 0:n.vaultConfig.Tranches.AA.address),BB:ge(null===n||void 0===n?void 0:n.vaultConfig.Tranches.BB.address)};return(0,z.jsx)(T.MI,{mb:6,spacing:6,width:"full",columns:[1,2],children:be.map((function(t){var n,i,r,l=null===(n=a[t])||void 0===n?void 0:n.id;return(0,z.jsx)(y.AssetProvider,{wrapFlex:!1,assetId:l,children:(0,z.jsxs)(s.Card,{p:4,borderRadius:24,overflow:"hidden",position:"relative",layerStyle:"cardLight",children:[(0,z.jsx)(T.xu,{sx:{zIndex:0,top:"30%",width:"205%",right:"-115%",position:"absolute",height:N?"145%":"125%",background:"radial-gradient(circle, rgba(".concat((0,S.oo)(null===(i=A.A2[t])||void 0===i?void 0:i.color).join(","),",0.8) 0%, rgba(50,61,83,0) 70%)")}}),(0,z.jsxs)(T.xu,{zIndex:1,width:"full",position:"relative",children:[(0,z.jsx)(T.Ug,{width:"full",justifyContent:"flex-end",children:(0,z.jsx)(Z.Ee,{w:6,h:6,src:"".concat(u.P5).concat(t,".svg")})}),(0,z.jsxs)(T.gC,{px:2,width:"full",spacing:4,children:[(0,z.jsx)(T.Ug,{width:"full",justifyContent:"flex-start",children:(0,z.jsx)(v.Translation,{translation:A.A2[t].label,textStyle:"ctaStatic",fontSize:"cardTitle",lineHeight:"initial"})}),(0,z.jsx)(T.gC,{spacing:2,children:null===(r=A.A2[t].features)||void 0===r?void 0:r.map((function(e){return(0,z.jsxs)(T.Ug,{spacing:1,alignItems:"flex-start",children:[(0,z.jsx)(T.xu,{pt:1,children:(0,z.jsx)(d.KEG,{color:"white",size:12})}),(0,z.jsx)(v.Translation,{translation:e,textStyle:"captionSmall"})]},"feature_".concat(e))}))}),(0,z.jsxs)(T.gC,{spacing:1,width:"full",alignItems:"flex-start",children:[(0,z.jsx)(T.Ug,{spacing:1,width:"full",alignItems:"baseline",children:(0,z.jsx)(y.AssetProvider.Apy,{showTooltip:!1,addRewards:!0,color:A.A2[t].color,textStyle:"heading",fontSize:"h3",suffix:(0,z.jsx)(v.Translation,{translation:"defi.apy",color:A.A2[t].color,textStyle:"ctaStatic",fontSize:"sm"})})}),(0,z.jsxs)(T.Ug,{spacing:2,width:"full",children:[(0,z.jsx)(v.Translation,{translation:"defi.currentTVL",textStyle:"captionSmall"}),(0,z.jsx)(y.AssetProvider.PoolUsd,{textStyle:"captionSmall",color:"primary",fontSize:"md",fontWeight:"700"})]})]}),"AA"===t?(0,z.jsxs)(T.gC,{spacing:1,width:"full",alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"defi.seniorCoverage",textStyle:"ctaStatic"}),(0,z.jsx)(y.AssetProvider.Coverage,{textStyle:"captionSmall",color:"primary"})]}):(0,z.jsxs)(T.gC,{spacing:1,width:"full",alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"defi.apyBoost",textStyle:"ctaStatic"}),(0,z.jsxs)(T.Ug,{spacing:1,children:[(0,z.jsx)(y.AssetProvider.ApyBoost,{textStyle:"captionSmall",color:"primary"}),(0,z.jsx)(v.Translation,{translation:"defi.moreThanUnderlying",textStyle:"captionSmall",color:"primary"})]})]}),(0,z.jsx)(T.xu,{width:"full",children:(0,z.jsx)(v.Translation,{translation:"trade.vaults.".concat(t,".cta"),mt:4,component:I.zx,width:"full",variant:"ctaPrimary",onClick:function(){e("/earn/".concat(l)),_()}})})]})]})]})},"vault_".concat(l))}))})}),[e,_,be,N,xe,ge]),Ze=(0,w.useCallback)((function(e,t,n){(0,S.fU)(t,n,e);var a={subtitle:"defi.chooseTranche",body:Ie(e.id)};return U(a,"2xl")}),[U,Ie]),ke=(0,w.useMemo)((function(){return(null===ye||void 0===ye?void 0:ye.columns)||Ae&&A.A2[Ae].columns}),[ye,Ae]),ze=(0,w.useCallback)((function(e,t){var n=ge(e.original.id),a=ge(t.original.id);return(0,S.d5)(n.totalTvlUsd).gt((0,S.d5)(a.totalTvlUsd))?-1:1}),[ge]),Me=(0,w.useCallback)((function(e,t,n,a){var i=xe(e.original.id),r=xe(t.original.id);switch(a){case"juniorApy":var s=ge(null===i||void 0===i?void 0:i.vaultConfig.Tranches.BB.address),l=ge(null===r||void 0===r?void 0:r.vaultConfig.Tranches.BB.address),o=(0,S.gA)(s.apy),c=(0,S.gA)(l.apy);return o.gt(c)?-1:1;case"seniorApy":var d=ge(null===i||void 0===i?void 0:i.vaultConfig.Tranches.AA.address),u=ge(null===r||void 0===r?void 0:r.vaultConfig.Tranches.AA.address),f=(0,S.gA)(d.apy),x=(0,S.gA)(u.apy);return f.gt(x)?-1:1;default:return 1}}),[xe,ge]),Pe=(0,w.useCallback)((function(e){switch(e){case"alpha":return S.YC;case"numeric":return S._O;case"trancheApy":return Me;case"totalTvlUsd":return ze;default:return}}),[Me,ze]),Ue=(0,w.useMemo)((function(){return ke?ke.reduce((function(e,n){var a=n.id,r=n.accessor,s=n.sortType,l=Pe(s);return e[a]={id:a,accessor:r,width:n.width,disableSortBy:!l,defaultCanSort:!!l,Header:t(n.title||"defi.".concat(a)),sortType:l?function(e,t){return l(e,t,r,a)}:void 0,Cell:function(e){var t=e.value,r=e.row;return n.extraFields&&n.extraFields.length>0?(0,z.jsxs)(T.Kq,(0,i.Z)((0,i.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},n.stackProps),{},{children:[(0,z.jsx)(M,{field:a,value:t,row:r}),(0,z.jsx)(T.kC,(0,i.Z)((0,i.Z)({flex:1},n.stackProps),{},{children:n.extraFields.map((function(e){return(0,z.jsx)(M,{field:e,value:t,row:r,showLoader:!1},"extraField_".concat(e))}))}))]})):(0,z.jsx)(M,{field:a,value:t,row:r})}},e}),{}):{}}),[ke,t,Pe]),_e=(0,w.useMemo)((function(){return Ae&&ke?ke.filter((function(e){return!e.tables||e.tables.includes("Available")})).map((function(e){var n=e.id,a=e.accessor,r=e.sortType,s=Pe(r);return{id:n,accessor:a,width:e.width,disableSortBy:!s,defaultCanSort:!!s,Header:t(e.title||"defi.".concat(n)),sortType:s?function(e,t){return s(e,t,a,n)}:void 0,Cell:function(t){var a=t.value,r=t.row;return e.extraFields&&e.extraFields.length>0?(0,z.jsxs)(T.Kq,(0,i.Z)((0,i.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,z.jsx)(M,{field:n,value:a,row:r}),(0,z.jsx)(T.kC,(0,i.Z)((0,i.Z)({flex:1},e.stackProps),{},{children:e.extraFields.map((function(e){return(0,z.jsx)(M,{field:e,value:a,row:r,showLoader:!1},"extraField_".concat(e))}))}))]})):(0,z.jsx)(M,{field:n,value:a,row:r})}}})):[]}),[Ae,ke,t,Pe]),Oe=(0,w.useMemo)((function(){return Ae&&ke?ke.filter((function(e){return!e.tables||e.tables.includes("Deposited")})).map((function(e){var n=e.id,a=e.accessor,r=e.sortType,s=Pe(r);return{id:n,accessor:a,width:e.width,disableSortBy:!s,defaultCanSort:!!s,Header:t(e.title||"defi.".concat(n)),sortType:s?function(e,t){return s(e,t,a,n)}:void 0,Cell:function(t){var a=t.value,r=t.row;return e.extraFields&&e.extraFields.length>0?(0,z.jsxs)(T.Kq,(0,i.Z)((0,i.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,z.jsx)(M,{field:n,value:a,row:r}),(0,z.jsx)(T.kC,(0,i.Z)((0,i.Z)({flex:1},e.stackProps),{},{children:e.extraFields.map((function(e){return(0,z.jsx)(M,{field:e,value:a,row:r,showLoader:!1},"extraField_".concat(e))}))}))]})):(0,z.jsx)(M,{field:n,value:a,row:r})}}})):[]}),[Ae,ke,t,Pe]),Be=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,a.Z)(Oe),[{accessor:"balanceUsd",Header:t("defi.balance"),Cell:function(e){var t=e.value;return(0,z.jsx)(C.N2,{noOfLines:2,isLoaded:!!t,children:(0,z.jsx)(c.Amount.Usd,{value:t,textStyle:"tableCell"})})},sortType:S._O},{accessor:"vaultPosition",Header:t("defi.realizedApy"),Cell:function(e){var t=e.value,n=e.row;return(0,z.jsx)(C.N2,{noOfLines:2,isLoaded:!!t,children:t&&(0,z.jsxs)(k.kN,{children:[(0,z.jsx)(k.Jf,{children:(0,z.jsxs)(T.kC,{direction:"row",alignItems:"center",children:[!t.realizedApy.isNaN()&&(0,z.jsx)(k.uY,{type:"increase"}),(0,z.jsx)(M,{field:"realizedApy",value:t,row:n})]})}),(0,z.jsx)(c.Amount.Usd,{prefix:"+",value:t.usd.earnings,textStyle:"captionSmall"})]})})},sortType:function(e,t){return(0,S._O)(e,t,"vaultPosition.earningsPercentage")}},Ue.chainId])}),[t,Ue,Oe]),Ne=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,a.Z)(_e))}),[_e]),Le=(0,w.useMemo)((function(){return me&&ue&&be&&null!==n&&void 0!==n&&n.address?null===be||void 0===be?void 0:be.reduce((function(e,t){var n=je(t);return[].concat((0,a.Z)(e),(0,a.Z)(n||[]))}),[]):[]}),[ue,n,me,je,be]),Fe=(0,w.useMemo)((function(){if(!ve||!de)return[];var e=function(e){return Le.map((function(e){return e.id})).includes(e.id)};return ve(Ae).reduce((function(t,n){if("deprecated"===n.status)return t;if(e(n)){var a=xe(n.id);if(a){var i="AA"===n.type?"BB":"AA",r=oe.find((function(e){return"cdoConfig"in e&&"cdoConfig"in a&&e.type===i&&e.cdoConfig.address===a.cdoConfig.address}));if(r){var s=ge(r.id);"deprecated"===(null===s||void 0===s?void 0:s.status)||e(s)||t.push(s)}}}else t.push(n);return t}),[])}),[de,oe,ge,xe,ve,Le,Ae]),Ee=(0,w.useMemo)((function(){return ve&&de?ve(Ae).filter((function(e){return!Le.map((function(e){return e.id})).includes(e.id)&&"deprecated"===e.status&&(0,S.d5)(e.tvlUsd).gt(A.Vt)})):[]}),[de,ve,Le,Ae]),He=(0,w.useMemo)((function(){return Ae?"".concat(Ae,"_deposited"):""}),[Ae]),Re=(0,w.useMemo)((function(){if(!Ae)return"";var e=t(A.A2[Ae].label);return"".concat(e," - ").concat(t("defi.deposited"))}),[Ae,t]),Ve=(0,w.useMemo)((function(){return Ae?"".concat(Ae,"_available"):""}),[Ae]),De=(0,w.useMemo)((function(){if(!Ae)return"";var e=t(A.A2[Ae].label);return"".concat(e," - ").concat(t("common.available"))}),[Ae,t]),We=(0,w.useMemo)((function(){return Ae?"".concat(Ae,"_deprecated"):""}),[Ae]),qe=(0,w.useMemo)((function(){if(!Ae)return"";var e=t(A.A2[Ae].label);return"".concat(e," - ").concat(t("common.deprecated"))}),[Ae,t]);(0,w.useEffect)((function(){if(Ae&&Q!==Ae&&Le.length){var e=Le.map((function(e){return(0,S.ym)(e,He,Re)}));(0,S.y6)(He,Re,e),ee(Ae)}}),[n,Ae,t,He,Re,Le,Q,ee]),(0,w.useEffect)((function(){if(Ae&&X!==Ae&&Fe.length){var e=Fe.map((function(e){return(0,S.ym)(e,Ve,De)}));(0,S.y6)(Ve,De,e),$(Ae)}}),[n,t,Ve,De,X,$,Ae,Fe]);var Ge=(0,w.useMemo)((function(){if(!Le.length)return null;var e=Le.filter((function(e){var t=!W||!W.length||null!==new RegExp(W,"i").exec(e.name)||null!==new RegExp(W,"i").exec(e.protocol),n=(null===e||void 0===e?void 0:e.chainId)&&se.includes(+e.chainId);return t&&n}));return N?(0,z.jsxs)(T.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"defi.deposited",component:T.X6,as:"h3",fontSize:"lg"}),(0,z.jsx)(T.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:e.map((function(e){return e.id&&(0,z.jsx)(p.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})]}):(0,z.jsxs)(s.Card,{mt:10,children:[(0,z.jsxs)(T.Ug,{width:"full",alignItems:"flex-start",justifyContent:"space-between",children:[(0,z.jsx)(v.Translation,{translation:"defi.deposited",component:s.Card.Heading,fontSize:"lg"}),(0,z.jsx)(T.Ug,{spacing:4,children:(0,z.jsx)(g.SearchBar,{placeholder:"defi.searchToken",handleSearchChange:q})})]}),(0,z.jsx)(m.ReactTable,{columns:Be,data:e,initialState:{sortBy:[{id:"balanceUsd",desc:!1}]},onRowClick:function(e){return Ce(e,He,Re)}})]})}),[N,Be,W,q,se,He,Re,Le,Ce]),Ke=(0,w.useMemo)((function(){if(de&&!Fe.length)return null;var e=Fe.filter((function(e){var t=!H||!H.length||null!==new RegExp(H,"i").exec(e.name)||null!==new RegExp(H,"i").exec(e.protocol),n=(null===e||void 0===e?void 0:e.chainId)&&ae.includes(+e.chainId);return t&&n}));return N?(0,z.jsxs)(T.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"common.available",component:T.X6,as:"h3",fontSize:"lg"}),(0,z.jsx)(T.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:e.map((function(e){return e.id&&(0,z.jsx)(p.VaultCard.Tranche,{assetId:e.id,onClick:function(){return Ze(e,Ve,De)}},"vault_".concat(e.id))}))})]}):(0,z.jsxs)(s.Card,{mt:10,children:[(0,z.jsxs)(T.Ug,{width:"full",alignItems:"flex-start",justifyContent:"space-between",children:[(0,z.jsx)(v.Translation,{translation:"common.available",component:s.Card.Heading,fontSize:"lg"}),(0,z.jsx)(T.Ug,{spacing:4,children:(0,z.jsx)(g.SearchBar,{placeholder:"defi.searchToken",handleSearchChange:R})})]}),de?(0,z.jsx)(m.ReactTable,{columns:Ne,data:e,initialState:{sortBy:[{id:"trancheTotalTvl",desc:!1}]},onRowClick:function(e){return Ze(e.original,Ve,De)}}):(0,z.jsxs)(T.Kq,{children:[(0,z.jsx)(C.Od,{}),(0,z.jsx)(C.Od,{})]})]})}),[N,de,H,R,ae,Ne,Ve,De,Fe,Ze]),Xe=(0,w.useMemo)((function(){if(!de||!Ee.length)return null;return N?(0,z.jsxs)(T.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"common.deprecated",component:T.X6,as:"h3",fontSize:"lg"}),(0,z.jsx)(T.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:Ee.map((function(e){return e.id&&(0,z.jsx)(p.VaultCard.Tranche,{assetId:e.id,onClick:function(){return Ze(e,We,qe)}},"vault_".concat(e.id))}))})]}):(0,z.jsxs)(s.Card,{mt:10,children:[(0,z.jsx)(v.Translation,{translation:"common.deprecated",component:s.Card.Heading,fontSize:"lg"}),Ee.length?(0,z.jsx)(m.ReactTable,{columns:Ne,data:Ee,initialState:{sortBy:[{id:"trancheTotalTvl",desc:!1}]},onRowClick:function(e){return Ze(e.original,We,qe)}}):(0,z.jsxs)(T.Kq,{children:[(0,z.jsx)(C.Od,{}),(0,z.jsx)(C.Od,{})]})]})}),[N,de,Ne,We,qe,Ee,Ze]),$e=(0,w.useMemo)((function(){return Ae?(0,z.jsxs)(T.gC,{mb:20,width:"full",spacing:8,children:[(0,z.jsx)(T.xu,{left:0,zIndex:1,width:"full",height:["20em","11.5em"],position:"absolute",background:"radial-gradient(circle, ".concat(B.colors.card.bg,"AA 40%, ").concat(B.colors.card.bg,"50 100%)"),backgroundPosition:"top left",backgroundSize:"300%"}),(0,z.jsxs)(T.Kq,{zIndex:2,width:"full",spacing:[8,0],position:"relative",direction:["column","row"],alignItems:["center","center"],justifyContent:"space-between",children:[(0,z.jsxs)(T.gC,{pr:[0,0],spacing:4,width:"full",direction:"column",alignItems:["center","flex-start"],children:[(0,z.jsx)(v.Translation,{isHtml:!0,translation:"strategies.general.title",component:T.X6,fontFamily:"body",as:"h2",size:"3xl",fontWeight:"bold",lineHeight:"normal"}),(0,z.jsx)(C.N2,{noOfLines:2,isLoaded:(0,S.d5)(ce.totalTvlUsd).gt(0),children:(0,z.jsx)(v.Translation,{translation:"stats.protocolOverview",fontSize:["md","h4"],isHtml:!0,params:{tvlUsd:(0,S.dm)(ce.totalTvlUsd,2),avgApy:ce.totalAvgApy.toFixed(2),vaults:"".concat(ce.uniqueVaults," ").concat(1===ce.uniqueVaults?"vault":"vaults")}})})]}),(0,z.jsx)(T.xu,{minWidth:["full","30em"],children:(0,z.jsx)(b.StrategyOverview,{showLoading:!0,strategies:we})})]})]}):null}),[B,Ae,we,ce]),Je=(0,w.useCallback)((function(t){if(t.vaults.length>1){var n={subtitle:"defi.chooseAsset",body:Te(t)};return U(n,"2xl")}var a=ge(t.vaults[0]);return e("/earn/".concat(a.id)),_()}),[U,ge,Te,_,e]),Ye=(0,w.useMemo)((function(){return(0,z.jsxs)(T.gC,{width:"full",spacing:6,alignItems:"flex-start",children:[(0,z.jsxs)(T.gC,{spacing:4,width:["full","50%"],alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"strategies.aggregated.title",component:T.X6,as:"h3",fontSize:"3xl"}),(0,z.jsx)(v.Translation,{translation:"strategies.aggregated.description"})]}),(0,z.jsx)(T.Kq,{spacing:10,width:"full",direction:["column","row"],children:Object.values(Se).map((function(e,t){return(0,z.jsx)(p.VaultCard.Aggregated,{aggregatedVault:e,onClick:function(){return Je(e)}},"index_".concat(t))}))})]})}),[Se,Je]);return(0,S.xb)(Se)&&(0,S.xb)(Fe)&&(0,S.xb)(Le)?(0,z.jsx)(T.M5,{width:"full",pt:10,mt:10,flex:1,children:(0,z.jsx)(s.Card,{maxW:"52em",children:(0,z.jsxs)(T.gC,{py:10,spacing:4,width:"full",alignItems:"center",justifyContent:"center",children:[(0,z.jsx)(Z.Ee,{src:"images/vaults/information.png",width:8}),(0,z.jsx)(v.Translation,{textAlign:"center",translation:"defi.empty.vaults.body",color:"cta",isHtml:!0})]})})}):(0,z.jsxs)(T.kC,{mt:10,width:"100%",direction:"column",alignItems:"center",children:[$e,Ye,(0,z.jsxs)(T.gC,{mt:10,width:"full",spacing:6,alignItems:"flex-start",children:[(0,z.jsxs)(T.gC,{spacing:4,width:["full","50%"],alignItems:"flex-start",children:[(0,z.jsx)(v.Translation,{translation:"strategies.isolated.title",component:T.X6,as:"h3",fontSize:"3xl"}),(0,z.jsx)(v.Translation,{translation:"strategies.isolated.description"})]}),Ge,Ke,Xe]})]})}},1494:function(e,t,n){n.d(t,{O:function(){return u}});var a=n(93433),i=n(4942),r=n(1413),s=n(7276),l=n(23537),o=n(79681),c=n(12056),d=n(1669),u=function(e){var t=e.assetIds,n=e.strategies,u=(0,o.qM)(),f=(0,d.w)().selectors,x=f.selectAssetById,g=f.selectAssetsByIds,p=(0,s.useMemo)((function(){return g?g(t):[]}),[t,g]),h=Object.keys(c.A).reduce((function(e,t){return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},t,{balance:(0,l.gA)(0),earnings:(0,l.gA)(0),deposited:(0,l.gA)(0),weightedRealizedApy:(0,l.gA)(0)}))}),{}),m=(0,s.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition?(e[t.type].earnings=e[t.type].earnings.plus(t.vaultPosition.usd.earnings),e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,l.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),h)}),[p,n,h]),v=(0,s.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=x(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,l.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[p,n,x]),j={assets:[],strategies:[]};j.strategies=(0,s.useMemo)((function(){return Object.keys(m).map((function(e){return{label:u(c.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:c.A[e],earnings:parseFloat(m[e].earnings),deposited:parseFloat(m[e].deposited)},value:parseFloat(m[e].balance)}}))}),[m,u]),j.assets=(0,s.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var i=x(t);return!i||i.type&&(!n||n.includes(i.type))?e:[].concat((0,a.Z)(e),[{label:i.name,extraData:{asset:i},value:parseFloat(v[t])}])}),[])}),[v,x,n]);var y={assets:{},strategies:{}};return y.strategies=(0,s.useMemo)((function(){return Object.values(c.A).reduce((function(e,t){var n=u(t.label);return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},n,t.color))}),{})}),[u]),y.assets=(0,s.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var n=x(t);if(!n)return e;var a=n.name;return(0,r.Z)((0,r.Z)({},e),{},(0,i.Z)({},a,n.color))}),{})}),[v,x]),{colors:y,compositions:j}}},82137:function(e,t,n){n.d(t,{Jf:function(){return b},kN:function(){return v},uY:function(){return w}});var a=n(45987),i=n(1413),r=n(29439),s=n(7276),l=n(32390),o=n(96699),c=n(2548),d=n(7828),u=["className","children"],f=["type","aria-label"],x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},g=(0,c.k)({name:"StatStylesContext",errorMessage:"useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Stat />\" "}),p=(0,r.Z)(g,2),h=p[0],m=p[1],v=(0,o.Gp)((function(e,t){var n=(0,o.jC)("Stat",e),r=(0,i.Z)({position:"relative",flex:"1 1 0%"},n.container),l=(0,d.Lr)(e),c=l.className,f=l.children,g=(0,a.Z)(l,u);return s.createElement(h,{value:n},s.createElement(o.m$.div,(0,i.Z)((0,i.Z)({ref:t},g),{},{className:x("chakra-stat",c),__css:r}),s.createElement("dl",null,f)))}));v.displayName="Stat";var j=function(e){return s.createElement(l.JO,(0,i.Z)({color:"red.400"},e),s.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"}))};function y(e){return s.createElement(l.JO,(0,i.Z)({color:"green.400"},e),s.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}))}function w(e){var t=e.type,n=e["aria-label"],r=(0,a.Z)(e,f),l=m(),c="increase"===t?y:j,d=n||("increase"===t?"increased by":"decreased by");return s.createElement(s.Fragment,null,s.createElement(o.m$.span,{srOnly:!0},d),s.createElement(c,(0,i.Z)((0,i.Z)({"aria-hidden":!0},r),{},{__css:l.icon})))}j.displayName="StatDownArrow",y.displayName="StatUpArrow",w.displayName="StatArrow",(0,o.Gp)((function(e,t){return s.createElement(o.m$.div,(0,i.Z)((0,i.Z)({},e),{},{ref:t,role:"group",className:x("chakra-stat__group",e.className),__css:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}}))})).displayName="StatGroup",(0,o.Gp)((function(e,t){var n=m();return s.createElement(o.m$.dd,(0,i.Z)((0,i.Z)({ref:t},e),{},{className:x("chakra-stat__help-text",e.className),__css:n.helpText}))})).displayName="StatHelpText",(0,o.Gp)((function(e,t){var n=m();return s.createElement(o.m$.dt,(0,i.Z)((0,i.Z)({ref:t},e),{},{className:x("chakra-stat__label",e.className),__css:n.label}))})).displayName="StatLabel";var b=(0,o.Gp)((function(e,t){var n=m();return s.createElement(o.m$.dd,(0,i.Z)((0,i.Z)({ref:t},e),{},{className:x("chakra-stat__number",e.className),__css:(0,i.Z)((0,i.Z)({},n.number),{},{fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"})}))}));b.displayName="StatNumber"}}]);