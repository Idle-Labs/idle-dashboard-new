"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[5276],{75276:function(e,t,n){n.r(t),n.d(t,{CompositionChart:function(){return v}});var i=n(7276),r=n(23537),s=n(79681),a=n(96699),o=n(3498),l=n(66288),u=n(16644),d=n(1669),c=n(1494),p=n(45263),v=function(e){var t=e.assetIds,n=e.strategies,v=e.type,f=(0,a.Fg)(),g=(0,s.qM)(),h=(0,l.X)().isMobile,y=(0,d.w)().protocolToken,b=(0,c.O)({assetIds:t,strategies:n}),m=b.colors,x=b.compositions,A=(0,i.useCallback)((function(e){var t;if("assets"===v){var n=x[v].reduce((function(e,t){return e+t.value}),0),i=function(e){return"$".concat((0,r.dm)(e))},s=null===e||void 0===e||null===(t=e.extraData)||void 0===t?void 0:t.asset,a=(null===s||void 0===s?void 0:s.icon)||(null===y||void 0===y?void 0:y.icon),o=(null===s||void 0===s?void 0:s.name)||g("dashboard.portfolio.totalChart"),l=i(e?e.value:n);return e&&!s?null:(0,p.jsxs)(p.Fragment,{children:[a&&(0,p.jsx)("image",{y:"35%",href:a,height:"34",width:"34",textAnchor:"middle",x:h?"44.5%":"46.5%"}),(0,p.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:l}),(0,p.jsx)("text",{x:"50%",y:"61%",fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",fill:f.colors.cta,children:o})]})}}),[y,x,f,g,v,h]),w=(0,i.useCallback)((function(){var e;return(0,p.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:(e=0,"$".concat((0,r.dm)(e)))})}),[]);return(0,p.jsx)(o.xu,{height:350,width:"100%",children:x&&x[v]&&x[v].length?(0,p.jsx)(u.DonutChart,{colors:m[v],data:x[v],getSliceData:A}):(0,p.jsx)(u.DonutChart,{getSliceData:w,colors:{placeholder1:"#555B67"},data:[{value:100,label:"placeholder1"}]})})}},1494:function(e,t,n){n.d(t,{O:function(){return c}});var i=n(93433),r=n(4942),s=n(1413),a=n(7276),o=n(23537),l=n(79681),u=n(12056),d=n(1669),c=function(e){var t=e.assetIds,n=e.strategies,c=(0,l.qM)(),p=(0,d.w)().selectors,v=p.selectAssetById,f=p.selectAssetsByIds,g=(0,a.useMemo)((function(){return f?f(t):[]}),[t,f]),h=Object.keys(u.A).reduce((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},(0,r.Z)({},t,{balance:(0,o.gA)(0),earnings:(0,o.gA)(0),deposited:(0,o.gA)(0),weightedRealizedApy:(0,o.gA)(0)}))}),{}),y=(0,a.useMemo)((function(){return g.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition?(e[t.type].earnings=e[t.type].earnings.plus(t.vaultPosition.usd.earnings),e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,o.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),h)}),[g,n,h]),b=(0,a.useMemo)((function(){return g.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=v(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,o.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[g,n,v]),m={assets:[],strategies:[]};m.strategies=(0,a.useMemo)((function(){return Object.keys(y).map((function(e){return{label:c(u.A[e].label),extraData:{avgRealizedApy:y[e].balance.gt(0)?parseFloat(y[e].weightedRealizedApy.div(y[e].balance)):0,strategy:u.A[e],earnings:parseFloat(y[e].earnings),deposited:parseFloat(y[e].deposited)},value:parseFloat(y[e].balance)}}))}),[y,c]),m.assets=(0,a.useMemo)((function(){return Object.keys(b).reduce((function(e,t){var r=v(t);return!r||r.type&&(!n||n.includes(r.type))?e:[].concat((0,i.Z)(e),[{label:r.name,extraData:{asset:r},value:parseFloat(b[t])}])}),[])}),[b,v,n]);var x={assets:{},strategies:{}};return x.strategies=(0,a.useMemo)((function(){return Object.values(u.A).reduce((function(e,t){var n=c(t.label);return(0,s.Z)((0,s.Z)({},e),{},(0,r.Z)({},n,t.color))}),{})}),[c]),x.assets=(0,a.useMemo)((function(){return Object.keys(b).reduce((function(e,t){var n=v(t);if(!n)return e;var i=n.name;return(0,s.Z)((0,s.Z)({},e),{},(0,r.Z)({},i,n.color))}),{})}),[b,v]),{colors:x,compositions:m}}}}]);