"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[4710,1617],{61617:function(t,e,n){n.r(e),n.d(e,{AssetLabel:function(){return c}});var a=n(1413),i=n(44925),s=n(3498),r=n(7386),o=n(45263),l=["assetId","size"],c=function(t){var e=t.assetId,n=t.size,c=void 0===n?"sm":n,u=(0,i.Z)(t,l);return(0,o.jsx)(r.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,o.jsxs)(s.Ug,{alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(r.AssetProvider.Icon,{size:c}),(0,o.jsx)(r.AssetProvider.Name,(0,a.Z)({textStyle:"heading",fontSize:"h3",whiteSpace:"nowrap"},u))]})})}},4710:function(t,e,n){n.r(e),n.d(e,{Approve:function(){return O},Deposit:function(){return V},DynamicActionField:function(){return W},DynamicActionFields:function(){return G},OperativeComponent:function(){return J},Withdraw:function(){return R}});var a=n(1413),i=n(44925),s=n(74165),r=n(15861),o=n(29439),l=n(5128),c=n(41273),u=n(86059),d=n(12056),m=n(87099),p=n(54447),v=n(88935),x=n(61617),f=n(85267),g=n(92505),h=n(53673),y=n(23023),j=n(15542),S=n(86393),A=n(7386),C=n(7276),T=n(86510),b=n(55967),w=n(3498),k=n(3497),I=n(64845),Z=n(43127),E=n(96699),M=n(13961),U=n(96209),P=n(89030),F=n(88089),_=n(45263),z=["assetId","field","amount","amountUsd"],B=["goBack","close","height"],D=["assetId","actions"],N=function(t){var e=t.inputHeight,n=t.amount,a=t.amountUsd,i=t.setAmount,s=(0,A.useAssetProvider)(),r=s.asset,o=s.underlyingAsset,l=(0,g.w)().selectors,c=l.selectAssetPriceUsd,d=l.selectVaultPrice,m=(0,C.useMemo)((function(){if(a)return(0,T.gA)(a);if(c&&d&&o&&r){var t=c(o.id),e=d(r.id);return"underlying"===r.type?parseFloat((0,T.gA)(n).times(t).toString())||0:parseFloat((0,T.gA)(n).times(t).times(e).toString())||0}}),[r,o,n,a,d,c]);return(0,_.jsxs)(w.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsx)(k.II,{height:e,flex:1,type:"number",placeholder:"0",variant:"balance",value:(0,T.gA)(n).toString(),onChange:function(t){var e=t.target.value;i(Math.max(0,parseFloat(e)).toString())}}),(0,_.jsx)(u.Amount.Usd,{abbreviateThresold:1e4,textStyle:"captionSmall",color:"brightGreen",prefix:"\u2248 $",value:(0,T.d5)(m).toString()})]})},O=function(t){var e=t.goBack,n=t.itemIndex,a=(0,v.Y)().account,i=q(),l=i.defaultAmount,c=i.dispatch,u=i.activeItem,d=(0,C.useState)(l),x=(0,o.Z)(d,2),f=x[0],g=x[1],h=(0,A.useAssetProvider)(),S=h.underlyingAsset,k=h.vault,E=h.translate,M=h.theme,U=(0,C.useState)(!1),P=(0,o.Z)(U,2),F=P[0],z=P[1],B=(0,C.useState)(l),D=(0,o.Z)(B,2),O=D[0],W=D[1],G=(0,y.R)(),V=G.sendTransaction,R=G.setGasLimit;(0,C.useEffect)((function(){g(l)}),[l]);var X=(0,C.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var e,n,i,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k&&"getAllowanceContractSendMethod"in k&&"getAllowanceParams"in k){t.next=2;break}return t.abrupt("return");case 2:if(e={from:null===a||void 0===a?void 0:a.address},n=k.getAllowanceParams(m.Uf),i=k.getAllowanceContractSendMethod(n)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,T.$K)(i,e);case 9:return r=t.sent,t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)}))),[a,k]),H=(0,C.useCallback)((function(){if(k&&"getAllowanceContractSendMethod"in k&&"getAllowanceParams"in k){var t=k.getAllowanceParams(O),e=k.getAllowanceContractSendMethod(t);e&&V(k.id,null===S||void 0===S?void 0:S.id,e)}}),[O,k,S,V]);return(0,C.useEffect)((function(){var t=F?f:m.Uf;W(t),u===n&&c({type:"SET_AMOUNT",payload:t})}),[F,f,c,u,n]),(0,C.useEffect)((function(){u===n&&(0,r.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:e=t.sent,R(e);case 4:case"end":return t.stop()}}),t)})))()}),[u,n,X,R]),(0,_.jsxs)(w.gC,{flex:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(Y,{goBack:e,translation:"modals.approve.header",params:{asset:null===S||void 0===S?void 0:S.name}}),(0,_.jsx)(w.kC,{p:14,pt:20,flex:1,children:(0,_.jsxs)(w.gC,{spacing:6,children:[(0,_.jsx)(b.PG4,{size:72}),(0,_.jsx)(j.Translation,{component:w.xv,prefix:"".concat(E("modals.approve.routerName")," "),translation:"modals.approve.body",params:{asset:null===S||void 0===S?void 0:S.name},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,_.jsxs)(w.gC,{width:"100%",spacing:6,children:[(0,_.jsxs)(w.Ug,{py:2,width:"100%",justifyContent:"space-between",borderTop:"1px solid ".concat(M.colors.divider),borderBottom:"1px solid ".concat(M.colors.divider),children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"trade.allowance",textStyle:"captionSmall"}),(0,_.jsxs)(w.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"trade.unlimited",textStyle:["captionSmall","clickable"],fontWeight:700,color:F?"ctaDisabled":"primary",onClick:function(){return z(!1)}}),(0,_.jsx)(I.r,{size:"sm",isChecked:F,onChange:function(t){return z(t.target.checked)}}),(0,_.jsx)(j.Translation,{component:w.xv,translation:"trade.exact",textStyle:["captionSmall","clickable"],fontWeight:700,color:F?"primary":"ctaDisabled",onClick:function(){return z(!0)}})]})]}),F&&(0,_.jsxs)(w.Ug,{children:[(0,_.jsx)(A.AssetProvider.Icon,{size:"sm"}),(0,_.jsx)(p.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsx)(N,{inputHeight:6,amount:f,setAmount:g})})]})]}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.approve",onClick:H,variant:"ctaFull"})]})}),(0,_.jsx)(L,{})]})},L=function(){var t=(0,E.Fg)(),e=(0,v.Y)().chainToken,n=(0,y.R)().state,a=n.transactionSpeed,i=n.estimatedFees,s=n.estimatedFeesUsd,r=(0,C.useMemo)((function(){return i?i[a]:null}),[i,a]),o=(0,C.useMemo)((function(){return s?s[a]:null}),[s,a]);return(0,_.jsxs)(w.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,_.jsx)(b.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,_.jsx)(j.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,_.jsx)(u.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:m.EI,value:o}),o&&(0,_.jsx)(u.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===e||void 0===e?void 0:e.symbol,")"),value:r,decimals:4})]})},W=function(t){var e,n,s,r,o,c=t.assetId,d=t.field,m=t.amount,p=t.amountUsd,v=(0,i.Z)(t,z),x=(0,g.w)(),f=x.helpers.vaultFunctionsHelper,h=x.selectors,y=h.selectAssetById,j=h.selectVaultById,S=h.selectVaultGauge,A=(0,C.useMemo)((function(){return c&&y&&y(c)}),[c,y]),b=(0,C.useMemo)((function(){return c&&j&&j(c)}),[c,j]),k=(0,C.useMemo)((function(){return c&&S&&S(c)}),[c,S]),I=(0,C.useMemo)((function(){return k&&y&&y(k.id)}),[k,y]),Z=(0,C.useMemo)((function(){return(0,T.gA)(A.tvl).plus((0,T.d5)(m))}),[A,m]),E=(0,C.useMemo)((function(){return null===f||void 0===f?void 0:f.getVaultNewApr(A,b,(0,T.gA)(m))}),[A,b,m,f]),M=(0,C.useMemo)((function(){if((0,T.d5)(E).gt(0)){var t=(0,T.Bs)((0,T.d5)(E).div(100)).times(100),e=A.apyBreakdown?Object.keys(A.apyBreakdown||{}).filter((function(t){return"base"!==t})).reduce((function(t,e){switch(e){case"gauge":var n=null===I||void 0===I?void 0:I.gaugeData;if(n){var a=(0,T.d5)(null===n||void 0===n?void 0:n.totalSupply).plus((0,T.d5)(m)),i=(0,T.d5)(null===n||void 0===n?void 0:n.totalSupply).div(a),s=A.apyBreakdown[e].times(i);return t.plus(s)}return t.plus(A.apyBreakdown[e]);case"harvest":var r=(0,T.gA)(A.tvl).div(Z),o=A.apyBreakdown[e].times(r);return t.plus(o);default:return t.plus(A.apyBreakdown[e])}}),(0,T.gA)(0)):(0,T.gA)(0);return(0,T.gA)(t).plus(e)}return(0,T.d5)(null===A||void 0===A?void 0:A.apy)}),[A,m,Z,I,E]),U=(0,T.d5)(p).gt(0),P=(0,T.d5)(null===A||void 0===A||null===(e=A.vaultPosition)||void 0===e?void 0:e.underlying.redeemable),F=(0,T.d5)(null===A||void 0===A||null===(n=A.vaultPosition)||void 0===n?void 0:n.usd.redeemable),B=l.Z.maximum(0,(0,T.d5)(null===A||void 0===A||null===(s=A.vaultPosition)||void 0===s?void 0:s.usd.earnings)),D=l.Z.minimum(1,(0,T.d5)(p).div(F)),N=l.Z.minimum(B,D.times(B)),O=l.Z.maximum(0,(0,T.d5)(null===A||void 0===A||null===(r=A.vaultPosition)||void 0===r?void 0:r.usd.earnings).times(null===A||void 0===A?void 0:A.fee)),L=l.Z.minimum(O,(0,T.d5)(N).times(null===A||void 0===A?void 0:A.fee)),W=U&&(0,T.d5)(m).lte(P);switch(d){case"boost":var G=M&&null!==A&&void 0!==A&&null!==(o=A.baseApr)&&void 0!==o&&o.gt(0)?M.div(null===A||void 0===A?void 0:A.baseApr):(0,T.gA)(0);return(0,_.jsxs)(w.xv,(0,a.Z)((0,a.Z)({},v),{},{textStyle:"titleSmall",color:"primary",children:[G.toFixed(2),"x"]}));case"overperformance":var V=(0,T.d5)(p).times((0,T.gA)(null===A||void 0===A?void 0:A.baseApr).div(100)),R=(0,T.d5)(p).times((0,T.gA)(null===A||void 0===A?void 0:A.apy).div(100)),Y=U?R.minus(V):null;return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:Y,suffix:"/year"}));case"newApy":return(0,_.jsx)(u.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:M}));case"gain":return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:W?N:null}));case"fee":return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:W?L:null}));case"netGain":var X=l.Z.minimum(B.minus(L),(0,T.d5)(N).minus(L));return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:W?X:null}));case"coverage":var H=y(null===b||void 0===b?void 0:b.vaultConfig.Tranches.BB.address),K=H.tvl&&Z?H.tvl.div(Z).times(100):0;return(0,_.jsx)(u.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},v),{},{value:K}));default:return null}},G=function(t){var e,n=(0,g.w)().selectors.selectVaultById,i=t.assetId,s=t.action,r=(0,C.useMemo)((function(){return i&&n&&n(i)}),[i,n]),o=(0,C.useMemo)((function(){return(null===r||void 0===r?void 0:r.type)&&d.A[r.type]}),[r]);if(null===o||void 0===o||null===(e=o.dynamicActionFields)||void 0===e||!e[s])return null;var l=null===o||void 0===o?void 0:o.dynamicActionFields[s];return(0,_.jsx)(w.gC,{spacing:2,width:"100%",children:l.map((function(e){return(0,_.jsxs)(w.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"dynamicActionFields.".concat(e),textStyle:"captionSmall"}),(0,_.jsx)(W,(0,a.Z)((0,a.Z)({},t),{},{field:e}))]},"dynamicField_".concat(e))}))})},V=function(t){var e=t.itemIndex,n=(0,C.useState)(""),a=(0,o.Z)(n,2),i=a[0],c=a[1],u=(0,C.useState)("0"),d=(0,o.Z)(u,2),m=d[0],f=d[1],h=(0,C.useState)(0),b=(0,o.Z)(h,2),k=b[0],I=b[1],E=(0,v.Y)().account,M=q(),U=M.dispatch,P=M.activeItem,F=M.activeStep,z=M.executeAction,B=(0,y.R)(),D=B.sendTransaction,O=B.setGasLimit,W=B.state.transaction,V=(0,g.w)().selectors,R=V.selectAssetPriceUsd,Y=V.selectAssetBalance,X=(0,A.useAssetProvider)(),H=X.asset,K=X.vault,Q=X.underlyingAsset,$=X.translate,J=(0,C.useMemo)((function(){return Y?Y(null===Q||void 0===Q?void 0:Q.id):(0,T.gA)(0)}),[Y,null===Q||void 0===Q?void 0:Q.id]),tt=(0,C.useMemo)((function(){return c(""),!(!(0,T.gA)(m).isNaN()&&!(0,T.gA)(m).lte(0))||!!(0,T.gA)(m).gt(J)&&(c($("trade.errors.insufficientFundsForAmount",{symbol:null===Q||void 0===Q?void 0:Q.name})),!0)}),[m,J,Q,$]),et=(0,C.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var e,n,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q&&K&&"getAllowanceContract"in K){t.next=2;break}return t.abrupt("return",(0,T.gA)(0));case 2:if(null!==E&&void 0!==E&&E.address){t.next=4;break}return t.abrupt("return",(0,T.gA)(0));case 4:if(e=K.getAllowanceContract()){t.next=7;break}return t.abrupt("return",(0,T.gA)(0));case 7:return n=(0,T.WP)(K),t.next=10,(0,T.RC)(e,E.address,n);case 10:return a=t.sent,t.abrupt("return",(0,T.I0)(a,Q.decimals));case 12:case"end":return t.stop()}}),t)}))),[Q,K,null===E||void 0===E?void 0:E.address]),nt=(0,C.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];E&&!tt&&K&&"getDepositContractSendMethod"in K&&"getDepositParams"in K&&(0,r.Z)((0,s.Z)().mark((function e(){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,et();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=(0,T.gA)(m);case 7:e.t0.gte(m)?(n=K.getDepositParams(m),a=K.getDepositContractSendMethod(n),D(K.id,null===Q||void 0===Q?void 0:Q.id,a)):U({type:"SET_ACTIVE_STEP",payload:1});case 9:case"end":return e.stop()}}),e)})))()}),[E,tt,m,K,Q,U,et,D]);(0,C.useEffect)((function(){if(R&&Q){var t=R(Q.id),e=parseFloat((0,T.gA)(m).times(t).toString())||0;I(e)}}),[Q,m,R,U]),(0,C.useEffect)((function(){z||F!==e||"success"!==W.status||f("")}),[z,W.status,F,e]);var at=(0,C.useCallback)((function(){null!==Q&&void 0!==Q&&Q.balance&&f(Q.balance.toString())}),[Q]),it=(0,C.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var e,n,a,i,r,o,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(K&&"getDepositContractSendMethod"in K&&"getDepositParams"in K){t.next=2;break}return t.abrupt("return");case 2:return e=K.getMethodDefaultGasLimit("deposit"),t.next=5,et();case 5:if(n=t.sent,E&&!J.lte(0)&&!n.lte(0)){t.next=8;break}return t.abrupt("return",e);case 8:return a=l.Z.minimum(J,n),i={from:null===E||void 0===E?void 0:E.address},r=K.getDepositParams(a.toFixed()),o=K.getDepositContractSendMethod(r),t.next=14,(0,T.$K)(o,i);case 14:if(t.t0=t.sent,t.t0){t.next=17;break}t.t0=e;case 17:return c=t.t0,t.abrupt("return",c);case 19:case"end":return t.stop()}}),t)}))),[E,K,et,J]);(0,C.useEffect)((function(){P===e&&(0,r.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it();case 2:e=t.sent,O(e);case 4:case"end":return t.stop()}}),t)})))()}),[P,e,it,O]),(0,C.useEffect)((function(){P===e&&(U({type:"SET_AMOUNT",payload:m}),U({type:"SET_DEFAULT_AMOUNT",payload:m}),U({type:"SET_ASSET",payload:Q}),z&&(nt(!1),U({type:"SET_EXECUTE_ACTION",payload:!1})))}),[m,P,Q,e,U,z,nt]);var st=(0,C.useMemo)((function(){return E?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.deposit",disabled:tt,onClick:nt,variant:"ctaFull"}):(0,_.jsx)(S.ConnectWalletButton,{variant:"ctaFull"})}),[E,tt,nt]),rt=(0,C.useMemo)((function(){return K&&"status"in K&&"beta"===K.status}),[K]);return(0,_.jsx)(A.AssetProvider,{flex:1,width:"100%",assetId:null===H||void 0===H?void 0:H.underlyingId,children:(0,_.jsxs)(w.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,_.jsxs)(w.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,_.jsxs)(w.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(w.xu,{pt:8,children:(0,_.jsx)(x.AssetLabel,{assetId:null===H||void 0===H?void 0:H.id})}),(0,_.jsxs)(w.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(p.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsxs)(w.gC,{spacing:2,alignItems:"flex-start",children:[(0,_.jsx)(N,{amount:m,amountUsd:k,setAmount:f}),(0,_.jsxs)(w.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsxs)(w.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,_.jsx)(A.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,_.jsx)(Z.zx,{variant:"selector",onClick:at,children:"MAX"})]})]})}),i&&(0,_.jsx)(w.xv,{textStyle:"captionSmaller",color:"orange",children:i})]})]}),rt&&(0,_.jsx)(p.Card.Dark,{p:2,border:0,children:(0,_.jsx)(j.Translation,{textStyle:"captionSmaller",translation:"trade.actions.deposit.messages.beta",textAlign:"center"})}),(0,_.jsx)(G,{assetId:null===H||void 0===H?void 0:H.id,action:"deposit",amount:m,amountUsd:k})]}),(0,_.jsxs)(w.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,_.jsx)(L,{}),st]})]})})},R=function(t){var e=t.itemIndex,n=(0,C.useState)("0"),a=(0,o.Z)(n,2),i=a[0],c=a[1],u=(0,C.useState)(""),d=(0,o.Z)(u,2),m=d[0],h=d[1],b=(0,C.useState)(0),k=(0,o.Z)(b,2),I=k[0],E=k[1],M=(0,v.Y)().account,U=(0,f.m)().searchParams,P=q(),F=P.dispatch,z=P.activeItem,B=P.activeStep,D=(0,A.useAssetProvider)(),O=D.asset,W=D.vault,V=D.underlyingAsset,R=D.translate,Y=(0,y.R)(),X=Y.sendTransaction,H=Y.setGasLimit,K=Y.state.transaction,Q=(0,g.w)().selectors,$=Q.selectAssetPriceUsd,J=Q.selectVaultPrice,tt=Q.selectAssetBalance,et=Q.selectVaultGauge,nt=Q.selectAssetById,at=(0,C.useMemo)((function(){return U}),[U]),it=(0,o.Z)(at,2)[1],st=(0,C.useMemo)((function(){return tt?tt(null===W||void 0===W?void 0:W.id):(0,T.gA)(0)}),[tt,null===W||void 0===W?void 0:W.id]),rt=(0,C.useMemo)((function(){return(null===O||void 0===O?void 0:O.id)&&et&&et(O.id)}),[et,null===O||void 0===O?void 0:O.id]),ot=(0,C.useMemo)((function(){return rt&&nt&&nt(rt.id)}),[nt,rt]),lt=(0,C.useMemo)((function(){if(!tt)return(0,T.gA)(0);var t=tt(null===W||void 0===W?void 0:W.id),e=J(null===W||void 0===W?void 0:W.id);return t.times(e)}),[tt,J,null===W||void 0===W?void 0:W.id]),ct=(0,C.useMemo)((function(){return h(""),!(!(0,T.gA)(i).isNaN()&&!(0,T.gA)(i).lte(0))||!!(0,T.gA)(i).gt(lt)&&(h(R("trade.errors.insufficientFundsForAmount",{symbol:null===V||void 0===V?void 0:V.name})),!0)}),[i,lt,V,R]),ut=(0,C.useCallback)((function(){M&&!ct&&W&&"getWithdrawContractSendMethod"in W&&"getWithdrawParams"in W&&(0,r.Z)((0,s.Z)().mark((function t(){var e,n,a,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=J(W.id),n=l.Z.minimum(st,(0,T.gA)(i).div(e)),a=W.getWithdrawParams(n),r=W.getWithdrawContractSendMethod(a),X(W.id,W.id,r);case 5:case"end":return t.stop()}}),t)})))()}),[M,ct,i,W,st,J,X]);(0,C.useEffect)((function(){B===e&&"success"===K.status&&c("")}),[K.status,B,e]),(0,C.useEffect)((function(){if($&&J&&V&&W){var t=$(V.id),e=parseFloat((0,T.gA)(i).times(t).toString())||0;E(e)}}),[V,W,i,J,$,F]);var dt=(0,C.useCallback)((function(){lt&&c(lt.toString())}),[lt]),mt=(0,C.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var e,n,a,i,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(W&&"getWithdrawContractSendMethod"in W&&"getWithdrawParams"in W){t.next=2;break}return t.abrupt("return");case 2:if(e=W.getMethodDefaultGasLimit("withdraw"),M&&!st.lte(0)){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===M||void 0===M?void 0:M.address},a=W.getWithdrawParams(st.toFixed()),i=W.getWithdrawContractSendMethod(a),t.next=10,(0,T.$K)(i,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return r=t.t0,t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)}))),[M,st,W]);(0,C.useEffect)((function(){z===e&&(0,r.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt();case 2:e=t.sent,H(e);case 4:case"end":return t.stop()}}),t)})))()}),[z,e,mt,H]),(0,C.useEffect)((function(){z===e&&(F({type:"SET_ASSET",payload:O}),J&&W&&(F({type:"SET_AMOUNT",payload:(0,T.gA)(i).toString()}),F({type:"SET_DEFAULT_AMOUNT",payload:(0,T.gA)(i).toString()})))}),[W,O,i,J,z,e,F,ut]);var pt=(0,C.useMemo)((function(){return M?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.withdraw",disabled:ct,onClick:ut,variant:"ctaFull"}):(0,_.jsx)(S.ConnectWalletButton,{variant:"ctaFull"})}),[M,ct,ut]),vt=(0,C.useMemo)((function(){return W&&"messages"in W?W.messages:void 0}),[W]);return(0,_.jsx)(A.AssetProvider,{flex:1,width:"100%",assetId:null===O||void 0===O?void 0:O.id,children:(0,_.jsxs)(w.gC,{pt:8,flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,_.jsxs)(w.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,_.jsxs)(w.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(w.xu,{pt:8,children:(0,_.jsx)(x.AssetLabel,{assetId:null===O||void 0===O?void 0:O.id})}),(0,_.jsxs)(w.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(p.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsxs)(w.gC,{spacing:2,alignItems:"flex-start",children:[(0,_.jsx)(N,{amount:i,amountUsd:I,setAmount:c}),(0,_.jsxs)(w.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsxs)(w.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,_.jsx)(A.AssetProvider.VaultBalance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,_.jsx)(Z.zx,{variant:"selector",onClick:dt,children:"MAX"})]})]})}),m&&(0,_.jsx)(w.xv,{textStyle:"captionSmaller",color:"orange",children:m})]})]}),lt.gt(0)&&null!==vt&&void 0!==vt&&vt.withdraw?(0,_.jsx)(p.Card.Dark,{p:2,border:0,children:(0,_.jsx)(j.Translation,{textStyle:"captionSmaller",translation:vt.withdraw,textAlign:"center"})}):(0,T.gA)(null===ot||void 0===ot?void 0:ot.balance).gt(0)&&(0,_.jsx)(p.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,_.jsxs)(w.Ug,{spacing:3,width:"full",children:[(0,_.jsx)(j.Translation,{textStyle:"captionSmaller",translation:"trade.actions.withdraw.messages.unstakeFromGauge",textAlign:"left"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"defi.goToGauge",fontSize:"xs",height:"auto",width:"auto",py:3,px:7,onClick:function(){return it("?tab=gauge")}})]})}),(0,_.jsx)(G,{assetId:null===O||void 0===O?void 0:O.id,action:"withdraw",amount:i,amountUsd:I})]}),(0,_.jsxs)(w.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,_.jsx)(L,{}),pt]})]})})},Y=function(t){var e=t.goBack,n=t.close,s=t.height,r=(0,i.Z)(t,B);return(0,_.jsxs)(w.Ug,{width:"100%",position:"relative",alignItems:"center",height:s||"24px",justifyContent:"flex-start",children:[e&&(0,_.jsx)(w.kC,{zIndex:1,position:"relative",children:(0,_.jsx)(b.sG8,{size:24,onClick:function(){return e()},style:{cursor:"pointer"}})}),(0,_.jsx)(w.kC,{zIndex:0,width:"100%",justifyContent:"center",position:e?"absolute":"relative",children:(0,_.jsx)(j.Translation,(0,a.Z)({component:w.xv,textStyle:"ctaStatic","aria-selected":!0},r))}),n&&(0,_.jsx)(w.kC,{top:0,right:0,zIndex:1,position:"absolute",children:(0,_.jsx)(b.lTq,{size:24,onClick:function(){return n()},style:{cursor:"pointer"}})})]})},X=function(t){var e=t.goBack,n=(0,C.useRef)(null),a=(0,f.m)().searchParams,i=(0,v.Y)(),s=i.chainId,r=i.explorer,l=(0,C.useState)(0),c=(0,o.Z)(l,2),u=c[0],d=c[1],p=(0,C.useState)(1),x=(0,o.Z)(p,2),h=x[0],S=x[1],k=(0,A.useAssetProvider)(),I=k.underlyingAsset,E=k.theme,U=k.translate,P=k.asset,F=(0,C.useState)(null),z=(0,o.Z)(F,2),B=z[0],D=z[1],N=(0,C.useState)(null),O=(0,o.Z)(N,2),L=O[0],W=O[1],G=q(),V=G.amount,R=G.actionType,X=G.baseActionType,H=G.activeStep,K=G.activeItem,Q=(0,g.w)().selectors,$=Q.selectAssetById,J=Q.selectVaultById,tt=Q.selectVaultGauge,et=(0,y.R)(),nt=et.state.transaction,at=et.retry,it=et.cleanTransaction,st=(0,C.useMemo)((function(){return a}),[a]),rt=(0,o.Z)(st,2)[1],ot=(0,C.useMemo)((function(){return(null===P||void 0===P?void 0:P.id)&&J&&J(P.id)}),[J,null===P||void 0===P?void 0:P.id]),lt=(0,C.useMemo)((function(){return(null===P||void 0===P?void 0:P.id)&&tt&&tt(P.id)}),[tt,null===P||void 0===P?void 0:P.id]),ct=(0,C.useCallback)((function(t){if(t&&nt.status&&"pending"===nt.status){var e=Math.max(0,Math.ceil((t-Date.now())/1e3));(!B||e>B)&&D(e),e<=0||(n.current=setTimeout((function(){ct(t)}),1e3))}}),[B,nt]);(0,C.useEffect)((function(){nt.status&&["success","failed"].includes(nt.status)&&(n.current&&clearTimeout(n.current),D(0),n.current=null,d(h))}),[null===nt||void 0===nt?void 0:nt.status,d,h]),(0,C.useEffect)((function(){if(null!==nt&&void 0!==nt&&nt.estimatedTime&&null!==nt&&void 0!==nt&&nt.timestamp&&"pending"===(null===nt||void 0===nt?void 0:nt.status)&&!L){var t=1e3*(null===nt||void 0===nt?void 0:nt.estimatedTime),e=+(null===nt||void 0===nt?void 0:nt.timestamp)+1e3*(null===nt||void 0===nt?void 0:nt.estimatedTime);W(e),S(t),d(t),ct(e)}}),[nt,L,ct]);var ut=(0,C.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("pending"!==(null===nt||void 0===nt?void 0:nt.status))return it(),d(0),D(null),S(1),W(null),n.current&&clearTimeout(n.current),n.current=null,e(t)}),[null===nt||void 0===nt?void 0:nt.status,it,e]);(0,C.useEffect)((function(){null!==nt&&void 0!==nt&&nt.status||!K||ut(!1)}),[null===nt||void 0===nt?void 0:nt.status,K,ut]);var dt=(0,C.useMemo)((function(){return nt.actionType||R}),[R,nt.actionType]),mt=(0,C.useMemo)((function(){return nt.amount?(0,T.dm)((0,T.d5)(nt.amount),8):V===m.Uf?U("trade.unlimited"):(0,T.dm)((0,T.d5)(V),8)}),[V,U,nt.amount]),pt=(0,C.useMemo)((function(){if(!$)return null===I||void 0===I?void 0:I.name;var t=$(nt.assetId);return(null===t||void 0===t?void 0:t.name)||(null===I||void 0===I?void 0:I.name)}),[$,null===I||void 0===I?void 0:I.name,nt.assetId]),vt=(0,C.useMemo)((function(){var t,e,n,a;switch(null===nt||void 0===nt?void 0:nt.status){case"pending":return(0,_.jsx)(j.Translation,{component:w.xv,translation:0===B?"modals.status.body.long":"modals.".concat(dt,".status.pending"),textStyle:"heading",fontSize:"h3",textAlign:"center"});case"success":return(0,_.jsxs)(w.gC,{spacing:2,children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"modals.".concat(dt,".status.success"),params:{asset:pt,amount:mt},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(null===ot||void 0===ot||null===(t=ot.messages)||void 0===t||null===(e=t.actions)||void 0===e?void 0:e[dt])&&(0,_.jsx)(j.Translation,{pb:2,translation:null===ot||void 0===ot||null===(n=ot.messages)||void 0===n||null===(a=n.actions)||void 0===a?void 0:a[dt],textStyle:"captionSmall",textAlign:"center"}),"deposit"===dt&&lt?(0,_.jsxs)(w.gC,{spacing:4,children:[(0,_.jsx)(j.Translation,{translation:"trade.depositGauge",textAlign:"center"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(dt,".status.success.buttonGauge"),onClick:function(){ut(),setTimeout((function(){return rt("?tab=gauge")}),1e3)},variant:"ctaFull"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(dt,".status.success.button"),onClick:function(){ut()},variant:"ctaPrimaryOutline",width:"100%"})]}):H?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.".concat(X),onClick:function(){return ut(!0)},variant:"ctaFull"}):(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(dt,".status.success.button"),onClick:function(){return ut()},variant:"ctaFull"})]});case"failed":return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"modals.".concat(dt,".status.failed"),params:{asset:pt,amount:T.dm},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,_.jsx)(j.Translation,{component:w.xv,translation:"modals.status.body.failed",params:{asset:pt,amount:T.dm},textStyle:"captionSmall",textAlign:"center"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.retry",leftIcon:(0,_.jsx)(b.Ffb,{size:24}),onClick:function(){at()},variant:"ctaFull"}),(0,_.jsx)(j.Translation,{component:w.xv,translation:"common.cancel",textStyle:["cta","link"],onClick:function(){return ut()}})]});default:return null}}),[null===nt||void 0===nt?void 0:nt.status,ot,dt,pt,mt,B,H,X,ut,at,rt,lt]),xt=(0,C.useMemo)((function(){return!(null===nt||void 0===nt||!nt.estimatedTime)&&"pending"===(null===nt||void 0===nt?void 0:nt.status)&&0===B}),[null===nt||void 0===nt?void 0:nt.estimatedTime,null===nt||void 0===nt?void 0:nt.status,B]),ft=(0,C.useMemo)((function(){return(null===nt||void 0===nt||!nt.status||!["success","failed"].includes(null===nt||void 0===nt?void 0:nt.status))&&(!(null!==nt&&void 0!==nt&&nt.estimatedTime)||xt)}),[nt,xt]),gt=(0,C.useMemo)((function(){return null===nt||void 0===nt||!nt.status||ft?"blue.400":["success","pending"].includes(null===nt||void 0===nt?void 0:nt.status)?"green.400":"red.400"}),[null===nt||void 0===nt?void 0:nt.status,ft]),ht=(0,C.useMemo)((function(){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(w.xu,{height:5,children:(0,_.jsx)(j.Translation,{component:w.xv,translation:"pending"===(null===nt||void 0===nt?void 0:nt.status)?null!==nt&&void 0!==nt&&nt.estimatedTime?"modals.status.estimatedTime":"modals.status.calculateEstimatedTime":"",textStyle:"captionSmaller",textAlign:"center"})}),(0,_.jsx)(w.xu,{width:"125px",height:"125px",bg:"card.bgLight",borderRadius:"50%",position:"relative",children:(0,_.jsx)(M.D8,{size:145,top:"-10px",left:"-10px",thickness:"5px",position:"absolute",value:u,max:h,trackColor:"card.bgLight",color:gt,isIndeterminate:ft,sx:{".chakra-progress__indicator":{transitionTimingFunction:"ease",transitionProperty:"stroke-dasharray",transitionDuration:"pending"===(null===nt||void 0===nt?void 0:nt.status)&&null!==nt&&void 0!==nt&&nt.estimatedTime?"".concat(null===nt||void 0===nt?void 0:nt.estimatedTime,"s"):"0.6s"}},children:"pending"===(null===nt||void 0===nt?void 0:nt.status)?!!B&&(0,_.jsx)(M.ip,{textStyle:["bold","h2"],children:B>3600?">1h":B>1800?">30m":"".concat(B,"s")}):"success"===(null===nt||void 0===nt?void 0:nt.status)?(0,_.jsx)(M.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,_.jsx)(b.ddU,{size:50,color:E.colors.green[400]})}):"failed"===(null===nt||void 0===nt?void 0:nt.status)&&(0,_.jsx)(M.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,_.jsx)(b.lTq,{size:50,color:E.colors.red[400]})})})})]})}),[null===nt||void 0===nt?void 0:nt.status,null===nt||void 0===nt?void 0:nt.estimatedTime,ft,gt,h,B,u,E]),yt=(0,C.useMemo)((function(){var t="pending"!==(null===nt||void 0===nt?void 0:nt.status)&&ut;return(0,_.jsx)(Y,{goBack:t?function(){return t()}:void 0,translation:"modals.status.header.".concat(null===nt||void 0===nt?void 0:nt.status)})}),[null===nt||void 0===nt?void 0:nt.status,ut]);return(0,_.jsxs)(_.Fragment,{children:[yt,(0,_.jsx)(w.kC,{p:14,flex:1,width:"100%",children:(0,_.jsxs)(w.gC,{spacing:4,children:[ht,vt]})}),(null===nt||void 0===nt?void 0:nt.hash)&&(0,_.jsx)(w.Ug,{spacing:1,width:"100%",justifyContent:"center",children:(0,_.jsx)(j.Translation,{component:w.rU,translation:"defi.viewOnChain",textStyle:"link",fontSize:"sm",fontWeight:700,isExternal:!0,href:(0,T.QG)(s,r,nt.hash)})})]})},H=function(t){var e=t.save,n=(0,y.R)(),a=n.state,i=a.estimatedFeesUsd,s=a.estimatedTimes,r=a.gasPrices,o=a.transactionSpeed,l=n.setTransactionSpeed;return(0,_.jsxs)(w.gC,{p:4,flex:1,width:"100%",justifyContent:"space-between",children:[(0,_.jsx)(Y,{height:"auto",mb:10,translation:"common.transactionSpeed"}),(0,_.jsx)(w.gC,{p:0,flex:1,spacing:2,width:"100%",justifyContent:"flex-start",children:Object.keys(c.U_).map((function(t){var e=c.U_[t],n=o===e;return(0,_.jsx)(p.Card.Outline,{px:4,py:4,style:{cursor:"pointer"},width:"100%","aria-selected":n,layerStyle:["cardInteractive"],bg:n?"card.bgLight":"transparent",onClick:function(){return l(e)},children:(0,_.jsxs)(w.Ug,{spacing:4,width:"100%",alignItems:"center",children:[(0,_.jsxs)(w.Ug,{spacing:2,width:"40%",alignItems:"center",children:[(0,_.jsx)(U.Y8,{colorScheme:"blue",isChecked:n}),(0,_.jsxs)(w.Ug,{flex:1,spacing:1,alignItems:"center",children:[(0,_.jsx)(j.Translation,{component:w.xv,whiteSpace:"nowrap",textStyle:["tableCell","primary"],translation:"modals.send.sendForm.".concat(e)}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!r,width:"100%",children:(0,_.jsx)(u.Amount,{prefix:"(",suffix:")",decimals:0,textStyle:"captionSmaller",fontWeight:"600",color:"primary",value:null===r||void 0===r?void 0:r[e]})})]})]}),(0,_.jsxs)(w.gC,{spacing:2,width:"25%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,_.jsx)(j.Translation,{component:w.xv,textStyle:"captionSmall",translation:"common.gasFee"}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!i,width:"100%",children:(0,_.jsx)(u.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:m.EI,value:null===i||void 0===i?void 0:i[e]})})]}),(0,_.jsxs)(w.gC,{spacing:2,width:"35%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,_.jsx)(j.Translation,{component:w.xv,textStyle:"captionSmall",translation:"modals.status.estimatedTime"}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!s,width:"100%",children:(0,_.jsx)(w.xv,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",children:(0,T.mr)(null===s||void 0===s?void 0:s[e])})})]})]})},"transactionSpeed_".concat(e))}))}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.close",onClick:function(){return e()},variant:"ctaFull"})]})},K={amount:"",asset:null,activeStep:0,activeItem:0,actionType:"",defaultAmount:"",baseActionType:"",dispatch:function(){},executeAction:!1},Q=function(t,e){switch(e.type){case"SET_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{amount:e.payload});case"SET_ASSET":return(0,a.Z)((0,a.Z)({},t),{},{asset:e.payload});case"SET_EXECUTE_ACTION":return(0,a.Z)((0,a.Z)({},t),{},{executeAction:e.payload});case"SET_DEFAULT_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{defaultAmount:e.payload});case"SET_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{actionType:e.payload});case"SET_BASE_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{baseActionType:e.payload});case"SET_ACTIVE_STEP":return(0,a.Z)((0,a.Z)({},t),{},{activeStep:e.payload});default:return(0,a.Z)({},t)}},$=(0,C.createContext)(K),q=function(){return(0,C.useContext)($)},J=function(t){var e=t.assetId,n=t.actions,s=(0,i.Z)(t,D),r=(0,C.useRef)(null),l=(0,A.useAssetProvider)().translate,c=(0,C.useState)(0),d=(0,o.Z)(c,2),v=d[0],x=d[1],f=(0,C.useState)(0),S=(0,o.Z)(f,2),T=S[0],k=S[1],I=(0,C.useReducer)(Q,K),E=(0,o.Z)(I,2),M=E[0],U=E[1],P=(0,C.useState)(!1),z=(0,o.Z)(P,2),B=z[0],N=z[1],O=(0,g.w)().selectors.selectAssetById,L=(0,y.R)(),W=L.state,G=W.gasPrice,V=W.transaction,R=L.retry,q=L.cleanTransaction,J=L.updateGasPrices,tt=(0,C.useMemo)((function(){return n[T]}),[n,T]),et=(0,C.useMemo)((function(){return M.activeStep?tt.steps[M.activeStep-1]:tt}),[tt,M.activeStep]),nt=(0,C.useMemo)((function(){return n[T].component}),[n,T]);(0,C.useEffect)((function(){x(M.activeStep)}),[M.activeStep]),(0,C.useEffect)((function(){return r.current&&(clearInterval(r.current),r.current=null),V.status&&!["success","failed"].includes(V.status)||(r.current=setInterval((function(){J()}),2e4)),function(){r.current&&(clearInterval(r.current),r.current=null)}}),[V,J]),(0,C.useEffect)((function(){var t=et?et.type:tt.type;U({type:"SET_ACTION_TYPE",payload:t}),U({type:"SET_BASE_ACTION_TYPE",payload:tt.type})}),[tt,et]);var at=(0,C.useMemo)((function(){return V.actionType||M.actionType}),[M.actionType,V.actionType]),it=(0,C.useMemo)((function(){return V.amount?V.amount:M.amount===m.Uf?l("trade.unlimited"):parseFloat(M.amount)}),[M.amount,l,V.amount]),st=(0,C.useMemo)((function(){var t,e;if(!O)return null===(t=M.asset)||void 0===t?void 0:t.name;var n=O(V.assetId);return(null===n||void 0===n?void 0:n.name)||(null===(e=M.asset)||void 0===e?void 0:e.name)}),[O,M.asset,V.assetId]);(0,C.useEffect)((function(){var t,e=tt.steps.length+1;switch(null===V||void 0===V?void 0:V.status){case"created":return x(e);case"pending":return x(e+1);case"failed":return 4001===(null===(t=V.error)||void 0===t?void 0:t.code)?(q(),x(M.activeStep)):x(e+1);case"success":x(e+1),M.activeStep&&U({type:"SET_EXECUTE_ACTION",payload:!0})}}),[V,q,tt,M.activeStep]);var rt=(0,C.useMemo)((function(){return v>tt.steps.length?null:B?(0,_.jsx)(w.kC,{top:5,right:8,zIndex:11,position:"absolute",children:(0,_.jsx)(b.lTq,{size:24,style:{cursor:"pointer"},onClick:function(){return N((function(t){return!t}))}})}):(0,_.jsx)(Z.zx,{p:2,right:4,zIndex:11,borderRadius:8,variant:"ctaBlue",position:"absolute",onClick:function(){return N((function(t){return!t}))},children:(0,_.jsxs)(w.Ug,{spacing:1,children:[(0,_.jsx)(b.Qpb,{color:"primary",size:24}),(0,_.jsx)(u.Amount,{abbreviate:!1,textStyle:"titleSmall",color:"primary",value:G})]})})}),[tt,v,G,B,N]),ot=(0,C.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?U({type:"SET_ACTIVE_STEP",payload:0}):x(M.activeStep)}),[U,x,M.activeStep]);return(0,_.jsx)(A.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,_.jsx)($.Provider,{value:(0,a.Z)((0,a.Z)({},M),{},{activeItem:v,dispatch:U}),children:(0,_.jsxs)(p.Card.Flex,(0,a.Z)((0,a.Z)({p:4,width:"100%",overflow:"hidden",minHeight:"590px",direction:"column",position:"relative",alignItems:"flex-start",id:"operative-component"},s),{},{children:[rt,B&&(0,_.jsx)(w.gC,{top:0,left:0,flex:1,zIndex:10,bg:"card.bg",width:"100%",height:"100%",position:"absolute",id:"transaction-speed-selector",children:(0,_.jsx)(H,{save:function(){return N(!1)}})}),(0,_.jsxs)(h.ChakraCarousel,{gap:0,activeItem:v,children:[(0,_.jsxs)(w.kC,{flex:1,width:"100%",direction:"column",alignItems:"flex-start",children:[(0,_.jsx)(w.Ug,{alignItems:"center",justifyContent:"space-between",id:"operative-component-header",children:(0,_.jsx)(F.mQ,{defaultIndex:0,variant:"button",onChange:function(t){k(t)},children:(0,_.jsx)(F.td,{children:n.map((function(t,e){return(0,_.jsx)(j.Translation,{mr:2,component:F.OK,translation:t.label},"action_".concat(e))}))})})}),(0,_.jsx)(w.kC,{flex:1,width:"100%",children:!!nt&&(0,_.jsx)(nt,{itemIndex:0})})]}),n[T].steps.map((function(t,e){var n=t.component;return(0,_.jsx)(n,{itemIndex:e+1,goBack:function(){return U({type:"SET_ACTIVE_STEP",payload:e})}},"step_".concat(e))})),(0,_.jsxs)(w.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:[(0,_.jsx)(Y,{goBack:function(){return x(M.activeStep)},translation:"modals.confirm.".concat(at,".header")}),(0,_.jsx)(w.M5,{p:14,flex:1,width:"100%",children:(0,_.jsxs)(w.gC,{spacing:6,children:[(0,_.jsx)(b.lTP,{size:72}),(0,_.jsx)(j.Translation,{component:w.xv,translation:"trade.confirmTransactionWallet",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,_.jsxs)(w.gC,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"modals.".concat(at,".status.confirm"),params:{},textStyle:"captionSmall",textAlign:"center"}),(0,_.jsx)(w.Ug,{children:(0,_.jsx)(u.Amount,{textStyle:"bold",value:it,minPrecision:parseFloat(it)<1?5:3,suffix:" ".concat(st)})})]})]})}),(0,_.jsxs)(w.Ug,{spacing:1,width:"100%",justifyContent:"center",children:[(0,_.jsx)(j.Translation,{component:w.xv,translation:"trade.transactionDontAppear",textStyle:"captionSmall"}),(0,_.jsx)(j.Translation,{component:w.xv,translation:"common.retry",textStyle:["captionSmall","link","bold"],onClick:function(){return R()}})]})]}),(0,_.jsx)(w.gC,{flex:1,spacing:0,alignItems:"flex-start",id:"transaction-status",children:(0,_.jsx)(X,{goBack:ot})})]})]}))})})}}}]);