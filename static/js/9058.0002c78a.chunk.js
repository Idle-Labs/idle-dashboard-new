"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[9058,8951],{78951:function(t,n,e){e.r(n),e.d(n,{EstimatedGasFees:function(){return p}});var i=e(7276),a=e(87099),o=e(86059),s=e(96699),r=e(3498),l=e(55967),c=e(88935),d=e(15542),u=e(23023),x=e(45263),p=function(){var t=(0,s.Fg)(),n=(0,c.Y)().chainToken,e=(0,u.R)().state,p=e.transactionSpeed,m=e.estimatedFees,f=e.estimatedFeesUsd,v=(0,i.useMemo)((function(){return m?m[p]:null}),[m,p]),g=(0,i.useMemo)((function(){return f?f[p]:null}),[f,p]);return(0,x.jsxs)(r.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,x.jsx)(l.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,x.jsx)(d.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,x.jsx)(o.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:a.EI,value:g}),g&&(0,x.jsx)(o.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===n||void 0===n?void 0:n.symbol,")"),value:v,decimals:4})]})}},59058:function(t,n,e){e.r(n),e.d(n,{Unstake:function(){return w}});var i=e(74165),a=e(15861),o=e(33482),s=e(55967),r=e(88935),l=e(7276),c=e(43127),d=e(3498),u=e(15542),x=e(1669),p=e(23023),m=e(78951),f=e(4710),v=e(86393),g=e(7386),h=e(99594),k=e(45263),w=function(t){var n,e,w,S=t.itemIndex,j=(0,r.Y)().account,y=(0,g.useAssetProvider)(),C=y.asset,E=y.vault,T=(0,f.useOperativeComponent)(),b=T.dispatch,A=T.activeItem,M=T.setActionIndex,F=(0,x.w)(),W=F.stakingData,z=F.selectors.selectVaultPrice,I=(0,p.R)(),P=I.sendTransaction,U=I.setGasLimit,Z=I.state.block,_=(0,l.useMemo)((function(){var t;return(0,h.d5)(null===W||void 0===W||null===(t=W.position)||void 0===t?void 0:t.deposited)}),[W]),D=(0,l.useMemo)((function(){var t,n;return!(null===W||void 0===W||null===(t=W.position)||void 0===t||!t.lockEnd||!Z)&&(0,h.qF)(null===W||void 0===W||null===(n=W.position)||void 0===n?void 0:n.lockEnd).isSameOrBefore((0,h.qF)(1e3*Z.timestamp))}),[W,Z]),L=(0,l.useMemo)((function(){var t,n;return null!==W&&void 0!==W&&null!==(t=W.position)&&void 0!==t&&t.lockEnd?(0,h.p6)(null===W||void 0===W||null===(n=W.position)||void 0===n?void 0:n.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[W]),Y=(0,l.useCallback)((function(){j&&D&&E&&"getWithdrawContractSendMethod"in E&&"getWithdrawParams"in E&&E instanceof o.y&&(0,a.Z)((0,i.Z)().mark((function t(){var n,e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=E.getWithdrawParams(),e=E.getWithdrawContractSendMethod(n),P(E.id,E.id,e);case 3:case"end":return t.stop()}}),t)})))()}),[j,D,E,P]),G=(0,l.useCallback)((0,a.Z)((0,i.Z)().mark((function t(){var n,e,a,s,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E&&"getWithdrawContractSendMethod"in E&&"getWithdrawParams"in E&&E instanceof o.y){t.next=2;break}return t.abrupt("return");case 2:if(n=E.getMethodDefaultGasLimit("unstake"),j&&D){t.next=5;break}return t.abrupt("return",n);case 5:return e={from:null===j||void 0===j?void 0:j.address},a=E.getWithdrawParams(),s=E.getWithdrawContractSendMethod(a),t.next=10,(0,h.$K)(s,e);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=n;case 13:return r=t.t0,t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)}))),[j,E,D]);(0,l.useEffect)((function(){A===S&&(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:n=t.sent,U(n);case 4:case"end":return t.stop()}}),t)})))()}),[A,S,G,U]),(0,l.useEffect)((function(){A===S&&(b({type:"SET_ASSET",payload:C}),z&&E&&(b({type:"SET_AMOUNT",payload:(0,h.gA)(_).toString()}),b({type:"SET_DEFAULT_AMOUNT",payload:(0,h.gA)(_).toString()})))}),[E,C,_,z,A,S,b,Y]);var O=(0,l.useMemo)((function(){return j?(0,k.jsx)(u.Translation,{component:c.zx,translation:"common.withdraw",disabled:!D,onClick:Y,variant:"ctaFull"}):(0,k.jsx)(v.ConnectWalletButton,{variant:"ctaFull"})}),[j,D,Y]);return(0,k.jsx)(g.AssetProvider,{flex:1,width:"100%",assetId:null===C||void 0===C?void 0:C.id,children:(0,k.jsxs)(d.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:null!==W&&void 0!==W&&null!==(n=W.position)&&void 0!==n&&n.lockEnd?8:0,children:[(0,k.jsx)(d.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:null!==W&&void 0!==W&&null!==(e=W.position)&&void 0!==e&&e.lockEnd?D?(0,k.jsx)(d.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,k.jsxs)(d.gC,{spacing:6,children:[(0,k.jsx)(s.ppH,{size:72}),(0,k.jsxs)(d.gC,{spacing:4,children:[(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.canWithdrawLock",params:{amount:(0,h.dm)(_),asset:null===C||void 0===C?void 0:C.name},textStyle:"captionSmall",textAlign:"center"})]})]})}):(0,k.jsxs)(d.gC,{py:20,flex:1,spacing:6,px:[6,10],width:"100%",children:[(0,k.jsx)(s.FKe,{size:72}),(0,k.jsxs)(d.gC,{spacing:4,children:[(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.lockNotExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.waitUntilLockExpired",params:{lockEndDate:L},textStyle:"captionSmall",textAlign:"center"}),(0,k.jsx)(u.Translation,{component:c.zx,translation:"staking.increaseLock",onClick:function(){return M(0)},variant:"ctaPrimary",px:10})]})]}):(0,k.jsx)(d.M5,{px:6,flex:1,width:"100%",children:(0,k.jsxs)(d.gC,{spacing:5,children:[(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.noStake",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,k.jsx)(u.Translation,{component:d.xv,translation:"staking.stakeBeforeUnstake",textStyle:"captionSmall",textAlign:"center"}),(0,k.jsx)(u.Translation,{component:c.zx,translation:"common.stake",onClick:function(){return M(0)},variant:"ctaPrimary",px:10})]})})}),(null===W||void 0===W||null===(w=W.position)||void 0===w?void 0:w.lockEnd)&&D&&(0,k.jsxs)(d.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[D&&(0,k.jsx)(m.EstimatedGasFees,{}),O]})]})})}}}]);