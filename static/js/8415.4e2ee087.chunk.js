"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[8415,9020,3148,1617,1128,2734,6362,6624,8951,7041,8194,745,7577,1608,8024],{99020:function(t,e,n){n.r(e),n.d(e,{AnnouncementBanner:function(){return d}});var a=n(7276),i=n(54447),s=n(96699),o=n(3498),r=n(55967),l=n(15542),c=n(45263),d=function(t){var e=t.text,n=t.mode,d=void 0===n?"none":n,u=(0,s.Fg)(),m=(0,a.useMemo)((function(){return"success"===d?u.colors.darkGreen:"alert"===d?u.colors.yellow:""}),[u,d]);return(0,c.jsx)(i.Card.Dark,{p:[3,5],borderColor:m,children:(0,c.jsxs)(o.Kq,{width:"full",spacing:[2,3],alignItems:"center",justifyContent:"center",direction:["column","row"],children:["success"===d?(0,c.jsx)(r.ZSR,{size:24,color:m}):"alert"===d&&(0,c.jsx)(r.YTL,{size:24,color:m}),(0,c.jsx)(l.Translation,{textAlign:"center",translation:e,isHtml:!0,textStyle:"caption"})]})})}},3148:function(t,e,n){n.r(e),n.d(e,{AssetGeneralData:function(){return j},AssetGeneralDataField:function(){return h}});var a=n(1413),i=n(7276),s=n(55967),o=n(54447),r=n(79681),l=n(15542),c=n(1669),d=n(12056),u=n(75712),m=n(6940),p=n(96699),x=n(3498),f=n(70820),v=n(45263),g=function(t){var e=t.generalData,n=(0,p.Fg)(),a=(0,r.qM)();return e.tooltip?(0,v.jsxs)(x.Ug,{spacing:1,alignItems:"center",children:[(0,v.jsx)(l.Translation,{component:x.xv,translation:e.label,textStyle:"captionSmall"}),(0,v.jsx)(f.u,{hasArrow:!0,placement:"top",label:a(e.tooltip),children:(0,v.jsx)(m.TooltipContent,{children:(0,v.jsx)(s.I5p,{color:n.colors.cta,size:16})})})]}):(0,v.jsx)(l.Translation,{component:x.xv,translation:e.label,textStyle:"captionSmall"})},h=function(t){var e=t.generalData;return(0,v.jsxs)(x.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsxs)(x.Ug,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(g,{generalData:e}),e.inlineField&&(0,v.jsx)(u.AssetProvider.GeneralData,{section:"asset",field:e.inlineField})]}),(0,v.jsx)(u.AssetProvider.GeneralData,(0,a.Z)({section:"asset",field:e.field},e.props))]})},j=function(t){var e=t.assetId,n=(0,c.w)().selectors.selectAssetById,a=(0,i.useMemo)((function(){return n&&n(e)}),[n,e]),s=(0,i.useMemo)((function(){return(null===a||void 0===a?void 0:a.type)&&d.A[a.type]}),[a]);return(0,v.jsx)(u.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,v.jsxs)(o.Card.Dark,{children:[(0,v.jsx)(x.MI,{spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],children:(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.slice(0,5).map((function(t){return(0,v.jsx)(h,{generalData:t},"field_".concat(t.field))})))}),(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.length)>5&&(0,v.jsx)(x.MI,{pt:6,mt:6,spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],borderTop:"1px solid",borderTopColor:"divider",children:null===s||void 0===s?void 0:s.generalDataFields.slice(5).map((function(t){return(0,v.jsx)(h,{generalData:t},"field_".concat(t.field))}))})]})})}},61617:function(t,e,n){n.r(e),n.d(e,{AssetLabel:function(){return c}});var a=n(1413),i=n(45987),s=n(3498),o=n(75712),r=n(45263),l=["assetId","size","spacing","extraFields"],c=function(t){var e=t.assetId,n=t.size,c=void 0===n?"sm":n,d=t.spacing,u=t.extraFields,m=(0,i.Z)(t,l);return(0,r.jsx)(o.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,r.jsxs)(s.Ug,{spacing:d,alignItems:"center",justifyContent:"flex-start",children:[(0,r.jsx)(o.AssetProvider.Icon,{size:c}),(0,r.jsx)(o.AssetProvider.Name,(0,a.Z)({textStyle:"heading",fontSize:["15px","h3"],whiteSpace:"nowrap"},m)),null===u||void 0===u?void 0:u.map((function(t){return(0,r.jsx)(o.AssetProvider.GeneralData,{field:t},"extraField_".concat(t))}))]})})}},1128:function(t,e,n){n.r(e),n.d(e,{InputAmount:function(){return u}});var a=n(7276),i=n(99594),s=n(3498),o=n(3497),r=n(86059),l=n(1669),c=n(75712),d=n(45263),u=function(t){var e=t.inputHeight,n=t.amount,u=t.amountUsd,m=t.setAmount,p=t.isDisabled,x=void 0!==p&&p,f=(0,c.useAssetProvider)(),v=f.asset,g=f.underlyingAsset,h=(0,l.w)().selectors,j=h.selectAssetPriceUsd,y=h.selectVaultPrice,b=(0,a.useMemo)((function(){if(u)return(0,i.gA)(u);if(j&&y&&g&&v){var t=j(g.id),e=y(v.id);return"underlying"===v.type?parseFloat((0,i.gA)(n).times(t).toString())||0:parseFloat((0,i.gA)(n).times(t).times(e).toString())||0}}),[v,g,n,u,y,j]);return(0,d.jsxs)(s.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(o.II,{height:e,flex:1,type:"number",placeholder:"0",variant:"balance",value:(0,i.gA)(n).toString(),onChange:function(t){var e=t.target.value;m(Math.max(0,parseFloat(e)).toString())},disabled:x}),null!==u&&(0,d.jsx)(r.Amount.Usd,{abbreviateThresold:1e4,textStyle:"captionSmall",color:"brightGreen",prefix:"\u2248 $",value:(0,i.d5)(b).toString()})]})}},52734:function(t,e,n){n.r(e),n.d(e,{InputDate:function(){return d}});var a=n(1413),i=n(45987),s=(n(7276),n(99594)),o=n(3498),r=n(3497),l=n(45263),c=["inputHeight","value","setValue"],d=function(t){var e=t.inputHeight,n=t.value,d=t.setValue,u=(0,i.Z)(t,c);return(0,l.jsx)(o.Ug,{width:"100%",justifyContent:"space-between",children:(0,l.jsx)(r.II,(0,a.Z)({type:"date",height:e,flex:1,placeholder:"",variant:"balance",value:n||"",onChange:function(t){var e=t.target.value,n=(0,s.qF)(e).isValid()?(0,s.qF)(e):null;d(n)}},u))})}},37658:function(t,e,n){n.r(e),n.d(e,{InteractiveComponent:function(){return p}});var a=n(29439),i=n(7276),s=n(55967),o=n(66288),r=n(15542),l=n(3498),c=n(43127),d=n(18147),u=n(4710),m=n(45263),p=function(t){var e=t.assetId,n=t.vaultId,p=t.actions,x=(0,o.X)().isMobile,f=(0,i.useState)(!1),v=(0,a.Z)(f,2),g=v[0],h=v[1],j=(0,i.useState)(!1),y=(0,a.Z)(j,2),b=y[0],k=y[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.gC,{left:0,zIndex:[40,0],spacing:[0,6],id:"right-side",width:["100vw","27em"],height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],bg:x?"rgba(0, 0, 0, 0.5)":void 0,sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[(0,m.jsxs)(l.gC,{bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[x&&(0,m.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,m.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.exit",component:c.zx,leftIcon:(0,m.jsx)(s.sG8,{size:24}),onClick:function(){return h(!1)}}),(0,m.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:["common.show","navBar.transactions"],component:c.zx,onClick:function(){return k(!0)}})]}),(0,m.jsx)(u.OperativeComponent,{flex:1,minHeight:x?"auto":"590px",borderRadius:x?0:void 0,assetId:e,actions:p})]}),(0,m.jsxs)(l.gC,{flex:1,bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[b?0:"100vh",0],sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[x&&(0,m.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,m.jsx)(r.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.back",component:c.zx,leftIcon:(0,m.jsx)(s.sG8,{size:24}),onClick:function(){return k(!1)}}),(0,m.jsx)(r.Translation,{textStyle:"ctaStatic",translation:"assets.assetDetails.assetHistory.transactionHistory",component:l.xv})]}),(0,m.jsx)(d.TransactionList,{assetIds:[n],fullHeightOnMobile:!0,maxH:["100%",600]})]})]}),x&&(0,m.jsx)(l.kC,{p:4,left:0,bottom:0,border:0,width:"100%",zIndex:[10,0],bg:"card.bgDark",position:"fixed",children:(0,m.jsx)(r.Translation,{component:c.zx,translation:["common.start","common.deposit"],variant:"ctaFull",onClick:function(){return h(!0)}})})]})}},96362:function(t,e,n){n.r(e),n.d(e,{Approve:function(){return S}});var a=n(74165),i=n(15861),s=n(29439),o=n(54447),r=n(99594),l=n(87099),c=n(55967),d=n(39195),u=n(72230),m=n(7276),p=n(15542),x=n(1128),f=n(23023),v=n(3498),g=n(65984),h=n(43127),j=n(78951),y=n(4710),b=n(75712),k=n(45263),S=function(t){var e=t.amountUsd,n=t.goBack,S=t.itemIndex,w=(0,d.Y)().account,C=(0,y.useOperativeComponent)(),M=C.defaultAmount,I=C.dispatch,A=C.activeItem,T=(0,m.useState)(M),Z=(0,s.Z)(T,2),D=Z[0],E=Z[1],z=(0,b.useAssetProvider)(),P=z.underlyingAsset,F=z.vault,U=z.translate,L=z.theme,Y=(0,m.useState)(!1),B=(0,s.Z)(Y,2),_=B[0],R=B[1],O=(0,m.useState)(M),H=(0,s.Z)(O,2),N=H[0],G=H[1],W=(0,f.R)(),q=W.sendTransaction,V=W.setGasLimit;(0,m.useEffect)((function(){E(M)}),[M]);var $=(0,m.useCallback)((0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F&&"getAllowanceContractSendMethod"in F&&"getAllowanceParams"in F){t.next=2;break}return t.abrupt("return");case 2:if(e={from:null===w||void 0===w?void 0:w.address},n=F.getAllowanceParams(l.Uf),i=F.getAllowanceContractSendMethod(n)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,r.$K)(i,e);case 9:return s=t.sent,t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)}))),[w,F]),K=(0,m.useCallback)((function(){if(F&&"getAllowanceContractSendMethod"in F&&"getAllowanceParams"in F){var t=F.getAllowanceParams(N),e=F.getAllowanceContractSendMethod(t);e&&q(F.id,null===P||void 0===P?void 0:P.id,e)}}),[N,F,P,q]);return(0,m.useEffect)((function(){var t=_?D:l.Uf;G(t),A===S&&I({type:"SET_AMOUNT",payload:t})}),[_,D,I,A,S]),(0,m.useEffect)((function(){A===S&&(0,i.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:e=t.sent,V(e);case 4:case"end":return t.stop()}}),t)})))()}),[A,S,$,V]),(0,k.jsxs)(v.gC,{flex:1,width:"100%",alignItems:"flex-start",children:[(0,k.jsx)(u.NavBar,{goBack:n,translation:"modals.approve.header",params:{asset:null===P||void 0===P?void 0:P.name}}),(0,k.jsx)(v.kC,{p:14,pt:20,flex:1,children:(0,k.jsxs)(v.gC,{spacing:6,children:[(0,k.jsx)(c.PG4,{size:72}),(0,k.jsx)(p.Translation,{component:v.xv,prefix:"".concat(U("modals.approve.routerName")," "),translation:"modals.approve.body",params:{asset:null===P||void 0===P?void 0:P.name},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,k.jsxs)(v.gC,{width:"100%",spacing:6,children:[(0,k.jsxs)(v.Ug,{py:2,width:"100%",justifyContent:"space-between",borderTop:"1px solid ".concat(L.colors.divider),borderBottom:"1px solid ".concat(L.colors.divider),children:[(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.allowance",textStyle:"captionSmall"}),(0,k.jsxs)(v.Ug,{spacing:1,children:[(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.unlimited",textStyle:["captionSmall","clickable"],fontWeight:700,color:_?"ctaDisabled":"primary",onClick:function(){return R(!1)}}),(0,k.jsx)(g.r,{size:"sm",isChecked:_,onChange:function(t){return R(t.target.checked)}}),(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.exact",textStyle:["captionSmall","clickable"],fontWeight:700,color:_?"primary":"ctaDisabled",onClick:function(){return R(!0)}})]})]}),_&&(0,k.jsxs)(v.Ug,{children:[(0,k.jsx)(b.AssetProvider.Icon,{size:"sm"}),(0,k.jsx)(o.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,k.jsx)(x.InputAmount,{inputHeight:6,amount:D,amountUsd:e,setAmount:E})})]})]}),(0,k.jsx)(p.Translation,{component:h.zx,translation:"common.approve",onClick:K,variant:"ctaFull"})]})}),(0,k.jsx)(j.EstimatedGasFees,{})]})}},66624:function(t,e,n){n.r(e),n.d(e,{DynamicActionFields:function(){return j}});var a=n(93433),i=n(1413),s=n(45987),o=n(5128),r=n(7276),l=n(87099),c=n(12056),d=n(86059),u=n(60062),m=n(99594),p=n(15542),x=n(1669),f=n(3498),v=n(45263),g=["assetId","field","amount","amountUsd","stakingPower"],h=function(t){var e,n,a=t.assetId,l=t.field,c=t.amount,h=t.amountUsd,j=t.stakingPower,y=(0,s.Z)(t,g),b=(0,x.w)(),k=b.stakingData,S=b.helpers.vaultFunctionsHelper,w=b.selectors,C=w.selectAssetById,M=w.selectVaultById,I=w.selectVaultGauge,A=(0,r.useMemo)((function(){return a&&C&&C(a)}),[a,C]),T=(0,r.useMemo)((function(){return A&&C&&C(A.underlyingId)}),[A,C]),Z=(0,r.useMemo)((function(){return a&&M&&M(a)}),[a,M]),D=(0,r.useMemo)((function(){return a&&I&&I(a)}),[a,I]),E=(0,r.useMemo)((function(){return D&&C&&C(D.id)}),[D,C]),z=(0,r.useMemo)((function(){return(0,m.gA)(A.tvl).plus((0,m.d5)(c))}),[A,c]),P=(0,r.useMemo)((function(){return null===S||void 0===S?void 0:S.getVaultNewApr(A,Z,(0,m.gA)(c))}),[A,Z,c,S]),F=(0,r.useMemo)((function(){if((0,m.d5)(P).gt(0)){var t=(0,m.Bs)((0,m.d5)(P).div(100)).times(100),e=A.apyBreakdown?Object.keys(A.apyBreakdown||{}).filter((function(t){return"base"!==t})).reduce((function(t,e){switch(e){case"gauge":var n=null===E||void 0===E?void 0:E.gaugeData;if(n){var a=(0,m.d5)(null===n||void 0===n?void 0:n.totalSupply).plus((0,m.d5)(c)),i=(0,m.d5)(null===n||void 0===n?void 0:n.totalSupply).div(a),s=A.apyBreakdown[e].times(i);return t.plus(s)}return t.plus(A.apyBreakdown[e]);case"harvest":var o=(0,m.gA)(A.tvl).div(z),r=A.apyBreakdown[e].times(o);return t.plus(r);default:return t.plus(A.apyBreakdown[e])}}),(0,m.gA)(0)):(0,m.gA)(0);return(0,m.gA)(t).plus(e)}return(0,m.d5)(null===A||void 0===A?void 0:A.apy)}),[A,c,z,E,P]),U=(0,r.useMemo)((function(){return(0,m.d5)(h).gt(0)}),[h]),L=(0,r.useMemo)((function(){var t;return(0,m.d5)(null===A||void 0===A||null===(t=A.vaultPosition)||void 0===t?void 0:t.underlying.redeemable)}),[A]),Y=(0,r.useMemo)((function(){var t;return(0,m.d5)(null===A||void 0===A||null===(t=A.vaultPosition)||void 0===t?void 0:t.usd.redeemable)}),[A]),B=(0,r.useMemo)((function(){var t,e;return"flags"in Z&&(0,m.d5)(null===(t=Z.flags)||void 0===t?void 0:t.withdrawFee).gt(0)?Y.times(null===(e=Z.flags)||void 0===e?void 0:e.withdrawFee):(0,m.gA)(0)}),[Z,Y]),_=(0,r.useMemo)((function(){var t;return o.Z.maximum(0,(0,m.d5)(null===A||void 0===A||null===(t=A.vaultPosition)||void 0===t?void 0:t.usd.earnings).minus(B))}),[B,A]),R=(0,r.useMemo)((function(){return o.Z.minimum(1,(0,m.d5)(h).div(Y))}),[h,Y]),O=(0,r.useMemo)((function(){return o.Z.minimum(_,R.times(_))}),[_,R]),H=(0,r.useMemo)((function(){var t;return o.Z.maximum(0,(0,m.d5)(null===A||void 0===A||null===(t=A.vaultPosition)||void 0===t?void 0:t.usd.earnings).times(null===A||void 0===A?void 0:A.fee))}),[A]),N=(0,r.useMemo)((function(){return o.Z.minimum(H,(0,m.d5)(O).times(null===A||void 0===A?void 0:A.fee))}),[H,O,A]);Z instanceof u.C&&(_=_.plus(N),O=O.plus(N));var G=U&&(0,m.d5)(c).lte(L),W="cta",q=null;switch(l){case"boost":var V=F&&null!==A&&void 0!==A&&null!==(e=A.baseApr)&&void 0!==e&&e.gt(0)?F.div(null===A||void 0===A?void 0:A.baseApr):(0,m.gA)(0);q=(0,v.jsxs)(f.xv,(0,i.Z)((0,i.Z)({},y),{},{textStyle:"titleSmall",color:"primary",children:[V.toFixed(2),"x"]}));break;case"overperformance":var $=(0,m.d5)(h).times((0,m.gA)(null===A||void 0===A?void 0:A.baseApr).div(100)),K=(0,m.d5)(h).times((0,m.gA)(null===A||void 0===A?void 0:A.apy).div(100)),X=U?K.minus($):null;q=(0,v.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:X,suffix:"/year"}));break;case"newApy":q=(0,v.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:F}));break;case"totalGain":q=(0,v.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:O.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?O:null}));break;case"fee":q=(0,v.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:N.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?-N:null}));break;case"withdrawFee":(0,m.d5)(null===(n=Z.flags)||void 0===n?void 0:n.withdrawFee).gt(0)&&(W="orange",q=(0,v.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:B.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},y),{},{value:G?-B:null})));break;case"depositLimit":W="orange";var Q=o.Z.maximum(0,(0,m.d5)(A.limit).minus(A.totalTvl).minus((0,m.d5)(c)));q=(0,v.jsx)(d.Amount,(0,i.Z)((0,i.Z)({suffix:" ".concat(T.token),decimals:2,textStyle:"titleSmall",color:W},y),{},{value:Q}));break;case"netGain":var J=o.Z.minimum(_.minus(N),(0,m.d5)(O).minus(N));q=(0,v.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:J.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?J:null}));break;case"coverage":var tt=C(null===Z||void 0===Z?void 0:Z.vaultConfig.Tranches.BB.address),et=tt.tvl&&z?tt.tvl.div(z).times(100):0;q=(0,v.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:et}));break;case"stakingPoolShare":if(k){var nt=(0,m.d5)(c).div(k.stkIDLE.totalSupply.plus((0,m.d5)(c))).times(100);q=(0,v.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:nt}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":q=(0,v.jsx)(d.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},y),{},{value:c}));break;case"stakingApy":if(k){var at=(0,m.d5)(j).times(k.maxApr);q=(0,v.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:at}))}break;default:return null}return q?(0,v.jsxs)(f.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,v.jsx)(p.Translation,{component:f.xv,translation:"dynamicActionFields.".concat(l),textStyle:"captionSmall",color:W}),q]}):null},j=function(t){var e=(0,x.w)().selectors,n=e.selectAssetById,s=e.selectVaultById,o=t.assetId,d=t.action,u=(0,r.useMemo)((function(){return o&&n&&n(o)}),[o,n]),p=(0,r.useMemo)((function(){return o&&s&&s(o)}),[o,s]),g=(0,r.useMemo)((function(){return(null===p||void 0===p?void 0:p.type)&&c.A[p.type]}),[p]),j=(0,r.useMemo)((function(){return(0,m.d5)(null===u||void 0===u?void 0:u.limit).lt(l.jq)?(0,m.d5)(null===u||void 0===u?void 0:u.limit):(0,m.gA)(0)}),[u]),y=(0,r.useMemo)((function(){return!!j.gt(0)&&(0,m.gA)(null===u||void 0===u?void 0:u.totalTvl).gte(j)}),[u,j]),b=(0,r.useMemo)((function(){var t;if(null===g||void 0===g||null===(t=g.dynamicActionFields)||void 0===t||!t[d])return null;var e=null===g||void 0===g?void 0:g.dynamicActionFields[d];return"deposit"===d&&j.gt(0)&&!y&&(e=["depositLimit"].concat((0,a.Z)(e))),e}),[d,g,y,j]);return b?(0,v.jsx)(f.gC,{spacing:2,width:"100%",children:b.map((function(e){return(0,v.jsx)(h,(0,i.Z)((0,i.Z)({},t),{},{field:e}),"field_".concat(e))}))}):null}},78951:function(t,e,n){n.r(e),n.d(e,{EstimatedGasFees:function(){return p}});var a=n(7276),i=n(87099),s=n(86059),o=n(96699),r=n(3498),l=n(55967),c=n(39195),d=n(15542),u=n(23023),m=n(45263),p=function(){var t=(0,o.Fg)(),e=(0,c.Y)().chainToken,n=(0,u.R)().state,p=n.transactionSpeed,x=n.estimatedFees,f=n.estimatedFeesUsd,v=(0,a.useMemo)((function(){return x?x[p]:null}),[x,p]),g=(0,a.useMemo)((function(){return f?f[p]:null}),[f,p]);return(0,m.jsxs)(r.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,m.jsx)(l.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,m.jsx)(d.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,m.jsx)(s.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:i.EI,value:g}),g&&(0,m.jsx)(s.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===e||void 0===e?void 0:e.symbol,")"),value:v,decimals:4})]})}},67041:function(t,e,n){n.r(e),n.d(e,{Stake:function(){return P}});var a=n(93433),i=n(74165),s=n(15861),o=n(29439),r=n(5128),l=n(54447),c=n(55967),d=n(40398),u=n(42828),m=n(13708),p=n(13461),x=n(33482),f=n(52734),v=n(39195),g=n(61617),h=n(15542),j=n(1128),y=n(1669),b=n(7276),k=n(23023),S=n(4710),w=n(78951),C=n(66624),M=n(86393),I=n(75712),A=n(87099),T=n(43127),Z=n(3498),D=n(88089),E=n(99594),z=n(45263),P=function(t){var e=t.itemIndex,n=t.chainIds,P=void 0===n?[]:n,F=(0,b.useState)(""),U=(0,o.Z)(F,2),L=U[0],Y=U[1],B=(0,b.useState)("0"),_=(0,o.Z)(B,2),R=_[0],O=_[1],H=(0,b.useState)(""),N=(0,o.Z)(H,2),G=N[0],W=N[1],q=(0,b.useState)(0),V=(0,o.Z)(q,2),$=V[0],K=V[1],X=(0,b.useState)(null),Q=(0,o.Z)(X,2),J=Q[0],tt=Q[1],et=(0,p.x)().web3,nt=(0,v.Y)(),at=nt.account,it=nt.setChainId,st=nt.checkChainEnabled,ot=(0,I.useAssetProvider)(),rt=ot.asset,lt=ot.vault,ct=ot.underlyingAsset,dt=ot.translate,ut=(0,k.R)(),mt=ut.sendTransaction,pt=ut.setGasLimit,xt=ut.state,ft=xt.transaction,vt=xt.block,gt=(0,S.useOperativeComponent)(),ht=gt.dispatch,jt=gt.activeItem,yt=gt.activeStep,bt=gt.executeAction,kt=gt.setActionIndex,St=(0,y.w)(),wt=St.stakingData,Ct=St.selectors,Mt=Ct.selectAssetBalance,It=Ct.selectAssetPriceUsd,At=(0,b.useMemo)((function(){return st(P)}),[P,st]),Tt=(0,b.useMemo)((function(){return Mt?Mt(null===ct||void 0===ct?void 0:ct.id):(0,E.gA)(0)}),[Mt,null===ct||void 0===ct?void 0:ct.id]),Zt=(0,b.useMemo)((function(){if(It&&ct){var t=It(ct.id);return(0,E.d5)(R).times(t)}}),[ct,R,It]),Dt=(0,b.useMemo)((function(){return[{type:"amount",action:"increaseAmount",label:"staking.increaseAmount"},{type:"time",action:"increaseTime",label:"staking.increaseTime"}]}),[]),Et=(0,b.useMemo)((function(){var t,e;return!(null===wt||void 0===wt||null===(t=wt.position)||void 0===t||!t.lockEnd||!vt)&&(0,E.qF)(null===wt||void 0===wt||null===(e=wt.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,E.qF)(1e3*vt.timestamp))}),[wt,vt]),zt=(0,b.useMemo)((function(){var t;return null===wt||void 0===wt||null===(t=wt.position)||void 0===t?void 0:t.deposited.gt(0)}),[wt]),Pt=(0,b.useMemo)((function(){return zt?Dt[$]:null}),[zt,Dt,$]),Ft=(0,b.useMemo)((function(){return Pt?Pt.type:null}),[Pt]),Ut=(0,b.useMemo)((function(){return Pt?Pt.action:"stake"}),[Pt]),Lt=(0,b.useMemo)((function(){var t,e;return null!==wt&&void 0!==wt&&null!==(t=wt.position)&&void 0!==t&&t.lockEnd?(0,E.qF)(null===wt||void 0===wt||null===(e=wt.position)||void 0===e?void 0:e.lockEnd).add(A.Bv,"second"):(0,E.qF)().add(A.z1,"second")}),[wt]),Yt=(0,b.useMemo)((function(){return(0,E.qF)().add(A.$O,"second")}),[]),Bt=(0,b.useMemo)((function(){var t;if("amount"===Ft&&null!==wt&&void 0!==wt&&null!==(t=wt.position)&&void 0!==t&&t.lockEnd)return Math.round(wt.position.lockEnd/1e3);var e=(0,E.qF)(),n=J&&J.set("hour",e.hour()).set("minute",e.minute()).set("second",e.second());return n?Math.round(n.toDate().getTime()/1e3):0}),[Ft,wt,J]),_t=(0,b.useMemo)((function(){var t=Math.max(0,Bt-Math.round(Date.now()/1e3));return(0,E.gA)(t).div(A.$O)}),[Bt]),Rt=(0,b.useMemo)((function(){var t;return(0,E.d5)(null===wt||void 0===wt||null===(t=wt.position)||void 0===t?void 0:t.deposited)}),[wt]),Ot=(0,b.useMemo)((function(){var t,e;return"time"===Ft&&null!==wt&&void 0!==wt&&wt.position?null===wt||void 0===wt||null===(e=wt.position)||void 0===e?void 0:e.deposited.times(_t):(0,E.d5)(null===wt||void 0===wt||null===(t=wt.position)||void 0===t?void 0:t.balance).plus((0,E.d5)(R).times(_t))}),[Ft,wt,_t,R]);(0,b.useEffect)((function(){var t;null!==wt&&void 0!==wt&&null!==(t=wt.position)&&void 0!==t&&t.lockEnd&&"time"===Ft&&tt(Lt)}),[wt,tt,Ft,Lt]);var Ht=(0,b.useCallback)((function(){return J&&J.startOf("day").isSameOrAfter(Lt.startOf("day"))&&J.startOf("day").isSameOrBefore(Yt.startOf("day"))}),[J,Lt,Yt]),Nt=(0,b.useMemo)((function(){return[{label:"staking.6months",value:6,timeframe:"month"},{label:"staking.1year",value:1,timeframe:"year"},{label:"staking.4years",value:A.$O,timeframe:"second"}]}),[]),Gt=(0,b.useMemo)((function(){if(Y(""),W(""),!Ft||"amount"===Ft){if((0,E.gA)(R).isNaN()||(0,E.gA)(R).lte(0))return!0;if((0,E.gA)(R).gt(Tt))return Y(dt("trade.errors.insufficientFundsForAmount",{symbol:null===ct||void 0===ct?void 0:ct.name})),!0}return!(Ft&&"time"!==Ft||Ht())&&(W(dt("time"===Ft?"trade.errors.stakingIncreaseLockEndDateNotCorrect":"trade.errors.stakingLockEndDateNotCorrect")),!0)}),[R,Ft,Ht,Tt,ct,dt]),Wt=(0,b.useCallback)((0,s.Z)((0,i.Z)().mark((function t(){var e,n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ct&&lt&&"getAllowanceContract"in lt){t.next=2;break}return t.abrupt("return",(0,E.gA)(0));case 2:if(null!==at&&void 0!==at&&at.address){t.next=4;break}return t.abrupt("return",(0,E.gA)(0));case 4:if(e=lt.getAllowanceContract()){t.next=7;break}return t.abrupt("return",(0,E.gA)(0));case 7:return n=(0,E.WP)(lt),t.next=10,(0,E.RC)(e,at.address,n);case 10:return a=t.sent,t.abrupt("return",(0,E.I0)(a,ct.decimals));case 12:case"end":return t.stop()}}),t)}))),[ct,lt,null===at||void 0===at?void 0:at.address]),qt=(0,b.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];at&&!Gt&&lt&&"getDepositContractSendMethod"in lt&&"getDepositParams"in lt&&lt instanceof x.y&&(0,s.Z)((0,i.Z)().mark((function e(){var n,s,o,r,l,c,d,u,p,x,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zt){e.next=26;break}if(!t){e.next=7;break}return e.next=4,Wt();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=(0,E.gA)(R);case 8:if(!e.t0.gte(R)){e.next=23;break}if(n=Bt,s=(0,a.Z)(Nt).pop(),(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))!==(0,E.qF)().add(s.value,s.timeframe).format("YYYY-MM-DD")){e.next=17;break}return e.next=15,(0,E.Qg)(et);case 15:(o=e.sent)&&(n=+o.timestamp+A.$O);case 17:(0,m.tM)(rt,Zt),r=lt.getDepositParams(R,n),l=lt.getDepositContractSendMethod(r),mt(lt.id,null===ct||void 0===ct?void 0:ct.id,l,Ut),e.next=24;break;case 23:ht({type:"SET_ACTIVE_STEP",payload:1});case 24:e.next=51;break;case 26:e.t1=Ft,e.next="amount"===e.t1?29:"time"===e.t1?39:50;break;case 29:if(!t){e.next=35;break}return e.next=32,Wt();case 32:e.t2=e.sent,e.next=36;break;case 35:e.t2=(0,E.gA)(R);case 36:return e.t2.gte(R)?(c=lt.getIncreaseAmountParams(R),d=lt.getIncreaseAmountContractSendMethod(c),mt(lt.id,null===ct||void 0===ct?void 0:ct.id,d,Ut)):ht({type:"SET_ACTIVE_STEP",payload:1}),e.abrupt("break",51);case 39:if(u=Bt,p=(0,a.Z)(Nt).pop(),(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))!==(0,E.qF)().add(p.value,p.timeframe).format("YYYY-MM-DD")){e.next=46;break}return e.next=44,(0,E.Qg)(et);case 44:(x=e.sent)&&(u=+x.timestamp+A.$O);case 46:return f=lt.getIncreaseTimeParams(u),v=lt.getIncreaseTimeContractSendMethod(f),mt(lt.id,null===ct||void 0===ct?void 0:ct.id,v,Ut,(0,E.p6)(J,"YYYY-MM-DD HH:mm",!0)),e.abrupt("break",51);case 50:return e.abrupt("break",51);case 51:case"end":return e.stop()}}),e)})))()}),[at,rt,zt,Ut,Ft,Gt,R,Zt,Nt,et,J,Bt,lt,ct,ht,Wt,mt]);(0,b.useEffect)((function(){bt||yt!==e||"success"!==ft.status||O("")}),[bt,ft.status,yt,e]);var Vt=(0,b.useCallback)((function(){null!==ct&&void 0!==ct&&ct.balance&&O(ct.balance.toString())}),[ct]),$t=(0,b.useCallback)((0,s.Z)((0,i.Z)().mark((function t(){var e,n,a,s,o,l,c,d,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(lt&&"getDepositContractSendMethod"in lt&&"getDepositParams"in lt&&lt instanceof x.y){t.next=2;break}return t.abrupt("return");case 2:if(e=lt.getMethodDefaultGasLimit("stake"),at&&!Tt.lte(0)&&Ht()){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Wt();case 7:if(!(n=t.sent).lte(0)){t.next=10;break}return t.abrupt("return",e);case 10:if(a=r.Z.minimum(Tt,n),s={from:null===at||void 0===at?void 0:at.address},o=null,zt?"amount"===Ft?(c=lt.getIncreaseAmountParams(a.toFixed()),o=lt.getIncreaseAmountContractSendMethod(c)):"time"===Ft&&(d=lt.getIncreaseTimeParams(Bt),o=lt.getIncreaseTimeContractSendMethod(d)):(l=lt.getDepositParams(a.toFixed(),Bt),o=lt.getDepositContractSendMethod(l)),o){t.next=16;break}return t.abrupt("return",e);case 16:return t.next=18,(0,E.$K)(o,s);case 18:if(t.t0=t.sent,t.t0){t.next=21;break}t.t0=e;case 21:return u=t.t0,t.abrupt("return",u);case 23:case"end":return t.stop()}}),t)}))),[at,zt,Ft,lt,Ht,Bt,Wt,Tt]);(0,b.useEffect)((function(){jt===e&&(0,s.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$t();case 2:e=t.sent,pt(e);case 4:case"end":return t.stop()}}),t)})))()}),[jt,e,$t,pt]),(0,b.useEffect)((function(){jt===e&&(ht({type:"SET_AMOUNT",payload:R}),ht({type:"SET_DEFAULT_AMOUNT",payload:R}),ht({type:"SET_ASSET",payload:ct}),bt&&(qt(!1),ht({type:"SET_EXECUTE_ACTION",payload:!1})))}),[R,jt,ct,e,ht,bt,qt]);var Kt=(0,b.useMemo)((function(){return at?(0,z.jsx)(h.Translation,{component:T.zx,translation:"staking.".concat(Ut),disabled:Gt,onClick:qt,variant:"ctaFull"}):(0,z.jsx)(M.ConnectWalletButton,{variant:"ctaFull"})}),[at,Gt,Ut,qt]),Xt=(0,b.useCallback)((function(t,e){var n=(0,E.dU)((0,E.dk)((0,E.qF)().add(t,e),Lt),Yt);tt(n)}),[tt,Lt,Yt]),Qt=(0,b.useCallback)((function(t){K(t)}),[K]),Jt=(0,b.useMemo)((function(){return zt&&"amount"!==Ft?null:(0,z.jsxs)(Z.Ug,{width:"100%",spacing:[3,4],alignItems:"flex-start",children:[(0,z.jsx)(Z.xu,{pt:8,width:"110px",children:(0,z.jsx)(g.AssetLabel,{assetId:null===rt||void 0===rt?void 0:rt.id})}),(0,z.jsxs)(Z.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,z.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,z.jsxs)(Z.gC,{spacing:2,alignItems:"flex-start",children:[(0,z.jsx)(j.InputAmount,{amount:R,amountUsd:null,setAmount:O}),(0,z.jsxs)(Z.Ug,{width:"100%",justifyContent:"space-between",children:[(0,z.jsxs)(Z.Ug,{spacing:1,children:[(0,z.jsx)(h.Translation,{component:Z.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,z.jsx)(I.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,z.jsx)(T.zx,{variant:"selector",onClick:Vt,children:"MAX"})]})]})}),L&&(0,z.jsx)(Z.xv,{textStyle:"captionSmaller",color:"orange",children:L})]})]})}),[rt,R,O,L,Vt,zt,Ft]),te=(0,b.useMemo)((function(){return zt&&"time"!==Ft?null:(0,z.jsxs)(Z.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,z.jsx)(Z.xu,{pt:8,width:"110px",children:(0,z.jsx)(h.Translation,{translation:"staking.lockEnd",textStyle:"titleSmall",fontSize:"md",color:"primary",whiteSpace:"nowrap"})}),(0,z.jsxs)(Z.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,z.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,z.jsxs)(Z.gC,{spacing:2,alignItems:"flex-start",children:[(0,z.jsx)(f.InputDate,{value:null===J||void 0===J?void 0:J.format("YYYY-MM-DD"),setValue:tt,min:Lt.format("YYYY-MM-DD"),max:Yt.format("YYYY-MM-DD")}),(0,z.jsx)(Z.MI,{spacing:1,width:"100%",columns:Nt.length,justifyContent:"space-between",children:Nt.map((function(t){var e=(null===J||void 0===J?void 0:J.format("YYYY-MM-DD"))===(0,E.qF)().add(t.value,t.timeframe).format("YYYY-MM-DD");return(0,z.jsx)(h.Translation,{translation:t.label,component:T.zx,variant:"selector","aria-selected":e,onClick:function(){return Xt(t.value,t.timeframe)}},"option_".concat(t.label))}))})]})}),G&&(0,z.jsx)(Z.xv,{textStyle:"captionSmaller",color:"orange",children:G})]})]})}),[zt,Ft,J,tt,Lt,Yt,Nt,Xt,G]);return(0,z.jsx)(I.AssetProvider,{flex:1,width:"100%",assetId:null===rt||void 0===rt?void 0:rt.underlyingId,children:At?Et?(0,z.jsx)(Z.M5,{px:10,flex:1,width:"100%",children:(0,z.jsxs)(Z.gC,{spacing:6,children:[(0,z.jsx)(c.ppH,{size:72}),(0,z.jsxs)(Z.gC,{spacing:4,children:[(0,z.jsx)(h.Translation,{component:Z.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,z.jsx)(h.Translation,{component:Z.xv,translation:"staking.canWithdrawLock",params:{amount:(0,E.dm)(Rt),asset:null===rt||void 0===rt?void 0:rt.name},textStyle:"captionSmall",textAlign:"center"}),(0,z.jsx)(h.Translation,{component:T.zx,translation:"common.unstake",onClick:function(){return kt(1)},variant:"ctaPrimary",px:10})]})]})}):(0,z.jsxs)(Z.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,z.jsxs)(Z.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[zt&&(0,z.jsx)(D.mQ,{width:"100%",defaultIndex:0,variant:"buttonTertiary",onChange:Qt,children:(0,z.jsx)(D.td,{width:"100%",children:(0,z.jsx)(Z.MI,{spacing:2,width:"100%",columns:Dt.length,children:Dt.map((function(t){return(0,z.jsx)(h.Translation,{component:D.OK,translation:t.label},"option_".concat(t.label))}))})})}),Jt,te,Ot.gt(0)&&(0,z.jsx)(C.DynamicActionFields,{assetId:null===rt||void 0===rt?void 0:rt.id,action:Ut,amount:Ot.toFixed(),amountUsd:Ot.toFixed(),stakingPower:_t})]}),(0,z.jsxs)(Z.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,z.jsx)(w.EstimatedGasFees,{}),Kt]})]}):(0,z.jsx)(Z.M5,{px:10,flex:1,width:"100%",children:(0,z.jsxs)(Z.gC,{spacing:6,children:[(0,z.jsx)(u.p8b,{size:72}),(0,z.jsxs)(Z.gC,{spacing:4,children:[(0,z.jsx)(h.Translation,{component:Z.xv,translation:"staking.networkNotSupported",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,z.jsx)(h.Translation,{component:Z.xv,translation:"staking.switchToMainnet",textStyle:"captionSmall",textAlign:"center"}),(0,z.jsx)(h.Translation,{component:T.zx,translation:"common.switchNetwork",onClick:function(){return it(d.zS)},variant:"ctaPrimary",px:10})]})]})})})}},59058:function(t,e,n){n.r(e),n.d(e,{Unstake:function(){return k}});var a=n(74165),i=n(15861),s=n(40398),o=n(42828),r=n(33482),l=n(55967),c=n(39195),d=n(7276),u=n(43127),m=n(3498),p=n(15542),x=n(1669),f=n(23023),v=n(78951),g=n(4710),h=n(86393),j=n(75712),y=n(99594),b=n(45263),k=function(t){var e,n,k,S=t.itemIndex,w=t.chainIds,C=void 0===w?[]:w,M=(0,j.useAssetProvider)(),I=M.asset,A=M.vault,T=(0,c.Y)(),Z=T.account,D=T.setChainId,E=T.checkChainEnabled,z=(0,g.useOperativeComponent)(),P=z.dispatch,F=z.activeItem,U=z.setActionIndex,L=(0,x.w)(),Y=L.stakingData,B=L.selectors.selectVaultPrice,_=(0,f.R)(),R=_.sendTransaction,O=_.setGasLimit,H=_.state.block,N=(0,d.useMemo)((function(){return E(C)}),[C,E]),G=(0,d.useMemo)((function(){var t;return(0,y.d5)(null===Y||void 0===Y||null===(t=Y.position)||void 0===t?void 0:t.deposited)}),[Y]),W=(0,d.useMemo)((function(){var t,e;return!(null===Y||void 0===Y||null===(t=Y.position)||void 0===t||!t.lockEnd||!H)&&(0,y.qF)(null===Y||void 0===Y||null===(e=Y.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,y.qF)(1e3*H.timestamp))}),[Y,H]),q=(0,d.useMemo)((function(){var t,e;return null!==Y&&void 0!==Y&&null!==(t=Y.position)&&void 0!==t&&t.lockEnd?(0,y.p6)(null===Y||void 0===Y||null===(e=Y.position)||void 0===e?void 0:e.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[Y]),V=(0,d.useCallback)((function(){Z&&W&&A&&"getWithdrawContractSendMethod"in A&&"getWithdrawParams"in A&&A instanceof r.y&&(0,i.Z)((0,a.Z)().mark((function t(){var e,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=A.getWithdrawParams(),n=A.getWithdrawContractSendMethod(e),R(A.id,A.id,n);case 3:case"end":return t.stop()}}),t)})))()}),[Z,W,A,R]),$=(0,d.useCallback)((0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,s,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A&&"getWithdrawContractSendMethod"in A&&"getWithdrawParams"in A&&A instanceof r.y){t.next=2;break}return t.abrupt("return");case 2:if(e=A.getMethodDefaultGasLimit("unstake"),Z&&W){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===Z||void 0===Z?void 0:Z.address},i=A.getWithdrawParams(),s=A.getWithdrawContractSendMethod(i),t.next=10,(0,y.$K)(s,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return o=t.t0,t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)}))),[Z,A,W]);(0,d.useEffect)((function(){F===S&&(0,i.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:e=t.sent,O(e);case 4:case"end":return t.stop()}}),t)})))()}),[F,S,$,O]),(0,d.useEffect)((function(){F===S&&(P({type:"SET_ASSET",payload:I}),B&&A&&(P({type:"SET_AMOUNT",payload:(0,y.gA)(G).toString()}),P({type:"SET_DEFAULT_AMOUNT",payload:(0,y.gA)(G).toString()})))}),[A,I,G,B,F,S,P,V]);var K=(0,d.useMemo)((function(){return Z?(0,b.jsx)(p.Translation,{component:u.zx,translation:"common.withdraw",disabled:!W,onClick:V,variant:"ctaFull"}):(0,b.jsx)(h.ConnectWalletButton,{variant:"ctaFull"})}),[Z,W,V]);return(0,b.jsx)(j.AssetProvider,{flex:1,width:"100%",assetId:null===I||void 0===I?void 0:I.id,children:(0,b.jsxs)(m.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:N&&null!==Y&&void 0!==Y&&null!==(e=Y.position)&&void 0!==e&&e.lockEnd?8:0,children:[(0,b.jsx)(m.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:N?null!==Y&&void 0!==Y&&null!==(n=Y.position)&&void 0!==n&&n.lockEnd?W?(0,b.jsx)(m.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,b.jsxs)(m.gC,{spacing:6,children:[(0,b.jsx)(l.ppH,{size:72}),(0,b.jsxs)(m.gC,{spacing:4,children:[(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.canWithdrawLock",params:{amount:(0,y.dm)(G),asset:null===I||void 0===I?void 0:I.name},textStyle:"captionSmall",textAlign:"center"})]})]})}):(0,b.jsxs)(m.gC,{py:20,flex:1,spacing:6,px:[6,10],width:"100%",children:[(0,b.jsx)(l.FKe,{size:72}),(0,b.jsxs)(m.gC,{spacing:4,children:[(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.lockNotExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.waitUntilLockExpired",params:{lockEndDate:q},textStyle:"captionSmall",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:u.zx,translation:"staking.increaseLock",onClick:function(){return U(0)},variant:"ctaPrimary",px:10})]})]}):(0,b.jsx)(m.M5,{px:6,flex:1,width:"100%",children:(0,b.jsxs)(m.gC,{spacing:5,children:[(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.noStake",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.stakeBeforeUnstake",textStyle:"captionSmall",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:u.zx,translation:"common.stake",onClick:function(){return U(0)},variant:"ctaPrimary",px:10})]})}):(0,b.jsx)(m.M5,{px:10,flex:1,width:"100%",children:(0,b.jsxs)(m.gC,{spacing:6,children:[(0,b.jsx)(o.p8b,{size:72}),(0,b.jsxs)(m.gC,{spacing:4,children:[(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.networkNotSupported",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:m.xv,translation:"staking.switchToMainnet",textStyle:"captionSmall",textAlign:"center"}),(0,b.jsx)(p.Translation,{component:u.zx,translation:"common.switchNetwork",onClick:function(){return D(s.zS)},variant:"ctaPrimary",px:10})]})]})})}),(null===Y||void 0===Y||null===(k=Y.position)||void 0===k?void 0:k.lockEnd)&&W&&(0,b.jsxs)(m.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[W&&(0,b.jsx)(v.EstimatedGasFees,{}),K]})]})})}},58194:function(t,e,n){n.r(e),n.d(e,{ReactTable:function(){return x}});var a=n(1413),i=n(29439),s=n(7276),o=n(55967),r=n(63591),l=n(96699),c=n(3498),d=n(26720),u=n(67503),m=n(45263),p=function(t){var e=t.column,n=(0,l.Fg)();return(0,m.jsxs)(c.kC,{alignItems:"center",layerStyle:"tableHeader",justifyContent:"space-between",children:[e.render("Header"),e.canSort&&(0,m.jsxs)(c.kC,{direction:"column",children:[(0,m.jsx)(o.rWj,{size:20,fill:e.isSorted&&e.isSortedDesc?n.colors.primary:n.colors.table.arrow,"aria-label":"sorted ascending",style:{position:"absolute"}}),(0,m.jsx)(o.Ix0,{size:20,fill:e.isSorted?e.isSortedDesc?n.colors.table.arrow:n.colors.primary:n.colors.table.arrow,"aria-label":"sorted descending",style:{marginTop:10}})]})]})},x=function(t){var e=t.columns,n=t.data,x=t.page,f=t.rowsPerPage,v=t.displayHeaders,g=void 0===v||v,h=t.onRowClick,j=t.onToggleRow,y=t.initialState,b=(0,l.Fg)(),k=(0,d.ff)("black","white"),S=(0,s.useState)(null),w=(0,i.Z)(S,2),C=w[0],M=w[1],I=(0,r.useTable)({columns:e,data:n,initialState:y},r.useSortBy),A=I.getTableProps,T=I.getTableBodyProps,Z=I.headerGroups,D=I.rows,E=I.prepareRow,z=(0,s.useCallback)((function(t){M((function(e){return e===t?null:t}))}),[M]);(0,s.useEffect)((function(){if(j)return j(C)}),[j,C]);var P=(0,s.useMemo)((function(){return f&&x?D.slice(f*(x-1),f*x):D}),[D,x,f]),F=(0,s.useMemo)((function(){return P.map((function(t,e){var n=!1;E(t);var i=e===P.length-1,r=i&&!C?{borderBottom:0}:{};return(0,m.jsxs)(s.Fragment,{children:[(0,m.jsx)(u.Tr,(0,a.Z)((0,a.Z)({},t.getRowProps()),{},{tabIndex:t.index,layerStyle:"tableRow",backgroundColor:C===t?"card.bgLight":"initial",onClick:function(){var e;return(null===(e=t.subRows)||void 0===e?void 0:e.length)>0?z(t):null===h||void 0===h?void 0:h(t)},cursor:h?"pointer":void 0,sx:r,children:t.cells.map((function(e,i){var r,l=!n&&"none"!==e.column.display,d=i===t.cells.length-1;l&&(n=!0);var p=l?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:d?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,s.createElement)(u.Td,(0,a.Z)((0,a.Z)({},e.getCellProps()),{},{display:e.column.display,sx:p,key:i}),(0,m.jsxs)(c.Ug,{flex:1,width:"full",justifyContent:"space-between",children:[e.render("Cell"),d&&(null===(r=t.subRows)||void 0===r?void 0:r.length)>0&&(C===t?(0,m.jsx)(o.rWj,{size:24,color:b.colors.primary}):(0,m.jsx)(o.Ix0,{size:24,color:b.colors.primary}))]}))}))})),C===t&&t.subRows.map((function(e,o){E(e);var r=o===t.subRows.length-1,l=i&&r?{borderBottom:0}:{};return(0,s.createElement)(u.Tr,(0,a.Z)((0,a.Z)({},e.getRowProps()),{},{tabIndex:e.index,layerStyle:"tableRow",backgroundColor:"button.bgHover",onClick:function(){return null===h||void 0===h?void 0:h(e)},cursor:h?"pointer":void 0,sx:l,key:o}),e.cells.map((function(t,i){var o=!n&&"none"!==t.column.display,r=i===e.cells.length-1;o&&(n=!0);var l=o?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:r?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,s.createElement)(u.Td,(0,a.Z)((0,a.Z)({},t.getCellProps()),{},{display:t.column.display,sx:l,key:i}),t.render("Cell"))})))}))]},e)}))}),[z,C,E,b,P,h]);return(0,m.jsxs)(u.iA,(0,a.Z)((0,a.Z)({variant:"clickable",size:{base:"sm",md:"md"}},A()),{},{children:[g&&(0,m.jsx)(u.hr,{children:Z.map((function(t,e){var n=!1;return(0,s.createElement)(u.Tr,(0,a.Z)((0,a.Z)({},t.getHeaderGroupProps()),{},{key:e}),t.headers.map((function(e,i){var o=!n&&"none"!==e.display,r=i===t.headers.length-1;o&&(n=!0);var l=o?{paddingLeft:0,paddingRight:4}:r?{paddingLeft:4,paddingRight:0}:{paddingLeft:4,paddingRight:4};return e.width&&(l.width=e.width),(0,s.createElement)(u.Th,(0,a.Z)((0,a.Z)({},e.getHeaderProps(e.getSortByToggleProps({title:void 0}))),{},{color:"gray.500",fontWeight:400,display:e.display,textAlign:e.textAlign,_hover:{color:e.canSort?k:"gray.500"},style:l,key:i}),(0,m.jsx)(p,{column:e}))})))}))}),(0,m.jsx)(u.p3,(0,a.Z)((0,a.Z)({},T()),{},{children:F}))]}))}},80745:function(t,e,n){n.r(e),n.d(e,{Scrollable:function(){return l}});var a=n(1413),i=n(45987),s=(n(7276),n(3498)),o=n(45263),r=["children"],l=function(t){var e=t.children,n=(0,i.Z)(t,r);return(0,o.jsx)(s.kC,(0,a.Z)((0,a.Z)({flex:1,width:"100%",overflowY:"auto",overflowX:"hidden",direction:"column",alignItems:"flex-start"},n),{},{children:e}))}},48415:function(t,e,n){n.r(e),n.d(e,{Staking:function(){return I}});var a=n(99594),i=n(7276),s=n(54447),o=n(40398),r=n(86059),l=n(58383),c=n(66288),d=n(67041),u=n(39195),m=n(61617),p=n(59058),x=n(96362),f=n(97778),v=n(15542),g=n(87099),h=n(1669),j=n(75712),y=n(72258),b=n(99020),k=n(3498),S=n(37658),w=n(3148),C=n(87577),M=n(45263),I=function(){var t=(0,u.Y)().account,e=(0,c.X)().isMobile,n=(0,h.w)(),I=n.isVaultsPositionsLoaded,A=n.stakingData,T=n.selectors,Z=T.selectVaultsByType,D=T.selectAssetById,E=T.selectVaultTransactions,z=(0,i.useMemo)((function(){if(D){var t=(0,l.Zs)(o.zS,g.MI);return t&&D(t.address)}}),[D]),P=(0,i.useMemo)((function(){var t;return Z&&(null===(t=Z("STK"))||void 0===t?void 0:t[0])}),[Z]),F=(0,i.useMemo)((function(){return D&&P&&D(P.id)}),[D,P]),U=(0,i.useMemo)((function(){return I&&P&&E(P.id)}),[I,P,E]),L=(0,i.useMemo)((function(){return(U&&U.reduce((function(t,e){switch(e.action){case"stake":t.totalDeposited=t.totalDeposited.plus(e.underlyingAmount);break;case"unstake":t.totalDeposited=t.totalDeposited.minus(e.underlyingAmount)}return t.totalDeposited.lte(0)?t.startTimestamp=null:t.startTimestamp||(t.startTimestamp=e.timeStamp),t}),{startTimestamp:null,totalDeposited:(0,a.gA)(0)})).startTimestamp}),[U]),Y=(0,i.useMemo)((function(){if(!L||!A)return null;var t=Math.round(Date.now()/1e3)-L;return(0,a.gA)(A.position.claimable).div(A.position.deposited).times(g.eG).div(t).times(100)}),[L,A]),B=[{type:"stake",component:d.Stake,label:"common.stake",chainIds:[o.zS],steps:[{type:"approve",component:x.Approve,props:{amountUsd:null},label:"modals.approve.header"}]},{type:"unstake",component:p.Unstake,label:"common.unstake",chainIds:[o.zS],steps:[]}],_=(0,i.useMemo)((function(){if(!t||!A||A.position.deposited.lte(0))return null;return(0,M.jsxs)(k.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"staking.yourstkIDLE",component:k.xv,textStyle:"heading",fontSize:"h3"}),(0,M.jsx)(k.MI,{columns:[2,4],spacing:[6,20],children:[{field:"stakingDeposited",props:{fontSize:"h3",textStyle:"heading"},label:"assets.assetDetails.generalData.totalIDLEStaked",tooltip:"assets.assetDetails.tooltips.totalIDLEStaked"},{field:"stkIDLEBalance",props:{fontSize:"h3",textStyle:"heading"},label:"common.balance",tooltip:"assets.assetDetails.tooltips.stkIDLEBalance"},{field:"stakingEndDate",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.lockEndDate",label:"assets.assetDetails.generalData.lockedUntil"},{field:"stakingShare",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.stakingShare",label:"defi.share"}].map((function(t){return(0,M.jsx)(w.AssetGeneralDataField,{generalData:t},"field_".concat(t.field))}))})]})}),[t,A]),R=(0,i.useMemo)((function(){var n,a;if(!t||!A||A.position.deposited.lte(0)||!P)return null;var i=P.getClaimRewardsContractSendMethod();return e?(0,M.jsx)(j.AssetProvider,{wrapFlex:!1,assetId:null===z||void 0===z?void 0:z.id,children:(0,M.jsx)(s.Card,{p:6,children:(0,M.jsxs)(k.gC,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,M.jsx)(k.Ug,{width:"full",justifyContent:"space-between",children:(0,M.jsx)(m.AssetLabel,{assetId:null===z||void 0===z?void 0:z.id})}),(0,M.jsxs)(k.Ug,{width:"full",justifyContent:"space-between",children:[(0,M.jsxs)(k.gC,{spacing:1,alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(k.Ug,{spacing:1,justifyContent:"flex-start",children:(0,M.jsx)(r.Amount.Percentage,{value:Y,textStyle:"heading",fontSize:"h3"})})]}),(0,M.jsxs)(k.gC,{spacing:1,alignItems:"flex-end",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===A||void 0===A||null===(n=A.IDLE.asset)||void 0===n?void 0:n.id,showIcon:!1,amount:A.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:P.id,assetId:P.id,contractSendMethod:i,actionType:"claim",amount:A.position.claimable.toString(),width:"100%",chainIds:[o.zS],disabled:A.position.claimable.lte(0)})]})})}):(0,M.jsx)(s.Card,{p:6,px:8,width:"100%",children:(0,M.jsxs)(k.Kq,{width:"100%",spacing:[0,6],direction:["column","row"],flexWrap:["wrap","nowrap"],justifyContent:["flex-start","space-between"],children:[(0,M.jsx)(m.AssetLabel,{assetId:null===z||void 0===z?void 0:z.id}),(0,M.jsxs)(k.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(r.Amount.Percentage,{value:Y,fontSize:"h3",textStyle:"heading"})]}),(0,M.jsxs)(k.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===A||void 0===A||null===(a=A.IDLE.asset)||void 0===a?void 0:a.id,showIcon:!1,amount:A.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:P.id,assetId:P.id,contractSendMethod:i,actionType:"claim",amount:A.position.claimable.toString(),width:["100%","150px"],chainIds:[o.zS],disabled:A.position.claimable.lte(0)})]})})}),[t,e,A,z,Y,P]);return(0,M.jsxs)(k.xu,{width:"100%",children:[(0,M.jsxs)(k.gC,{spacing:6,my:[10,16],width:"100%",direction:["column","row"],justifyContent:"flex-start",alignItems:["center","flex-start"],children:[(0,M.jsx)(b.AnnouncementBanner,{mode:"alert",text:"strategies.staking.feeSharingDisabled"}),(0,M.jsx)(v.Translation,{translation:"navBar.stakeIDLE",component:k.X6,as:"h2",size:"3xl"})]}),(0,M.jsxs)(k.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,M.jsx)(k.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,M.jsxs)(k.gC,{spacing:10,width:"100%",alignItems:"flex-start",children:[_,R,(0,M.jsxs)(k.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"staking.globalstkIDLE",component:k.xv,textStyle:"heading",fontSize:"h3"}),(0,M.jsx)(w.AssetGeneralData,{assetId:null===F||void 0===F?void 0:F.id}),(0,M.jsx)(s.Card.Dark,{children:(0,M.jsx)(v.Translation,{isHtml:!0,translation:"strategies.staking.description",component:k.xv})})]}),(0,M.jsx)(C.StakingDistributedRewards,{})]})}),(0,M.jsx)(S.InteractiveComponent,{vaultId:null===F||void 0===F?void 0:F.id,assetId:null===P||void 0===P?void 0:P.id,actions:B})]})]})}},87577:function(t,e,n){n.r(e),n.d(e,{StakingDistributedRewards:function(){return C}});var a=n(1413),i=n(29439),s=n(54447),o=n(79681),r=n(58383),l=n(66288),c=n(39195),d=n(58194),u=n(7276),m=n(87099),p=n(15542),x=n(97778),f=n(1669),v=n(55967),g=n(48024),h=n(10658),j=n(96699),y=n(89030),b=n(3498),k=n(43127),S=n(99594),w=n(45263),C=function(){var t=(0,j.Fg)(),e=(0,o.qM)(),n=(0,l.X)().isMobile,C=(0,u.useState)(1),M=(0,i.Z)(C,2),I=M[0],A=M[1],T=(0,f.w)().stakingData,Z=(0,c.Y)().explorer,D=(0,u.useCallback)((function(t){var e=(0,S.QG)(m.zS,Z,t.original.hash);return(0,S.xw)(e)}),[Z]),E=(0,u.useMemo)((function(){return(0,r.Zs)(m.zS,m.MI)}),[]),z=(0,u.useMemo)((function(){return T?T.rewards:[]}),[T]),P=(0,u.useMemo)((function(){return Math.max(1,Math.ceil(z.length/5))}),[z]),F=(0,u.useMemo)((function(){return[{id:"date",accessor:"timeStamp",Header:e("transactionRow.date"),Cell:function(t){var e=t.value;return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(b.xv,{textStyle:"tableCell",children:(0,S.p6)(1e3*+e,"YYYY/MM/DD HH:mm",!0)})})},sortType:S._O},{id:"amount",accessor:"value",Header:e("transactionRow.amount"),Cell:function(t){var e=t.value,n=(0,S.I0)(e,null===E||void 0===E?void 0:E.decimals);return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(x.TokenAmount,{assetId:null===E||void 0===E?void 0:E.address,amount:n,size:"xs",textStyle:"tableCell"})})},sortType:S._O},{id:"hash",accessor:"hash",Header:e("transactionRow.hash"),Cell:function(t){var e=t.value;return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(h.TransactionLink,{chainId:m.zS,hash:e})})},sortType:S.YC}]}),[e,E]);return(0,w.jsxs)(b.gC,{spacing:4,width:"full",children:[n?(0,w.jsxs)(b.gC,{spacing:0,width:"full",alignItems:"flex-start",children:[(0,w.jsx)(p.Translation,{textAlign:"left",translation:"staking.distributedRewards",component:s.Card.Heading}),(0,w.jsx)(s.Card,{children:z.slice(5*(I-1),5*I).map((function(t){var e=(0,a.Z)((0,a.Z)({},t),{},{idlePrice:(0,S.gA)(1),action:"distributed",assetId:null===E||void 0===E?void 0:E.address,idleAmount:(0,S.I0)(t.value,null===E||void 0===E?void 0:E.decimals),underlyingAmount:(0,S.I0)(t.value,null===E||void 0===E?void 0:E.decimals)});return(0,w.jsx)(g.TransactionItem,{transaction:e},"tx_".concat(e.hash))}))})]}):(0,w.jsxs)(s.Card,{mt:10,children:[(0,w.jsx)(p.Translation,{translation:"staking.distributedRewards",fontSize:"lg",component:s.Card.Heading}),(0,w.jsx)(d.ReactTable,{columns:F,data:z,page:I,rowsPerPage:5,initialState:{sortBy:[{id:"date",desc:!1}]},onRowClick:D})]}),(0,w.jsx)(b.kC,{width:"100%",alignItems:"center",justifyContent:"flex-end",children:(0,w.jsxs)(b.Ug,{spacing:2,children:[(0,w.jsx)(k.zx,{variant:"link",minW:"auto",onClick:function(){A((function(t){return Math.max(1,t-1)}))},children:(0,w.jsx)(v.lrP,{color:1===I?t.colors.ctaDisabled:t.colors.primary})}),(0,w.jsxs)(b.xv,{textStyle:"ctaStatic",children:[I,"/",P]}),(0,w.jsx)(k.zx,{variant:"link",minW:"auto",onClick:function(){A((function(t){return Math.min(P,t+1)}))},children:(0,w.jsx)(v.KEG,{color:I===P?t.colors.ctaDisabled:t.colors.primary})})]})})]})}},72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return y},TransactionButtonValue:function(){return j}});var a=n(1413),i=n(29439),s=n(45987),o=(n(81608),n(39195)),r=n(55967),l=n(15542),c=n(53293),d=n(23023),u=n(7276),m=n(96699),p=n(52486),x=n(3498),f=n(43127),v=n(45263),g=["text","contractSendMethod"],h=["text","amount","assetId","vaultId","actionType","chainIds","contractSendMethod"],j=function(t){var e,n=t.text,o=t.contractSendMethod,c=(0,s.Z)(t,g),f=(0,m.Fg)(),h=(0,u.useRef)(null),j=(0,u.useState)(null),y=(0,i.Z)(j,2),b=y[0],k=y[1],S=(0,d.R)(),w=S.state.transaction,C=S.cleanTransaction,M=(0,u.useMemo)((function(){var t;return JSON.stringify(null===w||void 0===w||null===(t=w.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(o._method)}),[w,o]),I=(0,u.useMemo)((function(){return M&&w.status&&["pending","success","failed"].includes(w.status)&&w.estimatedTime}),[w,M]),A=(0,u.useMemo)((function(){return I&&"pending"===w.status?w.estimatedTime:.5}),[I,w]),T=(0,u.useCallback)((function(){if(!w.timestamp||!w.estimatedTime)return null;var t=+w.timestamp+1e3*w.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));k(e),e&&(h.current=setTimeout((function(){T()}),1e3))}),[w]);(0,u.useEffect)((function(){var t;M&&("success"===w.status||"failed"===w.status?(h.current&&(clearInterval(h.current),h.current=null),"success"!==w.status&&4001===(null===(t=w.error)||void 0===t?void 0:t.code)||setTimeout((function(){C()}),4e3)):"pending"!==w.status||h.current||T())}),[M,w.status,T,C,null===(e=w.error)||void 0===e?void 0:e.code]);var Z=(0,u.useMemo)((function(){var t;if(M)switch(null===w||void 0===w?void 0:w.status){case"created":return(0,v.jsx)(p.$,{size:"sm"});case"pending":return w.timestamp&&w.estimatedTime&&b?(0,v.jsxs)(x.xv,{textStyle:"ctaStatic",children:[b,"s"]}):(0,v.jsx)(p.$,{size:"sm"});case"success":return(0,v.jsx)(x.kC,(0,a.Z)((0,a.Z)({},c),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(r.ddU,{size:24,color:f.colors.green[400]})}));case"failed":if(4001!==(null===(t=w.error)||void 0===t?void 0:t.code))return(0,v.jsx)(x.kC,(0,a.Z)((0,a.Z)({},c),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(r.lTq,{size:24,color:f.colors.red[400]})}))}return(0,v.jsx)(l.Translation,{translation:n,textStyle:"ctaStatic"})}),[M,b,w,n,f,c]),D=(0,u.useMemo)((function(){switch(w.status){case"success":case"failed":return"transparent";default:return"primary"}}),[w]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x.kC,{top:0,left:0,bottom:0,bg:D,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(A,"s"),animationName:I?"progress":"none",animationPlayState:I?"running":"stopped"},children:(0,v.jsx)(x.kC,{left:0,width:c.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:Z})}),Z]})},y=function(t){var e=t.text,n=t.amount,r=t.assetId,l=t.vaultId,m=t.actionType,p=t.chainIds,x=void 0===p?[]:p,g=t.contractSendMethod,y=(0,s.Z)(t,h),b=(0,c.Z)(),k=(0,i.Z)(b,2),S=k[0],w=k[1].width,C=(0,o.Y)().checkChainEnabled,M=(0,d.R)(),I=M.sendTransaction,A=M.state.transaction,T=(0,u.useMemo)((function(){return C(x)}),[x,C]),Z=(0,u.useMemo)((function(){var t;return JSON.stringify(null===A||void 0===A||null===(t=A.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(g._method)}),[A,g]),D=(0,u.useCallback)((function(){if("created"!==A.status&&"pending"!==A.status)return I(l,r,g,m,n)}),[A,l,r,g,m,n,I]),E=(0,u.useMemo)((function(){var t;if(!Z)return"primary";switch(A.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=A.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[Z,A]),z=(0,u.useMemo)((function(){return!!y.disabled||!T}),[y,T]);return(0,v.jsx)(f.zx,(0,a.Z)((0,a.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:w||"auto",borderColor:E,onClick:function(){return D()},ref:S,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},y),{},{disabled:z,children:(0,v.jsx)(j,{text:e,contractSendMethod:g,width:w})}))}},48024:function(t,e,n){n.r(e),n.d(e,{TransactionItem:function(){return u}});var a=n(99594),i=n(87099),s=n(86059),o=n(3498),r=n(97778),l=n(15542),c=n(10658),d=n(45263),u=function(t){var e=t.transaction;return(0,d.jsxs)(o.gC,{mb:2,pb:4,spacing:4,width:"100%",alignItems:"flex-start",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,d.jsxs)(o.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(o.Ug,{spacing:3,direction:"row",alignItems:"center",children:(0,d.jsx)(l.Translation,{component:o.xv,translation:"transactionRow.".concat(e.action),textStyle:"captionSmall"})}),(0,d.jsx)(o.xv,{textStyle:"captionSmall",children:(0,a.p6)(1e3*+e.timeStamp,i.Cu)})]}),(0,d.jsxs)(o.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsxs)(o.Ug,{spacing:1,alignItems:"center",children:[(0,d.jsx)(r.TokenAmount,{assetId:e.assetId,amount:e.underlyingAmount,size:"xs",textStyle:"tableCell"}),e.amountUsd&&!(0,a.gA)(e.amountUsd).eq(e.underlyingAmount)&&(0,d.jsx)(s.Amount.Usd,{prefix:"~",value:e.amountUsd,color:"cta",fontSize:"xs"})]}),(0,d.jsx)(c.TransactionLink,{hash:e.hash})]})]})}},18147:function(t,e,n){n.r(e),n.d(e,{TransactionList:function(){return y}});var a=n(1413),i=n(93433),s=n(29439),o=n(45987),r=n(99594),l=n(7276),c=n(54447),d=n(39195),u=n(80745),m=n(3498),p=n(89030),x=n(15542),f=n(1669),v=n(53293),g=n(48024),h=n(45263),j=["assetIds","showTitleOnMobile","fullHeightOnMobile","title","transactions","emptyText"],y=function(t){var e=t.assetIds,n=t.showTitleOnMobile,y=void 0!==n&&n,b=t.fullHeightOnMobile,k=void 0!==b&&b,S=t.title,w=t.transactions,C=t.emptyText,M=(0,o.Z)(t,j),I=(0,d.Y)().account,A=(0,v.Z)(),T=(0,s.Z)(A,2),Z=T[0],D=T[1],E=(0,f.w)(),z=E.isPortfolioLoaded,P=E.isVaultsPositionsLoaded,F=E.selectors,U=F.selectVaultTransactions,L=F.selectVaultGauge,Y=(0,l.useMemo)((function(){return w||(I&&e&&U&&L?e.reduce((function(t,e){var n=L(e),a=U(e),s=n?U(n.id):[];return[].concat((0,i.Z)(t),(0,i.Z)(a),(0,i.Z)(s))}),[]):[])}),[w,I,e,U,L]),B=(0,l.useMemo)((function(){return z&&(!I||P)}),[z,I,P]),_=(0,l.useMemo)((function(){return B?Y.length>0?(0,r.Pf)(Y,"timeStamp","desc").map((function(t,e){return(0,h.jsx)(g.TransactionItem,{transaction:t},"tx_".concat(t.hash,"_").concat(e))})):(0,h.jsx)(m.kC,{flex:1,minH:250,width:"100%",alignItems:"center",justifyContent:"center",children:(0,h.jsx)(x.Translation,{component:m.xv,translation:C||"assets.assetDetails.assetHistory.emptyTransactions"})}):(0,h.jsxs)(m.gC,{spacing:4,width:"100%",children:[(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10})]})}),[B,Y,C]);return(0,h.jsx)(c.Card,(0,a.Z)((0,a.Z)({flex:1},M),{},{children:(0,h.jsxs)(m.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",ref:Z,justifyContent:"flex-start",children:[(0,h.jsx)(x.Translation,{display:y?"block":["none","block"],component:c.Card.Heading,fontSize:"lg",translation:S||"assets.assetDetails.assetHistory.transactionHistory"}),(0,h.jsx)(u.Scrollable,{maxH:[k?"100%":280,Math.max((null===D||void 0===D?void 0:D.height)||400)],children:_})]})}))}},65984:function(t,e,n){n.d(e,{r:function(){return m}});var a=n(1413),i=n(45987),s=n(7276),o=n(73131),r=n(96699),l=n(7828),c=["spacing","children"],d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")},u=function(t){return t?"":void 0},m=(0,r.Gp)((function(t,e){var n=(0,r.jC)("Switch",t),m=(0,l.Lr)(t),p=m.spacing,x=void 0===p?"0.5rem":p,f=m.children,v=(0,i.Z)(m,c),g=(0,o.O)(v),h=g.state,j=g.getInputProps,y=g.getCheckboxProps,b=g.getRootProps,k=g.getLabelProps,S=(0,s.useMemo)((function(){return(0,a.Z)({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},n.container)}),[n.container]),w=(0,s.useMemo)((function(){return(0,a.Z)({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},n.track)}),[n.track]),C=(0,s.useMemo)((function(){return(0,a.Z)({userSelect:"none",marginStart:x},n.label)}),[x,n.label]);return s.createElement(r.m$.label,(0,a.Z)((0,a.Z)({},b()),{},{className:d("chakra-switch",t.className),__css:S}),s.createElement("input",(0,a.Z)({className:"chakra-switch__input"},j({},e))),s.createElement(r.m$.span,(0,a.Z)((0,a.Z)({},y()),{},{className:"chakra-switch__track",__css:w}),s.createElement(r.m$.span,{__css:n.thumb,className:"chakra-switch__thumb","data-checked":u(h.isChecked),"data-hover":u(h.isHovered)})),f&&s.createElement(r.m$.span,(0,a.Z)((0,a.Z)({className:"chakra-switch__label"},k()),{},{__css:C}),f))}));m.displayName="Switch"},81608:function(t,e,n){n.r(e),e.default={}}}]);