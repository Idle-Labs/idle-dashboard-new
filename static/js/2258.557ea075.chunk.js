"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2258,1608],{72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return x},TransactionButtonValue:function(){return w}});var r=n(1413),i=n(29439),o=n(44925),a=(n(81608),n(55967)),s=n(53293),u=n(7276),c=n(15542),d=n(23023),l=n(96699),f=n(52486),m=n(3498),h=n(43127),v=n(45263),p=["text","contractSendMethod"],g=["text","amount","assetId","vaultId","actionType","contractSendMethod"],w=function(t){var e,n=t.text,s=t.contractSendMethod,h=(0,o.Z)(t,p),g=(0,l.Fg)(),w=(0,u.useRef)(null),x=(0,u.useState)(null),y=(0,i.Z)(x,2),b=y[0],S=y[1],C=(0,d.R)(),T=C.state.transaction,j=C.cleanTransaction,M=(0,u.useMemo)((function(){var t;return JSON.stringify(null===T||void 0===T||null===(t=T.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(s._method)}),[T,s]),Z=(0,u.useMemo)((function(){return M&&T.status&&["pending","success","failed"].includes(T.status)&&T.estimatedTime}),[T,M]),k=(0,u.useMemo)((function(){return Z&&"pending"===T.status?T.estimatedTime:.5}),[Z,T]),I=(0,u.useCallback)((function(){if(!T.timestamp||!T.estimatedTime)return null;var t=+T.timestamp+1e3*T.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));S(e),e&&(w.current=setTimeout((function(){I()}),1e3))}),[T]);(0,u.useEffect)((function(){var t;"success"===T.status||"failed"===T.status?(w.current&&(clearInterval(w.current),w.current=null),"success"!==T.status&&4001===(null===(t=T.error)||void 0===t?void 0:t.code)||setTimeout((function(){j()}),4e3)):"pending"!==T.status||w.current||I()}),[T.status,I,j,null===(e=T.error)||void 0===e?void 0:e.code]);var _=(0,u.useMemo)((function(){var t;if(M)switch(null===T||void 0===T?void 0:T.status){case"created":return(0,v.jsx)(f.$,{size:"sm"});case"pending":return T.timestamp&&T.estimatedTime&&b?(0,v.jsxs)(m.xv,{textStyle:"ctaStatic",children:[b,"s"]}):(0,v.jsx)(f.$,{size:"sm"});case"success":return(0,v.jsx)(m.kC,(0,r.Z)((0,r.Z)({},h),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(a.ddU,{size:24,color:g.colors.green[400]})}));case"failed":if(4001!==(null===(t=T.error)||void 0===t?void 0:t.code))return(0,v.jsx)(m.kC,(0,r.Z)((0,r.Z)({},h),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(a.lTq,{size:24,color:g.colors.red[400]})}))}return(0,v.jsx)(c.Translation,{translation:n,textStyle:"ctaStatic"})}),[M,b,T,n,g,h]),z=(0,u.useMemo)((function(){switch(T.status){case"success":case"failed":return"transparent";default:return"primary"}}),[T]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.kC,{top:0,left:0,bottom:0,bg:z,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(k,"s"),animationName:Z?"progress":"none",animationPlayState:Z?"running":"stopped"},children:(0,v.jsx)(m.kC,{left:0,width:h.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:_})}),_]})},x=function(t){var e=t.text,n=t.amount,a=t.assetId,c=t.vaultId,l=t.actionType,f=t.contractSendMethod,m=(0,o.Z)(t,g),p=(0,s.Z)(),x=(0,i.Z)(p,2),y=x[0],b=x[1].width,S=(0,d.R)(),C=S.sendTransaction,T=S.state.transaction,j=(0,u.useMemo)((function(){var t;return JSON.stringify(null===T||void 0===T||null===(t=T.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(f._method)}),[T,f]),M=(0,u.useCallback)((function(){if("created"!==T.status&&"pending"!==T.status)return C(c,a,f,l,n)}),[T,c,a,f,l,n,C]),Z=(0,u.useMemo)((function(){var t;if(!j)return"primary";switch(T.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=T.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[j,T]);return(0,v.jsx)(h.zx,(0,r.Z)((0,r.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:b||"auto",borderColor:Z,onClick:function(){return M()},ref:y,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},m),{},{children:(0,v.jsx)(w,{text:e,contractSendMethod:f,width:b})}))}},53293:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(74165),i=n(15861),o=n(29439),a=n(7276),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=null;return function(){n&&clearTimeout(n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=setTimeout(e,t,i)}},u={x:0,y:0,top:0,left:0,width:0,height:0,right:0,bottom:0};function c(t){var e=t.getBoundingClientRect();return{x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom}}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,a.useState)(null),n=(0,o.Z)(e,2),d=n[0],l=n[1],f=(0,a.useState)(u),m=(0,o.Z)(f,2),h=m[0],v=m[1],p=(0,a.useCallback)((function(t){l(t)}),[]);return(0,a.useLayoutEffect)((function(){if("undefined"!==typeof window&&d){var e=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.requestAnimationFrame((function(){v(c(d))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e();var n=s(t||100,e);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}}}),[d,t]),[p,h,d]}},81608:function(t,e,n){n.r(e),e.default={}}}]);