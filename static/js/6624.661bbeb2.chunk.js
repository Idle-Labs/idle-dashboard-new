"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return S}});var n=l(93433),i=l(1413),o=l(45987),a=l(5128),r=l(7276),u=l(43098),s=l(79681),d=l(87099),c=l(12056),v=l(86059),m=l(60062),p=l(29564),f=l(15542),g=l(1669),y=l(6940),x=l(3498),Z=l(70820),h=l(20910),A=l(45263),k=["assetId","field","amount","amountUsd","stakingPower"],b=function(e){var t,l,n,d,c=e.assetId,b=e.field,S=e.amount,w=e.amountUsd,j=e.stakingPower,D=(0,o.Z)(e,k),M=(0,s.qM)(),B=(0,p.R)().locale,F=(0,g.w)(),I=F.stakingData,P=F.helpers.vaultFunctionsHelper,T=F.selectors,C=T.selectAssetById,U=T.selectVaultById,L=T.selectVaultGauge,E=(0,r.useMemo)((function(){return c&&C&&C(c)}),[c,C]),G=(0,r.useMemo)((function(){return E&&C&&C(E.underlyingId)}),[E,C]),_=(0,r.useMemo)((function(){return c&&U&&U(c)}),[c,U]),q=(0,r.useMemo)((function(){return c&&L&&L(c)}),[c,L]),V=(0,r.useMemo)((function(){return q&&C&&C(q.id)}),[q,C]),J=(0,r.useMemo)((function(){return(0,h.gA)(E.tvl).plus((0,h.d5)(S))}),[E,S]),O=(0,r.useMemo)((function(){return null===P||void 0===P?void 0:P.getVaultNewApr(E,_,(0,h.gA)(S))}),[E,_,S,P]),z=(0,r.useMemo)((function(){if((0,h.d5)(O).gt(0)){var e=(0,h.Bs)((0,h.d5)(O).div(100)).times(100),t=E.apyBreakdown?Object.keys(E.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===V||void 0===V?void 0:V.gaugeData;if(l){var n=(0,h.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,h.d5)(S)),i=(0,h.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),o=E.apyBreakdown[t].times(i);return e.plus(o)}return e.plus(E.apyBreakdown[t]);case"harvest":var a=(0,h.gA)(E.tvl).div(J),r=E.aprBreakdown[t].times(a);return e.plus((0,h.Bs)((0,h.gA)(r).div(100)).times(100));case"rewards":var u=(0,h.gA)(E.tvl).div(J),s=E.aprBreakdown[t].times(u);return e.plus((0,h.Bs)((0,h.gA)(s).div(100)).times(100));default:return e.plus(E.apyBreakdown[t])}}),(0,h.gA)(0)):(0,h.gA)(0);return(0,h.gA)(e).plus(t)}return(0,h.d5)(null===E||void 0===E?void 0:E.apy)}),[E,S,J,V,O]),H=(0,r.useMemo)((function(){return(0,h.d5)(w).gt(0)}),[w]),N=(0,r.useMemo)((function(){var e;return(0,h.d5)(null===E||void 0===E||null===(e=E.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[E]),R=(0,r.useMemo)((function(){var e;return(0,h.d5)(null===E||void 0===E||null===(e=E.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[E]),K=(0,r.useMemo)((function(){var e,t;return"flags"in _&&(0,h.d5)(null===(e=_.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?R.times(null===(t=_.flags)||void 0===t?void 0:t.withdrawFee):(0,h.gA)(0)}),[_,R]),Q=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,h.d5)(null===E||void 0===E||null===(e=E.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(K))}),[K,E]),W=(0,r.useMemo)((function(){return a.Z.minimum(1,(0,h.d5)(w).div(R))}),[w,R]),X=(0,r.useMemo)((function(){return a.Z.minimum(Q,W.times(Q))}),[Q,W]),Y=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,h.d5)(null===E||void 0===E||null===(e=E.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===E||void 0===E?void 0:E.fee))}),[E]),$=(0,r.useMemo)((function(){return a.Z.minimum(Y,(0,h.d5)(X).times(null===E||void 0===E?void 0:E.fee))}),[Y,X,E]);_ instanceof m.C&&(Q=Q.plus($),X=X.plus($));var ee=H&&(0,h.d5)(S).lte(N),te="cta",le="",ne=null;switch(b){case"boost":var ie=z&&null!==E&&void 0!==E&&null!==(t=E.baseApr)&&void 0!==t&&t.gt(0)?z.div(null===E||void 0===E?void 0:E.baseApr):(0,h.gA)(0);ne=(0,A.jsxs)(x.xv,(0,i.Z)((0,i.Z)({},D),{},{textStyle:"titleSmall",color:"primary",children:[ie.gt(9999)?">9999":ie.toFixed(2),"x"]}));break;case"epochEnd":ne=(0,A.jsx)(x.xv,(0,i.Z)((0,i.Z)({},D),{},{textStyle:"titleSmall",color:"primary",children:(0,h.Jb)((null===E||void 0===E||null===(l=E.epochData)||void 0===l?void 0:l.end)||0,B)}));break;case"epochStart":ne=(0,A.jsx)(x.xv,(0,i.Z)((0,i.Z)({},D),{},{textStyle:"titleSmall",color:"primary",children:(0,h.Jb)((null===E||void 0===E||null===(n=E.epochData)||void 0===n?void 0:n.start)||0,B)}));break;case"riskThreshold":ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({abbreviate:!1,decimals:0,textStyle:"titleSmall",color:"primary"},D),{},{value:null===E||void 0===E?void 0:E.epochData.riskThreshold}));break;case"overperformance":var oe=(0,h.d5)(w).times((0,h.gA)(null===E||void 0===E?void 0:E.baseApr).div(100)),ae=(0,h.d5)(w).times((0,h.gA)(null===E||void 0===E?void 0:E.apy).div(100)),re=H?ae.minus(oe):null;ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:re,suffix:"/year"}));break;case"newApy":ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:z}));break;case"totalGain":ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:X.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},D),{},{value:ee?X:null}));break;case"fee":ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:$.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},D),{},{value:ee?-$:null}));break;case"withdrawFee":(0,h.d5)(null===(d=_.flags)||void 0===d?void 0:d.withdrawFee).gt(0)&&(te="orange",ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:K.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},D),{},{value:ee?-K:null})));break;case"depositLimit":te="orange";var ue=a.Z.maximum(0,(0,h.d5)(E.limit).minus(E.totalTvl).minus((0,h.d5)(S)));ne=(0,A.jsx)(v.Amount,(0,i.Z)((0,i.Z)({suffix:" ".concat(G.token),decimals:2,textStyle:"titleSmall",color:te},D),{},{value:ue}));break;case"netGain":var se=a.Z.minimum(Q.minus($),(0,h.d5)(X).minus($));ne=(0,A.jsx)(v.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:se.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},D),{},{value:ee?se:null}));break;case"coverage":var de=C(null===_||void 0===_?void 0:_.vaultConfig.Tranches.BB.address),ce=de.tvl&&J?de.tvl.div(J).times(100):0;ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:ce}));break;case"stakingPoolShare":if(I){var ve=(0,h.d5)(S).div(I.stkIDLE.totalSupply.plus((0,h.d5)(S))).times(100);ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:ve}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":ne=(0,A.jsx)(v.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},D),{},{value:S}));break;case"currentFeeDiscount":var me=(0,h.d5)(null===I||void 0===I?void 0:I.feeDiscount);le=me.lte(0)?"orange":"brightGreen",ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({color:le,textStyle:"titleSmall"},D),{},{value:me}));break;case"feeDiscount":var pe=(0,h.SL)(S);le=pe.lte(0)?"orange":"brightGreen",ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({color:le,textStyle:"titleSmall"},D),{},{value:pe}));break;case"feeDiscountTier":ne=(0,A.jsx)(v.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:1}));break;case"stakingApy":if(I){var fe=(0,h.d5)(j).times(I.maxApr);ne=(0,A.jsx)(v.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},D),{},{value:fe}))}break;default:ne=null}var ge=(0,r.useMemo)((function(){return"dynamicActionFields.tooltips.".concat(b)}),[b]),ye=(0,r.useMemo)((function(){var e;return M(ge,{underlying:null===E||void 0===E||null===(e=E.epochData)||void 0===e?void 0:e.underlyingToken})}),[E,ge,M]),xe=(0,r.useMemo)((function(){return ye!==ge}),[ye,ge]);return ne?(0,A.jsxs)(x.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,A.jsxs)(x.Ug,{spacing:2,alignItems:"center",children:[(0,A.jsx)(Z.u,{hasArrow:!0,placement:"top",label:ye,isDisabled:!xe,children:(0,A.jsx)(y.TooltipContent,{children:(0,A.jsx)(f.Translation,{component:x.xv,color:te,textStyle:"captionSmall",translation:"dynamicActionFields.".concat(b),borderBottomColor:xe?"cta":"none",borderBottom:xe?"1px dashed":"none"})})}),["feeDiscount","currentFeeDiscount"].includes(b)&&(0,A.jsx)(u.nfF,{size:16,color:"orange"})]}),ne]}):null},S=function(e){var t=(0,g.w)(),l=t.stakingData,o=t.selectors,a=o.selectAssetById,u=o.selectVaultById,s=e.assetId,v=e.action,m=(0,r.useMemo)((function(){return s&&a&&a(s)}),[s,a]),p=(0,r.useMemo)((function(){return s&&u&&u(s)}),[s,u]),f=(0,r.useMemo)((function(){return(null===p||void 0===p?void 0:p.type)&&c.A[p.type]}),[p]),y=(0,r.useMemo)((function(){return(0,h.d5)(null===m||void 0===m?void 0:m.limit).lt(d.jq)?(0,h.d5)(null===m||void 0===m?void 0:m.limit):(0,h.gA)(0)}),[m]),Z=(0,r.useMemo)((function(){return!!y.gt(0)&&(0,h.gA)(null===m||void 0===m?void 0:m.totalTvl).gte(y)}),[m,y]),k=(0,r.useMemo)((function(){var e,t,i;if(null===f||void 0===f||null===(e=f.dynamicActionFields)||void 0===e||!e[v])return null;var o=null===f||void 0===f?void 0:f.dynamicActionFields[v];"deposit"===v&&null!==m&&void 0!==m&&m.epochData&&((0,h.qF)(m.epochData.start).isBefore(Date.now())?o=["riskThreshold","epochEnd"].concat((0,n.Z)(o)):(0,h.qF)(m.epochData.start).isAfter(Date.now())&&(o=["riskThreshold","epochStart"].concat((0,n.Z)(o))));var a=p&&"flags"in p&&(null===(t=p.flags)||void 0===t?void 0:t.showLimitCap),r=p&&"flags"in p&&(null===(i=p.flags)||void 0===i?void 0:i.feeDiscountEnabled)&&(0,h.d5)(null===l||void 0===l?void 0:l.feeDiscount).gt(0);return a&&"deposit"===v&&y.gt(0)&&!Z&&(o=["depositLimit"].concat((0,n.Z)(o))),r&&"deposit"===v&&-1===o.indexOf("currentFeeDiscount")&&(o=[].concat((0,n.Z)(o),["currentFeeDiscount"])),o}),[v,p,m,f,Z,l,y]);return k?(0,A.jsx)(x.gC,{spacing:2,width:"full",children:k.map((function(t){return(0,A.jsx)(b,(0,i.Z)((0,i.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}}}]);