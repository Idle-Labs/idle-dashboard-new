"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2969,1805],{52969:function(e,t,n){n.r(t),n.d(t,{DepositedAssetsTable:function(){return M}});var i=n(93433),r=n(1413),s=n(29439),a=n(54447),o=n(79681),l=n(95173),c=n(86059),d=n(8265),u=n(66288),f=n(75349),p=n(82172),x=n(56292),h=n(30572),g=n(10956),m=n(1805),v=n(58316),j=n(15542),C=n(1669),w=n(7276),y=n(84849),b=n(23537),A=n(3498),P=n(89030),I=n(82137),T=n(2092),k=n(43127),D=n(45263),M=function(){var e=(0,l.s0)(),t=(0,C.w)(),n=t.isPortfolioLoaded,M=t.isPortfolioAccountReady,S=t.selectors,_=S.selectVaultPosition,Z=S.selectVaultsWithBalance,z=S.selectVaultsAssetsByType,F=S.selectVaultsAssetsWithBalance,O=(0,o.qM)(),U=(0,w.useState)(1),R=(0,s.Z)(U,2),H=R[0],L=R[1],N=(0,u.X)(),B=N.theme,V=N.isMobile,E=(0,p.Y)(),q=E.account,Y=E.prevAccount,W=(0,w.useState)("Available"),K=(0,s.Z)(W,2),G=K[0],J=K[1],X=(0,h.D)(G);(0,w.useEffect)((function(){if(G!==X)return L(1)}),[G,X,L]);var $=(0,w.useMemo)((function(){return[{width:"28%",accessor:"id",id:"vaultOperatorOrProtocol",sortType:"alpha",fieldProps:{size:"xs"},stackProps:{justifyContent:"space-between"},extraFields:["strategies"]},{width:"15%",accessor:"name",sortType:"alpha",id:"asset"},{id:"tvl",width:"13%",accessor:"tvlUsd",sortType:"numeric"},{id:"apyWithRewards",width:"13%",accessor:"apy",sortType:"numeric"},{id:"apy7",width:"13%",accessor:"apy7",sortType:"numeric",tables:["Available"]},{id:"apy30",width:"13%",accessor:"apy30",sortType:"numeric",tables:["Available"]},{width:"5%",accessor:"id",id:"chainId",cellSx:{p:"0!important",alignItems:"center"},stackProps:{justifyContent:"center"},tables:["Available"]}]}),[]),Q=(0,w.useMemo)((function(){return $.reduce((function(e,t){var n=t.id,i=t.accessor,s=t.sortType,a="alpha"===s?b.YC:"numeric"===s?b._O:void 0;return e[n]={id:n,accessor:i,width:t.width,cellSx:t.cellSx,disableSortBy:!a,defaultCanSort:!!a,Header:O(t.title||"defi.".concat(n)),sortType:a?function(e,t){return a(e,t,i)}:void 0,Cell:function(e){var i,s=e.value,a=e.row;return(0,D.jsxs)(A.Kq,(0,r.Z)((0,r.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},t.stackProps),{},{children:[(0,D.jsx)(m.TableField,{field:n,assetId:a.original.id,value:s,props:t.fieldProps}),null===(i=t.extraFields)||void 0===i?void 0:i.map((function(e){return(0,D.jsx)(m.TableField,{assetId:a.original.id,field:e,value:s},"extraField_".concat(e))}))]}))}},e}),{})}),[$,O]),ee=(0,w.useMemo)((function(){return $.filter((function(e){return!e.tables||e.tables.includes(G)})).map((function(e){var t=e.id,n=e.accessor,i=e.sortType,s="alpha"===i?b.YC:"numeric"===i?b._O:void 0;return{id:t,accessor:n,width:e.width,cellSx:e.cellSx,disableSortBy:!s,defaultCanSort:!!s,Header:O(e.title||"defi.".concat(t)),sortType:s?function(e,t){return s(e,t,n)}:void 0,Cell:function(n){var i,s=n.value,a=n.row;return(0,D.jsxs)(A.Kq,(0,r.Z)((0,r.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,D.jsx)(m.TableField,{field:t,value:s,assetId:a.original.id,props:e.fieldProps}),null===(i=e.extraFields)||void 0===i?void 0:i.map((function(e){return(0,D.jsx)(m.TableField,{field:e,value:s,assetId:a.original.id},"extraField_".concat(e))}))]}))}}}))}),[$,G,O]),te=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,i.Z)(ee))}),[ee]),ne=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,i.Z)(ee),[{width:"13%",accessor:"balanceUsd",Header:O("defi.balance"),Cell:function(e){var t=e.value;return(0,D.jsx)(P.N2,{noOfLines:2,isLoaded:!!t,children:(0,D.jsx)(c.Amount.Usd,{value:t,textStyle:"tableCell"})})},sortType:b._O},{width:"13%",accessor:"vaultPosition",Header:O("defi.realizedApy"),Cell:function(e){var t=e.value,n=e.row;return(0,D.jsx)(P.N2,{noOfLines:2,isLoaded:!!t,children:t&&(0,D.jsxs)(I.kN,{children:[(0,D.jsx)(I.Jf,{children:(0,D.jsxs)(A.kC,{direction:"row",alignItems:"center",children:[!t.realizedApy.isNaN()&&(0,D.jsx)(I.uY,{type:"increase"}),(0,D.jsx)(m.TableField,{field:"realizedApy",value:t,assetId:n.original.id})]})}),(0,D.jsx)(c.Amount.Usd,{prefix:"+",value:t.usd.earnings,textStyle:"captionSmall"})]})})},sortType:function(e,t){return(0,b._O)(e,t,"vaultPosition.earningsPercentage")}},Q.chainId])}),[O,ee,Q]),ie=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,i.Z)(ee),[{width:"13%",accessor:"balanceUsd",Header:O("defi.balance"),Cell:function(e){var t=e.value;return(0,D.jsx)(P.N2,{noOfLines:2,isLoaded:!!t,children:(0,D.jsx)(c.Amount.Usd,{value:t,textStyle:"tableCell"})})},sortType:b._O},{width:"13%",accessor:"vaultPosition",Header:O("defi.discountedFees"),Cell:function(e){var t=e.value;return(0,D.jsx)(P.N2,{noOfLines:2,isLoaded:!!t,children:t&&(0,D.jsx)(c.Amount.Usd,{value:t.usd.discountedFees,textStyle:"tableCell"})})},sortType:b._O},Q.chainId])}),[Q,ee,O]),re=(0,w.useMemo)((function(){return x.R.reduce((function(e,t){return[].concat((0,i.Z)(e),(0,i.Z)(t.strategies))}),[])}),[]),se=(0,w.useMemo)((function(){return z?re.reduce((function(e,t){return[].concat((0,i.Z)(e),(0,i.Z)(z(t)))}),[]).filter((function(e){return"deprecated"!==e.status})).sort((function(e,t){return(0,b.gA)(e.tvlUsd).lt((0,b.gA)(t.tvlUsd))?1:-1})).slice(0,15).sort((function(e,t){return(0,b.gA)(e.apy).lt((0,b.gA)(t.apy))?1:-1})).slice(0,10):[]}),[z,re]),ae=(0,w.useMemo)((function(){return Z&&n?re.reduce((function(e,t){var n=F(t);return n?[].concat((0,i.Z)(e),(0,i.Z)(n)):e}),[]):[]}),[n,Z,F,re]),oe=(0,w.useMemo)((function(){return n?ae.filter((function(e){var t,n=_(e.id);return!(null===(t=e.flags)||void 0===t||!t.feeDiscountEnabled)&&n&&(0,b.d5)(n.usd.discountedFees).gt(0)})):[]}),[ae,n,_]);(0,w.useEffect)((function(){if(q&&"Available"===G)return J("Deposited")}),[]),(0,w.useEffect)((function(){if(!Y&&q&&"Available"===G)return J("Deposited")}),[G,q,Y,M,ae]);var le=(0,w.useCallback)((function(t,n,i){return(0,b.fU)(n,i,t.original),e((0,b.B$)(t.original.type,t.original.id))}),[e]),ce=(0,w.useMemo)((function(){return 5}),[]),de=(0,w.useMemo)((function(){switch(G){case"Deposited":return Math.ceil(ae.length/ce);case"Discount":return Math.ceil(oe.length/ce);default:return Math.ceil(se.length/ce)}}),[G,se,ae,oe,ce]),ue=(0,w.useCallback)((function(){return!!H&&(L((function(e){return Math.max(1,e-1)})),!0)}),[L,H]),fe=(0,w.useCallback)((function(){if(H===de)return!1;L((function(e){return Math.min(de,e+1)}))}),[L,H,de]),pe=(0,w.useMemo)((function(){return(0,b.xb)(ae)?(0,D.jsx)(a.Card,{children:(0,D.jsxs)(A.gC,{py:10,spacing:6,width:"full",alignItems:"center",justifyContent:"center",children:[(0,D.jsxs)(A.gC,{spacing:2,width:"full",alignItems:"center",justifyContent:"center",children:[(0,D.jsx)(T.Ee,{src:"images/vaults/emptywallet.png",width:8}),(0,D.jsx)(j.Translation,{textAlign:"center",translation:"defi.empty.deposits.body",color:"cta",isHtml:!0})]}),(0,D.jsx)(j.Translation,{component:k.zx,translation:"defi.empty.deposits.cta",variant:"ctaPrimary",px:10,onClick:function(){return e((0,b.qC)("earn"))}})]})}):V?(0,D.jsx)(A.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:(0,D.jsx)(A.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:ae.map((function(e){return e.id&&(0,D.jsx)(f.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})}):(0,D.jsxs)(A.gC,{spacing:6,width:"full",children:[(0,D.jsx)(a.Card,{children:(0,D.jsx)(v.ReactTable,{columns:ne,data:ae,initialState:{sortBy:[{id:"balanceUsd",desc:!1}]},rowsPerPage:ce,page:H,onRowClick:function(e){return le(e,"dashboard_deposited","Dashboard deposited")}})}),de>1&&(0,D.jsx)(g.Pagination,{activePage:H,pages:de,justifyContent:"center",onPrevArrowClick:function(){H&&ue()},onNextArrowClick:function(){H<de&&fe()},prevArrowColor:1===H?B.colors.ctaDisabled:B.colors.primary,nextArrowColor:H===de?B.colors.ctaDisabled:B.colors.primary})]})}),[V,ne,ae,H,e,de,B,ce,le,ue,fe]),xe=(0,w.useMemo)((function(){if(!se.length)return null;return V?(0,D.jsx)(A.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:(0,D.jsx)(A.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:se.map((function(e){return e.id&&(0,D.jsx)(f.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})}):(0,D.jsxs)(A.gC,{spacing:6,width:"full",children:[(0,D.jsxs)(a.Card,{children:[(0,D.jsx)(A.Ug,{width:"full",alignItems:"flex-start",justifyContent:"space-between"}),(0,D.jsx)(v.ReactTable,{columns:te,data:se,initialState:{sortBy:[{id:"apy",desc:!0}]},rowsPerPage:ce,page:H,onRowClick:function(e){return le(e,"dashboard_deposited","Dashboard deposited")}})]}),de>1&&(0,D.jsx)(g.Pagination,{activePage:H,pages:de,justifyContent:"center",onPrevArrowClick:function(){H&&ue()},onNextArrowClick:function(){H<de&&fe()},prevArrowColor:1===H?B.colors.ctaDisabled:B.colors.primary,nextArrowColor:H===de?B.colors.ctaDisabled:B.colors.primary})]})}),[V,te,se,H,de,B,ce,le,ue,fe]),he=(0,w.useMemo)((function(){return(0,b.xb)(oe)?(0,D.jsx)(a.Card,{children:(0,D.jsxs)(A.gC,{py:10,spacing:6,width:"full",alignItems:"center",justifyContent:"center",children:[(0,D.jsxs)(A.gC,{spacing:2,width:"full",alignItems:"center",justifyContent:"center",children:[(0,D.jsx)(T.Ee,{src:"images/vaults/discount.png",width:8}),(0,D.jsx)(j.Translation,{textAlign:"center",translation:"feeDiscount.table.empty",color:"cta",isHtml:!0})]}),(0,D.jsx)(j.Translation,{component:k.zx,translation:"common.stake",variant:"ctaPrimary",px:10,onClick:function(){return e((0,b.qC)("stake"))}})]})}):V?(0,D.jsx)(A.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:(0,D.jsx)(A.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:oe.map((function(e){return e.id&&(0,D.jsx)(f.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})}):(0,D.jsxs)(A.gC,{spacing:6,width:"full",children:[(0,D.jsx)(a.Card,{children:(0,D.jsx)(v.ReactTable,{columns:ie,data:oe,initialState:{sortBy:[{id:"apy",desc:!1}]},rowsPerPage:ce,page:H,onRowClick:function(e){return le(e,"dashboard_discounted","Dashboard discounted")}})}),de>1&&(0,D.jsx)(g.Pagination,{activePage:H,pages:de,justifyContent:"center",onPrevArrowClick:function(){H&&ue()},onNextArrowClick:function(){H<de&&fe()},prevArrowColor:1===H?B.colors.ctaDisabled:B.colors.primary,nextArrowColor:H===de?B.colors.ctaDisabled:B.colors.primary})]})}),[V,H,de,B,ie,oe,e,ce,le,ue,fe]),ge=(0,w.useMemo)((function(){switch(G){case"Deposited":return pe;case"Discount":return he;default:return xe}}),[G,pe,he,xe]);return n?(0,D.jsxs)(A.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,D.jsxs)(A.Ug,{spacing:3,children:[(0,D.jsx)(j.Translation,{component:k.zx,leftIcon:(0,D.jsx)(y.lTP,{size:24}),translation:"common.wallet",variant:"filter","aria-selected":"Deposited"===G,fontSize:"sm",borderRadius:"80px",px:4,onClick:function(){return J("Deposited")}}),(0,D.jsx)(j.Translation,{component:k.zx,leftIcon:(0,D.jsx)(y.pIY,{size:24}),translation:"common.featured",variant:"filter","aria-selected":"Available"===G,fontSize:"sm",borderRadius:"80px",px:4,onClick:function(){return J("Available")}}),(0,D.jsx)(j.Translation,{component:k.zx,leftIcon:(0,D.jsx)(d.njj,{size:24}),translation:"common.discount",variant:"filter","aria-selected":"Discount"===G,fontSize:"sm",borderRadius:"80px",px:4,onClick:function(){return J("Discount")}})]}),ge]}):null}},1805:function(e,t,n){n.r(t),n.d(t,{TableField:function(){return o}});var i=n(1413),r=n(89030),s=n(75712),a=n(45263),o=function(e){var t=e.assetId,n=e.field,o=e.value,l=e.section,c=e.props;return(0,a.jsx)(r.N2,{noOfLines:2,isLoaded:!!o,children:(0,a.jsx)(s.AssetProvider,{assetId:t,children:(0,a.jsx)(s.AssetProvider.GeneralData,(0,i.Z)({section:l,field:n},c))})})}}}]);