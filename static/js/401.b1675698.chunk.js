"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[401,1617,907,2258,1608,1823],{61617:function(t,e,n){n.r(e),n.d(e,{AssetLabel:function(){return c}});var r=n(1413),i=n(45987),s=n(3498),a=n(75712),o=n(45263),u=["assetId","size","spacing","extraFields"],c=function(t){var e=t.assetId,n=t.size,c=void 0===n?"sm":n,d=t.spacing,l=t.extraFields,f=(0,i.Z)(t,u);return(0,o.jsx)(a.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,o.jsxs)(s.Ug,{spacing:d,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(a.AssetProvider.Icon,{size:c}),(0,o.jsx)(a.AssetProvider.Name,(0,r.Z)({textStyle:"heading",fontSize:["15px","h3"],whiteSpace:"nowrap"},f)),null===l||void 0===l?void 0:l.map((function(t){return(0,o.jsx)(a.AssetProvider.GeneralData,{field:t},"extraField_".concat(t))}))]})})}},72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return j},TransactionButtonValue:function(){return w}});var r=n(1413),i=n(29439),s=n(45987),a=(n(81608),n(39195)),o=n(55967),u=n(15542),c=n(53293),d=n(23023),l=n(7276),f=n(96699),m=n(52486),h=n(3498),v=n(43127),x=n(45263),p=["text","contractSendMethod"],g=["text","amount","assetId","vaultId","actionType","chainIds","contractSendMethod"],w=function(t){var e,n=t.text,a=t.contractSendMethod,c=(0,s.Z)(t,p),v=(0,f.Fg)(),g=(0,l.useRef)(null),w=(0,l.useState)(null),j=(0,i.Z)(w,2),y=j[0],b=j[1],S=(0,d.R)(),C=S.state.transaction,I=S.cleanTransaction,M=(0,l.useMemo)((function(){var t;return JSON.stringify(null===C||void 0===C||null===(t=C.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(a._method)}),[C,a]),T=(0,l.useMemo)((function(){return M&&C.status&&["pending","success","failed"].includes(C.status)&&C.estimatedTime}),[C,M]),Z=(0,l.useMemo)((function(){return T&&"pending"===C.status?C.estimatedTime:.5}),[T,C]),k=(0,l.useCallback)((function(){if(!C.timestamp||!C.estimatedTime)return null;var t=+C.timestamp+1e3*C.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));b(e),e&&(g.current=setTimeout((function(){k()}),1e3))}),[C]);(0,l.useEffect)((function(){var t;M&&("success"===C.status||"failed"===C.status?(g.current&&(clearInterval(g.current),g.current=null),"success"!==C.status&&4001===(null===(t=C.error)||void 0===t?void 0:t.code)||setTimeout((function(){I()}),4e3)):"pending"!==C.status||g.current||k())}),[M,C.status,k,I,null===(e=C.error)||void 0===e?void 0:e.code]);var A=(0,l.useMemo)((function(){var t;if(M)switch(null===C||void 0===C?void 0:C.status){case"created":return(0,x.jsx)(m.$,{size:"sm"});case"pending":return C.timestamp&&C.estimatedTime&&y?(0,x.jsxs)(h.xv,{textStyle:"ctaStatic",children:[y,"s"]}):(0,x.jsx)(m.$,{size:"sm"});case"success":return(0,x.jsx)(h.kC,(0,r.Z)((0,r.Z)({},c),{},{alignItems:"center",justifyContent:"center",children:(0,x.jsx)(o.ddU,{size:24,color:v.colors.green[400]})}));case"failed":if(4001!==(null===(t=C.error)||void 0===t?void 0:t.code))return(0,x.jsx)(h.kC,(0,r.Z)((0,r.Z)({},c),{},{alignItems:"center",justifyContent:"center",children:(0,x.jsx)(o.lTq,{size:24,color:v.colors.red[400]})}))}return(0,x.jsx)(u.Translation,{translation:n,textStyle:"ctaStatic"})}),[M,y,C,n,v,c]),z=(0,l.useMemo)((function(){switch(C.status){case"success":case"failed":return"transparent";default:return"primary"}}),[C]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.kC,{top:0,left:0,bottom:0,bg:z,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(Z,"s"),animationName:T?"progress":"none",animationPlayState:T?"running":"stopped"},children:(0,x.jsx)(h.kC,{left:0,width:c.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:A})}),A]})},j=function(t){var e=t.text,n=t.amount,o=t.assetId,u=t.vaultId,f=t.actionType,m=t.chainIds,h=void 0===m?[]:m,p=t.contractSendMethod,j=(0,s.Z)(t,g),y=(0,c.Z)(),b=(0,i.Z)(y,2),S=b[0],C=b[1].width,I=(0,a.Y)().checkChainEnabled,M=(0,d.R)(),T=M.sendTransaction,Z=M.state.transaction,k=(0,l.useMemo)((function(){return I(h)}),[h,I]),A=(0,l.useMemo)((function(){var t;return JSON.stringify(null===Z||void 0===Z||null===(t=Z.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(p._method)}),[Z,p]),z=(0,l.useCallback)((function(){if("created"!==Z.status&&"pending"!==Z.status)return T(u,o,p,f,n)}),[Z,u,o,p,f,n,T]),F=(0,l.useMemo)((function(){var t;if(!A)return"primary";switch(Z.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=Z.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[A,Z]),R=(0,l.useMemo)((function(){return!!j.disabled||!k}),[j,k]);return(0,x.jsx)(v.zx,(0,r.Z)((0,r.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:C||"auto",borderColor:F,onClick:function(){return z()},ref:S,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},j),{},{disabled:R,children:(0,x.jsx)(w,{text:e,contractSendMethod:p,width:C})}))}},1823:function(t,e,n){n.r(e),n.d(e,{VaultReward:function(){return d}});n(7276);var r=n(54447),i=n(86059),s=n(61617),a=n(15542),o=n(75712),u=n(3498),c=n(45263),d=function(t){var e=t.assetId,n=t.amount;return n.lte(0)?null:(0,c.jsx)(o.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,c.jsx)(r.Card,{p:6,children:(0,c.jsxs)(u.Ug,{width:"100%",justifyContent:"space-between",children:[(0,c.jsx)(s.AssetLabel,{assetId:e}),(0,c.jsxs)(u.gC,{spacing:1,alignItems:"flex-end",children:[(0,c.jsx)(a.Translation,{component:u.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,c.jsxs)(u.Ug,{spacing:1,justifyContent:"flex-end",children:[(0,c.jsx)(i.Amount,{value:n,decimals:8,textStyle:"tableCell"}),(0,c.jsx)(o.AssetProvider.Name,{textStyle:"tableCell"})]})]})]})})})}},10401:function(t,e,n){n.r(e),n.d(e,{VaultRewards:function(){return l}});var r=n(20910),i=n(7276),s=n(3498),a=n(15542),o=n(1823),u=n(1669),c=n(72258),d=n(45263),l=function(t){var e=t.assetId,n=(0,u.w)().selectors,l=n.selectAssetById,f=n.selectVaultById,m=(0,i.useMemo)((function(){return f&&f(e)}),[f,e]),h=(0,i.useMemo)((function(){if(l&&e){var t=l(e);return null===t||void 0===t?void 0:t.rewards}}),[l,e]),v=(0,i.useMemo)((function(){return h?Object.values(h).reduce((function(t,e){return t.plus(e)}),(0,r.gA)(0)):(0,r.gA)(0)}),[h]),x=m.getClaimRewardsContractSendMethod();return(0,d.jsxs)(s.gC,{spacing:6,width:"100%",id:"vault-rewards",alignItems:"flex-start",children:[(0,d.jsx)(a.Translation,{translation:"assets.assetDetails.generalData.claimableRewards",component:s.xv,textStyle:"heading",fontSize:"h3"}),(0,d.jsx)(s.MI,{spacing:6,width:"100%",columns:[1,3],children:h&&Object.keys(h).map((function(t){return(0,d.jsx)(o.VaultReward,{assetId:t,amount:h[t]},"reward_".concat(t))}))}),e&&m&&v.gt(0)&&(0,d.jsx)(c.TransactionButton,{text:"assets.assetCards.rewards.claimRewards",vaultId:e,assetId:e,contractSendMethod:x,actionType:"claim",amount:v.toString(),width:["100%","150px"],disabled:v.lte(0)})]})}},53293:function(t,e,n){n.d(e,{Z:function(){return d}});var r=n(74165),i=n(15861),s=n(29439),a=n(7276),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=null;return function(){n&&clearTimeout(n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];n=setTimeout(e,t,i)}},u={x:0,y:0,top:0,left:0,width:0,height:0,right:0,bottom:0};function c(t){var e=t.getBoundingClientRect();return{x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom}}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,a.useState)(null),n=(0,s.Z)(e,2),d=n[0],l=n[1],f=(0,a.useState)(u),m=(0,s.Z)(f,2),h=m[0],v=m[1],x=(0,a.useCallback)((function(t){l(t)}),[]);return(0,a.useLayoutEffect)((function(){if("undefined"!==typeof window&&d){var e=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.requestAnimationFrame((function(){v(c(d))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e();var n=o(t||100,e);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}}}),[d,t]),[x,h,d]}},81608:function(t,e,n){n.r(e),e.default={}}}]);