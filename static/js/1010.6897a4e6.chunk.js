"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[1010,5019],{25019:function(t,e,n){n.r(e),n.d(e,{AssetLabel:function(){return c}});var a=n(1413),i=n(44925),s=n(52137),o=n(3666),r=n(37881),l=["assetId","size"],c=function(t){var e=t.assetId,n=t.size,c=void 0===n?"sm":n,u=(0,i.Z)(t,l);return(0,r.jsx)(o.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,r.jsxs)(s.Ug,{alignItems:"center",justifyContent:"flex-start",children:[(0,r.jsx)(o.AssetProvider.Icon,{size:c}),(0,r.jsx)(o.AssetProvider.Name,(0,a.Z)({textStyle:"heading",fontSize:"h3",whiteSpace:"nowrap"},u))]})})}},81010:function(t,e,n){n.r(e),n.d(e,{Approve:function(){return O},Deposit:function(){return V},DynamicActionField:function(){return G},DynamicActionFields:function(){return W},OperativeComponent:function(){return J},Withdraw:function(){return R}});var a=n(1413),i=n(44925),s=n(74165),o=n(80531),r=n(29439),l=n(56352),c=n(20235),u=n(92016),d=n(7453),m=n(18975),v=n(24371),p=n(96354),x=n(25019),f=n(2615),g=n(9579),h=n(33048),y=n(20549),j=n(96437),S=n(29591),A=n(3666),T=n(71233),C=n(12115),w=n(79153),b=n(52137),I=n(62827),k=n(29697),Z=n(84219),E=n(65304),M=n(64129),U=n(12138),P=n(53396),F=n(48691),_=n(37881),z=["assetId","field","action","amount","amountUsd"],B=["goBack","close","height"],D=["assetId","actions"],N=function(t){var e=t.inputHeight,n=t.amount,a=t.amountUsd,i=t.setAmount,s=(0,A.useAssetProvider)(),o=s.asset,r=s.underlyingAsset,l=(0,g.w)().selectors,c=l.selectAssetPriceUsd,d=l.selectVaultPrice,m=(0,T.useMemo)((function(){if(a)return(0,C.gA)(a);if(c&&d&&r&&o){var t=c(r.id),e=d(o.id);return"underlying"===o.type?parseFloat((0,C.gA)(n).times(t).toString())||0:parseFloat((0,C.gA)(n).times(t).times(e).toString())||0}}),[o,r,n,a,d,c]);return(0,_.jsxs)(b.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsx)(I.II,{height:e,flex:1,type:"number",placeholder:"0",variant:"balance",value:(0,C.gA)(n).toString(),onChange:function(t){var e=t.target.value;i(Math.max(0,parseFloat(e)).toString())}}),(0,_.jsx)(u.Amount.Usd,{abbreviateThresold:1e4,textStyle:"captionSmall",color:"brightGreen",prefix:"\u2248 $",value:(0,C.d5)(m).toString()})]})},O=function(t){var e=t.goBack,n=t.itemIndex,a=(t.children,(0,p.Y)().account),i=q(),l=i.defaultAmount,c=i.dispatch,u=i.activeItem,d=(0,T.useState)(l),x=(0,r.Z)(d,2),f=x[0],g=x[1],h=(0,A.useAssetProvider)(),S=h.underlyingAsset,I=h.vault,E=h.translate,M=h.theme,U=(0,T.useState)(!1),P=(0,r.Z)(U,2),F=P[0],z=P[1],B=(0,T.useState)(l),D=(0,r.Z)(B,2),O=D[0],G=D[1],W=(0,y.R)(),V=W.sendTransaction,R=W.setGasLimit;(0,T.useEffect)((function(){g(l)}),[l]);var X=(0,T.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var e,n,i,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I&&"getAllowanceContractSendMethod"in I&&"getAllowanceParams"in I){t.next=2;break}return t.abrupt("return");case 2:if(e={from:null===a||void 0===a?void 0:a.address},n=I.getAllowanceParams(m.Uf),i=I.getAllowanceContractSendMethod(n)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,C.$K)(i,e);case 9:return o=t.sent,t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)}))),[a,I]),H=(0,T.useCallback)((function(){if(I&&"getAllowanceContractSendMethod"in I&&"getAllowanceParams"in I){var t=I.getAllowanceParams(O),e=I.getAllowanceContractSendMethod(t);console.log("allowanceParams",t,e),e&&V(I.id,null===S||void 0===S?void 0:S.id,e)}}),[O,I,S,V]);return(0,T.useEffect)((function(){var t=F?f:m.Uf;G(t),u===n&&c({type:"SET_AMOUNT",payload:t})}),[F,f,c,u,n]),(0,T.useEffect)((function(){u===n&&(0,o.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:e=t.sent,R(e);case 4:case"end":return t.stop()}}),t)})))()}),[u,n,X,R]),(0,_.jsxs)(b.gC,{flex:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(Y,{goBack:e,translation:"modals.approve.header",params:{asset:null===S||void 0===S?void 0:S.name}}),(0,_.jsx)(b.kC,{p:14,pt:20,flex:1,children:(0,_.jsxs)(b.gC,{spacing:6,children:[(0,_.jsx)(w.PG4,{size:72}),(0,_.jsx)(j.Translation,{component:b.xv,prefix:"".concat(E("modals.approve.routerName")," "),translation:"modals.approve.body",params:{asset:null===S||void 0===S?void 0:S.name},textStyle:["heading","h3"],textAlign:"center"}),(0,_.jsxs)(b.gC,{width:"100%",spacing:6,children:[(0,_.jsxs)(b.Ug,{py:2,width:"100%",justifyContent:"space-between",borderTop:"1px solid ".concat(M.colors.divider),borderBottom:"1px solid ".concat(M.colors.divider),children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"trade.allowance",textStyle:"captionSmall"}),(0,_.jsxs)(b.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"trade.unlimited",textStyle:["captionSmall","bold","clickable",F?"inactive":"active"],onClick:function(t){return z(!1)}}),(0,_.jsx)(k.r,{size:"sm",isChecked:F,onChange:function(t){return z(t.target.checked)}}),(0,_.jsx)(j.Translation,{component:b.xv,translation:"trade.exact",textStyle:["captionSmall","bold","clickable",F?"active":"inactive"],onClick:function(t){return z(!0)}})]})]}),F&&(0,_.jsxs)(b.Ug,{children:[(0,_.jsx)(A.AssetProvider.Icon,{size:"sm"}),(0,_.jsx)(v.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsx)(N,{inputHeight:6,amount:f,setAmount:g})})]})]}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.approve",onClick:H,variant:"ctaFull"})]})}),(0,_.jsx)(L,{})]})},L=function(){var t=(0,E.Fg)(),e=(0,p.Y)().chainToken,n=(0,y.R)().state,a=n.transactionSpeed,i=n.estimatedFees,s=n.estimatedFeesUsd,o=(0,T.useMemo)((function(){return i?i[a]:null}),[i,a]),r=(0,T.useMemo)((function(){return s?s[a]:null}),[s,a]);return(0,_.jsxs)(b.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,_.jsx)(w.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,_.jsx)(j.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,_.jsx)(u.Amount.Usd,{textStyle:["captionSmaller"],fontWeight:"600",color:"primary",prefix:m.EI,value:r}),r&&(0,_.jsx)(u.Amount,{textStyle:["captionSmaller"],fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===e||void 0===e?void 0:e.symbol,")"),value:o,decimals:4})]})},G=function(t){var e,n,s,o,r,c,d=t.assetId,m=t.field,v=(t.action,t.amount),p=t.amountUsd,x=(0,i.Z)(t,z),f=(0,g.w)(),h=f.helpers.vaultFunctionsHelper,y=f.selectors,j=y.selectAssetById,S=y.selectVaultById,A=y.selectVaultGauge,w=(0,T.useMemo)((function(){return d&&j&&j(d)}),[d,j]),I=(0,T.useMemo)((function(){return d&&S&&S(d)}),[d,S]),k=(0,T.useMemo)((function(){return d&&A&&A(d)}),[d,A]),Z=(0,T.useMemo)((function(){return k&&j&&j(k.id)}),[k,j]),E=(0,T.useMemo)((function(){return(0,C.gA)(w.tvl).plus((0,C.d5)(v))}),[w,v]),M=((0,T.useMemo)((function(){return(0,C.gA)(w.totalTvl).plus((0,C.d5)(v))}),[w,v]),(0,T.useMemo)((function(){return null===h||void 0===h?void 0:h.getVaultNewApr(w,I,(0,C.gA)(v))}),[w,I,v,h])),U=(0,T.useMemo)((function(){if((0,C.d5)(M).gt(0)){var t=(0,C.Bs)((0,C.d5)(M).div(100)).times(100),e=w.apyBreakdown?Object.keys(w.apyBreakdown||{}).filter((function(t){return"base"!==t})).reduce((function(t,e){switch(e){case"gauge":var n=null===Z||void 0===Z?void 0:Z.gaugeData;if(n){var a=(0,C.d5)(null===n||void 0===n?void 0:n.totalSupply).plus((0,C.d5)(v)),i=(0,C.d5)(null===n||void 0===n?void 0:n.totalSupply).div(a),s=w.apyBreakdown[e].times(i);return t.plus(s)}return t.plus(w.apyBreakdown[e]);case"harvest":var o=(0,C.gA)(w.tvl).div(E),r=w.apyBreakdown[e].times(o);return t.plus(r);default:return t.plus(w.apyBreakdown[e])}}),(0,C.gA)(0)):(0,C.gA)(0);return(0,C.gA)(t).plus(e)}return(0,C.d5)(null===w||void 0===w?void 0:w.apy)}),[w,v,E,Z,M]),P=(0,C.d5)(p).gt(0),F=(0,C.d5)(null===w||void 0===w||null===(e=w.vaultPosition)||void 0===e?void 0:e.underlying.redeemable),B=(0,C.d5)(null===w||void 0===w||null===(n=w.vaultPosition)||void 0===n?void 0:n.usd.redeemable),D=l.Z.maximum(0,(0,C.d5)(null===w||void 0===w||null===(s=w.vaultPosition)||void 0===s?void 0:s.usd.earnings)),N=((0,C.d5)(null===w||void 0===w||null===(o=w.vaultPosition)||void 0===o?void 0:o.earningsPercentage),l.Z.minimum(1,(0,C.d5)(p).div(B))),O=l.Z.minimum(D,N.times(D)),L=l.Z.maximum(0,(0,C.d5)(null===w||void 0===w||null===(r=w.vaultPosition)||void 0===r?void 0:r.usd.earnings).times(null===w||void 0===w?void 0:w.fee)),G=l.Z.minimum(L,(0,C.d5)(O).times(null===w||void 0===w?void 0:w.fee)),W=P&&(0,C.d5)(v).lte(F);switch(m){case"boost":var V=U&&null!==w&&void 0!==w&&null!==(c=w.baseApr)&&void 0!==c&&c.gt(0)?U.div(null===w||void 0===w?void 0:w.baseApr):(0,C.gA)(0);return(0,_.jsxs)(b.xv,(0,a.Z)((0,a.Z)({},x),{},{textStyle:"titleSmall",color:"primary",children:[V.toFixed(2),"x"]}));case"overperformance":var R=(0,C.d5)(p).times((0,C.gA)(null===w||void 0===w?void 0:w.baseApr).div(100)),Y=(0,C.d5)(p).times((0,C.gA)(null===w||void 0===w?void 0:w.apy).div(100)),X=P?Y.minus(R):null;return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:X,suffix:"/year"}));case"newApy":return(0,_.jsx)(u.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:U}));case"gain":return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:W?O:null}));case"fee":return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:W?G:null}));case"netGain":var H=l.Z.minimum(D.minus(G),(0,C.d5)(O).minus(G));return(0,_.jsx)(u.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:W?H:null}));case"coverage":var K=j(null===I||void 0===I?void 0:I.vaultConfig.Tranches.BB.address),Q=K.tvl&&E?K.tvl.div(E).times(100):0;return(0,_.jsx)(u.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},x),{},{value:Q}));default:return null}},W=function(t){var e,n=(0,g.w)().selectors,i=(n.selectAssetById,n.selectVaultById),s=t.assetId,o=t.action,r=(t.amount,t.amountUsd,(0,T.useMemo)((function(){return s&&i&&i(s)}),[s,i])),l=(0,T.useMemo)((function(){return(null===r||void 0===r?void 0:r.type)&&d.A[r.type]}),[r]);if(null===l||void 0===l||null===(e=l.dynamicActionFields)||void 0===e||!e[o])return null;var c=null===l||void 0===l?void 0:l.dynamicActionFields[o];return(0,_.jsx)(b.gC,{spacing:2,width:"100%",children:c.map((function(e){return(0,_.jsxs)(b.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"dynamicActionFields.".concat(e),textStyle:"captionSmall"}),(0,_.jsx)(G,(0,a.Z)((0,a.Z)({},t),{},{field:e}))]},"dynamicField_".concat(e))}))})},V=function(t){var e=t.itemIndex,n=(0,T.useState)(""),a=(0,r.Z)(n,2),i=a[0],l=a[1],c=(0,T.useState)("0"),u=(0,r.Z)(c,2),d=u[0],m=u[1],f=(0,T.useState)(0),h=(0,r.Z)(f,2),w=h[0],I=h[1],k=(0,p.Y)().account,E=q(),M=E.dispatch,U=E.activeItem,P=E.activeStep,F=E.executeAction,z=(0,y.R)(),B=z.sendTransaction,D=z.setGasLimit,O=z.state.transaction,G=(0,g.w)().selectors,V=G.selectAssetPriceUsd,R=G.selectAssetBalance,Y=(0,A.useAssetProvider)(),X=Y.asset,H=Y.vault,K=Y.underlyingAsset,Q=(Y.underlyingAssetVault,Y.translate),$=(0,T.useMemo)((function(){return R?R(null===K||void 0===K?void 0:K.id):(0,C.gA)(0)}),[R,null===K||void 0===K?void 0:K.id]),J=(0,T.useMemo)((function(){return l(""),!(!(0,C.gA)(d).isNaN()&&!(0,C.gA)(d).lte(0))||!!(0,C.gA)(d).gt($)&&(l(Q("trade.errors.insufficientFundsForAmount",{symbol:null===K||void 0===K?void 0:K.name})),!0)}),[d,$,K,Q]),tt=(0,T.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];k&&!J&&H&&"getDepositContractSendMethod"in H&&"getDepositParams"in H&&H&&"getAllowanceContract"in H&&(0,o.Z)((0,s.Z)().mark((function e(){var n,a,i,o,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H.getAllowanceContract()){e.next=3;break}return e.abrupt("return");case 3:if(a=(0,C.WP)(H),!t){e.next=10;break}return e.next=7,(0,C.RC)(n,k.address,a);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=(0,C.gA)(d);case 11:i=e.t0,console.log("allowance",a,k.address,i),i.gte(d)?(o=H.getDepositParams(d),r=H.getDepositContractSendMethod(o),console.log("depositParams",o,r),B(H.id,null===K||void 0===K?void 0:K.id,r)):M({type:"SET_ACTIVE_STEP",payload:1});case 14:case"end":return e.stop()}}),e)})))()}),[k,J,d,H,K,M,B]);(0,T.useEffect)((function(){if(V&&K){var t=V(K.id),e=parseFloat((0,C.gA)(d).times(t).toString())||0;I(e)}}),[K,d,V,M]),(0,T.useEffect)((function(){F||P!==e||"success"!==O.status||m("")}),[F,O.status,P,e]);var et=(0,T.useCallback)((function(){null!==K&&void 0!==K&&K.balance&&m(K.balance.toString())}),[K]),nt=(0,T.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var e,n,a,i,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(H&&"getDepositContractSendMethod"in H&&"getDepositParams"in H){t.next=2;break}return t.abrupt("return");case 2:if(e=H.getMethodDefaultGasLimit("deposit"),k&&!$.lte(0)){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===k||void 0===k?void 0:k.address},a=H.getDepositParams($.toFixed()),i=H.getDepositContractSendMethod(a),t.next=10,(0,C.$K)(i,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return o=t.t0,t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)}))),[k,H,$]);(0,T.useEffect)((function(){U===e&&(0,o.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt();case 2:e=t.sent,D(e);case 4:case"end":return t.stop()}}),t)})))()}),[U,e,nt,D]),(0,T.useEffect)((function(){U===e&&(M({type:"SET_AMOUNT",payload:d}),M({type:"SET_DEFAULT_AMOUNT",payload:d}),M({type:"SET_ASSET",payload:K}),F&&(tt(!1),M({type:"SET_EXECUTE_ACTION",payload:!1})))}),[d,U,K,e,M,F,tt]);var at=(0,T.useMemo)((function(){return k?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.deposit",disabled:J,onClick:tt,variant:"ctaFull"}):(0,_.jsx)(S.ConnectWalletButton,{variant:"ctaFull"})}),[k,J,tt]);return(0,_.jsx)(A.AssetProvider,{flex:1,width:"100%",assetId:null===X||void 0===X?void 0:X.underlyingId,children:(0,_.jsxs)(b.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,_.jsxs)(b.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,_.jsxs)(b.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(b.xu,{pt:8,children:(0,_.jsx)(x.AssetLabel,{assetId:null===X||void 0===X?void 0:X.id})}),(0,_.jsxs)(b.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(v.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsxs)(b.gC,{spacing:2,alignItems:"flex-start",children:[(0,_.jsx)(N,{amount:d,amountUsd:w,setAmount:m}),(0,_.jsxs)(b.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsxs)(b.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,_.jsx)(A.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,_.jsx)(Z.zx,{variant:"selector",onClick:et,children:"MAX"})]})]})}),i&&(0,_.jsx)(b.xv,{textStyle:"captionSmaller",color:"orange",children:i})]})]}),(0,_.jsx)(W,{assetId:null===X||void 0===X?void 0:X.id,action:"deposit",amount:d,amountUsd:w})]}),(0,_.jsxs)(b.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,_.jsx)(L,{}),at]})]})})},R=function(t){var e=t.itemIndex,n=(0,T.useState)("0"),a=(0,r.Z)(n,2),i=a[0],c=a[1],u=(0,T.useState)(""),d=(0,r.Z)(u,2),m=d[0],h=d[1],w=(0,T.useState)(0),I=(0,r.Z)(w,2),k=I[0],E=I[1],M=(0,p.Y)().account,U=(0,f.m)().searchParams,P=q(),F=P.dispatch,z=P.activeItem,B=P.activeStep,D=(0,A.useAssetProvider)(),O=D.asset,G=D.vault,V=D.underlyingAsset,R=D.translate,Y=(0,y.R)(),X=Y.sendTransaction,H=Y.setGasLimit,K=Y.state.transaction,Q=(0,g.w)().selectors,$=Q.selectAssetPriceUsd,J=Q.selectVaultPrice,tt=Q.selectAssetBalance,et=Q.selectVaultGauge,nt=Q.selectAssetById,at=(0,T.useMemo)((function(){return U}),[U]),it=(0,r.Z)(at,2),st=(it[0],it[1]),ot=(0,T.useMemo)((function(){return tt?tt(null===G||void 0===G?void 0:G.id):(0,C.gA)(0)}),[tt,null===G||void 0===G?void 0:G.id]),rt=(0,T.useMemo)((function(){return(null===O||void 0===O?void 0:O.id)&&et&&et(O.id)}),[et,null===O||void 0===O?void 0:O.id]),lt=(0,T.useMemo)((function(){return rt&&nt&&nt(rt.id)}),[nt,rt]),ct=(0,T.useMemo)((function(){if(!tt)return(0,C.gA)(0);var t=tt(null===G||void 0===G?void 0:G.id),e=J(null===G||void 0===G?void 0:G.id);return t.times(e)}),[tt,J,null===G||void 0===G?void 0:G.id]),ut=(0,T.useMemo)((function(){return h(""),!(!(0,C.gA)(i).isNaN()&&!(0,C.gA)(i).lte(0))||!!(0,C.gA)(i).gt(ct)&&(h(R("trade.errors.insufficientFundsForAmount",{symbol:null===V||void 0===V?void 0:V.name})),!0)}),[i,ct,V,R]),dt=(0,T.useCallback)((function(){M&&!ut&&G&&"getWithdrawContractSendMethod"in G&&"getWithdrawParams"in G&&(0,o.Z)((0,s.Z)().mark((function t(){var e,n,a,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=J(G.id),n=l.Z.minimum(ot,(0,C.gA)(i).div(e)),a=G.getWithdrawParams(n),o=G.getWithdrawContractSendMethod(a),console.log("withdrawParams",a,o),X(G.id,G.id,o);case 6:case"end":return t.stop()}}),t)})))()}),[M,ut,i,G,ot,J,X]);(0,T.useEffect)((function(){B===e&&"success"===K.status&&c("")}),[K.status,B,e]),(0,T.useEffect)((function(){if($&&J&&V&&G){var t=$(V.id),e=(J(G.id),parseFloat((0,C.gA)(i).times(t).toString())||0);E(e)}}),[V,G,i,J,$,F]);var mt=(0,T.useCallback)((function(){ct&&c(ct.toString())}),[ct]),vt=(0,T.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var e,n,a,i,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G&&"getWithdrawContractSendMethod"in G&&"getWithdrawParams"in G){t.next=2;break}return t.abrupt("return");case 2:if(e=G.getMethodDefaultGasLimit("withdraw"),M&&!ot.lte(0)){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===M||void 0===M?void 0:M.address},a=G.getWithdrawParams(ot.toFixed()),i=G.getWithdrawContractSendMethod(a),t.next=10,(0,C.$K)(i,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return o=t.t0,t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)}))),[M,ot,G]);(0,T.useEffect)((function(){z===e&&(0,o.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt();case 2:e=t.sent,H(e);case 4:case"end":return t.stop()}}),t)})))()}),[z,e,vt,H]),(0,T.useEffect)((function(){if(z===e&&(F({type:"SET_ASSET",payload:O}),J&&G)){J(G.id);F({type:"SET_AMOUNT",payload:(0,C.gA)(i).toString()}),F({type:"SET_DEFAULT_AMOUNT",payload:(0,C.gA)(i).toString()})}}),[G,O,i,J,z,e,F,dt]);var pt=(0,T.useMemo)((function(){return M?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.withdraw",disabled:ut,onClick:dt,variant:"ctaFull"}):(0,_.jsx)(S.ConnectWalletButton,{variant:"ctaFull"})}),[M,ut,dt]),xt=(0,T.useMemo)((function(){return G&&"messages"in G?G.messages:void 0}),[G]);return(0,_.jsx)(A.AssetProvider,{flex:1,width:"100%",assetId:null===O||void 0===O?void 0:O.id,children:(0,_.jsxs)(b.gC,{pt:8,flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,_.jsxs)(b.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,_.jsxs)(b.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(b.xu,{pt:8,children:(0,_.jsx)(x.AssetLabel,{assetId:null===O||void 0===O?void 0:O.id})}),(0,_.jsxs)(b.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,_.jsx)(v.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,_.jsxs)(b.gC,{spacing:2,alignItems:"flex-start",children:[(0,_.jsx)(N,{amount:i,amountUsd:k,setAmount:c}),(0,_.jsxs)(b.Ug,{width:"100%",justifyContent:"space-between",children:[(0,_.jsxs)(b.Ug,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,_.jsx)(A.AssetProvider.VaultBalance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,_.jsx)(Z.zx,{variant:"selector",onClick:mt,children:"MAX"})]})]})}),m&&(0,_.jsx)(b.xv,{textStyle:"captionSmaller",color:"orange",children:m})]})]}),ct.gt(0)&&null!==xt&&void 0!==xt&&xt.withdraw?(0,_.jsx)(v.Card.Dark,{p:2,border:0,children:(0,_.jsx)(j.Translation,{textStyle:"captionSmaller",translation:xt.withdraw,textAlign:"center"})}):(0,C.gA)(null===lt||void 0===lt?void 0:lt.balance).gt(0)&&(0,_.jsx)(v.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,_.jsxs)(b.Ug,{spacing:3,width:"full",children:[(0,_.jsx)(j.Translation,{textStyle:"captionSmaller",translation:"trade.actions.withdraw.messages.unstakeFromGauge",textAlign:"left"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"defi.goToGauge",fontSize:"xs",height:"auto",width:"auto",py:3,px:7,onClick:function(){return st("?tab=gauge")}})]})}),(0,_.jsx)(W,{assetId:null===O||void 0===O?void 0:O.id,action:"withdraw",amount:i,amountUsd:k})]}),(0,_.jsxs)(b.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,_.jsx)(L,{}),pt]})]})})},Y=function(t){var e=t.goBack,n=t.close,s=t.height,o=(0,i.Z)(t,B);return(0,_.jsxs)(b.Ug,{width:"100%",position:"relative",alignItems:"center",height:s||"24px",justifyContent:"flex-start",children:[e&&(0,_.jsx)(b.kC,{zIndex:1,position:"relative",children:(0,_.jsx)(w.sG8,{size:24,onClick:function(){return e()},style:{cursor:"pointer"}})}),(0,_.jsx)(b.kC,{zIndex:0,width:"100%",justifyContent:"center",position:e?"absolute":"relative",children:(0,_.jsx)(j.Translation,(0,a.Z)({component:b.xv,textStyle:"ctaStatic","aria-selected":!0},o))}),n&&(0,_.jsx)(b.kC,{top:0,right:0,zIndex:1,position:"absolute",children:(0,_.jsx)(w.lTq,{size:24,onClick:function(){return n()},style:{cursor:"pointer"}})})]})},X=function(t){var e=t.goBack,n=(0,T.useRef)(null),a=(0,f.m)().searchParams,i=(0,p.Y)(),s=i.chainId,o=i.explorer,l=(0,T.useState)(0),c=(0,r.Z)(l,2),u=c[0],d=c[1],v=(0,T.useState)(1),x=(0,r.Z)(v,2),h=x[0],S=x[1],I=(0,A.useAssetProvider)(),k=I.underlyingAsset,E=I.theme,U=I.translate,P=I.asset,F=(0,T.useState)(null),z=(0,r.Z)(F,2),B=z[0],D=z[1],N=(0,T.useState)(null),O=(0,r.Z)(N,2),L=O[0],G=O[1],W=q(),V=W.amount,R=W.actionType,X=W.baseActionType,H=W.activeStep,K=W.activeItem,Q=(0,g.w)().selectors,$=Q.selectAssetById,J=Q.selectVaultById,tt=Q.selectVaultGauge,et=(0,y.R)(),nt=et.state.transaction,at=et.retry,it=et.cleanTransaction,st=(0,T.useMemo)((function(){return a}),[a]),ot=(0,r.Z)(st,2),rt=(ot[0],ot[1]),lt=(0,T.useMemo)((function(){return(null===P||void 0===P?void 0:P.id)&&J&&J(P.id)}),[J,null===P||void 0===P?void 0:P.id]),ct=(0,T.useMemo)((function(){return(null===P||void 0===P?void 0:P.id)&&tt&&tt(P.id)}),[tt,null===P||void 0===P?void 0:P.id]),ut=(0,T.useCallback)((function(t){if(t&&nt.status&&"pending"===nt.status){var e=Math.max(0,Math.ceil((t-Date.now())/1e3));(!B||e>B)&&D(e),e<=0||(n.current=setTimeout((function(){ut(t)}),1e3))}}),[B,nt]);(0,T.useEffect)((function(){nt.status&&["success","failed"].includes(nt.status)&&(n.current&&clearTimeout(n.current),D(0),n.current=null,d(h))}),[null===nt||void 0===nt?void 0:nt.status,d,h]),(0,T.useEffect)((function(){if(null!==nt&&void 0!==nt&&nt.estimatedTime&&null!==nt&&void 0!==nt&&nt.timestamp&&"pending"===(null===nt||void 0===nt?void 0:nt.status)&&!L){var t=1e3*(null===nt||void 0===nt?void 0:nt.estimatedTime),e=+(null===nt||void 0===nt?void 0:nt.timestamp)+1e3*(null===nt||void 0===nt?void 0:nt.estimatedTime);G(e),S(t),d(t),ut(e)}}),[nt,L,ut]);var dt=(0,T.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("pending"!==(null===nt||void 0===nt?void 0:nt.status))return it(),d(0),D(null),S(1),G(null),n.current&&clearTimeout(n.current),n.current=null,e(t)}),[null===nt||void 0===nt?void 0:nt.status,it,e]);(0,T.useEffect)((function(){null!==nt&&void 0!==nt&&nt.status||!K||dt(!1)}),[null===nt||void 0===nt?void 0:nt.status,K,dt]);var mt=(0,T.useMemo)((function(){return nt.actionType||R}),[R,nt.actionType]),vt=(0,T.useMemo)((function(){return nt.amount?(0,C.dm)(nt.amount,8):V===m.Uf?U("trade.unlimited"):(0,C.dm)(V,8)}),[V,U,nt.amount]),pt=(0,T.useMemo)((function(){if(!$)return null===k||void 0===k?void 0:k.name;var t=$(nt.assetId);return(null===t||void 0===t?void 0:t.name)||(null===k||void 0===k?void 0:k.name)}),[$,null===k||void 0===k?void 0:k.name,nt.assetId]),xt=(0,T.useMemo)((function(){var t,e,n,a;switch(null===nt||void 0===nt?void 0:nt.status){case"pending":return(0,_.jsx)(j.Translation,{component:b.xv,translation:0===B?"modals.status.body.long":"modals.".concat(mt,".status.pending"),textStyle:["heading","h3"],textAlign:"center"});case"success":return(0,_.jsxs)(b.gC,{spacing:2,children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"modals.".concat(mt,".status.success"),params:{asset:pt,amount:vt},textStyle:["heading","h3"],textAlign:"center"}),(null===lt||void 0===lt||null===(t=lt.messages)||void 0===t||null===(e=t.actions)||void 0===e?void 0:e[mt])&&(0,_.jsx)(j.Translation,{pb:2,translation:null===lt||void 0===lt||null===(n=lt.messages)||void 0===n||null===(a=n.actions)||void 0===a?void 0:a[mt],textStyle:"captionSmall",textAlign:"center"}),"deposit"===mt&&ct?(0,_.jsxs)(b.gC,{spacing:4,children:[(0,_.jsx)(j.Translation,{translation:"trade.depositGauge",textAlign:"center"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(mt,".status.success.buttonGauge"),onClick:function(){dt(),setTimeout((function(){return rt("?tab=gauge")}),1e3)},variant:"ctaFull"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(mt,".status.success.button"),onClick:function(){dt()},variant:"ctaPrimaryOutline",width:"100%"})]}):H?(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.".concat(X),onClick:function(){return dt(!0)},variant:"ctaFull"}):(0,_.jsx)(j.Translation,{component:Z.zx,translation:"trade.actions.".concat(mt,".status.success.button"),onClick:function(){return dt()},variant:"ctaFull"})]});case"failed":return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"modals.".concat(mt,".status.failed"),params:{asset:pt,amount:C.dm},textStyle:["heading","h3"],textAlign:"center"}),(0,_.jsx)(j.Translation,{component:b.xv,translation:"modals.status.body.failed",params:{asset:pt,amount:C.dm},textStyle:"captionSmall",textAlign:"center"}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.retry",leftIcon:(0,_.jsx)(w.Ffb,{size:24}),onClick:function(){at()},variant:"ctaFull"}),(0,_.jsx)(j.Translation,{component:b.xv,translation:"common.cancel",textStyle:["cta","link"],onClick:function(){return dt()}})]});default:return null}}),[null===nt||void 0===nt?void 0:nt.status,lt,mt,pt,vt,B,H,X,dt,at,rt,ct]),ft=(0,T.useMemo)((function(){return!(null===nt||void 0===nt||!nt.estimatedTime)&&"pending"===(null===nt||void 0===nt?void 0:nt.status)&&0===B}),[null===nt||void 0===nt?void 0:nt.estimatedTime,null===nt||void 0===nt?void 0:nt.status,B]),gt=(0,T.useMemo)((function(){return(null===nt||void 0===nt||!nt.status||!["success","failed"].includes(null===nt||void 0===nt?void 0:nt.status))&&(!(null!==nt&&void 0!==nt&&nt.estimatedTime)||ft)}),[nt,ft]),ht=(0,T.useMemo)((function(){return null===nt||void 0===nt||!nt.status||gt?"blue.400":["success","pending"].includes(null===nt||void 0===nt?void 0:nt.status)?"green.400":"red.400"}),[null===nt||void 0===nt?void 0:nt.status,gt]),yt=(0,T.useMemo)((function(){return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.xu,{height:5,children:(0,_.jsx)(j.Translation,{component:b.xv,translation:"pending"===(null===nt||void 0===nt?void 0:nt.status)?null!==nt&&void 0!==nt&&nt.estimatedTime?"modals.status.estimatedTime":"modals.status.calculateEstimatedTime":"",textStyle:"captionSmaller",textAlign:"center"})}),(0,_.jsx)(b.xu,{width:"125px",height:"125px",bg:"card.bgLight",borderRadius:"50%",position:"relative",children:(0,_.jsx)(M.D8,{size:145,top:"-10px",left:"-10px",thickness:"5px",position:"absolute",value:u,max:h,trackColor:"card.bgLight",color:ht,isIndeterminate:gt,sx:{".chakra-progress__indicator":{transitionTimingFunction:"ease",transitionProperty:"stroke-dasharray",transitionDuration:"pending"===(null===nt||void 0===nt?void 0:nt.status)&&null!==nt&&void 0!==nt&&nt.estimatedTime?"".concat(null===nt||void 0===nt?void 0:nt.estimatedTime,"s"):"0.6s"}},children:"pending"===(null===nt||void 0===nt?void 0:nt.status)?!!B&&(0,_.jsx)(M.ip,{textStyle:["bold","h2"],children:B>3600?">1h":B>1800?">30m":"".concat(B,"s")}):"success"===(null===nt||void 0===nt?void 0:nt.status)?(0,_.jsx)(M.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,_.jsx)(w.ddU,{size:50,color:E.colors.green[400]})}):"failed"===(null===nt||void 0===nt?void 0:nt.status)&&(0,_.jsx)(M.ip,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,_.jsx)(w.lTq,{size:50,color:E.colors.red[400]})})})})]})}),[null===nt||void 0===nt?void 0:nt.status,null===nt||void 0===nt?void 0:nt.estimatedTime,gt,ht,h,B,u,E]),jt=(0,T.useMemo)((function(){var t="pending"!==(null===nt||void 0===nt?void 0:nt.status)&&dt;return(0,_.jsx)(Y,{goBack:t?function(){return t()}:void 0,translation:"modals.status.header.".concat(null===nt||void 0===nt?void 0:nt.status)})}),[null===nt||void 0===nt?void 0:nt.status,dt]);return(0,_.jsxs)(_.Fragment,{children:[jt,(0,_.jsx)(b.kC,{p:14,flex:1,width:"100%",children:(0,_.jsxs)(b.gC,{spacing:4,children:[yt,xt]})}),(null===nt||void 0===nt?void 0:nt.hash)&&(0,_.jsx)(b.Ug,{spacing:1,width:"100%",justifyContent:"center",children:(0,_.jsx)(j.Translation,{component:b.rU,translation:"defi.viewOnChain",textStyle:"link",fontSize:"sm",fontWeight:700,isExternal:!0,href:(0,C.QG)(s,o,nt.hash)})})]})},H=function(t){var e=t.save,n=(0,y.R)(),a=n.state,i=a.estimatedFeesUsd,s=a.estimatedTimes,o=a.gasPrices,r=a.transactionSpeed,l=n.setTransactionSpeed;return(0,_.jsxs)(b.gC,{p:4,flex:1,width:"100%",justifyContent:"space-between",children:[(0,_.jsx)(Y,{height:"auto",mb:10,translation:"common.transactionSpeed"}),(0,_.jsx)(b.gC,{p:0,flex:1,spacing:2,width:"100%",justifyContent:"flex-start",children:Object.keys(c.U_).map((function(t){var e=c.U_[t],n=r===e;return(0,_.jsx)(v.Card.Outline,{px:4,py:4,style:{cursor:"pointer"},width:"100%","aria-selected":n,layerStyle:["cardInteractive"],bg:n?"card.bgLight":"transparent",onClick:function(){return l(e)},children:(0,_.jsxs)(b.Ug,{spacing:4,width:"100%",alignItems:"center",children:[(0,_.jsxs)(b.Ug,{spacing:2,width:"40%",alignItems:"center",children:[(0,_.jsx)(U.Y8,{colorScheme:"blue",isChecked:n}),(0,_.jsxs)(b.Ug,{flex:1,spacing:1,alignItems:"center",children:[(0,_.jsx)(j.Translation,{component:b.xv,whiteSpace:"nowrap",textStyle:["tableCell","primary"],translation:"modals.send.sendForm.".concat(e)}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!o,width:"100%",children:(0,_.jsx)(u.Amount,{prefix:"(",suffix:")",decimals:0,textStyle:["captionSmaller"],fontWeight:"600",color:"primary",value:null===o||void 0===o?void 0:o[e]})})]})]}),(0,_.jsxs)(b.gC,{spacing:2,width:"25%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,_.jsx)(j.Translation,{component:b.xv,textStyle:"captionSmall",translation:"common.gasFee"}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!i,width:"100%",children:(0,_.jsx)(u.Amount.Usd,{textStyle:["captionSmaller"],fontWeight:"600",color:"primary",prefix:m.EI,value:null===i||void 0===i?void 0:i[e]})})]}),(0,_.jsxs)(b.gC,{spacing:2,width:"35%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,_.jsx)(j.Translation,{component:b.xv,textStyle:"captionSmall",translation:"modals.status.estimatedTime"}),(0,_.jsx)(P.N2,{noOfLines:1,isLoaded:!!s,width:"100%",children:(0,_.jsx)(b.xv,{textStyle:["captionSmaller"],fontWeight:"600",color:"primary",children:(0,C.mr)(null===s||void 0===s?void 0:s[e])})})]})]})},"transactionSpeed_".concat(e))}))}),(0,_.jsx)(j.Translation,{component:Z.zx,translation:"common.close",onClick:function(){return e()},variant:"ctaFull"})]})},K={amount:"",asset:null,activeStep:0,activeItem:0,actionType:"",defaultAmount:"",baseActionType:"",dispatch:function(){},executeAction:!1},Q=function(t,e){switch(e.type){case"SET_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{amount:e.payload});case"SET_ASSET":return(0,a.Z)((0,a.Z)({},t),{},{asset:e.payload});case"SET_EXECUTE_ACTION":return(0,a.Z)((0,a.Z)({},t),{},{executeAction:e.payload});case"SET_DEFAULT_AMOUNT":return(0,a.Z)((0,a.Z)({},t),{},{defaultAmount:e.payload});case"SET_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{actionType:e.payload});case"SET_BASE_ACTION_TYPE":return(0,a.Z)((0,a.Z)({},t),{},{baseActionType:e.payload});case"SET_ACTIVE_STEP":return(0,a.Z)((0,a.Z)({},t),{},{activeStep:e.payload});default:return(0,a.Z)({},t)}},$=(0,T.createContext)(K),q=function(){return(0,T.useContext)($)},J=function(t){var e=t.assetId,n=t.actions,s=(0,i.Z)(t,D),o=(0,T.useRef)(null),l=(0,T.useState)(0),c=(0,r.Z)(l,2),d=c[0],p=c[1],x=(0,T.useState)(0),f=(0,r.Z)(x,2),S=f[0],C=f[1],I=(0,T.useReducer)(Q,K),k=(0,r.Z)(I,2),E=k[0],M=k[1],U=(0,T.useState)(!1),P=(0,r.Z)(U,2),z=P[0],B=P[1],N=(0,A.useAssetProvider)(),O=(N.underlyingAsset,N.translate),L=(0,g.w)().selectors.selectAssetById,G=(0,y.R)(),W=G.state,V=W.gasPrice,R=W.transaction,q=G.retry,J=G.cleanTransaction,tt=G.updateGasPrices,et=(0,T.useMemo)((function(){return n[S]}),[n,S]),nt=(0,T.useMemo)((function(){return E.activeStep?et.steps[E.activeStep-1]:et}),[et,E.activeStep]),at=(0,T.useMemo)((function(){return n[S].component}),[n,S]);(0,T.useEffect)((function(){p(E.activeStep)}),[E.activeStep]),(0,T.useEffect)((function(){return o.current&&(clearInterval(o.current),o.current=null),o.current=setInterval((function(){tt()}),2e4),function(){o.current&&(clearInterval(o.current),o.current=null)}}),[tt]),(0,T.useEffect)((function(){var t=nt?nt.type:et.type;M({type:"SET_ACTION_TYPE",payload:t}),M({type:"SET_BASE_ACTION_TYPE",payload:et.type})}),[et,nt]);var it=(0,T.useMemo)((function(){return R.actionType||E.actionType}),[E.actionType,R.actionType]),st=(0,T.useMemo)((function(){return R.amount?R.amount:E.amount===m.Uf?O("trade.unlimited"):parseFloat(E.amount)}),[E.amount,O,R.amount]),ot=(0,T.useMemo)((function(){var t,e;if(!L)return null===(t=E.asset)||void 0===t?void 0:t.name;var n=L(R.assetId);return(null===n||void 0===n?void 0:n.name)||(null===(e=E.asset)||void 0===e?void 0:e.name)}),[L,E.asset,R.assetId]);(0,T.useEffect)((function(){var t,e=et.steps.length+1;switch(null===R||void 0===R?void 0:R.status){case"created":return p(e);case"pending":return p(e+1);case"failed":return 4001===(null===(t=R.error)||void 0===t?void 0:t.code)?(J(),p(E.activeStep)):p(e+1);case"success":p(e+1),E.activeStep&&M({type:"SET_EXECUTE_ACTION",payload:!0})}}),[R,J,et,E.activeStep]);var rt=(0,T.useMemo)((function(){return d>et.steps.length?null:z?(0,_.jsx)(b.kC,{top:5,right:8,zIndex:11,position:"absolute",children:(0,_.jsx)(w.lTq,{size:24,style:{cursor:"pointer"},onClick:function(){return B((function(t){return!t}))}})}):(0,_.jsx)(Z.zx,{p:2,right:4,zIndex:11,borderRadius:8,variant:"ctaBlue",position:"absolute",onClick:function(){return B((function(t){return!t}))},children:(0,_.jsxs)(b.Ug,{spacing:1,children:[(0,_.jsx)(w.Qpb,{color:"primary",size:24}),(0,_.jsx)(u.Amount,{abbreviate:!1,textStyle:"titleSmall",color:"primary",value:V})]})})}),[et,d,V,z,B]),lt=(0,T.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?M({type:"SET_ACTIVE_STEP",payload:0}):p(E.activeStep)}),[M,p,E.activeStep]);return(0,_.jsx)(A.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,_.jsx)($.Provider,{value:(0,a.Z)((0,a.Z)({},E),{},{activeItem:d,dispatch:M}),children:(0,_.jsxs)(v.Card.Flex,(0,a.Z)((0,a.Z)({p:4,width:"100%",overflow:"hidden",minHeight:"590px",direction:"column",position:"relative",alignItems:"flex-start",id:"operative-component"},s),{},{children:[rt,z&&(0,_.jsx)(b.gC,{top:0,left:0,flex:1,zIndex:10,bg:"card.bg",width:"100%",height:"100%",position:"absolute",id:"transaction-speed-selector",children:(0,_.jsx)(H,{save:function(){return B(!1)}})}),(0,_.jsxs)(h.ChakraCarousel,{gap:0,activeItem:d,children:[(0,_.jsxs)(b.kC,{flex:1,width:"100%",direction:"column",alignItems:"flex-start",children:[(0,_.jsx)(b.Ug,{alignItems:"center",justifyContent:"space-between",id:"operative-component-header",children:(0,_.jsx)(F.mQ,{defaultIndex:0,variant:"button",onChange:function(t){C(t)},children:(0,_.jsx)(F.td,{children:n.map((function(t,e){return(0,_.jsx)(j.Translation,{mr:2,component:F.OK,translation:t.label},"action_".concat(e))}))})})}),(0,_.jsx)(b.kC,{flex:1,width:"100%",children:!!at&&(0,_.jsx)(at,{itemIndex:0})})]}),n[S].steps.map((function(t,e){var n=t.component;return(0,_.jsx)(n,{itemIndex:e+1,goBack:function(){return M({type:"SET_ACTIVE_STEP",payload:e})}},"step_".concat(e))})),(0,_.jsxs)(b.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:[(0,_.jsx)(Y,{goBack:function(){return p(E.activeStep)},translation:"modals.confirm.".concat(it,".header")}),(0,_.jsx)(b.M5,{p:14,flex:1,width:"100%",children:(0,_.jsxs)(b.gC,{spacing:6,children:[(0,_.jsx)(w.lTP,{size:72}),(0,_.jsx)(j.Translation,{component:b.xv,translation:"trade.confirmTransactionWallet",textStyle:["heading","h3"],textAlign:"center"}),(0,_.jsxs)(b.gC,{spacing:1,children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"modals.".concat(it,".status.confirm"),params:{},textStyle:"captionSmall",textAlign:"center"}),(0,_.jsx)(b.Ug,{children:(0,_.jsx)(u.Amount,{textStyle:"bold",value:st,minPrecision:parseFloat(st)<1?5:3,suffix:" ".concat(ot)})})]})]})}),(0,_.jsxs)(b.Ug,{spacing:1,width:"100%",justifyContent:"center",children:[(0,_.jsx)(j.Translation,{component:b.xv,translation:"trade.transactionDontAppear",textStyle:"captionSmall"}),(0,_.jsx)(j.Translation,{component:b.xv,translation:"common.retry",textStyle:["captionSmall","link","bold"],onClick:function(){return q()}})]})]}),(0,_.jsx)(b.gC,{flex:1,spacing:0,alignItems:"flex-start",id:"transaction-status",children:(0,_.jsx)(X,{goBack:lt})})]})]}))})})}}}]);
//# sourceMappingURL=1010.6897a4e6.chunk.js.map