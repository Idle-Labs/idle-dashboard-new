"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[8415,9020,3148,1617,1128,2734,6362,6624,8951,7041,907,8194,745,7577,1608,8024],{99020:function(t,e,n){n.r(e),n.d(e,{AnnouncementBanner:function(){return d}});var a=n(7276),i=n(54447),s=n(96699),r=n(3498),o=n(55967),l=n(15542),c=n(45263),d=function(t){var e=t.text,n=t.mode,d=void 0===n?"none":n,u=(0,s.Fg)(),m=(0,a.useMemo)((function(){return"success"===d?u.colors.darkGreen:"alert"===d?u.colors.yellow:""}),[u,d]);return(0,c.jsx)(i.Card.Dark,{p:[3,5],borderColor:m,children:(0,c.jsxs)(r.Kq,{width:"full",spacing:[2,3],alignItems:"center",justifyContent:"center",direction:["column","row"],children:["success"===d?(0,c.jsx)(o.ZSR,{size:24,color:m}):"alert"===d&&(0,c.jsx)(o.YTL,{size:24,color:m}),(0,c.jsx)(l.Translation,{textAlign:"center",translation:e,isHtml:!0,textStyle:"caption"})]})})}},3148:function(t,e,n){n.r(e),n.d(e,{AssetGeneralData:function(){return j},AssetGeneralDataField:function(){return h}});var a=n(1413),i=n(7276),s=n(55967),r=n(54447),o=n(79681),l=n(15542),c=n(1669),d=n(12056),u=n(75712),m=n(6940),p=n(96699),x=n(3498),f=n(70820),v=n(45263),g=function(t){var e=t.generalData,n=(0,p.Fg)(),a=(0,o.qM)();return e.tooltip?(0,v.jsxs)(x.Ug,{spacing:1,alignItems:"center",children:[(0,v.jsx)(l.Translation,{component:x.xv,translation:e.label,textStyle:"captionSmall"}),(0,v.jsx)(f.u,{hasArrow:!0,placement:"top",label:a(e.tooltip),children:(0,v.jsx)(m.TooltipContent,{children:(0,v.jsx)(s.I5p,{color:n.colors.cta,size:16})})})]}):(0,v.jsx)(l.Translation,{component:x.xv,translation:e.label,textStyle:"captionSmall"})},h=function(t){var e=t.generalData;return(0,v.jsxs)(x.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsxs)(x.Ug,{width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(g,{generalData:e}),e.inlineField&&(0,v.jsx)(u.AssetProvider.GeneralData,{section:"asset",field:e.inlineField})]}),(0,v.jsx)(u.AssetProvider.GeneralData,(0,a.Z)({section:"asset",field:e.field},e.props))]})},j=function(t){var e=t.assetId,n=(0,c.w)().selectors.selectAssetById,a=(0,i.useMemo)((function(){return n&&n(e)}),[n,e]),s=(0,i.useMemo)((function(){return(null===a||void 0===a?void 0:a.type)&&d.A[a.type]}),[a]);return(0,v.jsx)(u.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,v.jsxs)(r.Card.Dark,{children:[(0,v.jsx)(x.MI,{spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],children:(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.slice(0,5).map((function(t){return(0,v.jsx)(h,{generalData:t},"field_".concat(t.field))})))}),(null===s||void 0===s?void 0:s.generalDataFields)&&(null===s||void 0===s?void 0:s.generalDataFields.length)>5&&(0,v.jsx)(x.MI,{pt:6,mt:6,spacing:[6,0],columns:[2,Math.min(null===s||void 0===s?void 0:s.generalDataFields.length,5)],borderTop:"1px solid",borderTopColor:"divider",children:null===s||void 0===s?void 0:s.generalDataFields.slice(5).map((function(t){return(0,v.jsx)(h,{generalData:t},"field_".concat(t.field))}))})]})})}},61617:function(t,e,n){n.r(e),n.d(e,{AssetLabel:function(){return c}});var a=n(1413),i=n(45987),s=n(3498),r=n(75712),o=n(45263),l=["assetId","size","spacing","extraFields"],c=function(t){var e=t.assetId,n=t.size,c=void 0===n?"sm":n,d=t.spacing,u=t.extraFields,m=(0,i.Z)(t,l);return(0,o.jsx)(r.AssetProvider,{wrapFlex:!1,assetId:e,children:(0,o.jsxs)(s.Ug,{spacing:d,alignItems:"center",justifyContent:"flex-start",children:[(0,o.jsx)(r.AssetProvider.Icon,{size:c}),(0,o.jsx)(r.AssetProvider.Name,(0,a.Z)({textStyle:"heading",fontSize:["15px","h3"],whiteSpace:"nowrap"},m)),null===u||void 0===u?void 0:u.map((function(t){return(0,o.jsx)(r.AssetProvider.GeneralData,{field:t},"extraField_".concat(t))}))]})})}},1128:function(t,e,n){n.r(e),n.d(e,{InputAmount:function(){return u}});var a=n(7276),i=n(99594),s=n(3498),r=n(3497),o=n(86059),l=n(1669),c=n(75712),d=n(45263),u=function(t){var e=t.inputHeight,n=t.amount,u=t.amountUsd,m=t.setAmount,p=t.isDisabled,x=void 0!==p&&p,f=(0,c.useAssetProvider)(),v=f.asset,g=f.underlyingAsset,h=(0,l.w)().selectors,j=h.selectAssetPriceUsd,y=h.selectVaultPrice,b=(0,a.useMemo)((function(){if(u)return(0,i.gA)(u);if(j&&y&&g&&v){var t=j(g.id),e=y(v.id);return"underlying"===v.type?parseFloat((0,i.gA)(n).times(t).toString())||0:parseFloat((0,i.gA)(n).times(t).times(e).toString())||0}}),[v,g,n,u,y,j]);return(0,d.jsxs)(s.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(r.II,{height:e,flex:1,type:"number",placeholder:"0",variant:"balance",value:(0,i.gA)(n).toString(),onChange:function(t){var e=t.target.value;m(Math.max(0,parseFloat(e)).toString())},disabled:x}),null!==u&&(0,d.jsx)(o.Amount.Usd,{abbreviateThresold:1e4,textStyle:"captionSmall",color:"brightGreen",prefix:"\u2248 $",value:(0,i.d5)(b).toString()})]})}},52734:function(t,e,n){n.r(e),n.d(e,{InputDate:function(){return d}});var a=n(1413),i=n(45987),s=(n(7276),n(99594)),r=n(3498),o=n(3497),l=n(45263),c=["inputHeight","value","setValue"],d=function(t){var e=t.inputHeight,n=t.value,d=t.setValue,u=(0,i.Z)(t,c);return(0,l.jsx)(r.Ug,{width:"100%",justifyContent:"space-between",children:(0,l.jsx)(o.II,(0,a.Z)({type:"date",height:e,flex:1,placeholder:"",variant:"balance",value:n||"",onChange:function(t){var e=t.target.value,n=(0,s.qF)(e).isValid()?(0,s.qF)(e):null;d(n)}},u))})}},37658:function(t,e,n){n.r(e),n.d(e,{InteractiveComponent:function(){return p}});var a=n(29439),i=n(7276),s=n(55967),r=n(66288),o=n(15542),l=n(3498),c=n(43127),d=n(18147),u=n(4710),m=n(45263),p=function(t){var e=t.assetId,n=t.vaultId,p=t.actions,x=(0,r.X)().isMobile,f=(0,i.useState)(!1),v=(0,a.Z)(f,2),g=v[0],h=v[1],j=(0,i.useState)(!1),y=(0,a.Z)(j,2),b=y[0],k=y[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.gC,{left:0,zIndex:[40,0],spacing:[0,6],id:"right-side",width:["100vw","27em"],height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],bg:x?"rgba(0, 0, 0, 0.5)":void 0,sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[(0,m.jsxs)(l.gC,{bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[g?0:"100vh",0],sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[x&&(0,m.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,m.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.exit",component:c.zx,leftIcon:(0,m.jsx)(s.sG8,{size:24}),onClick:function(){return h(!1)}}),(0,m.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:["common.show","navBar.transactions"],component:c.zx,onClick:function(){return k(!0)}})]}),(0,m.jsx)(u.OperativeComponent,{flex:1,minHeight:x?"auto":"590px",borderRadius:x?0:void 0,assetId:e,actions:p})]}),(0,m.jsxs)(l.gC,{flex:1,bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[b?0:"100vh",0],sx:x?{transition:"top 0.3s ease-in-out"}:{},children:[x&&(0,m.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,m.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.back",component:c.zx,leftIcon:(0,m.jsx)(s.sG8,{size:24}),onClick:function(){return k(!1)}}),(0,m.jsx)(o.Translation,{textStyle:"ctaStatic",translation:"assets.assetDetails.assetHistory.transactionHistory",component:l.xv})]}),(0,m.jsx)(d.TransactionList,{assetIds:[n],fullHeightOnMobile:!0,maxH:["100%",600]})]})]}),x&&(0,m.jsx)(l.kC,{p:4,left:0,bottom:0,border:0,width:"100%",zIndex:[10,0],bg:"card.bgDark",position:"fixed",children:(0,m.jsx)(o.Translation,{component:c.zx,translation:["common.start","common.deposit"],variant:"ctaFull",onClick:function(){return h(!0)}})})]})}},96362:function(t,e,n){n.r(e),n.d(e,{Approve:function(){return S}});var a=n(74165),i=n(15861),s=n(29439),r=n(54447),o=n(99594),l=n(87099),c=n(55967),d=n(47174),u=n(72230),m=n(7276),p=n(15542),x=n(1128),f=n(23023),v=n(3498),g=n(65984),h=n(43127),j=n(78951),y=n(4710),b=n(75712),k=n(45263),S=function(t){var e=t.amountUsd,n=t.goBack,S=t.itemIndex,w=(0,d.Y)().account,C=(0,y.useOperativeComponent)(),M=C.defaultAmount,A=C.dispatch,I=C.activeItem,T=(0,m.useState)(M),Z=(0,s.Z)(T,2),D=Z[0],E=Z[1],P=(0,b.useAssetProvider)(),F=P.underlyingAsset,z=P.vault,U=P.translate,Y=P.theme,B=(0,m.useState)(!1),L=(0,s.Z)(B,2),_=L[0],R=L[1],O=(0,m.useState)(M),H=(0,s.Z)(O,2),G=H[0],N=H[1],W=(0,f.R)(),q=W.sendTransaction,V=W.setGasLimit;(0,m.useEffect)((function(){E(M)}),[M]);var $=(0,m.useCallback)((0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z&&"getAllowanceContractSendMethod"in z&&"getAllowanceParams"in z){t.next=2;break}return t.abrupt("return");case 2:if(e={from:null===w||void 0===w?void 0:w.address},n=z.getAllowanceParams(l.Uf),i=z.getAllowanceContractSendMethod(n)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,o.$K)(i,e);case 9:return s=t.sent,t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)}))),[w,z]),K=(0,m.useCallback)((function(){if(z&&"getAllowanceContractSendMethod"in z&&"getAllowanceParams"in z){var t=z.getAllowanceParams(G),e=z.getAllowanceContractSendMethod(t);e&&q(z.id,null===F||void 0===F?void 0:F.id,e)}}),[G,z,F,q]);return(0,m.useEffect)((function(){var t=_?D:l.Uf;N(t),I===S&&A({type:"SET_AMOUNT",payload:t})}),[_,D,A,I,S]),(0,m.useEffect)((function(){I===S&&(0,i.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:e=t.sent,V(e);case 4:case"end":return t.stop()}}),t)})))()}),[I,S,$,V]),(0,k.jsxs)(v.gC,{flex:1,width:"100%",alignItems:"flex-start",children:[(0,k.jsx)(u.NavBar,{goBack:n,translation:"modals.approve.header",params:{asset:null===F||void 0===F?void 0:F.name}}),(0,k.jsx)(v.kC,{p:14,pt:20,flex:1,children:(0,k.jsxs)(v.gC,{spacing:6,children:[(0,k.jsx)(c.PG4,{size:72}),(0,k.jsx)(p.Translation,{component:v.xv,prefix:"".concat(U("modals.approve.routerName")," "),translation:"modals.approve.body",params:{asset:null===F||void 0===F?void 0:F.name},textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,k.jsxs)(v.gC,{width:"100%",spacing:6,children:[(0,k.jsxs)(v.Ug,{py:2,width:"100%",justifyContent:"space-between",borderTop:"1px solid ".concat(Y.colors.divider),borderBottom:"1px solid ".concat(Y.colors.divider),children:[(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.allowance",textStyle:"captionSmall"}),(0,k.jsxs)(v.Ug,{spacing:1,children:[(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.unlimited",textStyle:["captionSmall","clickable"],fontWeight:700,color:_?"ctaDisabled":"primary",onClick:function(){return R(!1)}}),(0,k.jsx)(g.r,{size:"sm",isChecked:_,onChange:function(t){return R(t.target.checked)}}),(0,k.jsx)(p.Translation,{component:v.xv,translation:"trade.exact",textStyle:["captionSmall","clickable"],fontWeight:700,color:_?"primary":"ctaDisabled",onClick:function(){return R(!0)}})]})]}),_&&(0,k.jsxs)(v.Ug,{children:[(0,k.jsx)(b.AssetProvider.Icon,{size:"sm"}),(0,k.jsx)(r.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,k.jsx)(x.InputAmount,{inputHeight:6,amount:D,amountUsd:e,setAmount:E})})]})]}),(0,k.jsx)(p.Translation,{component:h.zx,translation:"common.approve",onClick:K,variant:"ctaFull"})]})}),(0,k.jsx)(j.EstimatedGasFees,{})]})}},66624:function(t,e,n){n.r(e),n.d(e,{DynamicActionFields:function(){return g}});var a=n(1413),i=n(45987),s=n(5128),r=n(7276),o=n(12056),l=n(86059),c=n(60062),d=n(99594),u=n(15542),m=n(1669),p=n(3498),x=n(45263),f=["assetId","field","amount","amountUsd","stakingPower"],v=function(t){var e,n,o=t.assetId,v=t.field,g=t.amount,h=t.amountUsd,j=t.stakingPower,y=(0,i.Z)(t,f),b=(0,m.w)(),k=b.stakingData,S=b.helpers.vaultFunctionsHelper,w=b.selectors,C=w.selectAssetById,M=w.selectVaultById,A=w.selectVaultGauge,I=(0,r.useMemo)((function(){return o&&C&&C(o)}),[o,C]),T=(0,r.useMemo)((function(){return o&&M&&M(o)}),[o,M]),Z=(0,r.useMemo)((function(){return o&&A&&A(o)}),[o,A]),D=(0,r.useMemo)((function(){return Z&&C&&C(Z.id)}),[Z,C]),E=(0,r.useMemo)((function(){return(0,d.gA)(I.tvl).plus((0,d.d5)(g))}),[I,g]),P=(0,r.useMemo)((function(){return null===S||void 0===S?void 0:S.getVaultNewApr(I,T,(0,d.gA)(g))}),[I,T,g,S]),F=(0,r.useMemo)((function(){if((0,d.d5)(P).gt(0)){var t=(0,d.Bs)((0,d.d5)(P).div(100)).times(100),e=I.apyBreakdown?Object.keys(I.apyBreakdown||{}).filter((function(t){return"base"!==t})).reduce((function(t,e){switch(e){case"gauge":var n=null===D||void 0===D?void 0:D.gaugeData;if(n){var a=(0,d.d5)(null===n||void 0===n?void 0:n.totalSupply).plus((0,d.d5)(g)),i=(0,d.d5)(null===n||void 0===n?void 0:n.totalSupply).div(a),s=I.apyBreakdown[e].times(i);return t.plus(s)}return t.plus(I.apyBreakdown[e]);case"harvest":var r=(0,d.gA)(I.tvl).div(E),o=I.apyBreakdown[e].times(r);return t.plus(o);default:return t.plus(I.apyBreakdown[e])}}),(0,d.gA)(0)):(0,d.gA)(0);return(0,d.gA)(t).plus(e)}return(0,d.d5)(null===I||void 0===I?void 0:I.apy)}),[I,g,E,D,P]),z=(0,r.useMemo)((function(){return(0,d.d5)(h).gt(0)}),[h]),U=(0,r.useMemo)((function(){var t;return(0,d.d5)(null===I||void 0===I||null===(t=I.vaultPosition)||void 0===t?void 0:t.underlying.redeemable)}),[I]),Y=(0,r.useMemo)((function(){var t;return(0,d.d5)(null===I||void 0===I||null===(t=I.vaultPosition)||void 0===t?void 0:t.usd.redeemable)}),[I]),B=(0,r.useMemo)((function(){var t,e;return"flags"in T&&(0,d.d5)(null===(t=T.flags)||void 0===t?void 0:t.withdrawFee).gt(0)?Y.times(null===(e=T.flags)||void 0===e?void 0:e.withdrawFee):(0,d.gA)(0)}),[T,Y]),L=(0,r.useMemo)((function(){var t;return s.Z.maximum(0,(0,d.d5)(null===I||void 0===I||null===(t=I.vaultPosition)||void 0===t?void 0:t.usd.earnings).minus(B))}),[B,I]),_=(0,r.useMemo)((function(){return s.Z.minimum(1,(0,d.d5)(h).div(Y))}),[h,Y]),R=(0,r.useMemo)((function(){return s.Z.minimum(L,_.times(L))}),[L,_]),O=(0,r.useMemo)((function(){var t;return s.Z.maximum(0,(0,d.d5)(null===I||void 0===I||null===(t=I.vaultPosition)||void 0===t?void 0:t.usd.earnings).times(null===I||void 0===I?void 0:I.fee))}),[I]),H=(0,r.useMemo)((function(){return s.Z.minimum(O,(0,d.d5)(R).times(null===I||void 0===I?void 0:I.fee))}),[O,R,I]);T instanceof c.C&&(L=L.plus(H),R=R.plus(H));var G=z&&(0,d.d5)(g).lte(U),N="cta",W=null;switch(v){case"boost":var q=F&&null!==I&&void 0!==I&&null!==(e=I.baseApr)&&void 0!==e&&e.gt(0)?F.div(null===I||void 0===I?void 0:I.baseApr):(0,d.gA)(0);W=(0,x.jsxs)(p.xv,(0,a.Z)((0,a.Z)({},y),{},{textStyle:"titleSmall",color:"primary",children:[q.toFixed(2),"x"]}));break;case"overperformance":var V=(0,d.d5)(h).times((0,d.gA)(null===I||void 0===I?void 0:I.baseApr).div(100)),$=(0,d.d5)(h).times((0,d.gA)(null===I||void 0===I?void 0:I.apy).div(100)),K=z?$.minus(V):null;W=(0,x.jsx)(l.Amount.Usd,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:K,suffix:"/year"}));break;case"newApy":W=(0,x.jsx)(l.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:F}));break;case"totalGain":W=(0,x.jsx)(l.Amount.Usd,(0,a.Z)((0,a.Z)({decimals:R.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?R:null}));break;case"fee":W=(0,x.jsx)(l.Amount.Usd,(0,a.Z)((0,a.Z)({decimals:H.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?-H:null}));break;case"withdrawFee":(0,d.d5)(null===(n=T.flags)||void 0===n?void 0:n.withdrawFee).gt(0)&&(N="orange",W=(0,x.jsx)(l.Amount.Usd,(0,a.Z)((0,a.Z)({decimals:B.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},y),{},{value:G?-B:null})));break;case"netGain":var X=s.Z.minimum(L.minus(H),(0,d.d5)(R).minus(H));W=(0,x.jsx)(l.Amount.Usd,(0,a.Z)((0,a.Z)({decimals:X.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},y),{},{value:G?X:null}));break;case"coverage":var Q=C(null===T||void 0===T?void 0:T.vaultConfig.Tranches.BB.address),J=Q.tvl&&E?Q.tvl.div(E).times(100):0;W=(0,x.jsx)(l.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:J}));break;case"stakingPoolShare":if(k){var tt=(0,d.d5)(g).div(k.stkIDLE.totalSupply.plus((0,d.d5)(g))).times(100);W=(0,x.jsx)(l.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:tt}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":W=(0,x.jsx)(l.Amount,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},y),{},{value:g}));break;case"stakingApy":if(k){var et=(0,d.d5)(j).times(k.maxApr);W=(0,x.jsx)(l.Amount.Percentage,(0,a.Z)((0,a.Z)({textStyle:"titleSmall",color:"primary"},y),{},{value:et}))}break;default:return null}return W?(0,x.jsxs)(p.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,x.jsx)(u.Translation,{component:p.xv,translation:"dynamicActionFields.".concat(v),textStyle:"captionSmall",color:N}),W]}):null},g=function(t){var e=(0,m.w)().selectors.selectVaultById,n=t.assetId,i=t.action,s=(0,r.useMemo)((function(){return n&&e&&e(n)}),[n,e]),l=(0,r.useMemo)((function(){return(null===s||void 0===s?void 0:s.type)&&o.A[s.type]}),[s]),c=(0,r.useMemo)((function(){var t;return null!==l&&void 0!==l&&null!==(t=l.dynamicActionFields)&&void 0!==t&&t[i]?null===l||void 0===l?void 0:l.dynamicActionFields[i]:null}),[i,l]);return c?(0,x.jsx)(p.gC,{spacing:2,width:"100%",children:c.map((function(e){return(0,x.jsx)(v,(0,a.Z)((0,a.Z)({},t),{},{field:e}),"field_".concat(e))}))}):null}},78951:function(t,e,n){n.r(e),n.d(e,{EstimatedGasFees:function(){return p}});var a=n(7276),i=n(87099),s=n(86059),r=n(96699),o=n(3498),l=n(55967),c=n(47174),d=n(15542),u=n(23023),m=n(45263),p=function(){var t=(0,r.Fg)(),e=(0,c.Y)().chainToken,n=(0,u.R)().state,p=n.transactionSpeed,x=n.estimatedFees,f=n.estimatedFeesUsd,v=(0,a.useMemo)((function(){return x?x[p]:null}),[x,p]),g=(0,a.useMemo)((function(){return f?f[p]:null}),[f,p]);return(0,m.jsxs)(o.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,m.jsx)(l.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,m.jsx)(d.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,m.jsx)(s.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:i.EI,value:g}),g&&(0,m.jsx)(s.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===e||void 0===e?void 0:e.symbol,")"),value:v,decimals:4})]})}},67041:function(t,e,n){n.r(e),n.d(e,{Stake:function(){return E}});var a=n(93433),i=n(74165),s=n(15861),r=n(29439),o=n(5128),l=n(54447),c=n(55967),d=n(13708),u=n(13461),m=n(33482),p=n(52734),x=n(47174),f=n(61617),v=n(15542),g=n(1128),h=n(1669),j=n(7276),y=n(23023),b=n(4710),k=n(78951),S=n(66624),w=n(86393),C=n(75712),M=n(87099),A=n(43127),I=n(3498),T=n(88089),Z=n(99594),D=n(45263),E=function(t){var e=t.itemIndex,n=(0,j.useState)(""),E=(0,r.Z)(n,2),P=E[0],F=E[1],z=(0,j.useState)("0"),U=(0,r.Z)(z,2),Y=U[0],B=U[1],L=(0,j.useState)(""),_=(0,r.Z)(L,2),R=_[0],O=_[1],H=(0,j.useState)(0),G=(0,r.Z)(H,2),N=G[0],W=G[1],q=(0,j.useState)(null),V=(0,r.Z)(q,2),$=V[0],K=V[1],X=(0,u.x)().web3,Q=(0,x.Y)().account,J=(0,C.useAssetProvider)(),tt=J.asset,et=J.vault,nt=J.underlyingAsset,at=J.translate,it=(0,y.R)(),st=it.sendTransaction,rt=it.setGasLimit,ot=it.state,lt=ot.transaction,ct=ot.block,dt=(0,b.useOperativeComponent)(),ut=dt.dispatch,mt=dt.activeItem,pt=dt.activeStep,xt=dt.executeAction,ft=dt.setActionIndex,vt=(0,h.w)(),gt=vt.stakingData,ht=vt.selectors,jt=ht.selectAssetBalance,yt=ht.selectAssetPriceUsd,bt=(0,j.useMemo)((function(){return jt?jt(null===nt||void 0===nt?void 0:nt.id):(0,Z.gA)(0)}),[jt,null===nt||void 0===nt?void 0:nt.id]),kt=(0,j.useMemo)((function(){if(yt&&nt){var t=yt(nt.id);return(0,Z.d5)(Y).times(t)}}),[nt,Y,yt]),St=(0,j.useMemo)((function(){return[{type:"amount",action:"increaseAmount",label:"staking.increaseAmount"},{type:"time",action:"increaseTime",label:"staking.increaseTime"}]}),[]),wt=(0,j.useMemo)((function(){var t,e;return!(null===gt||void 0===gt||null===(t=gt.position)||void 0===t||!t.lockEnd||!ct)&&(0,Z.qF)(null===gt||void 0===gt||null===(e=gt.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,Z.qF)(1e3*ct.timestamp))}),[gt,ct]),Ct=(0,j.useMemo)((function(){var t;return null===gt||void 0===gt||null===(t=gt.position)||void 0===t?void 0:t.deposited.gt(0)}),[gt]),Mt=(0,j.useMemo)((function(){return Ct?St[N]:null}),[Ct,St,N]),At=(0,j.useMemo)((function(){return Mt?Mt.type:null}),[Mt]),It=(0,j.useMemo)((function(){return Mt?Mt.action:"stake"}),[Mt]),Tt=(0,j.useMemo)((function(){var t,e;return null!==gt&&void 0!==gt&&null!==(t=gt.position)&&void 0!==t&&t.lockEnd?(0,Z.qF)(null===gt||void 0===gt||null===(e=gt.position)||void 0===e?void 0:e.lockEnd).add(M.Bv,"second"):(0,Z.qF)().add(M.z1,"second")}),[gt]),Zt=(0,j.useMemo)((function(){return(0,Z.qF)().add(M.$O,"second")}),[]),Dt=(0,j.useMemo)((function(){var t;if("amount"===At&&null!==gt&&void 0!==gt&&null!==(t=gt.position)&&void 0!==t&&t.lockEnd)return Math.round(gt.position.lockEnd/1e3);var e=(0,Z.qF)(),n=$&&$.set("hour",e.hour()).set("minute",e.minute()).set("second",e.second());return n?Math.round(n.toDate().getTime()/1e3):0}),[At,gt,$]),Et=(0,j.useMemo)((function(){var t=Math.max(0,Dt-Math.round(Date.now()/1e3));return(0,Z.gA)(t).div(M.$O)}),[Dt]),Pt=(0,j.useMemo)((function(){var t;return(0,Z.d5)(null===gt||void 0===gt||null===(t=gt.position)||void 0===t?void 0:t.deposited)}),[gt]),Ft=(0,j.useMemo)((function(){var t,e;return"time"===At&&null!==gt&&void 0!==gt&&gt.position?null===gt||void 0===gt||null===(e=gt.position)||void 0===e?void 0:e.deposited.times(Et):(0,Z.d5)(null===gt||void 0===gt||null===(t=gt.position)||void 0===t?void 0:t.balance).plus((0,Z.d5)(Y).times(Et))}),[At,gt,Et,Y]);(0,j.useEffect)((function(){var t;null!==gt&&void 0!==gt&&null!==(t=gt.position)&&void 0!==t&&t.lockEnd&&"time"===At&&K(Tt)}),[gt,K,At,Tt]);var zt=(0,j.useCallback)((function(){return $&&$.startOf("day").isSameOrAfter(Tt.startOf("day"))&&$.startOf("day").isSameOrBefore(Zt.startOf("day"))}),[$,Tt,Zt]),Ut=(0,j.useMemo)((function(){return[{label:"staking.6months",value:6,timeframe:"month"},{label:"staking.1year",value:1,timeframe:"year"},{label:"staking.4years",value:M.$O,timeframe:"second"}]}),[]),Yt=(0,j.useMemo)((function(){if(F(""),O(""),!At||"amount"===At){if((0,Z.gA)(Y).isNaN()||(0,Z.gA)(Y).lte(0))return!0;if((0,Z.gA)(Y).gt(bt))return F(at("trade.errors.insufficientFundsForAmount",{symbol:null===nt||void 0===nt?void 0:nt.name})),!0}return!(At&&"time"!==At||zt())&&(O(at("time"===At?"trade.errors.stakingIncreaseLockEndDateNotCorrect":"trade.errors.stakingLockEndDateNotCorrect")),!0)}),[Y,At,zt,bt,nt,at]),Bt=(0,j.useCallback)((0,s.Z)((0,i.Z)().mark((function t(){var e,n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(nt&&et&&"getAllowanceContract"in et){t.next=2;break}return t.abrupt("return",(0,Z.gA)(0));case 2:if(null!==Q&&void 0!==Q&&Q.address){t.next=4;break}return t.abrupt("return",(0,Z.gA)(0));case 4:if(e=et.getAllowanceContract()){t.next=7;break}return t.abrupt("return",(0,Z.gA)(0));case 7:return n=(0,Z.WP)(et),t.next=10,(0,Z.RC)(e,Q.address,n);case 10:return a=t.sent,t.abrupt("return",(0,Z.I0)(a,nt.decimals));case 12:case"end":return t.stop()}}),t)}))),[nt,et,null===Q||void 0===Q?void 0:Q.address]),Lt=(0,j.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Q&&!Yt&&et&&"getDepositContractSendMethod"in et&&"getDepositParams"in et&&et instanceof m.y&&(0,s.Z)((0,i.Z)().mark((function e(){var n,s,r,o,l,c,u,m,p,x,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ct){e.next=26;break}if(!t){e.next=7;break}return e.next=4,Bt();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=(0,Z.gA)(Y);case 8:if(!e.t0.gte(Y)){e.next=23;break}if(n=Dt,s=(0,a.Z)(Ut).pop(),(null===$||void 0===$?void 0:$.format("YYYY-MM-DD"))!==(0,Z.qF)().add(s.value,s.timeframe).format("YYYY-MM-DD")){e.next=17;break}return e.next=15,(0,Z.Qg)(X);case 15:(r=e.sent)&&(n=+r.timestamp+M.$O);case 17:(0,d.tM)(tt,kt),o=et.getDepositParams(Y,n),l=et.getDepositContractSendMethod(o),st(et.id,null===nt||void 0===nt?void 0:nt.id,l,It),e.next=24;break;case 23:ut({type:"SET_ACTIVE_STEP",payload:1});case 24:e.next=51;break;case 26:e.t1=At,e.next="amount"===e.t1?29:"time"===e.t1?39:50;break;case 29:if(!t){e.next=35;break}return e.next=32,Bt();case 32:e.t2=e.sent,e.next=36;break;case 35:e.t2=(0,Z.gA)(Y);case 36:return e.t2.gte(Y)?(c=et.getIncreaseAmountParams(Y),u=et.getIncreaseAmountContractSendMethod(c),st(et.id,null===nt||void 0===nt?void 0:nt.id,u,It)):ut({type:"SET_ACTIVE_STEP",payload:1}),e.abrupt("break",51);case 39:if(m=Dt,p=(0,a.Z)(Ut).pop(),(null===$||void 0===$?void 0:$.format("YYYY-MM-DD"))!==(0,Z.qF)().add(p.value,p.timeframe).format("YYYY-MM-DD")){e.next=46;break}return e.next=44,(0,Z.Qg)(X);case 44:(x=e.sent)&&(m=+x.timestamp+M.$O);case 46:return f=et.getIncreaseTimeParams(m),v=et.getIncreaseTimeContractSendMethod(f),st(et.id,null===nt||void 0===nt?void 0:nt.id,v,It,(0,Z.p6)($,"YYYY-MM-DD HH:mm",!0)),e.abrupt("break",51);case 50:return e.abrupt("break",51);case 51:case"end":return e.stop()}}),e)})))()}),[Q,tt,Ct,It,At,Yt,Y,kt,Ut,X,$,Dt,et,nt,ut,Bt,st]);(0,j.useEffect)((function(){xt||pt!==e||"success"!==lt.status||B("")}),[xt,lt.status,pt,e]);var _t=(0,j.useCallback)((function(){null!==nt&&void 0!==nt&&nt.balance&&B(nt.balance.toString())}),[nt]),Rt=(0,j.useCallback)((0,s.Z)((0,i.Z)().mark((function t(){var e,n,a,s,r,l,c,d,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(et&&"getDepositContractSendMethod"in et&&"getDepositParams"in et&&et instanceof m.y){t.next=2;break}return t.abrupt("return");case 2:if(e=et.getMethodDefaultGasLimit("stake"),Q&&!bt.lte(0)&&zt()){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Bt();case 7:if(!(n=t.sent).lte(0)){t.next=10;break}return t.abrupt("return",e);case 10:if(a=o.Z.minimum(bt,n),s={from:null===Q||void 0===Q?void 0:Q.address},r=null,Ct?"amount"===At?(c=et.getIncreaseAmountParams(a.toFixed()),r=et.getIncreaseAmountContractSendMethod(c)):"time"===At&&(d=et.getIncreaseTimeParams(Dt),r=et.getIncreaseTimeContractSendMethod(d)):(l=et.getDepositParams(a.toFixed(),Dt),r=et.getDepositContractSendMethod(l)),r){t.next=16;break}return t.abrupt("return",e);case 16:return t.next=18,(0,Z.$K)(r,s);case 18:if(t.t0=t.sent,t.t0){t.next=21;break}t.t0=e;case 21:return u=t.t0,t.abrupt("return",u);case 23:case"end":return t.stop()}}),t)}))),[Q,Ct,At,et,zt,Dt,Bt,bt]);(0,j.useEffect)((function(){mt===e&&(0,s.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rt();case 2:e=t.sent,rt(e);case 4:case"end":return t.stop()}}),t)})))()}),[mt,e,Rt,rt]),(0,j.useEffect)((function(){mt===e&&(ut({type:"SET_AMOUNT",payload:Y}),ut({type:"SET_DEFAULT_AMOUNT",payload:Y}),ut({type:"SET_ASSET",payload:nt}),xt&&(Lt(!1),ut({type:"SET_EXECUTE_ACTION",payload:!1})))}),[Y,mt,nt,e,ut,xt,Lt]);var Ot=(0,j.useMemo)((function(){return Q?(0,D.jsx)(v.Translation,{component:A.zx,translation:"staking.".concat(It),disabled:Yt,onClick:Lt,variant:"ctaFull"}):(0,D.jsx)(w.ConnectWalletButton,{variant:"ctaFull"})}),[Q,Yt,It,Lt]),Ht=(0,j.useCallback)((function(t,e){var n=(0,Z.dU)((0,Z.dk)((0,Z.qF)().add(t,e),Tt),Zt);K(n)}),[K,Tt,Zt]),Gt=(0,j.useCallback)((function(t){W(t)}),[W]),Nt=(0,j.useMemo)((function(){return Ct&&"amount"!==At?null:(0,D.jsxs)(I.Ug,{width:"100%",spacing:[3,4],alignItems:"flex-start",children:[(0,D.jsx)(I.xu,{pt:8,width:"110px",children:(0,D.jsx)(f.AssetLabel,{assetId:null===tt||void 0===tt?void 0:tt.id})}),(0,D.jsxs)(I.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,D.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,D.jsxs)(I.gC,{spacing:2,alignItems:"flex-start",children:[(0,D.jsx)(g.InputAmount,{amount:Y,amountUsd:null,setAmount:B}),(0,D.jsxs)(I.Ug,{width:"100%",justifyContent:"space-between",children:[(0,D.jsxs)(I.Ug,{spacing:1,children:[(0,D.jsx)(v.Translation,{component:I.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,D.jsx)(C.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,D.jsx)(A.zx,{variant:"selector",onClick:_t,children:"MAX"})]})]})}),P&&(0,D.jsx)(I.xv,{textStyle:"captionSmaller",color:"orange",children:P})]})]})}),[tt,Y,B,P,_t,Ct,At]),Wt=(0,j.useMemo)((function(){return Ct&&"time"!==At?null:(0,D.jsxs)(I.Ug,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,D.jsx)(I.xu,{pt:8,width:"110px",children:(0,D.jsx)(v.Translation,{translation:"staking.lockEnd",textStyle:"titleSmall",fontSize:"md",color:"primary",whiteSpace:"nowrap"})}),(0,D.jsxs)(I.gC,{flex:1,spacing:1,alignItems:"flex-start",children:[(0,D.jsx)(l.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,D.jsxs)(I.gC,{spacing:2,alignItems:"flex-start",children:[(0,D.jsx)(p.InputDate,{value:null===$||void 0===$?void 0:$.format("YYYY-MM-DD"),setValue:K,min:Tt.format("YYYY-MM-DD"),max:Zt.format("YYYY-MM-DD")}),(0,D.jsx)(I.MI,{spacing:1,width:"100%",columns:Ut.length,justifyContent:"space-between",children:Ut.map((function(t){var e=(null===$||void 0===$?void 0:$.format("YYYY-MM-DD"))===(0,Z.qF)().add(t.value,t.timeframe).format("YYYY-MM-DD");return(0,D.jsx)(v.Translation,{translation:t.label,component:A.zx,variant:"selector","aria-selected":e,onClick:function(){return Ht(t.value,t.timeframe)}},"option_".concat(t.label))}))})]})}),R&&(0,D.jsx)(I.xv,{textStyle:"captionSmaller",color:"orange",children:R})]})]})}),[Ct,At,$,K,Tt,Zt,Ut,Ht,R]);return(0,D.jsx)(C.AssetProvider,{flex:1,width:"100%",assetId:null===tt||void 0===tt?void 0:tt.underlyingId,children:wt?(0,D.jsx)(I.M5,{px:10,flex:1,width:"100%",children:(0,D.jsxs)(I.gC,{spacing:6,children:[(0,D.jsx)(c.ppH,{size:72}),(0,D.jsxs)(I.gC,{spacing:4,children:[(0,D.jsx)(v.Translation,{component:I.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,D.jsx)(v.Translation,{component:I.xv,translation:"staking.canWithdrawLock",params:{amount:(0,Z.dm)(Pt),asset:null===tt||void 0===tt?void 0:tt.name},textStyle:"captionSmall",textAlign:"center"}),(0,D.jsx)(v.Translation,{component:A.zx,translation:"common.unstake",onClick:function(){return ft(1)},variant:"ctaPrimary",px:10})]})]})}):(0,D.jsxs)(I.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,D.jsxs)(I.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[Ct&&(0,D.jsx)(T.mQ,{width:"100%",defaultIndex:0,variant:"buttonTertiary",onChange:Gt,children:(0,D.jsx)(T.td,{width:"100%",children:(0,D.jsx)(I.MI,{spacing:2,width:"100%",columns:St.length,children:St.map((function(t){return(0,D.jsx)(v.Translation,{component:T.OK,translation:t.label},"option_".concat(t.label))}))})})}),Nt,Wt,Ft.gt(0)&&(0,D.jsx)(S.DynamicActionFields,{assetId:null===tt||void 0===tt?void 0:tt.id,action:It,amount:Ft.toFixed(),amountUsd:Ft.toFixed(),stakingPower:Et})]}),(0,D.jsxs)(I.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,D.jsx)(k.EstimatedGasFees,{}),Ot]})]})})}},59058:function(t,e,n){n.r(e),n.d(e,{Unstake:function(){return y}});var a=n(74165),i=n(15861),s=n(33482),r=n(55967),o=n(47174),l=n(7276),c=n(43127),d=n(3498),u=n(15542),m=n(1669),p=n(23023),x=n(78951),f=n(4710),v=n(86393),g=n(75712),h=n(99594),j=n(45263),y=function(t){var e,n,y,b=t.itemIndex,k=(0,o.Y)().account,S=(0,g.useAssetProvider)(),w=S.asset,C=S.vault,M=(0,f.useOperativeComponent)(),A=M.dispatch,I=M.activeItem,T=M.setActionIndex,Z=(0,m.w)(),D=Z.stakingData,E=Z.selectors.selectVaultPrice,P=(0,p.R)(),F=P.sendTransaction,z=P.setGasLimit,U=P.state.block,Y=(0,l.useMemo)((function(){var t;return(0,h.d5)(null===D||void 0===D||null===(t=D.position)||void 0===t?void 0:t.deposited)}),[D]),B=(0,l.useMemo)((function(){var t,e;return!(null===D||void 0===D||null===(t=D.position)||void 0===t||!t.lockEnd||!U)&&(0,h.qF)(null===D||void 0===D||null===(e=D.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,h.qF)(1e3*U.timestamp))}),[D,U]),L=(0,l.useMemo)((function(){var t,e;return null!==D&&void 0!==D&&null!==(t=D.position)&&void 0!==t&&t.lockEnd?(0,h.p6)(null===D||void 0===D||null===(e=D.position)||void 0===e?void 0:e.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[D]),_=(0,l.useCallback)((function(){k&&B&&C&&"getWithdrawContractSendMethod"in C&&"getWithdrawParams"in C&&C instanceof s.y&&(0,i.Z)((0,a.Z)().mark((function t(){var e,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=C.getWithdrawParams(),n=C.getWithdrawContractSendMethod(e),F(C.id,C.id,n);case 3:case"end":return t.stop()}}),t)})))()}),[k,B,C,F]),R=(0,l.useCallback)((0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,r,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C&&"getWithdrawContractSendMethod"in C&&"getWithdrawParams"in C&&C instanceof s.y){t.next=2;break}return t.abrupt("return");case 2:if(e=C.getMethodDefaultGasLimit("unstake"),k&&B){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===k||void 0===k?void 0:k.address},i=C.getWithdrawParams(),r=C.getWithdrawContractSendMethod(i),t.next=10,(0,h.$K)(r,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return o=t.t0,t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)}))),[k,C,B]);(0,l.useEffect)((function(){I===b&&(0,i.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:e=t.sent,z(e);case 4:case"end":return t.stop()}}),t)})))()}),[I,b,R,z]),(0,l.useEffect)((function(){I===b&&(A({type:"SET_ASSET",payload:w}),E&&C&&(A({type:"SET_AMOUNT",payload:(0,h.gA)(Y).toString()}),A({type:"SET_DEFAULT_AMOUNT",payload:(0,h.gA)(Y).toString()})))}),[C,w,Y,E,I,b,A,_]);var O=(0,l.useMemo)((function(){return k?(0,j.jsx)(u.Translation,{component:c.zx,translation:"common.withdraw",disabled:!B,onClick:_,variant:"ctaFull"}):(0,j.jsx)(v.ConnectWalletButton,{variant:"ctaFull"})}),[k,B,_]);return(0,j.jsx)(g.AssetProvider,{flex:1,width:"100%",assetId:null===w||void 0===w?void 0:w.id,children:(0,j.jsxs)(d.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:null!==D&&void 0!==D&&null!==(e=D.position)&&void 0!==e&&e.lockEnd?8:0,children:[(0,j.jsx)(d.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:null!==D&&void 0!==D&&null!==(n=D.position)&&void 0!==n&&n.lockEnd?B?(0,j.jsx)(d.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,j.jsxs)(d.gC,{spacing:6,children:[(0,j.jsx)(r.ppH,{size:72}),(0,j.jsxs)(d.gC,{spacing:4,children:[(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.canWithdrawLock",params:{amount:(0,h.dm)(Y),asset:null===w||void 0===w?void 0:w.name},textStyle:"captionSmall",textAlign:"center"})]})]})}):(0,j.jsxs)(d.gC,{py:20,flex:1,spacing:6,px:[6,10],width:"100%",children:[(0,j.jsx)(r.FKe,{size:72}),(0,j.jsxs)(d.gC,{spacing:4,children:[(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.lockNotExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.waitUntilLockExpired",params:{lockEndDate:L},textStyle:"captionSmall",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:c.zx,translation:"staking.increaseLock",onClick:function(){return T(0)},variant:"ctaPrimary",px:10})]})]}):(0,j.jsx)(d.M5,{px:6,flex:1,width:"100%",children:(0,j.jsxs)(d.gC,{spacing:5,children:[(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.noStake",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:d.xv,translation:"staking.stakeBeforeUnstake",textStyle:"captionSmall",textAlign:"center"}),(0,j.jsx)(u.Translation,{component:c.zx,translation:"common.stake",onClick:function(){return T(0)},variant:"ctaPrimary",px:10})]})})}),(null===D||void 0===D||null===(y=D.position)||void 0===y?void 0:y.lockEnd)&&B&&(0,j.jsxs)(d.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[B&&(0,j.jsx)(x.EstimatedGasFees,{}),O]})]})})}},58194:function(t,e,n){n.r(e),n.d(e,{ReactTable:function(){return x}});var a=n(1413),i=n(29439),s=n(7276),r=n(55967),o=n(63591),l=n(96699),c=n(3498),d=n(26720),u=n(67503),m=n(45263),p=function(t){var e=t.column,n=(0,l.Fg)();return(0,m.jsxs)(c.kC,{alignItems:"center",layerStyle:"tableHeader",justifyContent:"space-between",children:[e.render("Header"),e.canSort&&(0,m.jsxs)(c.kC,{direction:"column",children:[(0,m.jsx)(r.rWj,{size:20,fill:e.isSorted&&e.isSortedDesc?n.colors.primary:n.colors.table.arrow,"aria-label":"sorted ascending",style:{position:"absolute"}}),(0,m.jsx)(r.Ix0,{size:20,fill:e.isSorted?e.isSortedDesc?n.colors.table.arrow:n.colors.primary:n.colors.table.arrow,"aria-label":"sorted descending",style:{marginTop:10}})]})]})},x=function(t){var e=t.columns,n=t.data,x=t.page,f=t.rowsPerPage,v=t.displayHeaders,g=void 0===v||v,h=t.onRowClick,j=t.onToggleRow,y=t.initialState,b=(0,l.Fg)(),k=(0,d.ff)("black","white"),S=(0,s.useState)(null),w=(0,i.Z)(S,2),C=w[0],M=w[1],A=(0,o.useTable)({columns:e,data:n,initialState:y},o.useSortBy),I=A.getTableProps,T=A.getTableBodyProps,Z=A.headerGroups,D=A.rows,E=A.prepareRow,P=(0,s.useCallback)((function(t){M((function(e){return e===t?null:t}))}),[M]);(0,s.useEffect)((function(){if(j)return j(C)}),[j,C]);var F=(0,s.useMemo)((function(){return f&&x?D.slice(f*(x-1),f*x):D}),[D,x,f]),z=(0,s.useMemo)((function(){return F.map((function(t,e){var n=!1;E(t);var i=e===F.length-1,o=i&&!C?{borderBottom:0}:{};return(0,m.jsxs)(m.Fragment,{children:[(0,s.createElement)(u.Tr,(0,a.Z)((0,a.Z)({},t.getRowProps()),{},{tabIndex:t.index,layerStyle:"tableRow",backgroundColor:C===t?"card.bgLight":"initial",onClick:function(){var e;return(null===(e=t.subRows)||void 0===e?void 0:e.length)>0?P(t):null===h||void 0===h?void 0:h(t)},cursor:h?"pointer":void 0,sx:o,key:e}),t.cells.map((function(e,i){var o,l=!n&&"none"!==e.column.display,d=i===t.cells.length-1;l&&(n=!0);var p=l?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:d?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,s.createElement)(u.Td,(0,a.Z)((0,a.Z)({},e.getCellProps()),{},{display:e.column.display,sx:p,key:i}),(0,m.jsxs)(c.Ug,{flex:1,width:"full",justifyContent:"space-between",children:[e.render("Cell"),d&&(null===(o=t.subRows)||void 0===o?void 0:o.length)>0&&(C===t?(0,m.jsx)(r.rWj,{size:24,color:b.colors.primary}):(0,m.jsx)(r.Ix0,{size:24,color:b.colors.primary}))]}))}))),C===t&&t.subRows.map((function(e,r){E(e);var o=r===t.subRows.length-1,l=i&&o?{borderBottom:0}:{};return(0,s.createElement)(u.Tr,(0,a.Z)((0,a.Z)({},e.getRowProps()),{},{tabIndex:e.index,layerStyle:"tableRow",backgroundColor:"button.bgHover",onClick:function(){return null===h||void 0===h?void 0:h(e)},cursor:h?"pointer":void 0,sx:l,key:r}),e.cells.map((function(t,i){var r=!n&&"none"!==t.column.display,o=i===e.cells.length-1;r&&(n=!0);var l=r?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:o?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,s.createElement)(u.Td,(0,a.Z)((0,a.Z)({},t.getCellProps()),{},{display:t.column.display,sx:l,key:i}),t.render("Cell"))})))}))]})}))}),[P,C,E,b,F,h]);return(0,m.jsxs)(u.iA,(0,a.Z)((0,a.Z)({variant:"clickable",size:{base:"sm",md:"md"}},I()),{},{children:[g&&(0,m.jsx)(u.hr,{children:Z.map((function(t,e){var n=!1;return(0,s.createElement)(u.Tr,(0,a.Z)((0,a.Z)({},t.getHeaderGroupProps()),{},{key:e}),t.headers.map((function(e,i){var r=!n&&"none"!==e.display,o=i===t.headers.length-1;r&&(n=!0);var l=r?{paddingLeft:0,paddingRight:4}:o?{paddingLeft:4,paddingRight:0}:{paddingLeft:4,paddingRight:4};return(0,s.createElement)(u.Th,(0,a.Z)((0,a.Z)({},e.getHeaderProps(e.getSortByToggleProps({title:void 0}))),{},{color:"gray.500",fontWeight:400,display:e.display,textAlign:e.textAlign,_hover:{color:e.canSort?k:"gray.500"},style:l,key:"th_".concat(i)}),(0,m.jsx)(p,{column:e}))})))}))}),(0,m.jsx)(u.p3,(0,a.Z)((0,a.Z)({},T()),{},{children:z}))]}))}},80745:function(t,e,n){n.r(e),n.d(e,{Scrollable:function(){return l}});var a=n(1413),i=n(45987),s=(n(7276),n(3498)),r=n(45263),o=["children"],l=function(t){var e=t.children,n=(0,i.Z)(t,o);return(0,r.jsx)(s.kC,(0,a.Z)((0,a.Z)({flex:1,width:"100%",overflowY:"auto",overflowX:"hidden",direction:"column",alignItems:"flex-start"},n),{},{children:e}))}},48415:function(t,e,n){n.r(e),n.d(e,{Staking:function(){return A}});var a=n(99594),i=n(7276),s=n(54447),r=n(58043),o=n(86059),l=n(58383),c=n(66288),d=n(67041),u=n(47174),m=n(61617),p=n(59058),x=n(96362),f=n(97778),v=n(15542),g=n(87099),h=n(1669),j=n(75712),y=n(72258),b=n(99020),k=n(3498),S=n(37658),w=n(3148),C=n(87577),M=n(45263),A=function(){var t=(0,u.Y)().account,e=(0,c.X)().isMobile,n=(0,h.w)(),A=n.isVaultsPositionsLoaded,I=n.stakingData,T=n.selectors,Z=T.selectVaultsByType,D=T.selectAssetById,E=T.selectVaultTransactions,P=(0,i.useMemo)((function(){if(D){var t=(0,l.Zs)(r.x5,g.MI);return t&&D(t.address)}}),[D]),F=(0,i.useMemo)((function(){var t;return Z&&(null===(t=Z("STK"))||void 0===t?void 0:t[0])}),[Z]),z=(0,i.useMemo)((function(){return D&&F&&D(F.id)}),[D,F]),U=(0,i.useMemo)((function(){return A&&F&&E(F.id)}),[A,F,E]),Y=(0,i.useMemo)((function(){return(U&&U.reduce((function(t,e){switch(e.action){case"stake":t.totalDeposited=t.totalDeposited.plus(e.underlyingAmount);break;case"unstake":t.totalDeposited=t.totalDeposited.minus(e.underlyingAmount)}return t.totalDeposited.lte(0)?t.startTimestamp=null:t.startTimestamp||(t.startTimestamp=e.timeStamp),t}),{startTimestamp:null,totalDeposited:(0,a.gA)(0)})).startTimestamp}),[U]),B=(0,i.useMemo)((function(){if(!Y||!I)return null;var t=Math.round(Date.now()/1e3)-Y;return(0,a.gA)(I.position.claimable).div(I.position.deposited).times(g.eG).div(t).times(100)}),[Y,I]),L=[{type:"stake",component:d.Stake,label:"common.stake",steps:[{type:"approve",component:x.Approve,props:{amountUsd:null},label:"modals.approve.header"}]},{type:"unstake",label:"common.unstake",component:p.Unstake,steps:[]}],_=(0,i.useMemo)((function(){if(!t||!I||I.position.deposited.lte(0))return null;return(0,M.jsxs)(k.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"staking.yourstkIDLE",component:k.xv,textStyle:"heading",fontSize:"h3"}),(0,M.jsx)(k.MI,{columns:[2,4],spacing:[6,20],children:[{field:"stakingDeposited",props:{fontSize:"h3",textStyle:"heading"},label:"assets.assetDetails.generalData.totalIDLEStaked",tooltip:"assets.assetDetails.tooltips.totalIDLEStaked"},{field:"stkIDLEBalance",props:{fontSize:"h3",textStyle:"heading"},label:"common.balance",tooltip:"assets.assetDetails.tooltips.stkIDLEBalance"},{field:"stakingEndDate",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.lockEndDate",label:"assets.assetDetails.generalData.lockedUntil"},{field:"stakingShare",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.stakingShare",label:"defi.share"}].map((function(t){return(0,M.jsx)(w.AssetGeneralDataField,{generalData:t},"field_".concat(t.field))}))})]})}),[t,I]),R=(0,i.useMemo)((function(){var n,a;if(!t||!I||I.position.deposited.lte(0)||!F)return null;var i=F.getClaimRewardsContractSendMethod();return e?(0,M.jsx)(j.AssetProvider,{wrapFlex:!1,assetId:P.id,children:(0,M.jsx)(s.Card,{p:6,children:(0,M.jsxs)(k.gC,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,M.jsx)(k.Ug,{width:"full",justifyContent:"space-between",children:(0,M.jsx)(m.AssetLabel,{assetId:P.id})}),(0,M.jsxs)(k.Ug,{width:"full",justifyContent:"space-between",children:[(0,M.jsxs)(k.gC,{spacing:1,alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(k.Ug,{spacing:1,justifyContent:"flex-start",children:(0,M.jsx)(o.Amount.Percentage,{value:B,textStyle:"heading",fontSize:"h3"})})]}),(0,M.jsxs)(k.gC,{spacing:1,alignItems:"flex-end",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===I||void 0===I||null===(n=I.IDLE.asset)||void 0===n?void 0:n.id,showIcon:!1,amount:I.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:F.id,assetId:F.id,contractSendMethod:i,actionType:"claim",amount:I.position.claimable.toString(),width:"100%",disabled:I.position.claimable.lte(0)})]})})}):(0,M.jsx)(s.Card,{p:6,px:8,width:"100%",children:(0,M.jsxs)(k.Kq,{width:"100%",spacing:[0,6],direction:["column","row"],flexWrap:["wrap","nowrap"],justifyContent:["flex-start","space-between"],children:[(0,M.jsx)(m.AssetLabel,{assetId:P.id}),(0,M.jsxs)(k.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(o.Amount.Percentage,{value:B,fontSize:"h3",textStyle:"heading"})]}),(0,M.jsxs)(k.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:k.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===I||void 0===I||null===(a=I.IDLE.asset)||void 0===a?void 0:a.id,showIcon:!1,amount:I.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:F.id,assetId:F.id,contractSendMethod:i,actionType:"claim",amount:I.position.claimable.toString(),width:["100%","150px"],disabled:I.position.claimable.lte(0)})]})})}),[t,e,I,P,B,F]);return(0,M.jsxs)(k.xu,{width:"100%",children:[(0,M.jsxs)(k.gC,{spacing:6,my:[10,16],width:"100%",direction:["column","row"],justifyContent:"flex-start",alignItems:["center","flex-start"],children:[(0,M.jsx)(b.AnnouncementBanner,{mode:"alert",text:"strategies.staking.feeSharingDisabled"}),(0,M.jsx)(v.Translation,{translation:"navBar.stakeIDLE",component:k.X6,as:"h2",size:"3xl"})]}),(0,M.jsxs)(k.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,M.jsx)(k.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,M.jsxs)(k.gC,{spacing:10,width:"100%",alignItems:"flex-start",children:[_,R,(0,M.jsxs)(k.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"staking.globalstkIDLE",component:k.xv,textStyle:"heading",fontSize:"h3"}),(0,M.jsx)(w.AssetGeneralData,{assetId:null===z||void 0===z?void 0:z.id}),(0,M.jsx)(s.Card.Dark,{children:(0,M.jsx)(v.Translation,{isHtml:!0,translation:"strategies.staking.description",component:k.xv})})]}),(0,M.jsx)(C.StakingDistributedRewards,{})]})}),(0,M.jsx)(S.InteractiveComponent,{vaultId:null===z||void 0===z?void 0:z.id,assetId:null===F||void 0===F?void 0:F.id,actions:L})]})]})}},87577:function(t,e,n){n.r(e),n.d(e,{StakingDistributedRewards:function(){return C}});var a=n(1413),i=n(29439),s=n(54447),r=n(79681),o=n(87099),l=n(58383),c=n(66288),d=n(47174),u=n(58194),m=n(7276),p=n(15542),x=n(97778),f=n(1669),v=n(55967),g=n(48024),h=n(10658),j=n(96699),y=n(89030),b=n(3498),k=n(43127),S=n(99594),w=n(45263),C=function(){var t=(0,j.Fg)(),e=(0,r.qM)(),n=(0,c.X)().isMobile,C=(0,m.useState)(1),M=(0,i.Z)(C,2),A=M[0],I=M[1],T=(0,f.w)().stakingData,Z=(0,d.Y)(),D=Z.chainId,E=Z.explorer,P=(0,m.useCallback)((function(t){var e=(0,S.QG)(D,E,t.original.hash);return(0,S.xw)(e)}),[D,E]),F=(0,m.useMemo)((function(){return D?(0,l.Zs)(D,o.MI):null}),[D]),z=(0,m.useMemo)((function(){return T?T.rewards:[]}),[T]),U=(0,m.useMemo)((function(){return Math.max(1,Math.ceil(z.length/5))}),[z]),Y=(0,m.useMemo)((function(){return[{id:"date",accessor:"timeStamp",Header:e("transactionRow.date"),Cell:function(t){var e=t.value;return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(b.xv,{textStyle:"tableCell",children:(0,S.p6)(1e3*+e,"YYYY/MM/DD HH:mm",!0)})})},sortType:S._O},{id:"amount",accessor:"value",Header:e("transactionRow.amount"),Cell:function(t){var e=t.value,n=(0,S.I0)(e,null===F||void 0===F?void 0:F.decimals);return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(x.TokenAmount,{assetId:null===F||void 0===F?void 0:F.address,amount:n,size:"xs",textStyle:"tableCell"})})},sortType:S._O},{id:"hash",accessor:"hash",Header:e("transactionRow.hash"),Cell:function(t){var e=t.value;return(0,w.jsx)(y.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(h.TransactionLink,{hash:e})})},sortType:S.YC}]}),[e,F]);return(0,w.jsxs)(b.gC,{spacing:4,width:"full",children:[n?(0,w.jsxs)(b.gC,{spacing:0,width:"full",alignItems:"flex-start",children:[(0,w.jsx)(p.Translation,{textAlign:"left",translation:"staking.distributedRewards",component:s.Card.Heading}),(0,w.jsx)(s.Card,{children:z.slice(5*(A-1),5*A).map((function(t){var e=(0,a.Z)((0,a.Z)({},t),{},{idlePrice:(0,S.gA)(1),action:"distributed",assetId:null===F||void 0===F?void 0:F.address,idleAmount:(0,S.I0)(t.value,null===F||void 0===F?void 0:F.decimals),underlyingAmount:(0,S.I0)(t.value,null===F||void 0===F?void 0:F.decimals)});return(0,w.jsx)(g.TransactionItem,{transaction:e},"tx_".concat(e.hash))}))})]}):(0,w.jsxs)(s.Card,{mt:10,children:[(0,w.jsx)(p.Translation,{translation:"staking.distributedRewards",fontSize:"lg",component:s.Card.Heading}),(0,w.jsx)(u.ReactTable,{columns:Y,data:z,page:A,rowsPerPage:5,initialState:{sortBy:[{id:"date",desc:!1}]},onRowClick:P})]}),(0,w.jsx)(b.kC,{width:"100%",alignItems:"center",justifyContent:"flex-end",children:(0,w.jsxs)(b.Ug,{spacing:2,children:[(0,w.jsx)(k.zx,{variant:"link",minW:"auto",onClick:function(){I((function(t){return Math.max(1,t-1)}))},children:(0,w.jsx)(v.lrP,{color:1===A?t.colors.ctaDisabled:t.colors.primary})}),(0,w.jsxs)(b.xv,{textStyle:"ctaStatic",children:[A,"/",U]}),(0,w.jsx)(k.zx,{variant:"link",minW:"auto",onClick:function(){I((function(t){return Math.min(U,t+1)}))},children:(0,w.jsx)(v.KEG,{color:A===U?t.colors.ctaDisabled:t.colors.primary})})]})})]})}},72258:function(t,e,n){n.r(e),n.d(e,{TransactionButton:function(){return j},TransactionButtonValue:function(){return h}});var a=n(1413),i=n(29439),s=n(45987),r=(n(81608),n(55967)),o=n(53293),l=n(7276),c=n(15542),d=n(23023),u=n(96699),m=n(52486),p=n(3498),x=n(43127),f=n(45263),v=["text","contractSendMethod"],g=["text","amount","assetId","vaultId","actionType","contractSendMethod"],h=function(t){var e,n=t.text,o=t.contractSendMethod,x=(0,s.Z)(t,v),g=(0,u.Fg)(),h=(0,l.useRef)(null),j=(0,l.useState)(null),y=(0,i.Z)(j,2),b=y[0],k=y[1],S=(0,d.R)(),w=S.state.transaction,C=S.cleanTransaction,M=(0,l.useMemo)((function(){var t;return JSON.stringify(null===w||void 0===w||null===(t=w.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(o._method)}),[w,o]),A=(0,l.useMemo)((function(){return M&&w.status&&["pending","success","failed"].includes(w.status)&&w.estimatedTime}),[w,M]),I=(0,l.useMemo)((function(){return A&&"pending"===w.status?w.estimatedTime:.5}),[A,w]),T=(0,l.useCallback)((function(){if(!w.timestamp||!w.estimatedTime)return null;var t=+w.timestamp+1e3*w.estimatedTime,e=Math.max(0,Math.ceil((t-Date.now())/1e3));k(e),e&&(h.current=setTimeout((function(){T()}),1e3))}),[w]);(0,l.useEffect)((function(){var t;M&&("success"===w.status||"failed"===w.status?(h.current&&(clearInterval(h.current),h.current=null),"success"!==w.status&&4001===(null===(t=w.error)||void 0===t?void 0:t.code)||setTimeout((function(){C()}),4e3)):"pending"!==w.status||h.current||T())}),[M,w.status,T,C,null===(e=w.error)||void 0===e?void 0:e.code]);var Z=(0,l.useMemo)((function(){var t;if(M)switch(null===w||void 0===w?void 0:w.status){case"created":return(0,f.jsx)(m.$,{size:"sm"});case"pending":return w.timestamp&&w.estimatedTime&&b?(0,f.jsxs)(p.xv,{textStyle:"ctaStatic",children:[b,"s"]}):(0,f.jsx)(m.$,{size:"sm"});case"success":return(0,f.jsx)(p.kC,(0,a.Z)((0,a.Z)({},x),{},{alignItems:"center",justifyContent:"center",children:(0,f.jsx)(r.ddU,{size:24,color:g.colors.green[400]})}));case"failed":if(4001!==(null===(t=w.error)||void 0===t?void 0:t.code))return(0,f.jsx)(p.kC,(0,a.Z)((0,a.Z)({},x),{},{alignItems:"center",justifyContent:"center",children:(0,f.jsx)(r.lTq,{size:24,color:g.colors.red[400]})}))}return(0,f.jsx)(c.Translation,{translation:n,textStyle:"ctaStatic"})}),[M,b,w,n,g,x]),D=(0,l.useMemo)((function(){switch(w.status){case"success":case"failed":return"transparent";default:return"primary"}}),[w]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.kC,{top:0,left:0,bottom:0,bg:D,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(I,"s"),animationName:A?"progress":"none",animationPlayState:A?"running":"stopped"},children:(0,f.jsx)(p.kC,{left:0,width:x.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:Z})}),Z]})},j=function(t){var e=t.text,n=t.amount,r=t.assetId,c=t.vaultId,u=t.actionType,m=t.contractSendMethod,p=(0,s.Z)(t,g),v=(0,o.Z)(),j=(0,i.Z)(v,2),y=j[0],b=j[1].width,k=(0,d.R)(),S=k.sendTransaction,w=k.state.transaction,C=(0,l.useMemo)((function(){var t;return JSON.stringify(null===w||void 0===w||null===(t=w.contractSendMethod)||void 0===t?void 0:t._method)===JSON.stringify(m._method)}),[w,m]),M=(0,l.useCallback)((function(){if("created"!==w.status&&"pending"!==w.status)return S(c,r,m,u,n)}),[w,c,r,m,u,n,S]),A=(0,l.useMemo)((function(){var t;if(!C)return"primary";switch(w.status){case"success":return"green.400";case"failed":return 4001!==(null===(t=w.error)||void 0===t?void 0:t.code)?"red.400":"primary";default:return"primary"}}),[C,w]);return(0,f.jsx)(x.zx,(0,a.Z)((0,a.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:b||"auto",borderColor:A,onClick:function(){return M()},ref:y,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},p),{},{children:(0,f.jsx)(h,{text:e,contractSendMethod:m,width:b})}))}},48024:function(t,e,n){n.r(e),n.d(e,{TransactionItem:function(){return u}});var a=n(99594),i=n(87099),s=n(86059),r=n(3498),o=n(97778),l=n(15542),c=n(10658),d=n(45263),u=function(t){var e=t.transaction;return(0,d.jsxs)(r.gC,{mb:2,pb:4,spacing:4,width:"100%",alignItems:"flex-start",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,d.jsxs)(r.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(r.Ug,{spacing:3,direction:"row",alignItems:"center",children:(0,d.jsx)(l.Translation,{component:r.xv,translation:"transactionRow.".concat(e.action),textStyle:"captionSmall"})}),(0,d.jsx)(r.xv,{textStyle:"captionSmall",children:(0,a.p6)(1e3*+e.timeStamp,i.Cu)})]}),(0,d.jsxs)(r.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsxs)(r.Ug,{spacing:1,alignItems:"center",children:[(0,d.jsx)(o.TokenAmount,{assetId:e.assetId,amount:e.underlyingAmount,size:"xs",textStyle:"tableCell"}),e.amountUsd&&!(0,a.gA)(e.amountUsd).eq(e.underlyingAmount)&&(0,d.jsx)(s.Amount.Usd,{prefix:"~",value:e.amountUsd,color:"cta",fontSize:"xs"})]}),(0,d.jsx)(c.TransactionLink,{hash:e.hash})]})]})}},18147:function(t,e,n){n.r(e),n.d(e,{TransactionList:function(){return y}});var a=n(1413),i=n(93433),s=n(29439),r=n(45987),o=n(99594),l=n(7276),c=n(54447),d=n(47174),u=n(80745),m=n(3498),p=n(89030),x=n(15542),f=n(1669),v=n(53293),g=n(48024),h=n(45263),j=["assetIds","showTitleOnMobile","fullHeightOnMobile","title","transactions","emptyText"],y=function(t){var e=t.assetIds,n=t.showTitleOnMobile,y=void 0!==n&&n,b=t.fullHeightOnMobile,k=void 0!==b&&b,S=t.title,w=t.transactions,C=t.emptyText,M=(0,r.Z)(t,j),A=(0,d.Y)().account,I=(0,v.Z)(),T=(0,s.Z)(I,2),Z=T[0],D=T[1],E=(0,f.w)(),P=E.isPortfolioLoaded,F=E.isVaultsPositionsLoaded,z=E.selectors,U=z.selectVaultTransactions,Y=z.selectVaultGauge,B=(0,l.useMemo)((function(){return w||(A&&e&&U&&Y?e.reduce((function(t,e){var n=Y(e),a=U(e),s=n?U(n.id):[];return[].concat((0,i.Z)(t),(0,i.Z)(a),(0,i.Z)(s))}),[]):[])}),[w,A,e,U,Y]),L=(0,l.useMemo)((function(){return P&&(!A||F)}),[P,A,F]),_=(0,l.useMemo)((function(){return L?B.length>0?(0,o.Pf)(B,"timeStamp","desc").map((function(t,e){return(0,h.jsx)(g.TransactionItem,{transaction:t},"tx_".concat(t.hash,"_").concat(e))})):(0,h.jsx)(m.kC,{flex:1,minH:250,width:"100%",alignItems:"center",justifyContent:"center",children:(0,h.jsx)(x.Translation,{component:m.xv,translation:C||"assets.assetDetails.assetHistory.emptyTransactions"})}):(0,h.jsxs)(m.gC,{spacing:4,width:"100%",children:[(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10}),(0,h.jsx)(p.Od,{width:"100%",height:10})]})}),[L,B,C]);return(0,h.jsx)(c.Card,(0,a.Z)((0,a.Z)({flex:1},M),{},{children:(0,h.jsxs)(m.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",ref:Z,justifyContent:"flex-start",children:[(0,h.jsx)(x.Translation,{display:y?"block":["none","block"],component:c.Card.Heading,fontSize:"lg",translation:S||"assets.assetDetails.assetHistory.transactionHistory"}),(0,h.jsx)(u.Scrollable,{maxH:[k?"100%":280,Math.max((null===D||void 0===D?void 0:D.height)||400)],children:_})]})}))}},65984:function(t,e,n){n.d(e,{r:function(){return m}});var a=n(1413),i=n(45987),s=n(7276),r=n(73131),o=n(96699),l=n(7828),c=["spacing","children"],d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")},u=function(t){return t?"":void 0},m=(0,o.Gp)((function(t,e){var n=(0,o.jC)("Switch",t),m=(0,l.Lr)(t),p=m.spacing,x=void 0===p?"0.5rem":p,f=m.children,v=(0,i.Z)(m,c),g=(0,r.O)(v),h=g.state,j=g.getInputProps,y=g.getCheckboxProps,b=g.getRootProps,k=g.getLabelProps,S=(0,s.useMemo)((function(){return(0,a.Z)({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},n.container)}),[n.container]),w=(0,s.useMemo)((function(){return(0,a.Z)({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},n.track)}),[n.track]),C=(0,s.useMemo)((function(){return(0,a.Z)({userSelect:"none",marginStart:x},n.label)}),[x,n.label]);return s.createElement(o.m$.label,(0,a.Z)((0,a.Z)({},b()),{},{className:d("chakra-switch",t.className),__css:S}),s.createElement("input",(0,a.Z)({className:"chakra-switch__input"},j({},e))),s.createElement(o.m$.span,(0,a.Z)((0,a.Z)({},y()),{},{className:"chakra-switch__track",__css:w}),s.createElement(o.m$.span,{__css:n.thumb,className:"chakra-switch__thumb","data-checked":u(h.isChecked),"data-hover":u(h.isHovered)})),f&&s.createElement(o.m$.span,(0,a.Z)((0,a.Z)({className:"chakra-switch__label"},k()),{},{__css:C}),f))}));m.displayName="Switch"},81608:function(t,e,n){n.r(e),e.default={}}}]);