"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[9058,8951],{78951:function(t,e,n){n.r(e),n.d(e,{EstimatedGasFees:function(){return f}});var i=n(7276),a=n(87099),r=n(86059),o=n(96699),s=n(3498),l=n(55967),c=n(88935),d=n(15542),u=n(23023),p=n(45263),f=function(){var t=(0,o.Fg)(),e=(0,c.Y)().chainToken,n=(0,u.R)().state,f=n.transactionSpeed,m=n.estimatedFees,v=n.estimatedFeesUsd,x=(0,i.useMemo)((function(){return m?m[f]:null}),[m,f]),h=(0,i.useMemo)((function(){return v?v[f]:null}),[v,f]);return(0,p.jsxs)(s.Ug,{spacing:1,width:"100%",alignItems:"center",children:[(0,p.jsx)(l.Qpb,{color:t.colors.ctaDisabled,size:24}),(0,p.jsx)(d.Translation,{translation:"trade.estimatedGasFee",suffix:":",textStyle:"captionSmaller"}),(0,p.jsx)(r.Amount.Usd,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:a.EI,value:h}),h&&(0,p.jsx)(r.Amount,{textStyle:"captionSmaller",fontWeight:"600",color:"primary",prefix:"(",suffix:"".concat(null===e||void 0===e?void 0:e.symbol,")"),value:x,decimals:4})]})}},59058:function(t,e,n){n.r(e),n.d(e,{Unstake:function(){return k}});var i=n(74165),a=n(15861),r=n(33482),o=n(55967),s=n(88935),l=n(7276),c=n(43127),d=n(3498),u=n(15542),p=n(1669),f=n(23023),m=n(78951),v=n(4710),x=n(86393),h=n(7386),g=n(99594),w=n(45263),k=function(t){var e,n,k=t.itemIndex,S=(0,s.Y)().account,j=(0,h.useAssetProvider)(),b=j.asset,y=j.vault,C=(0,v.useOperativeComponent)(),E=C.dispatch,M=C.activeItem,A=(C.setActionIndex,(0,p.w)()),T=A.stakingData,W=A.selectors.selectVaultPrice,F=(0,f.R)(),I=F.sendTransaction,Z=F.setGasLimit,_=F.state.block,P=(0,l.useMemo)((function(){var t;return(0,g.d5)(null===T||void 0===T||null===(t=T.position)||void 0===t?void 0:t.deposited)}),[T]),U=(0,l.useMemo)((function(){var t,e;return!(null===T||void 0===T||null===(t=T.position)||void 0===t||!t.lockEnd||!_)&&(0,g.qF)(null===T||void 0===T||null===(e=T.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,g.qF)(1e3*_.timestamp))}),[T,_]),D=((0,l.useMemo)((function(){var t,e;return null!==T&&void 0!==T&&null!==(t=T.position)&&void 0!==t&&t.lockEnd?(0,g.p6)(null===T||void 0===T||null===(e=T.position)||void 0===e?void 0:e.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[T]),(0,l.useCallback)((function(){S&&U&&y&&"getWithdrawContractSendMethod"in y&&"getWithdrawParams"in y&&y instanceof r.y&&(0,a.Z)((0,i.Z)().mark((function t(){var e,n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=y.getWithdrawParams(),n=y.getWithdrawContractSendMethod(e),I(y.id,y.id,n);case 3:case"end":return t.stop()}}),t)})))()}),[S,U,y,I])),Y=(0,l.useCallback)((0,a.Z)((0,i.Z)().mark((function t(){var e,n,a,o,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y&&"getWithdrawContractSendMethod"in y&&"getWithdrawParams"in y&&y instanceof r.y){t.next=2;break}return t.abrupt("return");case 2:if(e=y.getMethodDefaultGasLimit("unstake"),S&&U){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===S||void 0===S?void 0:S.address},a=y.getWithdrawParams(),o=y.getWithdrawContractSendMethod(a),t.next=10,(0,g.$K)(o,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return s=t.t0,t.abrupt("return",s);case 15:case"end":return t.stop()}}),t)}))),[S,y,U]);(0,l.useEffect)((function(){M===k&&(0,a.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y();case 2:e=t.sent,Z(e);case 4:case"end":return t.stop()}}),t)})))()}),[M,k,Y,Z]),(0,l.useEffect)((function(){M===k&&(E({type:"SET_ASSET",payload:b}),W&&y&&(E({type:"SET_AMOUNT",payload:(0,g.gA)(P).toString()}),E({type:"SET_DEFAULT_AMOUNT",payload:(0,g.gA)(P).toString()})))}),[y,b,P,W,M,k,E,D]);var G=(0,l.useMemo)((function(){return S?(0,w.jsx)(u.Translation,{component:c.zx,translation:"common.withdraw",disabled:!U,onClick:D,variant:"ctaFull"}):(0,w.jsx)(x.ConnectWalletButton,{variant:"ctaFull"})}),[S,U,D]);return(0,w.jsx)(h.AssetProvider,{flex:1,width:"100%",assetId:null===b||void 0===b?void 0:b.id,children:(0,w.jsxs)(d.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:null!==T&&void 0!==T&&null!==(e=T.position)&&void 0!==e&&e.lockEnd?8:0,children:[(0,w.jsx)(d.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:(0,w.jsx)(d.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,w.jsxs)(d.gC,{spacing:6,children:[(0,w.jsx)(o.ppH,{size:72}),(0,w.jsxs)(d.gC,{spacing:4,children:[(0,w.jsx)(u.Translation,{component:d.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(u.Translation,{component:d.xv,translation:"staking.canWithdrawLock",params:{amount:(0,g.dm)(P),asset:null===b||void 0===b?void 0:b.name},textStyle:"captionSmall",textAlign:"center"})]})]})})}),(null===T||void 0===T||null===(n=T.position)||void 0===n?void 0:n.lockEnd)&&U&&(0,w.jsxs)(d.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[U&&(0,w.jsx)(m.EstimatedGasFees,{}),G]})]})})}}}]);