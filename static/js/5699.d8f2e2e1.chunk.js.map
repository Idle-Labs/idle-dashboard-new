{"version":3,"file":"static/js/5699.d8f2e2e1.chunk.js","mappings":"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","sources":["components/AssetLabel/AssetLabel.tsx","components/Card/Card.tsx","components/TransactionButton/TransactionButton.tsx","components/VaultReward/VaultReward.tsx","components/VaultRewards/VaultRewards.tsx","hooks/useBoundingRect/useBoundingRect.ts","webpack://idle-dashboard-new/./src/components/TransactionButton/progress.css?8ae6"],"sourcesContent":["import type { AssetId } from 'constants/types'\nimport { HStack, TextProps } from '@chakra-ui/react'\nimport { AssetProvider } from 'components/AssetProvider/AssetProvider'\n\ntype AssetLabelProps = {\n  size?: string\n  assetId: AssetId | undefined\n} & TextProps\n\nexport const AssetLabel: React.FC<AssetLabelProps> = ({ assetId, size = 'sm', ...textProps }) => {\n  return (\n    <AssetProvider\n      wrapFlex={false}\n      assetId={assetId}\n    >\n      <HStack\n        alignItems={'center'}\n        justifyContent={'flex-start'}\n      >\n        <AssetProvider.Icon size={size} />\n        <AssetProvider.Name textStyle={'heading'} fontSize={'h3'} whiteSpace={'nowrap'} {...textProps} />\n      </HStack>\n    </AssetProvider>\n  )\n}","import { Heading, Flex, Box, FlexProps, BoxProps, ThemingProps } from '@chakra-ui/react'\n\nexport type CardProps = BoxProps & ThemingProps \n\nconst HeadingTitle = (props: CardProps) => {\n  const { children, ...rest } = props\n  return (\n    <Heading as={'h3'} size={'md'} mb={6} {...rest}>{children}</Heading>\n  )\n}\n\nexport const Card = (props: CardProps) => {\n  const { children, layerStyle, ...rest } = props\n  return (\n    <Box\n      width={'100%'}\n      position={'relative'}\n      layerStyle={layerStyle || 'card'}\n      {...rest}\n    >\n      {children}\n    </Box>\n  )\n}\n\nexport const CardFlex = (props: CardProps & FlexProps) => {\n  const { children, layerStyle, ...rest } = props\n  return (\n    <Flex\n      width={'100%'}\n      layerStyle={layerStyle || 'card'}\n      {...rest}\n    >\n      {children}\n    </Flex>\n  )\n}\n\nexport const Dark = (props: CardProps) => {\n  const { children, ...rest } = props\n  const layerStyle: string[] = ['cardDark'].concat(props.layerStyle as string[])\n  return (\n    <Card {...rest} layerStyle={layerStyle}>{children}</Card>\n  )\n}\n\nexport const Light = (props: CardProps) => {\n  const { children, ...rest } = props\n  const layerStyle: string[] = ['cardLight'].concat(props.layerStyle as string[])\n  return (\n    <Card {...rest} layerStyle={layerStyle}>{children}</Card>\n  )\n}\n\nexport const Outline = (props: CardProps) => {\n  const { children, ...rest } = props\n  const layerStyle: string[] = ['cardOutline'].concat(props.layerStyle as string[])\n  return (\n    <Card {...rest} layerStyle={layerStyle}>{children}</Card>\n  )\n}\n\nCard.Dark = Dark\nCard.Light = Light\nCard.Flex = CardFlex\nCard.Outline = Outline\nCard.Heading = HeadingTitle","import './progress.css'\nimport type { AssetId } from 'constants/types'\nimport { ContractSendMethod } from 'web3-eth-contract'\nimport { MdOutlineDone, MdOutlineClose } from 'react-icons/md'\nimport useBoundingRect from \"hooks/useBoundingRect/useBoundingRect\"\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react'\nimport { TranslationProps, Translation } from 'components/Translation/Translation'\nimport { TransactionStatus, useTransactionManager } from 'contexts/TransactionManagerProvider'\nimport { useTheme, ButtonProps, Button, Box, Flex, Spinner, Text, TextProps } from '@chakra-ui/react'\n\ntype TransactionButtonProps = {\n  text: string\n  amount?: string\n  assetId: AssetId\n  vaultId: AssetId\n  actionType?: string\n  contractSendMethod: ContractSendMethod\n}\n\nexport const TransactionButtonValue: React.FC<TransactionButtonProps & TextProps> = ({\n  text,\n  amount,\n  assetId,\n  vaultId,\n  actionType,\n  contractSendMethod,\n  ...props\n}) => {\n  const theme = useTheme()\n  const intervalId = useRef<any>(null)\n  const [ remainingTime, setRemainingTime ] = useState<number | null>(null)\n  const { state: { transaction }, cleanTransaction } = useTransactionManager()\n\n  // const transaction: TransactionStatus = useMemo(() => ({\n  //   hash: null,\n  //   error: null,\n  //   status: 'success',\n  //   amount: null,\n  //   assetId: null,\n  //   vaultId: null,\n  //   receipt: null,\n  //   created: null,\n  //   timestamp: null,\n  //   actionType: null,\n  //   transaction: null,\n  //   lastUpdated: null,\n  //   estimatedTime: null,\n  //   confirmationCount: 0,\n  //   contractSendMethod,\n  // }), [contractSendMethod])\n\n  // @ts-ignore\n  const isRightTransaction = useMemo(() => JSON.stringify(transaction?.contractSendMethod?._method) === JSON.stringify(contractSendMethod._method), [transaction, contractSendMethod])\n\n  const transactionStarted = useMemo(() => {\n    return isRightTransaction && transaction.status && ['pending', 'success', 'failed'].includes(transaction.status) && transaction.estimatedTime\n  }, [transaction, isRightTransaction])\n\n  const transitionDuration = useMemo(() => {\n    return transactionStarted && transaction.status === 'pending' ? transaction.estimatedTime : 0.5\n  }, [transactionStarted, transaction])\n\n  const startCountdown = useCallback(() => {\n    // console.log('getRemainingTime', transaction)\n    if (!transaction.timestamp || !transaction.estimatedTime) return null\n    const targetTimestamp = +transaction.timestamp+(transaction.estimatedTime*1000)\n    // console.log('getRemainingTime - targetTimestamp', targetTimestamp, Math.max(0, Math.ceil((targetTimestamp-Date.now())/1000)))\n    const remainingTime = Math.max(0, Math.ceil((targetTimestamp-Date.now())/1000))\n\n    setRemainingTime(remainingTime)\n    if (!remainingTime) return\n    // console.log('TransactionButton - startCountdown')\n    intervalId.current = setTimeout(() => {\n      startCountdown()\n    }, 1000)\n  }, [transaction])\n\n  useEffect(() => {\n    if (transaction.status === 'success' || transaction.status === 'failed'){\n      // console.log('Clear Interval', intervalId.current)\n      if (intervalId.current){\n        clearInterval(intervalId.current)\n        intervalId.current = null\n      }\n      // Clean transaction if success or failed\n      if (transaction.status === 'success' || transaction.error?.code !== 4001){\n        setTimeout(() => {\n          cleanTransaction()\n        }, 4000)\n      }\n    } else if (transaction.status === 'pending' && !intervalId.current){\n      startCountdown()\n    }\n  }, [transaction.status, startCountdown, cleanTransaction, transaction.error?.code])\n  \n  const textComponent = useMemo(() => {\n    if (isRightTransaction){\n      switch (transaction?.status){\n        case 'created':\n          return (\n            <Spinner size={'sm'} />\n          )\n        case 'pending':\n          if (!transaction.timestamp || !transaction.estimatedTime){\n            return (\n              <Spinner size={'sm'} />\n            )\n          }\n          // const targetTimestamp = +transaction.timestamp+(transaction.estimatedTime*1000)\n          // const remainingTime = Math.max(0, Math.ceil((targetTimestamp-Date.now())/1000))\n          // Return spinner if long transaction\n          if (!remainingTime){\n            return (\n              <Spinner size={'sm'} />\n            )\n          }\n          return (\n            <Text textStyle={'ctaStatic'}>{remainingTime}s</Text>\n          )\n        case 'success':\n          return (\n            <Flex\n              {...props}\n              alignItems={'center'}\n              justifyContent={'center'}\n            >\n              <MdOutlineDone size={24} color={theme.colors.green['400']} />\n            </Flex>\n          )\n        case 'failed':\n          if (transaction.error?.code !== 4001){\n            return (\n              <Flex\n                {...props}\n                alignItems={'center'}\n                justifyContent={'center'}\n              >\n                <MdOutlineClose size={24} color={theme.colors.red['400']} />\n              </Flex>\n            )\n          }\n        break\n        default:\n        break\n      }\n    }\n    return (\n      <Translation translation={text} textStyle={'ctaStatic'} />\n    )\n  }, [isRightTransaction, remainingTime, transaction, text, theme, props])\n\n  const progressBg = useMemo(() => {\n    switch (transaction.status){\n      case 'success':\n      case 'failed':\n        return 'transparent'\n      default:\n        return 'primary'\n    }\n  }, [transaction])\n\n  return (\n    <>\n      <Flex\n        top={0}\n        left={0}\n        bottom={0}\n        bg={progressBg}\n        overflow={'hidden'}\n        position={'absolute'}\n        alignItems={'center'}\n        justifyContent={'center'}\n        transition={'background 0.5s ease-in-out'}\n        sx={{\n          animationIterationCount: 1,\n          animationFillMode: 'forwards',\n          animationTimingFunction: 'ease-in-out',\n          animationDuration: `${transitionDuration}s`,\n          animationName: transactionStarted ? 'progress' : 'none',\n          animationPlayState: transactionStarted ? 'running' : 'stopped',\n        }}\n      >\n        <Flex\n          left={0}\n          width={props.width}\n          alignItems={'center'}\n          position={'absolute'}\n          justifyContent={'center'}\n          sx={{\n            '> *':{\n              color:'black !important',\n              borderColor:'black !important',\n            }\n          }}\n        >\n          {textComponent}\n        </Flex>\n      </Flex>\n      {textComponent}\n    </>\n  )\n}\n\nexport const TransactionButton: React.FC<TransactionButtonProps & ButtonProps> = ({\n  text,\n  amount,\n  assetId,\n  vaultId,\n  actionType,\n  contractSendMethod,\n  ...props\n}) => {\n  // @ts-ignore\n  const [ref, { width }] = useBoundingRect()\n  const { sendTransaction, state: { transaction } } = useTransactionManager()\n\n  // @ts-ignore\n  const isRightTransaction = useMemo(() => JSON.stringify(transaction?.contractSendMethod?._method) === JSON.stringify(contractSendMethod._method), [transaction, contractSendMethod])\n\n  const onClick = useCallback(() => {\n    if (transaction.status === 'created' || transaction.status === 'pending') return\n    // console.log('onClick', vaultId, assetId, contractSendMethod)\n    return sendTransaction(vaultId, assetId, contractSendMethod, actionType, amount)\n  }, [transaction, vaultId, assetId, contractSendMethod, actionType, amount, sendTransaction])\n\n  const borderColor = useMemo(() => {\n    if (!isRightTransaction) return 'primary'\n    switch (transaction.status){\n      case 'success':\n        return 'green.400'\n      case 'failed':\n        return transaction.error?.code !== 4001 ? 'red.400' : 'primary'\n      default:\n        return 'primary'\n    }\n  }, [isRightTransaction, transaction])\n\n  return (\n    <Button\n      py={2}\n      px={10}\n      overflow={'hidden'}\n      position={'relative'}\n      width={width || 'auto'}\n      borderColor={borderColor}\n      onClick={() => onClick()}\n      ref={ref as typeof useRef}\n      variant={'ctaPrimaryOutline'}\n      transition={'border 0.5s ease-in-out'}\n      {...props}\n    >\n      <TransactionButtonValue text={text} vaultId={vaultId} assetId={assetId} contractSendMethod={contractSendMethod} width={width} />\n    </Button>\n  )\n}","import React from 'react'\nimport { Card } from 'components/Card/Card'\nimport { Amount } from 'components/Amount/Amount'\nimport type { BigNumber, AssetId } from 'constants/types'\nimport { AssetLabel } from 'components/AssetLabel/AssetLabel'\nimport { Translation } from 'components/Translation/Translation'\nimport { AssetProvider } from 'components/AssetProvider/AssetProvider'\nimport { VStack, Button, HStack, Text, SimpleGrid } from '@chakra-ui/react'\n\ntype RewardProps = {\n  assetId: AssetId\n  amount: BigNumber\n}\n\nexport const VaultReward: React.FC<RewardProps> = ({\n  assetId,\n  amount\n}) => {\n  if (amount.lte(0)) return null\n  return (\n    <AssetProvider\n      wrapFlex={false}\n      assetId={assetId}\n    >\n      <Card\n        p={6}\n      >\n        <HStack\n          width={'100%'}\n          justifyContent={'space-between'}\n        >\n          <AssetLabel assetId={assetId} />\n          <VStack\n            spacing={1}\n            alignItems={'flex-end'}\n          >\n            <Translation component={Text} translation={'defi.claimable'} textStyle={'captionSmall'} />\n            <HStack\n              spacing={1}\n              justifyContent={'flex-end'}\n            >\n              <Amount value={amount} decimals={8} textStyle={'tableCell'} />\n              <AssetProvider.Name textStyle={'tableCell'} />\n            </HStack>\n          </VStack>\n        </HStack>\n      </Card>\n    </AssetProvider>\n  )\n}","import { BNify } from 'helpers/'\nimport BigNumber from 'bignumber.js'\nimport React, { useMemo } from 'react'\nimport type { Balances, AssetId } from 'constants/types'\nimport { VStack, SimpleGrid, Text } from '@chakra-ui/react'\nimport { Translation } from 'components/Translation/Translation'\nimport { VaultReward } from 'components/VaultReward/VaultReward'\nimport { usePortfolioProvider } from 'contexts/PortfolioProvider'\nimport { TransactionButton } from 'components/TransactionButton/TransactionButton'\n\ntype RewardProps = {\n  assetId?: AssetId\n}\n\nexport const VaultRewards: React.FC<RewardProps> = ({ assetId }) => {\n  const { selectors: { selectAssetById, selectVaultById } } = usePortfolioProvider()\n\n  const vault = useMemo(() => {\n    return selectVaultById && selectVaultById(assetId)\n  }, [selectVaultById, assetId])\n  \n  const rewards = useMemo((): Balances | undefined => {\n    if (!selectAssetById || !assetId) return\n    const asset = selectAssetById(assetId)\n    return asset?.rewards\n  }, [selectAssetById, assetId])\n\n  const totalRewardsAmount: BigNumber = useMemo(() => {\n    return rewards ? (Object.values(rewards) as BigNumber[]).reduce( (total: BigNumber, amount: BigNumber) => total.plus(amount), BNify(0)) : BNify(0)\n  }, [rewards])\n\n  // console.log('totalRewardsAmount', vault, totalRewardsAmount)\n\n  const contractSendMethod = vault.getClaimRewardsContractSendMethod()\n\n  return (\n    <VStack\n      spacing={6}\n      width={'100%'}\n      id={'vault-rewards'}\n      alignItems={'flex-start'}\n    >\n      <Translation translation={'assets.assetDetails.generalData.claimableRewards'} component={Text} textStyle={'heading'} fontSize={'h3'} />\n      <SimpleGrid\n        spacing={6}\n        width={'100%'}\n        columns={[1, 3]}\n      >\n        {\n          rewards && Object.keys(rewards).map( (rewardId: AssetId) =>\n            <VaultReward\n              assetId={rewardId}\n              amount={rewards[rewardId]}\n              key={`reward_${rewardId}`}\n            />\n          )\n        }\n      </SimpleGrid>\n      {\n        assetId && vault && totalRewardsAmount.gt(0) && (\n          <TransactionButton text={'assets.assetCards.rewards.claimRewards'} vaultId={assetId} assetId={assetId} contractSendMethod={contractSendMethod} actionType={'claim'} amount={totalRewardsAmount.toString()} width={['100%', '150px']} disabled={totalRewardsAmount.lte(0)} />\n        )\n      }\n    </VStack>\n  )\n}","import { requestTimeout } from 'helpers/'\nimport { useState, useCallback, useLayoutEffect } from \"react\";\n\n// let timeoutRequest: any = null;\n\nconst debounce = (delay: number = 0, callback: Function) => {\n  let timeoutId: any = null;\n  return (...args: any[]) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(callback, delay, args);\n\n    // if (timeoutRequest) {\n    //   timeoutRequest.clear();\n    // }\n    // timeoutRequest = requestTimeout(callback, delay);\n  };\n};\n\nexport type Dimensions = {\n  x: number\n  y: number\n  top: number\n  left: number\n  width: number\n  height: number\n  right: number\n  bottom: number\n}\n\nconst initialDimensions: Dimensions = {\n  x: 0,\n  y: 0,\n  top: 0,\n  left: 0,\n  width: 0,\n  height: 0,\n  right: 0,\n  bottom: 0\n}\n\nfunction getDimensionObject(node: any): Dimensions {\n  const rect = node.getBoundingClientRect();\n  return {\n    x: rect.x,\n    y: rect.y,\n    top: rect.top,\n    left: rect.left,\n    width: rect.width,\n    height: rect.height,\n    right: rect.right,\n    bottom: rect.bottom\n  };\n}\n\nexport default function useBoundingRect(delay: number = 0) {\n  const [node, setNode] = useState<any>(null);\n  const [dimensions, setDimensions] = useState<Dimensions>(initialDimensions);\n\n  const ref = useCallback((node: any) => {\n    setNode(node);\n  }, []);\n\n  useLayoutEffect(() => {\n    if (\"undefined\" !== typeof window && node) {\n      const measure = async () => {\n        window.requestAnimationFrame(() => {\n          // console.log('measure', getDimensionObject(node))\n          setDimensions(getDimensionObject(node))\n        });\n      }\n\n      measure();\n\n      const listener = debounce(delay || 100, measure);\n\n      window.addEventListener(\"resize\", listener);\n      window.addEventListener(\"scroll\", listener);\n      \n      return () => {\n        window.removeEventListener(\"resize\", listener);\n        window.removeEventListener(\"scroll\", listener);\n      };\n    }\n  }, [node, delay]);\n\n  return [ref, dimensions, node];\n}\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["AssetLabel","assetId","size","textProps","AssetProvider","wrapFlex","alignItems","justifyContent","textStyle","fontSize","whiteSpace","Card","props","children","layerStyle","rest","width","position","CardFlex","Dark","concat","Light","Outline","Flex","Heading","as","mb","TransactionButtonValue","text","contractSendMethod","amount","vaultId","actionType","theme","useTheme","intervalId","useRef","useState","remainingTime","setRemainingTime","useTransactionManager","transaction","state","cleanTransaction","isRightTransaction","useMemo","JSON","stringify","_method","transactionStarted","status","includes","estimatedTime","transitionDuration","startCountdown","useCallback","timestamp","targetTimestamp","Math","max","ceil","Date","now","current","setTimeout","useEffect","clearInterval","error","code","textComponent","color","colors","green","red","Translation","translation","progressBg","top","left","bottom","bg","overflow","transition","sx","animationIterationCount","animationFillMode","animationTimingFunction","animationDuration","animationName","animationPlayState","borderColor","TransactionButton","useBoundingRect","ref","sendTransaction","onClick","py","px","variant","VaultReward","lte","p","spacing","component","Text","Amount","value","decimals","VaultRewards","usePortfolioProvider","selectors","selectAssetById","selectVaultById","vault","rewards","asset","totalRewardsAmount","Object","values","reduce","total","plus","BNify","getClaimRewardsContractSendMethod","id","columns","keys","map","rewardId","gt","toString","disabled","debounce","delay","callback","timeoutId","clearTimeout","args","initialDimensions","x","y","height","right","getDimensionObject","node","rect","getBoundingClientRect","setNode","dimensions","setDimensions","useLayoutEffect","window","measure","requestAnimationFrame","listener","addEventListener","removeEventListener"],"sourceRoot":""}