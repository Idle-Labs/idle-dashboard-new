"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[7690,110],{63330:function(t,e,n){n.r(e),n.d(e,{AssetPage:function(){return k}});var s=n(1413),a=n(29439),i=n(76566),r=n(16120),o=n(95173),l=n(98428),c=n(66288),d=n(86698),u=n(61617),p=n(97901),x=n(96362),f=n(15542),m=n(98365),g=n(85267),v=n(1669),h=n(75712),j=n(60110),b=n(7276),y=n(99594),w=n(61925),S=n(88089),C=n(3498),A=n(37658),I=n(44888),T=n(45263),k=function(){var t=(0,o.s0)(),e=(0,c.X)(),n=e.isMobile,k=e.environment,M=(0,g.m)(),D=M.params,Z=M.location,P=M.searchParams,E=(0,b.useState)(0),U=(0,a.Z)(E,2),z=U[0],_=U[1],B=(0,b.useState)(0),F=(0,a.Z)(B,2),G=F[0],L=F[1],O=(0,b.useState)(),R=(0,a.Z)(O,2),N=R[0],H=R[1],V=(0,b.useMemo)((function(){return P}),[P]),W=(0,a.Z)(V,2),q=W[0],K=W[1],X=(0,b.useState)(I.WE["6MONTHS"]),Q=(0,a.Z)(X,2),Y=Q[0],$=Q[1],J=(0,v.w)(),tt=J.isPortfolioLoaded,et=J.portfolioTimestamp,nt=J.assetsDataTimestamp,st=J.isPortfolioAccountReady,at=J.selectors,it=at.selectAssetById,rt=at.selectVaultById,ot=at.selectVaultGauge,lt=at.selectAssetBalance,ct=at.selectAssetPriceUsd,dt=(0,b.useMemo)((function(){return Object.keys(I.A2).find((function(t){return I.A2[t].route===D.strategy}))}),[D]),ut=(0,b.useMemo)((function(){return it&&it(D.asset)}),[it,D.asset]),pt=(0,b.useMemo)((function(){return rt&&rt(D.asset)}),[rt,D.asset]);(0,b.useEffect)((function(){ut&&L(Date.now())}),[ut]);var xt=(0,b.useMemo)((function(){if(!ut||!lt||null===ut||void 0===ut||!ut.underlyingId||!ct)return(0,y.gA)(0);var t=lt(ut.underlyingId),e=ct(ut.underlyingId);return(0,y.d5)(t).times((0,y.d5)(e))}),[ut,lt,ct]),ft=(0,b.useMemo)((function(){return ot&&ot(D.asset)}),[ot,D.asset]),mt=(0,b.useMemo)((function(){return ft&&it&&it(ft.id)}),[it,ft]),gt=(0,b.useMemo)((function(){var t;return mt&&"gaugeData"in mt&&null!==(t=mt.gaugeData)&&void 0!==t&&t.rewards?Object.values(mt.gaugeData.rewards).reduce((function(t,e){return t.plus((0,y.d5)(e.balance))}),(0,y.gA)(0)):(0,y.gA)(0)}),[mt]);(0,b.useEffect)((function(){if(tt&&it&&Z&&G)return ut?void 0:t(Z.pathname.replace("/".concat(D.asset),""))}),[tt,it,G,ut,D.asset,Z,t]),(0,b.useEffect)((function(){!(st&&ut&&N!==(null===ut||void 0===ut?void 0:ut.id)&&et&&nt)||et>nt||nt>G||((0,y.AV)(ut,xt),H(ut.id))}),[ut,et,xt,nt,st,G,N,H]);var vt=(0,b.useMemo)((function(){var t=[{id:"earn",label:"navBar.earn",component:i.Earn,actions:[{type:"deposit",component:p.Deposit,label:"common.deposit",steps:[{type:"approve",component:x.Approve,label:"modals.approve.header"}]},{type:"withdraw",label:"common.withdraw",component:m.Withdraw,steps:[]}]}],e=ft&&"enabled"in ft&&!ft.enabled;ft&&(!e||(0,y.d5)(null===mt||void 0===mt?void 0:mt.balance).gt(0)||(0,y.d5)(gt).gt(0))&&t.push({id:"gauge",label:"navBar.gauge",component:r.GaugeStaking,icon:e&&((0,y.gA)(null===mt||void 0===mt?void 0:mt.balance).gt(0)||(0,y.d5)(gt).gt(0))?{src:"".concat(I.pm,"vaults/deprecated.png"),tooltip:"trade.vaults.GG.disabled",props:{width:5,height:5}}:null,actions:[{type:"stake",component:p.Deposit,label:"common.stake",steps:[{type:"approve",component:x.Approve,label:"modals.approve.header"}]},{type:"unstake",label:"common.unstake",component:m.Withdraw,steps:[]}]});var n=!(null!==pt&&void 0!==pt&&pt.flags)||void 0===pt.flags.statsEnabled||pt.flags.statsEnabled;return(0,y.xW)("stats",k)&&n&&t.push({id:"stats",label:"navBar.stats",component:d.AssetStats,componentProps:{timeframe:Y,assetOnly:!0,showHeader:!1,showAssetStrategy:!0}}),t}),[pt,ft,mt,Y,k,gt]),ht=(0,b.useMemo)((function(){return q.get("tab")}),[q]);(0,b.useEffect)((function(){if(ht){var t=vt.find((function(t){return t.id.toString()===ht.toString()}));if(t){var e=vt.indexOf(t);_(e)}else _(0)}else _(0)}),[vt,ht,_]);var jt=(0,b.useMemo)((function(){return vt[z]&&"gauge"===vt[z].id&&ft?ft.id:null===ut||void 0===ut?void 0:ut.id}),[vt,z,ut,ft]),bt=(0,b.useMemo)((function(){return vt[z]}),[vt,z]),yt=(0,b.useMemo)((function(){return bt.component}),[bt]),wt=(0,b.useCallback)((function(t){var e=vt[t];e&&K("?tab=".concat(e.id))}),[vt,K]),St=(0,b.useMemo)((function(){return(0,T.jsx)(S.mQ,{variant:"unstyled",index:z,width:["100%","auto"],children:(0,T.jsx)(S.td,{children:vt.map((function(t,e){return(0,T.jsx)(l.IconTab,{width:["".concat(100/vt.length,"%"),"auto"],icon:t.icon,onClick:function(){return wt(e)},children:(0,T.jsx)(f.Translation,{translation:t.label})},"tab_".concat(e))}))})})}),[vt,wt,z]),Ct=(0,b.useMemo)((function(){return bt.actions?(0,T.jsx)(A.InteractiveComponent,{vaultId:null===ut||void 0===ut?void 0:ut.id,assetId:jt,actions:bt.actions}):null}),[bt,ut,jt]),At=(0,b.useMemo)((function(){return"stats"===bt.id?(0,T.jsx)(w.TimeframeSelector,{style:n?{marginTop:"20px"}:{marginTop:"-20px"},variant:"button",timeframe:Y,setTimeframe:$,width:["100%","auto"],justifyContent:["center","initial"]}):!n&&(0,T.jsx)(j.StrategyLabel,{strategy:dt,color:"cta",textStyle:"italic"})}),[bt,dt,n,Y,$]);return(0,T.jsx)(h.AssetProvider,{wrapFlex:!0,assetId:D.asset,children:(0,T.jsxs)(C.xu,{width:"100%",children:[(0,T.jsx)(C.kC,{my:[10,14],width:"100%",id:"asset-top-header",direction:["column","row"],justifyContent:["center","space-between"],children:(0,T.jsxs)(C.Kq,{width:"100%",spacing:[7,10],alignItems:"center",justifyContent:"center",direction:["column","row"],children:[(0,T.jsx)(u.AssetLabel,{assetId:D.asset,fontSize:"h2"}),(0,T.jsxs)(C.Kq,{flex:1,width:["100%","auto"],direction:["column","row"],justifyContent:"space-between",borderBottom:[0,"1px solid"],borderColor:["divider","divider"],children:[(0,T.jsx)(C.Ug,{width:["full","auto"],borderBottom:["1px solid",0],borderColor:"divider",children:St}),At]})]})}),(0,T.jsxs)(C.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,T.jsx)(C.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,T.jsx)(yt,(0,s.Z)({},vt[z].componentProps))}),Ct]})]})})}},16120:function(t,e,n){n.r(e),n.d(e,{GaugeStaking:function(){return h}});var s=n(29439),a=n(54447),i=n(44888),r=n(86059),o=n(7276),l=n(15542),c=n(1669),d=n(85267),u=n(99594),p=n(75712),x=n(3148),f=n(72258),m=n(3498),g=n(30422),v=n(45263),h=function(){var t,e,n,h,j,b=(0,d.m)().params,y=(0,o.useState)(0),w=(0,s.Z)(y,2),S=w[0],C=w[1],A=(0,o.useState)(),I=(0,s.Z)(A,2),T=I[0],k=I[1],M=(0,c.w)(),D=M.portfolioTimestamp,Z=M.assetsDataTimestamp,P=M.isPortfolioAccountReady,E=M.selectors,U=E.selectAssetById,z=E.selectVaultGauge,_=E.selectAssetBalance,B=E.selectAssetPriceUsd,F=(0,o.useMemo)((function(){return U&&U(b.asset)}),[U,b.asset]),G=(0,o.useMemo)((function(){return F&&z&&z(F.id)}),[z,F]),L=(0,o.useMemo)((function(){return U&&G&&U(G.id)}),[G,U]),O=(0,o.useMemo)((function(){return Object.keys(i.A2).find((function(t){return i.A2[t].route===b.strategy}))}),[b]),R=(0,o.useMemo)((function(){return O&&i.A2[O].color}),[O]),N=(0,o.useMemo)((function(){if(!G)return null;var t=i.A2[G.type];return null!==t&&void 0!==t&&t.carouselItems?(0,v.jsx)(g.StrategyDescriptionCarousel,{color:R,strategy:G.type,delay:1e4}):null}),[G,R]),H=(0,o.useMemo)((function(){var t;return(null===L||void 0===L?void 0:L.vaultPosition)&&(0,u.gA)(null===L||void 0===L||null===(t=L.vaultPosition)||void 0===t?void 0:t.underlying.redeemable).div(L.totalSupply)}),[L]),V=(0,o.useMemo)((function(){if(!L||null===L||void 0===L||!L.underlyingId||!_||!B)return(0,u.gA)(0);var t=_(L.underlyingId),e=B(L.underlyingId);return(0,u.d5)(t).times((0,u.d5)(e))}),[L,_,B]),W=(0,o.useMemo)((function(){return G&&"description"in G&&G.description?(0,v.jsx)(a.Card.Dark,{children:(0,v.jsx)(m.xv,{dangerouslySetInnerHTML:{__html:G.description}})}):null}),[G]);return(0,o.useEffect)((function(){L&&C(Date.now())}),[L]),(0,o.useEffect)((function(){!(P&&L&&T!==(null===L||void 0===L?void 0:L.id)&&D&&Z)||D>Z||Z>S||((0,u.AV)(L,V),k(L.id))}),[L,D,V,Z,P,S,T,k]),(0,v.jsxs)(m.gC,{spacing:10,width:"100%",children:[W,L.vaultPosition&&(0,v.jsx)(p.AssetProvider,{wrapFlex:!1,assetId:G.id,children:(0,v.jsxs)(m.MI,{width:"100%",columns:[2,4],spacing:[10,14],alignItems:"flex-start",children:[(0,v.jsxs)(m.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.deposited",textStyle:"titleSmall"}),(0,v.jsxs)(m.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(p.AssetProvider.Deposited,{textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"heading",fontSize:"h3"})]})]}),(0,v.jsxs)(m.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.share",textStyle:"titleSmall"}),(0,v.jsx)(p.AssetProvider.GaugeShare,{minValue:.01,textStyle:"heading",fontSize:"h3"})]}),(0,v.jsxs)(m.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.idleDistribution",textStyle:"titleSmall"}),(0,v.jsxs)(m.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(p.AssetProvider.GaugeUserDistribution,{suffix:" ".concat(null===(t=G.rewardToken)||void 0===t?void 0:t.token),textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(l.Translation,{component:m.xv,translation:["/","common.day"],textStyle:"captionSmall",textTransform:"lowercase"})]})]}),(0,v.jsxs)(m.gC,{spacing:2,justifyContent:"center",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.additionalRewards",textStyle:"titleSmall"}),(0,v.jsx)(m.gC,{spacing:2,children:(null===(e=G.multiRewardsTokens)||void 0===e?void 0:e.length)>0?Object.keys(null===(n=L.gaugeData)||void 0===n?void 0:n.rewards).map((function(t){var e=L.gaugeData.rewards[t];if(t===G.rewardToken.address)return null;var n=U(t);return(0,v.jsxs)(m.Ug,{spacing:1,alignItems:"baseline",children:[(0,v.jsx)(r.Amount,{value:e.rate.times(H),suffix:" ".concat(n.token),textStyle:"heading",fontSize:"h3"}),(0,v.jsx)(l.Translation,{component:m.xv,translation:["/","common.day"],textStyle:"captionSmall",textTransform:"lowercase"})]},"reward_".concat(t))})):(0,v.jsx)(m.xv,{textStyle:"heading",fontSize:"h3",children:"-"})})]})]})}),(0,v.jsxs)(m.gC,{spacing:6,width:"100%",alignItems:"flex-start",children:[(0,v.jsx)(l.Translation,{component:m.X6,as:"h3",size:"md",translation:"defi.rewards"}),(0,v.jsx)(m.gC,{spacing:4,width:"100%",children:(0,u.xb)(null===(h=L.gaugeData)||void 0===h?void 0:h.rewards)?null:Object.keys(null===(j=L.gaugeData)||void 0===j?void 0:j.rewards).map((function(t){var e=L.gaugeData.rewards[t],n=G.getClaimRewardsContractSendMethod(t);return(0,v.jsx)(p.AssetProvider,{wrapFlex:!1,assetId:t,children:(0,v.jsx)(a.Card,{p:6,px:8,width:"100%",children:(0,v.jsxs)(m.Kq,{width:"100%",spacing:[4,0],alignItems:"center",direction:["column","row"],justifyContent:"space-between",children:[(0,v.jsxs)(m.MI,{width:"100%",spacing:[6,0],columns:[2,4],children:[(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.asset",textStyle:"captionSmall"}),(0,v.jsx)(p.AssetProvider.GeneralData,{size:"xs",field:"asset"})]}),(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.apy",textStyle:"captionSmall"}),(0,v.jsx)(r.Amount.Percentage,{textStyle:"tableCell",value:e.apr})]}),(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.dailyDistribution",textStyle:"captionSmall"}),(0,v.jsxs)(m.Ug,{spacing:1,width:"100%",children:[(0,v.jsx)(r.Amount,{textStyle:"tableCell",value:e.rate}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"tableCell"})]})]}),(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(l.Translation,{component:m.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,v.jsxs)(m.Ug,{spacing:1,width:"100%",children:[(0,v.jsx)(r.Amount,{textStyle:"tableCell",value:e.balance}),(0,v.jsx)(p.AssetProvider.Name,{textStyle:"tableCell"})]})]})]}),(0,v.jsx)(f.TransactionButton,{text:"defi.claim",vaultId:F.id,assetId:t,contractSendMethod:n,actionType:"claim",amount:e.balance.toString(),width:["100%","150px"],disabled:e.balance.lte(0)})]})})},"reward_".concat(t))}))})]}),(0,v.jsx)(x.AssetGeneralData,{assetId:null===G||void 0===G?void 0:G.id}),N]})}},98428:function(t,e,n){n.r(e),n.d(e,{IconTab:function(){return x}});var s=n(1413),a=n(7276),i=n(79681),r=n(88089),o=n(96699),l=n(43127),c=n(3498),d=n(70820),u=n(2092),p=n(45263),x=a.forwardRef((function(t,e){var n=(0,i.qM)(),a=(0,r.xD)((0,s.Z)((0,s.Z)({},t),{},{ref:e})),x=(0,o.jC)("Tabs",(0,s.Z)((0,s.Z)({},a),{},{variant:"unstyled"}));return(0,p.jsx)(l.zx,(0,s.Z)((0,s.Z)({background:"transparent",borderRadius:0,__css:x.tab},a),{},{children:(0,p.jsxs)(c.Ug,{spacing:2,width:"full",justifyContent:"center",children:[a.children,t.icon&&(0,p.jsx)(d.u,{hasArrow:!0,placement:"top",label:t.icon.tooltip?n(t.icon.tooltip):"",children:(0,p.jsx)(u.Ee,(0,s.Z)({src:t.icon.src},t.icon.props))})]})}))}))},37658:function(t,e,n){n.r(e),n.d(e,{InteractiveComponent:function(){return x}});var s=n(29439),a=n(7276),i=n(55967),r=n(66288),o=n(15542),l=n(3498),c=n(43127),d=n(18147),u=n(4710),p=n(45263),x=function(t){var e=t.assetId,n=t.vaultId,x=t.actions,f=(0,r.X)().isMobile,m=(0,a.useState)(!1),g=(0,s.Z)(m,2),v=g[0],h=g[1],j=(0,a.useState)(!1),b=(0,s.Z)(j,2),y=b[0],w=b[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l.gC,{left:0,zIndex:[40,0],spacing:[0,6],id:"right-side",width:["100vw","27em"],height:["100vh","auto"],position:["fixed","relative"],top:[v?0:"100vh",0],bg:f?"rgba(0, 0, 0, 0.5)":void 0,sx:f?{transition:"top 0.3s ease-in-out"}:{},children:[(0,p.jsxs)(l.gC,{bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[v?0:"100vh",0],sx:f?{transition:"top 0.3s ease-in-out"}:{},children:[f&&(0,p.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.exit",component:c.zx,leftIcon:(0,p.jsx)(i.sG8,{size:24}),onClick:function(){return h(!1)}}),(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:["common.show","navBar.transactions"],component:c.zx,onClick:function(){return w(!0)}})]}),(0,p.jsx)(u.OperativeComponent,{flex:1,minHeight:f?"auto":"590px",borderRadius:f?0:void 0,assetId:e,actions:x})]}),(0,p.jsxs)(l.gC,{flex:1,bottom:0,spacing:0,width:"100%",height:["100vh","auto"],position:["fixed","relative"],top:[y?0:"100vh",0],sx:f?{transition:"top 0.3s ease-in-out"}:{},children:[f&&(0,p.jsxs)(l.Ug,{px:4,py:2,bg:"card.bg",width:"100%",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(o.Translation,{alignItems:"center",display:"flex",variant:"unstyled",translation:"common.back",component:c.zx,leftIcon:(0,p.jsx)(i.sG8,{size:24}),onClick:function(){return w(!1)}}),(0,p.jsx)(o.Translation,{textStyle:"ctaStatic",translation:"assets.assetDetails.assetHistory.transactionHistory",component:l.xv})]}),(0,p.jsx)(d.TransactionList,{assetIds:[n],fullHeightOnMobile:!0,maxH:["100%",600]})]})]}),f&&(0,p.jsx)(l.kC,{p:4,left:0,bottom:0,border:0,width:"100%",zIndex:[10,0],bg:"card.bgDark",position:"fixed",children:(0,p.jsx)(o.Translation,{component:c.zx,translation:["common.start","common.deposit"],variant:"ctaFull",onClick:function(){return h(!0)}})})]})}},97901:function(t,e,n){n.r(e),n.d(e,{Deposit:function(){return D}});var s=n(74165),a=n(15861),i=n(29439),r=n(5128),o=n(54447),l=n(87099),c=n(4432),d=n(13708),u=n(88935),p=n(61617),x=n(15542),f=n(39177),m=n(1128),g=n(85267),v=n(1669),h=n(7276),j=n(23023),b=n(43127),y=n(3498),w=n(2092),S=n(78951),C=n(4710),A=n(66624),I=n(86393),T=n(75712),k=n(99594),M=n(45263),D=function(t){var e=t.itemIndex,n=(0,h.useState)(""),D=(0,i.Z)(n,2),Z=D[0],P=D[1],E=(0,h.useState)("0"),U=(0,i.Z)(E,2),z=U[0],_=U[1],B=(0,h.useState)(0),F=(0,i.Z)(B,2),G=F[0],L=F[1],O=(0,u.Y)().account,R=(0,g.m)().searchParams,N=(0,j.R)(),H=N.sendTransaction,V=N.setGasLimit,W=N.state.transaction,q=(0,v.w)().selectors,K=q.selectAssetPriceUsd,X=q.selectAssetBalance,Q=(0,T.useAssetProvider)(),Y=Q.asset,$=Q.vault,J=Q.underlyingAsset,tt=Q.translate,et=(0,C.useOperativeComponent)(),nt=et.dispatch,st=et.activeItem,at=et.activeStep,it=et.executeAction,rt=et.setActionIndex,ot=(0,h.useMemo)((function(){return R}),[R]),lt=(0,i.Z)(ot,1)[0],ct=(0,h.useMemo)((function(){var t;return $&&"flags"in $&&(null===(t=$.flags)||void 0===t?void 0:t.referralEnabled)}),[$]),dt=(0,h.useMemo)((function(){var t;return $&&"flags"in $&&(null===(t=$.flags)||void 0===t?void 0:t.depositsDisabled)}),[$]),ut=(0,h.useMemo)((function(){if(ct){var t=lt.get("_referral");if((0,k.fF)(t)&&t!==l.r_)return t}}),[ct,lt]),pt=(0,h.useMemo)((function(){return X?X(null===J||void 0===J?void 0:J.id):(0,k.gA)(0)}),[X,null===J||void 0===J?void 0:J.id]);(0,h.useEffect)((function(){if(K&&J){var t=K(J.id),e=parseFloat((0,k.gA)(z).times(t).toString())||0;L(e)}}),[J,z,K,nt]),(0,h.useEffect)((function(){it||at!==e||"success"!==W.status||_("")}),[it,W.status,at,e]);var xt=(0,h.useMemo)((function(){return $&&(!("enabled"in $)||$.enabled)}),[$]),ft=(0,h.useMemo)((function(){return P(""),!(xt&&!dt&&"paused"!==(null===Y||void 0===Y?void 0:Y.status))||(!(!(0,k.gA)(z).isNaN()&&!(0,k.gA)(z).lte(0))||!!(0,k.gA)(z).gt(pt)&&(P(tt("trade.errors.insufficientFundsForAmount",{symbol:null===J||void 0===J?void 0:J.name})),!0))}),[Y,z,xt,dt,pt,J,tt]),mt=(0,h.useCallback)((0,a.Z)((0,s.Z)().mark((function t(){var e,n,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(J&&$&&"getAllowanceContract"in $){t.next=2;break}return t.abrupt("return",(0,k.gA)(0));case 2:if(null!==O&&void 0!==O&&O.address){t.next=4;break}return t.abrupt("return",(0,k.gA)(0));case 4:if(e=$.getAllowanceContract()){t.next=7;break}return t.abrupt("return",(0,k.gA)(0));case 7:return n=(0,k.WP)($),t.next=10,(0,k.RC)(e,O.address,n);case 10:return a=t.sent,t.abrupt("return",(0,k.I0)(a,J.decimals));case 12:case"end":return t.stop()}}),t)}))),[J,$,null===O||void 0===O?void 0:O.address]),gt=(0,h.useCallback)((function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];O&&!ft&&$&&"getDepositContractSendMethod"in $&&"getDepositParams"in $&&(0,a.Z)((0,s.Z)().mark((function e(){var n,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,mt();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=(0,k.gA)(z);case 7:e.t0.gte(z)?(a=ut&&"flags"in $&&null!==(n=$.flags)&&void 0!==n&&n.referralEnabled?$.getDepositParams(z,ut):$.getDepositParams(z),i=$.getDepositContractSendMethod(a),(0,d.tM)(Y,G),H($.id,null===J||void 0===J?void 0:J.id,i)):nt({type:"SET_ACTIVE_STEP",payload:1});case 9:case"end":return e.stop()}}),e)})))()}),[O,ft,ut,z,G,$,Y,J,nt,mt,H]),vt=(0,h.useCallback)((function(){null!==J&&void 0!==J&&J.balance&&_(J.balance.toString())}),[J]),ht=(0,h.useCallback)((0,a.Z)((0,s.Z)().mark((function t(){var e,n,a,i,o,l,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($&&"getDepositContractSendMethod"in $&&"getDepositParams"in $){t.next=2;break}return t.abrupt("return");case 2:return e=$.getMethodDefaultGasLimit("deposit"),t.next=5,mt();case 5:if(n=t.sent,O&&!pt.lte(0)&&!n.lte(0)){t.next=8;break}return t.abrupt("return",e);case 8:return a=r.Z.minimum(pt,n),i={from:null===O||void 0===O?void 0:O.address},o=$.getDepositParams(a.toFixed()),l=$.getDepositContractSendMethod(o),t.next=14,(0,k.$K)(l,i);case 14:if(t.t0=t.sent,t.t0){t.next=17;break}t.t0=e;case 17:return c=t.t0,t.abrupt("return",c);case 19:case"end":return t.stop()}}),t)}))),[O,$,mt,pt]);(0,h.useEffect)((function(){st===e&&(0,a.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht();case 2:e=t.sent,V(e);case 4:case"end":return t.stop()}}),t)})))()}),[st,e,ht,V]),(0,h.useEffect)((function(){st===e&&(nt({type:"SET_AMOUNT",payload:z}),nt({type:"SET_DEFAULT_AMOUNT",payload:z}),nt({type:"SET_ASSET",payload:J}),it&&(gt(!1),nt({type:"SET_EXECUTE_ACTION",payload:!1})))}),[z,st,J,e,nt,it,gt]);var jt=(0,h.useMemo)((function(){return O?(0,M.jsx)(x.Translation,{component:b.zx,translation:"common.deposit",disabled:ft,onClick:gt,variant:"ctaFull"}):(0,M.jsx)(I.ConnectWalletButton,{variant:"ctaFull"})}),[O,ft,gt]),bt=(0,h.useMemo)((function(){return ut?(0,M.jsx)(o.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,M.jsxs)(y.gC,{spacing:1,children:[(0,M.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"defi.depositWithReferral"}),(0,M.jsx)(f.AddressLink,{address:ut,text:ut,fontSize:"sm"})]})}):null}),[ut]),yt=(0,h.useMemo)((function(){return!xt&&pt.gt(0)?(0,M.jsx)(o.Card.Dark,{py:2,pl:3,pr:2,border:0,children:(0,M.jsxs)(y.Ug,{spacing:3,width:"full",children:[(0,M.jsx)(w.Ee,{src:"".concat(c.pm,"vaults/deprecated.png"),width:6,height:6}),(0,M.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"trade.vaults.".concat(null===Y||void 0===Y?void 0:Y.type,".disabled"),textAlign:"left"}),(0,M.jsx)(x.Translation,{component:b.zx,translation:"trade.vaults.".concat(null===Y||void 0===Y?void 0:Y.type,".disabledCta"),fontSize:"xs",height:"auto",width:"auto",py:3,px:7,onClick:function(){return rt(1)}})]})}):Y&&"production"!==(null===Y||void 0===Y?void 0:Y.status)&&(0,M.jsx)(o.Card.Dark,{p:2,border:0,children:(0,M.jsx)(y.gC,{spacing:2,width:"full",justifyContent:"center",children:(0,M.jsx)(x.Translation,{textStyle:"captionSmaller",translation:"trade.actions.deposit.messages.".concat(Y.status),textAlign:"center"})})})}),[Y,xt,pt,rt]);return(0,M.jsx)(T.AssetProvider,{flex:1,width:"100%",assetId:null===Y||void 0===Y?void 0:Y.underlyingId,children:(0,M.jsxs)(y.gC,{pt:8,flex:1,spacing:6,height:"100%",id:"deposit-container",alignItems:"space-between",justifyContent:"flex-start",children:[(0,M.jsxs)(y.gC,{flex:1,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,M.jsxs)(y.Ug,{width:"100%",spacing:[3,4],alignItems:"flex-start",children:[(0,M.jsx)(y.xu,{pt:8,children:(0,M.jsx)(p.AssetLabel,{assetId:null===Y||void 0===Y?void 0:Y.id})}),(0,M.jsxs)(y.gC,{spacing:1,width:"100%",alignItems:"flex-start",children:[(0,M.jsx)(o.Card,{px:4,py:2,layerStyle:"cardLight",children:(0,M.jsxs)(y.gC,{spacing:2,alignItems:"flex-start",children:[(0,M.jsx)(m.InputAmount,{amount:z,amountUsd:G,setAmount:_}),(0,M.jsxs)(y.Ug,{width:"100%",justifyContent:"space-between",children:[(0,M.jsxs)(y.Ug,{spacing:1,children:[(0,M.jsx)(x.Translation,{component:y.xv,translation:"common.balance",textStyle:"captionSmaller"}),(0,M.jsx)(T.AssetProvider.Balance,{abbreviate:!0,decimals:4,textStyle:"captionSmaller",color:"primary"})]}),(0,M.jsx)(b.zx,{variant:"selector",onClick:vt,children:"MAX"})]})]})}),Z&&(0,M.jsx)(y.xv,{textStyle:"captionSmaller",color:"orange",children:Z})]})]}),bt,yt,(0,M.jsx)(A.DynamicActionFields,{assetId:null===Y||void 0===Y?void 0:Y.id,action:"deposit",amount:z,amountUsd:G})]}),(0,M.jsxs)(y.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[(0,M.jsx)(S.EstimatedGasFees,{}),jt]})]})})}},60110:function(t,e,n){n.r(e),n.d(e,{StrategyLabel:function(){return d}});var s=n(1413),a=n(45987),i=(n(7276),n(12056)),r=n(15542),o=n(3498),l=n(45263),c=["strategy","customText","showLabel"],d=function(t){var e=t.strategy,n=t.customText,d=t.showLabel,u=void 0===d||d,p=(0,a.Z)(t,c);if(!e)return null;var x=i.A[e];return x?(0,l.jsxs)(o.Ug,{spacing:2,alignItems:"center",children:[u&&(0,l.jsx)(r.Translation,(0,s.Z)({component:o.xv,translation:n||(null===x||void 0===x?void 0:x.label),textStyle:"ctaStatic"},p)),(0,l.jsx)(o.xu,{width:2,height:2,borderRadius:"50%",bg:x.color})]}):null}}}]);