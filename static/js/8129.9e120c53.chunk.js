"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[8129],{88129:function(e,t,i){i.r(t),i.d(t,{StrategyOverview:function(){return y}});var s=i(29439),n=i(99594),a=i(7276),r=i(86059),l=i(15542),o=i(1669),d=i(9597),u=i(3498),c=i(43127),p=i(89030),f=i(1494),g=i(45263),y=function(e){var t=e.showHeader,i=void 0===t||t,y=e.strategies,x=(0,a.useState)(!0),m=(0,s.Z)(x,2),v=m[0],A=m[1],b=(0,o.w)(),h=b.isVaultsPositionsLoaded,j=b.vaultsPositions,z=(0,f.O)({assetIds:Object.keys(j),strategies:y}).compositions,S=(0,a.useMemo)((function(){return z.strategies.filter((function(e){return y.includes(e.extraData.strategy.type)})).reduce((function(e,t){return e.redeemable=e.redeemable.plus(t.value),e.deposited=e.deposited.plus(t.extraData.deposited),e.realizedApy=e.realizedApy.plus((0,n.gA)(t.extraData.avgRealizedApy).times(t.value)),e}),{deposited:(0,n.gA)(0),redeemable:(0,n.gA)(0),realizedApy:(0,n.gA)(0)})}),[z,y]);return S.realizedApy=S.realizedApy.div(S.redeemable),!h||S.deposited.lte(0)?null:(0,g.jsxs)(u.gC,{spacing:6,alignItems:"flex-start",children:[i&&(0,g.jsxs)(u.Ug,{spacing:2,children:[(0,g.jsx)(l.Translation,{translation:"defi.yourWallet",textStyle:"heading",color:"primary",fontSize:"lg"}),(0,g.jsx)(c.zx,{variant:"unstyled",onClick:function(){return A((function(e){return!e}))},children:v?(0,g.jsx)(d.Zju,{size:24,color:"white"}):(0,g.jsx)(d.I0d,{size:24,color:"white"})})]}),(0,g.jsxs)(u.MI,{spacing:10,columns:3,children:[(0,g.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(l.Translation,{translation:"defi.deposited",textStyle:"captionSmall"}),(0,g.jsx)(p.N2,{noOfLines:2,isLoaded:!!h,minW:"100%",children:(0,g.jsx)(r.Amount.Usd,{value:S.deposited,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:v?{}:{filter:"blur(7px)"}})})]}),(0,g.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(l.Translation,{translation:"defi.earnings",textStyle:"captionSmall"}),(0,g.jsx)(p.N2,{noOfLines:2,isLoaded:!!h,minW:"100%",children:(0,g.jsx)(r.Amount.Usd,{value:S.redeemable.minus(S.deposited),textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:v?{}:{filter:"blur(7px)"}})})]}),(0,g.jsxs)(u.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(l.Translation,{translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,g.jsx)(p.N2,{noOfLines:2,isLoaded:!!h,minW:"100%",children:(0,g.jsx)(r.Amount.Percentage,{value:S.realizedApy,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:v?{}:{filter:"blur(7px)"}})})]})]})]})}},1494:function(e,t,i){i.d(t,{O:function(){return c}});var s=i(93433),n=i(4942),a=i(1413),r=i(7276),l=i(99594),o=i(79681),d=i(12056),u=i(1669),c=function(e){var t=e.assetIds,i=e.strategies,c=(0,o.qM)(),p=(0,u.w)().selectors,f=p.selectAssetById,g=p.selectAssetsByIds,y=(0,r.useMemo)((function(){return g?g(t):[]}),[t,g]),x=Object.keys(d.A).reduce((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t,{balance:(0,l.gA)(0),deposited:(0,l.gA)(0),weightedRealizedApy:(0,l.gA)(0)}))}),{}),m=(0,r.useMemo)((function(){return y.filter((function(e){return e.type&&(!i||i.includes(e.type))})).reduce((function(e,t){var i;return t.type&&t.vaultPosition?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,l.gA)(null===(i=t.vaultPosition)||void 0===i?void 0:i.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),x)}),[y,i,x]),v=(0,r.useMemo)((function(){return y.filter((function(e){return e.type&&(!i||i.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var i=f(t.underlyingId);return i?(e[i.id]||(e[i.id]=(0,l.gA)(0)),e[i.id]=e[i.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[y,i,f]),A={assets:[],strategies:[]};A.strategies=(0,r.useMemo)((function(){return Object.keys(m).map((function(e){return{label:c(d.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:d.A[e],deposited:parseFloat(m[e].deposited)},value:parseFloat(m[e].balance)}}))}),[m,c]),A.assets=(0,r.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var n=f(t);return!n||n.type&&(!i||i.includes(n.type))?e:[].concat((0,s.Z)(e),[{label:n.name,extraData:{asset:n},value:parseFloat(v[t])}])}),[])}),[v,f,i]);var b={assets:{},strategies:{}};return b.strategies=(0,r.useMemo)((function(){return Object.values(d.A).reduce((function(e,t){var i=c(t.label);return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},i,t.color))}),{})}),[c]),b.assets=(0,r.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var i=f(t);if(!i)return e;var s=i.name;return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},s,i.color))}),{})}),[v,f]),{colors:b,compositions:A}}}}]);