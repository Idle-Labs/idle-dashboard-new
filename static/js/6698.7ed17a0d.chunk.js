"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6698,219,9220,745,8024,4389],{86698:function(t,e,n){n.r(e),n.d(e,{AssetStats:function(){return F}});var a=n(1413),i=n(93433),r=n(29439),o=n(40398),s=n(58383),l=n(54447),c=n(79681),d=n(86059),u=n(66288),f=n(29482),h=n(80745),x=n(61617),g=n(3717),m=n(39177),v=n(97778),p=n(85267),j=n(1669),b=n(84389),y=n(6634),C=n(75712),w=n(99594),S=n(7276),A=n(15568),M=n(64011),D=n(18147),Z=n(50026),k=n(61925),T=n(15542),I=n(3498),O=n(24606),P=n(98440),R=n(90219),z=n(68414),U=n(45263),B=function(t){var e=t.translation,n=t.address;return(0,U.jsxs)(I.Ug,{py:4,width:"full",justifyContent:"space-between",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,U.jsx)(T.Translation,{translation:e,textStyle:"tableCell"}),(0,U.jsx)(m.AddressLink,{address:n})]})},F=function(t){var e,n,m,F,_,E,L,H,W,N=t.showHeader,V=void 0===N||N,q=t.assetOnly,K=void 0!==q&&q,X=t.showAssetStrategy,G=void 0!==X&&X,Y=t.timeframe,J=t.dateRange,$=(0,c.qM)(),Q=(0,p.m)().params,tt=(0,u.X)().isMobile,et=(0,S.useState)({startDate:null,endDate:null}),nt=(0,r.Z)(et,2),at=nt[0],it=nt[1],rt=(0,S.useState)(void 0),ot=(0,r.Z)(rt,2),st=ot[0],lt=ot[1],ct=(0,S.useState)(P.W.WEEK),dt=(0,r.Z)(ct,2),ut=dt[0],ft=dt[1],ht=(0,j.w)(),xt=ht.vaults,gt=ht.contracts,mt=ht.selectors,vt=mt.selectAssetById,pt=mt.selectVaultById,jt=mt.selectAssetHistoricalPriceUsdByTimestamp,bt=(0,S.useMemo)((function(){return!!at.startDate&&!!at.endDate}),[at]);(0,S.useEffect)((function(){bt&&ft(void 0)}),[bt,ft]),(0,S.useEffect)((function(){ut&&it({endDate:null,startDate:null})}),[ut,it]);var yt=(0,S.useMemo)((function(){return Q.asset&&vt&&vt(Q.asset)}),[vt,Q.asset]),Ct=(0,S.useMemo)((function(){return Q.asset&&pt&&pt(Q.asset)}),[pt,Q.asset]),wt=(0,S.useMemo)((function(){return yt&&o.A2[yt.type]}),[yt]),St=(0,S.useMemo)((function(){return wt&&wt.color}),[wt]),At=(0,S.useMemo)((function(){if(null!==yt&&void 0!==yt&&yt.type)return G?[yt.type]:["AA","BB"].includes(yt.type)?["AA","BB"]:[yt.type]}),[yt,G]);(0,S.useEffect)((function(){At&&!st&&lt(At)}),[st,At,lt]);var Mt=(0,S.useMemo)((function(){if(!Ct||null===yt||void 0===yt||!yt.type||!xt.length)return[];if(K)return[yt.id];switch(yt.type){case"AA":case"BB":var t=(0,w.sj)(["AA","BB"],yt.type)[0],e=xt.find((function(e){return e&&"cdoConfig"in e&&"cdoConfig"in Ct&&e.type===t&&e.cdoConfig.address===Ct.cdoConfig.address}));return[yt.id,null===e||void 0===e?void 0:e.id];default:return[yt.id]}}),[yt,Ct,xt,K]),Dt=(0,S.useMemo)((function(){return Y||ut}),[ut,Y]),Zt=(0,S.useMemo)((function(){return J||at}),[at,J]),kt="BY"===(null===yt||void 0===yt?void 0:yt.type),Tt=(0,O.U)({assetIds:Mt}),It=Tt.allocations,Ot=Tt.colors,Pt=Tt.labels,Rt=(0,A.h)({assetIds:Mt,timeframe:Dt,dateRange:Zt}).rateChartData,zt=(0,Z.D)({assetIds:Mt,timeframe:Dt,dateRange:Zt}).volumeChartData,Ut=function(t){var e=t.assetIds,n=t.dateRange,a=t.timeframe,i=t.useDollarConversion,o=void 0===i||i,s=(0,S.useState)(!0),l=(0,r.Z)(s,2),c=l[0],d=l[1],u=(0,j.w)(),f=u.historicalTvls,h=u.selectors,x=h.selectAssetsByIds,g=h.selectAssetHistoricalTvls,m=h.selectAssetHistoricalTvlsUsd,v=(0,S.useMemo)((function(){return x?x(e):[]}),[e,x]),p=(0,S.useMemo)((function(){return(0,w.yb)(a,n)}),[a,n]),b=(0,r.Z)(p,2),y=b[0],C=b[1],A=(0,S.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(f).length)return t;var e=v.reduce((function(e,n,a){if(!n.id)return e;var i=o?m(n.id):g(n.id);return i?(i.forEach((function(i){var r=i.date;if(!(r<y||C&&r>C)){var o=i.value;e[r]||(e[r]={date:r,total:0}),n.id&&(e[r][n.id]=o,a||t.total.push({date:r,value:o}))}})),e):e}),{});return t.rainbow=Object.values(e),t}),[v,o,f,g,m,y,C]);return(0,S.useEffect)((function(){if(A.rainbow.length)return d(!1),function(){d(!0)}}),[A]),{assets:v,tvlChartData:A,tvlChartDataLoading:c}}({assetIds:Mt,timeframe:Dt,dateRange:Zt}),Bt=Ut.tvlChartData,Ft=(0,z.C)({useRates:kt,assetIds:Mt,timeframe:Dt,dateRange:Zt}).performanceChartData,_t=(0,S.useMemo)((function(){var t;return null!==Rt&&void 0!==Rt&&null!==(t=Rt.rainbow)&&void 0!==t&&t.length?(0,U.jsx)(I.Ug,{spacing:4,width:"full",children:Mt.map((function(t){var e=vt(t),n=o.A2[e.type].color,a=Rt.rainbow.reduce((function(t,n){return(0,w.gA)(n[e.id]).gt(9999)?t:t.plus(n[e.id])}),(0,w.gA)(0)).div(Rt.rainbow.length);return(0,U.jsxs)(I.Ug,{spacing:1,alignItems:"baseline",children:[(0,U.jsx)(d.Amount.Percentage,{textStyle:"heading",fontSize:"lg",color:n,value:a}),(0,U.jsx)(T.Translation,{translation:"defi.avgApy",fontSize:"sm",color:"cta"})]},"asset_".concat(t))}))}):null}),[Mt,vt,Rt]),Et=(0,S.useMemo)((function(){return Mt.reduce((function(t,e){var n=vt(e);return n?t.plus(n.tvlUsd):t}),(0,w.gA)(0))}),[Mt,vt]),Lt=(0,S.useMemo)((function(){var t={data:[],colors:{}};if(!Mt)return t;if("best"===(null===wt||void 0===wt?void 0:wt.strategy)){var e=t;return Object.keys(It).forEach((function(t){var n=(0,s.iL)(t),a=(0,w.gA)(It[t]),i=Et.times(a.div(100));e.colors[t]=Ot[t],e.data.push({value:parseFloat(i.toFixed(2)),label:t,extraData:{icon:null===n||void 0===n?void 0:n.icon,color:Ot[t],label:Pt[t]}})})),e}return Mt.reduce((function(t,e){var n=vt(e);return n?(t.colors[e]=o.A2[n.type].color,t.data.push({value:parseFloat((0,w.gA)(n.tvlUsd).toFixed(2)),label:n.id,extraData:{asset:n}}),t):t}),t)}),[Et,Mt,wt,vt,It,Ot,Pt]),Ht=(0,S.useCallback)((function(t){var e,n,a,i,r=Lt.data.reduce((function(t,e){return t.plus(e.value)}),(0,w.gA)(0)),s=function(t){return"$".concat((0,w.dm)(t))},l=null===t||void 0===t||null===(e=t.extraData)||void 0===e?void 0:e.asset,c=null===t||void 0===t||null===(n=t.extraData)||void 0===n?void 0:n.icon,d=null===t||void 0===t||null===(a=t.extraData)||void 0===a?void 0:a.label,u=null===t||void 0===t||null===(i=t.extraData)||void 0===i?void 0:i.color,f=c||(null===l||void 0===l?void 0:l.icon)||(null===yt||void 0===yt?void 0:yt.icon),h=d||$(l?o.A2[l.type].label:"dashboard.portfolio.totalChart"),x=s(t?t.value:r),g=u||(l?o.A2[null===l||void 0===l?void 0:l.type].color:"#ffffff");return(0,U.jsxs)(U.Fragment,{children:[f&&(0,U.jsx)("image",{y:"35%",href:f,height:"34",width:"34",textAnchor:"middle",x:tt?"44.5%":"46.5%"}),(0,U.jsx)("text",{x:"50%",y:"54%",fontSize:26,fill:"white",fontWeight:700,textAnchor:"middle",pointerEvents:"none",children:x}),(0,U.jsx)("text",{x:"50%",y:"61%",fill:g,fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",children:h})]})}),[Lt,yt,$,tt]),Wt=(0,S.useMemo)((function(){return Rt.total.reduce((function(t,e){return(0,w.gA)(e.value).gt(9999)?t:t.plus(e.value)}),(0,w.gA)(0)).div(Rt.total.length)}),[Rt]),Nt=(0,S.useMemo)((function(){var t=Rt.rainbow.reduce((function(t,e){return Mt.forEach((function(n){t[n]||(t[n]=(0,w.gA)(0)),t[n]=t[n].plus(e[n])})),t}),{});return Object.keys(t).reduce((function(e,n){return e[n]=t[n].div(Rt.rainbow.length),e}),{})}),[Mt,Rt]),Vt=(0,S.useMemo)((function(){return zt.total.reduce((function(t,e){return t.plus(Math.abs(e.value))}),(0,w.gA)(0))}),[zt]),qt=(0,S.useMemo)((function(){return(0,w.yb)(Dt,at)}),[Dt,at]),Kt=(0,r.Z)(qt,2),Xt=Kt[0],Gt=Kt[1],Yt=(0,S.useMemo)((function(){var t=Mt.reduce((function(t,e){var n=vt(e);if(!n||!n.collectedFees)return t;var a=n.collectedFees.map((function(t){t.amountUsd=t.underlyingAmount;var e=jt(t.assetId,(0,w.kZ)(1e3*+t.timeStamp));return null!==e&&void 0!==e&&e.value&&(t.amountUsd=t.amountUsd.times(e.value)),t}));return[].concat((0,i.Z)(t),(0,i.Z)(a))}),[]);return t.filter((function(t){return 1e3*+t.timeStamp>=Xt&&(!Gt||1e3*+t.timeStamp<=Gt)}))}),[Mt,vt,jt,Xt,Gt]),Jt=(0,S.useMemo)((function(){return Yt.reduce((function(t,e){return t.plus((0,w.d5)(e.amountUsd))}),(0,w.gA)(0))}),[Yt]),$t=(0,S.useMemo)((function(){var t,e=[];if(Ct&&"tranches"===(null===wt||void 0===wt?void 0:wt.strategy))e.push({address:Ct.cdoConfig.address,translation:"about.cdo"}),e.push({address:Ct.strategyConfig.address,translation:"about.strategy"});if(Mt.forEach((function(t){var n=vt(t);if(!n)return null;e.push({address:n.id,translation:["about.".concat(n.type)]})})),null===wt||void 0===wt||null===(t=wt.feesCollectors)||void 0===t||t.forEach((function(t){e.push({address:t,translation:"about.feeCollector"})})),"BY"===(null===yt||void 0===yt?void 0:yt.type)){var n=gt.find((function(t){return"Timelock"===t.name}));n&&e.push({address:n.id,translation:"about.timelock"});var i=gt.find((function(t){return"GovernorBravo"===t.name}));i&&e.push({address:i.id,translation:"about.governance"})}return e.map((function(t,e){return(0,U.jsx)(B,(0,a.Z)({},t),e)}))}),[Mt,wt,vt,yt,Ct,gt]),Qt=(0,S.useMemo)((function(){return(0,U.jsxs)(I.MI,{spacing:4,width:"full",columns:[1,4],children:[(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"defi.tvl",textStyle:"captionSmall"}),(0,U.jsx)(d.Amount.Usd,{value:Et,textStyle:"ctaStatic",fontSize:"xl"})]}),"tranches"===(null===wt||void 0===wt?void 0:wt.strategy)?(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"defi.apyRatio",textStyle:"captionSmall"}),(0,U.jsx)(I.Ug,{spacing:5,children:Mt.map((function(t){var e=vt(t);return e?(0,U.jsx)(C.AssetProvider,{assetId:t,wrapFlex:!1,children:(0,U.jsx)(C.AssetProvider.ApyRatio,{textStyle:"ctaStatic",color:Mt.length>1?"strategies.".concat(null===e||void 0===e?void 0:e.type):"primary",fontSize:"xl"})},"asset_".concat(t)):null}))})]}):(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall"}),(0,U.jsx)(d.Amount.Percentage,{value:Wt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"stats.totalVolume",textStyle:"captionSmall"}),(0,U.jsx)(d.Amount.Usd,{value:Vt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"stats.collectedFees",textStyle:"captionSmall"}),(0,U.jsx)(v.TokenAmount,{assetId:null===yt||void 0===yt?void 0:yt.id,amount:Jt,showIcon:!1,textStyle:"ctaStatic",fontSize:"xl"})]})]})}),[Et,Wt,Vt,Mt,yt,Jt,vt,wt]);return(0,U.jsx)(C.AssetProvider,{assetId:Q.asset,wrapFlex:!1,children:(0,U.jsxs)(I.gC,{spacing:16,width:"full",children:[V&&(0,U.jsxs)(I.Kq,{mt:14,width:"100%",spacing:[4,10],alignItems:["flex-start","center"],justifyContent:"flex-start",direction:["column","row"],children:[(0,U.jsx)(x.AssetLabel,{assetId:Q.asset,fontSize:"h2"}),(0,U.jsxs)(I.Kq,{pb:3,flex:1,spacing:[4,0],width:["full","auto"],borderBottom:"1px solid",borderColor:"divider",justifyContent:"space-between",direction:["column","row"],alignItems:["flex-start","center"],children:[(0,U.jsxs)(I.Ug,{spacing:6,width:["full","auto"],justifyContent:"flex-start",children:[(0,U.jsxs)(I.Ug,{spacing:0,position:"relative",children:[(0,U.jsx)(f.ProductTag,{type:null===wt||void 0===wt?void 0:wt.strategy,py:2}),(0,U.jsx)(I.kC,{top:"-12px",right:"-12px",position:"absolute",children:(0,U.jsx)(C.AssetProvider.Strategies,{})})]}),null===wt||void 0===wt||null===(e=wt.stats)||void 0===e||null===(n=e.header)||void 0===n||null===(m=n.fields)||void 0===m?void 0:m.map((function(t){return(0,U.jsx)(C.AssetProvider.GeneralData,{field:t,color:"cta"},"field_".concat(t))}))]}),(0,U.jsxs)(I.Kq,{spacing:2,width:["full","auto"],direction:["column","row"],justifyContent:["flex-start","center"],children:[(0,U.jsx)(k.TimeframeSelector,{variant:"button",timeframe:ut,setTimeframe:ft,width:["100%","auto"],justifyContent:["center","initial"]}),(0,U.jsx)(g.DatePicker,{selected:bt,setDateRange:it})]})]})]}),Qt,!K&&"tranches"===(null===wt||void 0===wt?void 0:wt.strategy)&&(0,U.jsx)(I.MI,{spacing:4,width:"full",columns:[1,2],children:Mt.map((function(t){var e,n,a=vt(t);return a?(0,U.jsx)(C.AssetProvider,{wrapFlex:!1,assetId:null===a||void 0===a?void 0:a.id,children:(0,U.jsxs)(I.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:o.A2[null===a||void 0===a?void 0:a.type].label,textStyle:"ctaStatic",fontWeight:600,fontSize:"lg"}),(0,U.jsxs)(I.MI,{spacing:4,columns:2,width:"full",children:[(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall"}),(0,U.jsx)(d.Amount.Percentage,{value:Nt[t],textStyle:"ctaStatic",color:"strategies.".concat(null===a||void 0===a?void 0:a.type),fontSize:"xl"})]}),null===(e=o.A2[null===a||void 0===a?void 0:a.type].stats)||void 0===e||null===(n=e.strategyData)||void 0===n?void 0:n.fields.map((function(t){return(0,U.jsxs)(l.Card,{children:[(0,U.jsx)(T.Translation,{mb:1,translation:"stats.".concat(t),textStyle:"captionSmall"}),(0,U.jsx)(C.AssetProvider.GeneralData,{field:t,textStyle:"ctaStatic",fontSize:"xl"})]},"field_".concat(t))}))]})]})},"row_".concat(t)):null}))}),(0,U.jsxs)(I.gC,{spacing:20,width:"full",children:[(0,U.jsxs)(I.Kq,{spacing:6,width:"full",direction:["column","row"],children:[(0,U.jsxs)(I.gC,{spacing:6,width:["full",2/3],alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:"stats.performances",component:I.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,U.jsxs)(l.Card.Dark,{p:6,children:[Ft&&!(null!==(F=Ft.total)&&void 0!==F&&F.length)&&(0,U.jsx)(I.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,U.jsx)(T.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,U.jsxs)(I.gC,{spacing:4,width:"full",children:[Ft&&(null===(_=Ft.total)||void 0===_?void 0:_.length)>0&&(0,U.jsxs)(I.Ug,{width:"full",justifyContent:"space-between",children:[_t,(0,U.jsx)(M.DownloadCsvData,{chartData:Ft,isRainbowChart:!0,fileName:"performances_".concat(null===yt||void 0===yt?void 0:yt.id,"_").concat(Xt,"_").concat(Gt,".csv")})]}),(0,U.jsx)(y.GenericChart,{percentChange:0,assetIds:Mt,color:St,maxMinEnabled:!0,isRainbowChart:!0,data:Ft,setPercentChange:function(){},timeframe:Dt,height:tt?"300px":"350px",margins:{top:10,right:0,bottom:60,left:0},formatFn:function(t){return"".concat((0,w.dm)(t,8)," ").concat(null===yt||void 0===yt?void 0:yt.name)}})]})]})]}),(0,U.jsxs)(I.gC,{flex:1,spacing:6,width:["full","auto"],alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:"stats.tvlDistribution",component:I.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,U.jsx)(l.Card.Dark,{p:6,flex:1,children:(0,U.jsx)(R.DonutChart,(0,a.Z)((0,a.Z)({},Lt),{},{getSliceData:Ht}))})]})]}),(0,U.jsxs)(I.MI,{spacing:6,width:"full",columns:[1,3],children:[(0,U.jsxs)(I.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:"defi.tvl",component:I.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,U.jsxs)(l.Card.Dark,{p:6,flex:1,children:[Bt&&!(null!==(E=Bt.total)&&void 0!==E&&E.length)&&(0,U.jsx)(I.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,U.jsx)(T.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,U.jsx)(y.GenericChart,{percentChange:0,assetIds:Mt,maxMinEnabled:!0,isRainbowChart:!0,color:St,data:Bt,setPercentChange:function(){},timeframe:Dt,height:tt?"300px":"350px",margins:{top:10,right:0,bottom:60,left:0},fileName:Bt&&(null===(L=Bt.total)||void 0===L?void 0:L.length)>0?"tvls_".concat(null===yt||void 0===yt?void 0:yt.id,"_").concat(Xt,"_").concat(Gt,".csv"):null})]})]}),(0,U.jsxs)(I.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:"defi.apy",component:I.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,U.jsxs)(l.Card.Dark,{p:6,flex:1,children:[Rt&&!(null!==(H=Rt.total)&&void 0!==H&&H.length)&&(0,U.jsx)(I.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,U.jsx)(T.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,U.jsx)(y.GenericChart,{percentChange:0,assetIds:Mt,data:Rt,color:St,maxMinEnabled:!0,isRainbowChart:!0,setPercentChange:function(){},timeframe:Dt,height:tt?"300px":"350px",formatFn:function(t){return"".concat((0,w.rp)(t))},margins:{top:10,right:0,bottom:60,left:0},fileName:Rt&&(null===(W=Rt.total)||void 0===W?void 0:W.length)>0?"rates_".concat(null===yt||void 0===yt?void 0:yt.id,"_").concat(Xt,"_").concat(Gt,".csv"):null})]})]}),(0,U.jsxs)(I.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(T.Translation,{translation:"stats.volumes",component:I.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,U.jsx)(l.Card.Dark,{p:6,flex:1,children:(0,U.jsxs)(I.gC,{flex:1,spacing:4,width:"full",height:"full",alignItems:"flex-end",children:[(0,U.jsx)(M.DownloadCsvData,{chartData:zt,isRainbowChart:!0,fileName:"volumes_".concat(null===yt||void 0===yt?void 0:yt.id,"_").concat(Xt,"_").concat(Gt,".csv")}),(0,U.jsx)(b.VolumeChart,{assetIds:Mt,dateRange:at,timeframe:Dt})]})})]})]})]}),(0,U.jsxs)(I.MI,{width:"full",spacing:6,columns:[1,2],children:[(0,U.jsx)(D.TransactionList,{assetIds:Mt,transactions:Yt,showTitleOnMobile:!0,title:"stats.collectedFees",emptyText:"stats.collectedFeesEmpty",maxH:600}),(0,U.jsx)(l.Card,{children:(0,U.jsxs)(I.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,U.jsx)(T.Translation,{component:l.Card.Heading,translation:"common.about"}),(0,U.jsx)(h.Scrollable,{maxH:600,children:$t})]})})]})]})})}},3717:function(t,e,n){n.r(e),n.d(e,{DatePicker:function(){return m}});var a=n(29439),i=(n(89822),n(4550)),r=n.n(i),o=n(55967),s=n(7276),l=n(66288),c=n(15542),d=n(58942),u=n(7630),f=n(43127),h=n(3498),x=(n(82237),n(36358),n(51499)),g=n(45263),m=function(t){var e=t.selected,n=void 0!==e&&e,i=t.setDateRange,m=void 0===i?function(){}:i,v=(0,l.X)().isMobile,p=(0,u.qY)(),j=p.isOpen,b=p.onOpen,y=p.onClose,C=(0,s.useState)("startDate"),w=(0,a.Z)(C,2),S=w[0],A=w[1],M=(0,s.useState)({startDate:null,endDate:null}),D=(0,a.Z)(M,2),Z=D[0],k=D[1],T=(0,s.useCallback)((function(t){return A(t||"startDate")}),[A]),I=(0,s.useCallback)((function(){return m(Z),y()}),[y,Z,m]);return(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(f.zx,{px:4,border:0,textStyle:"cta",variant:"filter","aria-selected":n,leftIcon:(0,g.jsx)(o.kVv,{}),onClick:function(){return b()},children:(0,g.jsxs)(h.Ug,{spacing:2,alignItems:"center",children:[(0,g.jsx)(c.Translation,{translation:"common.calendar"}),n&&(0,g.jsx)(h.xu,{width:2,height:2,bg:"cta",borderRadius:"50%"})]})}),(0,g.jsxs)(x.u_,{size:"2xl",isOpen:j,onClose:y,isCentered:!v,blockScrollOnMount:!1,children:[(0,g.jsx)(x.ZA,{}),(0,g.jsxs)(x.hz,{children:[(0,g.jsx)(c.Translation,{component:x.xB,translation:"stats.selectDateRange",textStyle:"heading",fontSize:"md",color:"cta"}),(0,g.jsx)(x.ol,{}),(0,g.jsx)(x.fe,{children:(0,g.jsx)(d.DayPickerRangeController,{endDate:Z.endDate,maxDate:r()(),focusedInput:S,startDate:Z.startDate,numberOfMonths:v?1:2,renderKeyboardShortcutsButton:function(){return null},onDatesChange:function(t){return k(t)},initialVisibleMonth:function(){return r()().subtract(1,"M")},isDayBlocked:function(t){return t.isAfter(r()())},onFocusChange:function(t){return T(t)}})}),(0,g.jsx)(x.mz,{children:(0,g.jsx)(h.kC,{width:"full",justifyContent:"center",children:(0,g.jsx)(c.Translation,{component:f.zx,translation:"common.apply",variant:"ctaPrimary",px:10,onClick:I})})})]})]})]})}},90219:function(t,e,n){n.r(e),n.d(e,{DonutChart:function(){return j},PieChart:function(){return g}});var a=n(45987),i=n(1413),r=n(29439),o=n(14380),s=n(7276),l=n(28547),c=n(87563),d=n(68165),u=n(77806),f=n(45263),h=["data","colors","getSliceData"],x={top:0,right:0,bottom:0,left:0};function g(t){var e=t.data,n=t.colors,a=t.width,c=t.height,d=t.margin,h=void 0===d?x:d,g=t.donutThickness,m=void 0===g?30:g,v=t.animate,j=void 0===v||v,b=t.getSliceData,y=(0,s.useState)(null),C=(0,r.Z)(y,2),w=C[0],S=C[1],A=a-h.left-h.right,M=c-h.top-h.bottom,D=Math.min(A,M)/2,Z=M/2,k=A/2,T=e.map((function(t){return t.label})),I=T.map((function(t){return n[t]})),O=(0,l.Z)({domain:T,range:I}),P=b&&b(w);return(0,f.jsxs)("svg",{width:a,height:c,children:[(0,f.jsx)("rect",{rx:14,width:a,height:c,fill:"url('#visx-pie-gradient')"}),P,(0,f.jsx)(o.Z,{top:Z+h.top,left:k+h.left,children:(0,f.jsx)(u.Z,{padAngle:0,cornerRadius:0,pieValue:function(t){return t.value},outerRadius:D,innerRadius:D-m,data:e,children:function(t){return(0,f.jsx)(p,(0,i.Z)((0,i.Z)({},t),{},{animate:j,onMouseOver:function(t){var e=t.data;return S(e)},getKey:function(t){return t.data.label},onMouseOut:function(){return S(null)},getColor:function(t){return O(t.data.label)}}))}})})]})}var m=function(t){var e=t.endAngle;return{startAngle:e>Math.PI?2*Math.PI:0,endAngle:e>Math.PI?2*Math.PI:0,opacity:0}},v=function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,opacity:1}};function p(t){var e=t.animate,n=t.arcs,a=t.path,r=t.getKey,o=t.getColor,s=t.onMouseOut,l=t.onMouseOver,c=t.onClickDatum;return(0,d.useTransition)(n,{from:e?m:v,enter:v,update:v,leave:e?m:v,keys:r})((function(t,e){return(0,f.jsx)("g",{children:(0,f.jsx)(d.animated.path,{d:(0,d.interpolate)([t.startAngle,t.endAngle],(function(t,n){return a((0,i.Z)((0,i.Z)({},e),{},{startAngle:t,endAngle:n}))})),fill:o(e),onClick:function(){return c&&c(e)},onMouseOver:function(){return l&&l(e)},onMouseOut:function(){return s&&s(e)},onTouchStart:function(){return c&&c(e)}})},Math.random())}))}var j=function(t){var e=t.data,n=t.colors,r=t.getSliceData,o=(0,a.Z)(t,h);return(0,f.jsx)(c.Z,{debounceTime:10,children:function(t){return(0,f.jsx)(g,(0,i.Z)({data:e,colors:n,width:t.width,height:t.height,getSliceData:r},o))}})}},9220:function(t,e,n){n.r(e),n.d(e,{HistogramChart:function(){return H}});var a=n(1413),i=n(93433),r=n(57118),o=n(99594),s=n(14380),l=n(7276),c=n(84033),d=n.n(c),u=n(64625),f=n(46177),h=n(97862),x=n(57478),g=n(25908),m=n(12528),v=n(23369),p=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},j.apply(this,arguments)}function b(t){var e=t.data,n=t.className,a=t.top,i=t.left,r=t.x,o=t.y0,c=void 0===o?f.l8:o,b=t.y1,y=void 0===b?f.xf:b,C=t.xScale,w=t.yScale,S=t.color,A=t.keys,M=t.value,D=t.order,Z=t.offset,k=t.children,T=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,p),I=(0,u.Z)();A&&I.keys(A),M&&(0,x.Z)(I.value,M),D&&I.order((0,g.ZP)(D)),Z&&I.offset((0,m.ZP)(Z));var O=I(e),P=(0,h.Z)(C),R=O.map((function(t,e){var n=t.key;return{index:e,key:n,bars:t.map((function(e,a){var i=(w(c(e))||0)-(w(y(e))||0),o=w(y(e)),s="bandwidth"in C?C(r(e.data)):Math.max((C(r(e.data))||0)-P/2);return{bar:e,key:n,index:a,height:i,width:P,x:s||0,y:o||0,color:S(t.key,a)}}))}}));return k?l.createElement(l.Fragment,null,k(R)):l.createElement(s.Z,{className:d()("visx-bar-stack",n),top:a,left:i},R.map((function(t){return t.bars.map((function(e){return l.createElement(v.Z,j({key:"bar-stack-"+t.index+"-"+e.index,x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color},T))}))})))}var y,C=n(79866),w=n(10577),S=n(27091),A=n(87563),M=n(86059),D=n(29564),Z=n(26720),k=n(96699),T=n(3498),I=n(75712),O=n(61168),P=n(5151),R=n(82173),z=n(32802),U=n(20663),B=n(48379),F=n(28547),_=n(45263),E={top:20,left:0,right:0,bottom:35},L=(0,O.Z)((function(t){var e,n=t.data,l=t.colors,c=t.width,d=t.height,u=t.events,f=void 0!==u&&u,h=t.tooltip,x=void 0===h||h,g=t.margin,m=void 0===g?E:g,v=t.tooltipOpen,p=t.tooltipTop,j=t.tooltipData,A=t.hideTooltip,O=t.showTooltip,L=(0,k.Fg)(),H=(0,D.R)().locale,W=function(t){return t.date},N={textAnchor:"middle",fontSize:12,fontWeight:"bold",fill:L.colors.table.axisLabel},V=d-m.top-m.bottom-10,q=c-m.left-m.right,K=Object.keys(l),X=K.map((function(t){return l[t]})),G=n.map((function(t){return t.total})),Y=(0,z.Z)({padding:.2,range:[0,q],domain:n.map(W)}),J=(0,U.Z)({range:[0,q],domain:(0,r.Z)(n,(function(t){return(0,o.qF)(t.date).toDate()}))}),$=Math.max.apply(Math,(0,i.Z)(G.map((function(t){return Math.abs(t)})))),Q=-$,tt=(0,B.Z)({nice:!1,range:[V,0],domain:[Q,$]}),et=(0,F.Z)({domain:K,range:X}),nt=(0,Z.ff)("white",L.colors.card.bg),at=(0,Z.ff)(L.colors.gray[200],L.colors.gray[700]),it=(0,Z.ff)(L.colors.gray[800],"white");return(0,_.jsxs)("div",{style:{position:"relative"},children:[(0,_.jsxs)(S.Z,{width:c,height:d,children:[(0,_.jsx)(s.Z,{top:m.top,children:(0,_.jsx)(b,{data:n,keys:K,x:W,color:et,xScale:Y,yScale:tt,offset:"diverging",children:function(t){return t.map((function(t){return t.bars.map((function(e){return(0,_.jsx)("rect",{x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color,onClick:function(){f&&alert("clicked: ".concat(JSON.stringify(e)))},onMouseLeave:function(){y=window.setTimeout((function(){A()}),300)},onMouseMove:function(t){y&&clearTimeout(y);var n=(0,w.Z)(t),a=e.x+e.width/2;O({tooltipData:e,tooltipTop:null===n||void 0===n?void 0:n.y,tooltipLeft:a})}},"bar-stack-".concat(t.index,"-").concat(e.index))}))}))}})}),(0,_.jsx)(C.Z,{strokeWidth:1,hideTicks:!0,top:V/2+m.top,scale:Y,stroke:"white",tickFormat:function(){return""}}),(0,_.jsx)(C.Z,{hideTicks:!0,hideAxisLine:!0,numTicks:5,scale:J,top:d-m.bottom,tickLabelProps:function(){return N}})]}),x&&v&&j&&(0,_.jsx)(P.Z,{top:p,left:j.x,style:(0,a.Z)((0,a.Z)({},R.j),{},{border:"none",backgroundColor:"transparent",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0}),children:(0,_.jsxs)(T.gC,{p:2,spacing:3,width:"full",alignItems:"flex-start",borderRadius:"lg",borderColor:at,borderWidth:1,color:it,bgColor:nt,children:[(0,_.jsx)(T.gC,{spacing:4,width:"full",alignItems:"flex-start",children:Object.keys(j.bar.data).filter((function(t){return!["date","total"].includes(t)})).map((function(t){return(0,_.jsxs)(T.gC,{spacing:2,width:"full",alignItems:"flex-start",children:[(0,_.jsx)(I.AssetProvider,{assetId:t,children:(0,_.jsxs)(T.Ug,{spacing:1,children:[(0,_.jsx)(I.AssetProvider.Icon,{size:"2xs"}),(0,_.jsx)(I.AssetProvider.Name,{fontWeight:"bold"}),(0,_.jsx)(I.AssetProvider.Strategy,{color:"gray.500",fontWeight:"bold",prefix:"(",suffix:")"})]})}),(0,_.jsx)(M.Amount.Usd,{abbreviate:!1,fontWeight:"bold",fontSize:"md",value:j.bar.data[t],color:et(t)})]},t)}))}),(0,_.jsx)(T.xv,{fontSize:"xs",color:L.colors.gray[500],children:(e=j.bar.data,(0,o.qF)(W(e)).locale(H).format("LLL"))})]})},Math.random())]})})),H=function(t){var e=t.data,n=t.colors,a=t.labels,i=t.tooltip;return(0,_.jsx)(A.Z,{debounceTime:10,children:function(t){return(0,_.jsx)(L,{width:t.width,height:t.height,data:e,tooltip:i,colors:n,labels:a})}})}},80745:function(t,e,n){n.r(e),n.d(e,{Scrollable:function(){return l}});var a=n(1413),i=n(45987),r=(n(7276),n(3498)),o=n(45263),s=["children"],l=function(t){var e=t.children,n=(0,i.Z)(t,s);return(0,o.jsx)(r.kC,(0,a.Z)((0,a.Z)({flex:1,width:"100%",overflowY:"auto",overflowX:"hidden",direction:"column",alignItems:"flex-start"},n),{},{children:e}))}},48024:function(t,e,n){n.r(e),n.d(e,{TransactionItem:function(){return u}});var a=n(99594),i=n(87099),r=n(86059),o=n(3498),s=n(97778),l=n(15542),c=n(10658),d=n(45263),u=function(t){var e=t.transaction;return(0,d.jsxs)(o.gC,{mb:2,pb:4,spacing:4,width:"100%",alignItems:"flex-start",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,d.jsxs)(o.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsx)(o.Ug,{spacing:3,direction:"row",alignItems:"center",children:(0,d.jsx)(l.Translation,{component:o.xv,translation:"transactionRow.".concat(e.action),textStyle:"captionSmall"})}),(0,d.jsx)(o.xv,{textStyle:"captionSmall",children:(0,a.p6)(1e3*+e.timeStamp,i.Cu)})]}),(0,d.jsxs)(o.Ug,{width:"100%",justifyContent:"space-between",children:[(0,d.jsxs)(o.Ug,{spacing:1,alignItems:"center",children:[(0,d.jsx)(s.TokenAmount,{assetId:e.assetId,amount:e.underlyingAmount,size:"xs",textStyle:"tableCell"}),e.amountUsd&&!(0,a.gA)(e.amountUsd).eq(e.underlyingAmount)&&(0,d.jsx)(r.Amount.Usd,{prefix:"~",value:e.amountUsd,color:"cta",fontSize:"xs"})]}),(0,d.jsx)(c.TransactionLink,{hash:e.hash})]})]})}},18147:function(t,e,n){n.r(e),n.d(e,{TransactionList:function(){return b}});var a=n(1413),i=n(93433),r=n(29439),o=n(45987),s=n(99594),l=n(7276),c=n(54447),d=n(39195),u=n(80745),f=n(3498),h=n(89030),x=n(15542),g=n(1669),m=n(53293),v=n(48024),p=n(45263),j=["assetIds","showTitleOnMobile","fullHeightOnMobile","title","transactions","emptyText"],b=function(t){var e=t.assetIds,n=t.showTitleOnMobile,b=void 0!==n&&n,y=t.fullHeightOnMobile,C=void 0!==y&&y,w=t.title,S=t.transactions,A=t.emptyText,M=(0,o.Z)(t,j),D=(0,d.Y)().account,Z=(0,m.Z)(),k=(0,r.Z)(Z,2),T=k[0],I=k[1],O=(0,g.w)(),P=O.isPortfolioLoaded,R=O.isVaultsPositionsLoaded,z=O.selectors,U=z.selectVaultTransactions,B=z.selectVaultGauge,F=(0,l.useMemo)((function(){return S||(D&&e&&U&&B?e.reduce((function(t,e){var n=B(e),a=U(e),r=n?U(n.id):[];return[].concat((0,i.Z)(t),(0,i.Z)(a),(0,i.Z)(r))}),[]):[])}),[S,D,e,U,B]),_=(0,l.useMemo)((function(){return P&&(!D||R)}),[P,D,R]),E=(0,l.useMemo)((function(){return _?F.length>0?(0,s.Pf)(F,"timeStamp","desc").map((function(t,e){return(0,p.jsx)(v.TransactionItem,{transaction:t},"tx_".concat(t.hash,"_").concat(e))})):(0,p.jsx)(f.kC,{flex:1,minH:250,width:"100%",alignItems:"center",justifyContent:"center",children:(0,p.jsx)(x.Translation,{component:f.xv,translation:A||"assets.assetDetails.assetHistory.emptyTransactions"})}):(0,p.jsxs)(f.gC,{spacing:4,width:"100%",children:[(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10})]})}),[_,F,A]);return(0,p.jsx)(c.Card,(0,a.Z)((0,a.Z)({flex:1},M),{},{children:(0,p.jsxs)(f.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",ref:T,justifyContent:"flex-start",children:[(0,p.jsx)(x.Translation,{display:b?"block":["none","block"],component:c.Card.Heading,fontSize:"lg",translation:w||"assets.assetDetails.assetHistory.transactionHistory"}),(0,p.jsx)(u.Scrollable,{maxH:[C?"100%":280,Math.max((null===I||void 0===I?void 0:I.height)||400)],children:E})]})}))}},84389:function(t,e,n){n.r(e),n.d(e,{VolumeChart:function(){return o}});var a=n(9220),i=n(50026),r=n(45263),o=function(t){var e=t.assetIds,n=t.timeframe,o=t.dateRange,s=(0,i.D)({assetIds:e,timeframe:n,dateRange:o}),l=s.labels,c=s.colors,d=s.volumeChartData;return s.volumeChartDataLoading?null:(0,r.jsx)(a.HistogramChart,{colors:c,labels:l,data:d.rainbow})}},50026:function(t,e,n){n.d(e,{D:function(){return d}});var a=n(4942),i=n(1413),r=n(29439),o=n(40398),s=n(7276),l=n(99594),c=n(1669),d=function(t){var e=t.assetIds,n=t.dateRange,d=t.timeframe,u=t.useDollarConversion,f=void 0===u||u,h=(0,s.useState)(!0),x=(0,r.Z)(h,2),g=x[0],m=x[1],v=(0,c.w)(),p=v.historicalTvls,j=v.selectors,b=j.selectAssetsByIds,y=j.selectAssetHistoricalTvls,C=j.selectAssetHistoricalTvlsUsd,w=(0,s.useMemo)((function(){return b?b(e):[]}),[e,b]),S=(0,s.useMemo)((function(){return(0,l.yb)(d,n)}),[d,n]),A=(0,r.Z)(S,2),M=A[0],D=A[1],Z=(0,s.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(p).length)return t;var e=w.reduce((function(t,e){if(!e.id)return t;var n=f?C(e.id):y(e.id);if(!n)return t;var a=null;return n.forEach((function(n){var i=n.date;if(!(i<M||D&&i>D)){if(a&&e.id){t[i]||(t[i]={date:i,total:0});var r=(0,l.gA)(n.value).minus(a.value);t[i][e.id]=Number(r.toFixed(8)),t[i].total=Number((0,l.gA)(t[i].total).plus(r).toFixed(8))}a=n}})),t}),{});return t.total=Object.values(e).map((function(t){return{date:t.date,value:t.total}})),t.rainbow=Object.values(e),t}),[w,f,p,y,C,M,D]),k=(0,s.useMemo)((function(){return w.length?w.reduce((function(t,e){return(0,i.Z)((0,i.Z)({},t),{},{labels:(0,i.Z)((0,i.Z)({},t.labels),{},(0,a.Z)({},e.id,e.name)),colors:(0,i.Z)((0,i.Z)({},t.colors),{},(0,a.Z)({},e.id,o.A2[e.type].color))})}),{labels:{},colors:{}}):{labels:{},colors:{}}}),[w]);return(0,s.useEffect)((function(){if(Z.rainbow.length)return m(!1),function(){m(!0)}}),[Z]),{volumeChartData:Z,volumeChartDataLoading:g,labels:k.labels,colors:k.colors}}},36358:function(t,e,n){n.r(e),e.default={}}}]);