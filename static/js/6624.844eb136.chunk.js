"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return Z}});var n=l(93433),i=l(1413),o=l(45987),a=l(5128),r=l(7276),u=l(87099),s=l(12056),d=l(86059),c=l(60062),m=l(43098),v=l(15542),f=l(1669),g=l(3498),p=l(20910),y=l(45263),x=["assetId","field","amount","amountUsd","stakingPower"],A=function(e){var t,l,n=e.assetId,u=e.field,s=e.amount,A=e.amountUsd,Z=e.stakingPower,k=(0,o.Z)(e,x),S=(0,f.w)(),b=S.stakingData,w=S.helpers.vaultFunctionsHelper,h=S.selectors,j=h.selectAssetById,M=h.selectVaultById,B=h.selectVaultGauge,D=(0,r.useMemo)((function(){return n&&j&&j(n)}),[n,j]),F=(0,r.useMemo)((function(){return D&&j&&j(D.underlyingId)}),[D,j]),I=(0,r.useMemo)((function(){return n&&M&&M(n)}),[n,M]),P=(0,r.useMemo)((function(){return n&&B&&B(n)}),[n,B]),U=(0,r.useMemo)((function(){return P&&j&&j(P.id)}),[P,j]),C=(0,r.useMemo)((function(){return(0,p.gA)(D.tvl).plus((0,p.d5)(s))}),[D,s]),L=(0,r.useMemo)((function(){return null===w||void 0===w?void 0:w.getVaultNewApr(D,I,(0,p.gA)(s))}),[D,I,s,w]),E=(0,r.useMemo)((function(){if((0,p.d5)(L).gt(0)){var e=(0,p.Bs)((0,p.d5)(L).div(100)).times(100),t=D.apyBreakdown?Object.keys(D.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===U||void 0===U?void 0:U.gaugeData;if(l){var n=(0,p.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,p.d5)(s)),i=(0,p.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),o=D.apyBreakdown[t].times(i);return e.plus(o)}return e.plus(D.apyBreakdown[t]);case"harvest":var a=(0,p.gA)(D.tvl).div(C),r=D.aprBreakdown[t].times(a);return e.plus((0,p.Bs)((0,p.gA)(r).div(100)).times(100));case"rewards":var u=(0,p.gA)(D.tvl).div(C),d=D.aprBreakdown[t].times(u);return e.plus((0,p.Bs)((0,p.gA)(d).div(100)).times(100));default:return e.plus(D.apyBreakdown[t])}}),(0,p.gA)(0)):(0,p.gA)(0);return(0,p.gA)(e).plus(t)}return(0,p.d5)(null===D||void 0===D?void 0:D.apy)}),[D,s,C,U,L]),G=(0,r.useMemo)((function(){return(0,p.d5)(A).gt(0)}),[A]),T=(0,r.useMemo)((function(){var e;return(0,p.d5)(null===D||void 0===D||null===(e=D.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[D]),_=(0,r.useMemo)((function(){var e;return(0,p.d5)(null===D||void 0===D||null===(e=D.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[D]),V=(0,r.useMemo)((function(){var e,t;return"flags"in I&&(0,p.d5)(null===(e=I.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?_.times(null===(t=I.flags)||void 0===t?void 0:t.withdrawFee):(0,p.gA)(0)}),[I,_]),O=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,p.d5)(null===D||void 0===D||null===(e=D.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(V))}),[V,D]),q=(0,r.useMemo)((function(){return a.Z.minimum(1,(0,p.d5)(A).div(_))}),[A,_]),z=(0,r.useMemo)((function(){return a.Z.minimum(O,q.times(O))}),[O,q]),H=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,p.d5)(null===D||void 0===D||null===(e=D.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===D||void 0===D?void 0:D.fee))}),[D]),N=(0,r.useMemo)((function(){return a.Z.minimum(H,(0,p.d5)(z).times(null===D||void 0===D?void 0:D.fee))}),[H,z,D]);I instanceof c.C&&(O=O.plus(N),z=z.plus(N));var J=G&&(0,p.d5)(s).lte(T),K="cta",Q="",R=null;switch(u){case"boost":var W=E&&null!==D&&void 0!==D&&null!==(t=D.baseApr)&&void 0!==t&&t.gt(0)?E.div(null===D||void 0===D?void 0:D.baseApr):(0,p.gA)(0);R=(0,y.jsxs)(g.xv,(0,i.Z)((0,i.Z)({},k),{},{textStyle:"titleSmall",color:"primary",children:[W.gt(9999)?">9999":W.toFixed(2),"x"]}));break;case"overperformance":var X=(0,p.d5)(A).times((0,p.gA)(null===D||void 0===D?void 0:D.baseApr).div(100)),Y=(0,p.d5)(A).times((0,p.gA)(null===D||void 0===D?void 0:D.apy).div(100)),$=G?Y.minus(X):null;R=(0,y.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:$,suffix:"/year"}));break;case"newApy":R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:E}));break;case"totalGain":R=(0,y.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:z.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?z:null}));break;case"fee":R=(0,y.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:N.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?-N:null}));break;case"withdrawFee":(0,p.d5)(null===(l=I.flags)||void 0===l?void 0:l.withdrawFee).gt(0)&&(K="orange",R=(0,y.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:V.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},k),{},{value:J?-V:null})));break;case"depositLimit":K="orange";var ee=a.Z.maximum(0,(0,p.d5)(D.limit).minus(D.totalTvl).minus((0,p.d5)(s)));R=(0,y.jsx)(d.Amount,(0,i.Z)((0,i.Z)({suffix:" ".concat(F.token),decimals:2,textStyle:"titleSmall",color:K},k),{},{value:ee}));break;case"netGain":var te=a.Z.minimum(O.minus(N),(0,p.d5)(z).minus(N));R=(0,y.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:te.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?te:null}));break;case"coverage":var le=j(null===I||void 0===I?void 0:I.vaultConfig.Tranches.BB.address),ne=le.tvl&&C?le.tvl.div(C).times(100):0;R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:ne}));break;case"stakingPoolShare":if(b){var ie=(0,p.d5)(s).div(b.stkIDLE.totalSupply.plus((0,p.d5)(s))).times(100);R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:ie}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":R=(0,y.jsx)(d.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},k),{},{value:s}));break;case"currentFeeDiscount":var oe=(0,p.d5)(null===b||void 0===b?void 0:b.feeDiscount);Q=oe.lte(0)?"orange":"brightGreen",R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({color:Q,textStyle:"titleSmall"},k),{},{value:oe}));break;case"feeDiscount":var ae=(0,p.SL)(s);Q=ae.lte(0)?"orange":"brightGreen",R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({color:Q,textStyle:"titleSmall"},k),{},{value:ae}));break;case"feeDiscountTier":R=(0,y.jsx)(d.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:1}));break;case"stakingApy":if(b){var re=(0,p.d5)(Z).times(b.maxApr);R=(0,y.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:re}))}break;default:return null}return R?(0,y.jsxs)(g.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,y.jsxs)(g.Ug,{spacing:2,alignItems:"center",children:[(0,y.jsx)(v.Translation,{component:g.xv,translation:"dynamicActionFields.".concat(u),textStyle:"captionSmall",color:K}),["feeDiscount","currentFeeDiscount"].includes(u)&&(0,y.jsx)(m.nfF,{size:16,color:"orange"})]}),R]}):null},Z=function(e){var t=(0,f.w)(),l=t.stakingData,o=t.selectors,a=o.selectAssetById,d=o.selectVaultById,c=e.assetId,m=e.action,v=(0,r.useMemo)((function(){return c&&a&&a(c)}),[c,a]),x=(0,r.useMemo)((function(){return c&&d&&d(c)}),[c,d]),Z=(0,r.useMemo)((function(){return(null===x||void 0===x?void 0:x.type)&&s.A[x.type]}),[x]),k=(0,r.useMemo)((function(){return(0,p.d5)(null===v||void 0===v?void 0:v.limit).lt(u.jq)?(0,p.d5)(null===v||void 0===v?void 0:v.limit):(0,p.gA)(0)}),[v]),S=(0,r.useMemo)((function(){return!!k.gt(0)&&(0,p.gA)(null===v||void 0===v?void 0:v.totalTvl).gte(k)}),[v,k]),b=(0,r.useMemo)((function(){var e,t,i;if(null===Z||void 0===Z||null===(e=Z.dynamicActionFields)||void 0===e||!e[m])return null;var o=null===Z||void 0===Z?void 0:Z.dynamicActionFields[m],a=x&&"flags"in x&&(null===(t=x.flags)||void 0===t?void 0:t.showLimitCap),r=x&&"flags"in x&&(null===(i=x.flags)||void 0===i?void 0:i.feeDiscountEnabled)&&(0,p.d5)(null===l||void 0===l?void 0:l.feeDiscount).gt(0);return a&&"deposit"===m&&k.gt(0)&&!S&&(o=["depositLimit"].concat((0,n.Z)(o))),r&&"deposit"===m&&-1===o.indexOf("currentFeeDiscount")&&(o=[].concat((0,n.Z)(o),["currentFeeDiscount"])),o}),[m,x,Z,S,l,k]);return b?(0,y.jsx)(g.gC,{spacing:2,width:"full",children:b.map((function(t){return(0,y.jsx)(A,(0,i.Z)((0,i.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}}}]);