"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[3665,7586,7787,7950,5983,9966],{77586:function(e,t,n){n.r(t),n.d(t,{AddressLink:function(){return u}});var s=n(1413),i=n(44925),a=n(71233),r=n(52137),o=n(12115),l=n(96354),c=n(37881),d=["address"],u=function(e){var t=e.address,n=(0,i.Z)(e,d),u=(0,l.Y)(),f=u.chainId,m=u.explorer,x=(0,a.useMemo)((function(){return(0,o.SV)(f,m,t)}),[f,m,t]);return(0,c.jsx)(r.rU,(0,s.Z)((0,s.Z)({href:x,textStyle:"tableCell",color:"link",isExternal:!0},n),{},{children:(0,o.pc)(t)}))}},67044:function(e,t,n){n.r(t),n.d(t,{AssetGeneralData:function(){return h}});var s=n(71233),i=n(79153),a=n(24371),r=n(92508),o=n(96437),l=n(9579),c=n(7453),d=n(3666),u=n(27137),f=n(65304),m=n(52137),x=n(43680),v=n(37881),g=function(e){var t=e.generalData,n=(0,f.Fg)(),s=(0,r.qM)();return t.tooltip?(0,v.jsxs)(m.Ug,{spacing:1,alignItems:"center",children:[(0,v.jsx)(o.Translation,{component:m.xv,translation:t.label,textStyle:"captionSmall"}),(0,v.jsx)(x.u,{hasArrow:!0,placement:"top",label:s(t.tooltip),children:(0,v.jsx)(u.TooltipContent,{children:(0,v.jsx)(i.I5p,{color:n.colors.cta,size:16})})})]}):(0,v.jsx)(o.Translation,{component:m.xv,translation:t.label,textStyle:"captionSmall"})},h=function(e){var t=e.assetId,n=(0,l.w)().selectors.selectAssetById,i=(0,s.useMemo)((function(){return n&&n(t)}),[n,t]),r=(0,s.useMemo)((function(){return(null===i||void 0===i?void 0:i.type)&&c.A[i.type]}),[i]);return(0,v.jsx)(d.AssetProvider,{wrapFlex:!1,assetId:t,children:(0,v.jsxs)(a.Card.Dark,{children:[(0,v.jsx)(m.MI,{spacing:[6,0],columns:[2,Math.min(null===r||void 0===r?void 0:r.generalDataFields.length,5)],children:(null===r||void 0===r?void 0:r.generalDataFields)&&(null===r||void 0===r?void 0:r.generalDataFields.slice(0,5).map((function(e){return(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(g,{generalData:e}),(0,v.jsx)(d.AssetProvider.GeneralData,{section:"asset",field:e.field})]},"field_".concat(e.field))})))}),(null===r||void 0===r?void 0:r.generalDataFields)&&(null===r||void 0===r?void 0:r.generalDataFields.length)>5&&(0,v.jsx)(m.MI,{pt:6,mt:6,spacing:[6,0],columns:[2,Math.min(null===r||void 0===r?void 0:r.generalDataFields.length,5)],borderTop:"1px solid",borderTopColor:"divider",children:null===r||void 0===r?void 0:r.generalDataFields.slice(5).map((function(e){return(0,v.jsxs)(m.gC,{spacing:2,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,v.jsx)(g,{generalData:e}),(0,v.jsx)(d.AssetProvider.GeneralData,{section:"asset",field:e.field})]},"field_".concat(e.field))}))})]})})}},63665:function(e,t,n){n.r(t),n.d(t,{Earn:function(){return Z}});var s=n(29439),i=n(44925),a=n(20235),r=n(24371),o=n(92508),l=n(28087),c=n(71233),d=n(92016),u=n(55714),f=n(89958),m=n(12115),x=n(96354),v=n(28210),g=n(96437),h=n(2615),p=n(9579),j=n(65699),y=n(17950),I=n(3666),S=n(67044),C=n(99966),b=n(63409),w=n(57091),A=n(38486),M=n(52137),T=n(53396),k=n(29697),P=n(37881),D=["children"],Z=function(e){e.children,(0,i.Z)(e,D);var t=(0,o.qM)(),n=(0,h.m)().params,Z=(0,x.Y)().account,U=(0,u.X)().isMobile,F=(0,c.useState)(v.W.MONTH),z=(0,s.Z)(F,2),O=z[0],B=z[1],N=(0,l.Z)("useDollarConversion",!0),L=(0,s.Z)(N,2),_=L[0],R=L[1],V=(0,p.w)(),E=V.isPortfolioLoaded,H=V.isVaultsPositionsLoaded,G=V.selectors,q=G.selectAssetById,J=G.selectVaultById,W=G.selectAssetBalanceUsd,X=(0,c.useMemo)((function(){return Object.keys(a.A2).find((function(e){return a.A2[e].route===n.strategy}))}),[n]),Y=(0,c.useMemo)((function(){return X&&a.A2[X].color}),[X]),$=(0,c.useMemo)((function(){return q&&q(n.asset)}),[q,n.asset]),K=(0,c.useMemo)((function(){return $&&J&&J($.id)}),[J,$]),Q=(0,c.useMemo)((function(){if(null!==$&&void 0!==$&&$.id)return W&&W($.id)}),[$,W]),ee=(0,c.useMemo)((function(){return(null===$||void 0===$?void 0:$.vaultPosition)&&Q&&Q.gt(0)}),[$,Q]),te=(0,b.k)({assetIds:[null===$||void 0===$?void 0:$.id],timeframe:O,useDollarConversion:_}).balanceChartData,ne=function(e){var t=(0,c.useState)(!0),n=(0,s.Z)(t,2),i=n[0],a=n[1],r=(0,p.w)(),o=r.historicalPrices,l=r.selectors,d=l.selectAssetsByIds,u=l.selectAssetHistoricalPrices,f=e.assetIds,x=e.timeframe,v=(0,c.useMemo)((function(){return d?d(f):[]}),[f,d]),g=(0,c.useMemo)((function(){return x?(0,m.pM)(x):0}),[x]),h=(0,c.useMemo)((function(){var e={total:[],rainbow:[]};if(!Object.keys(o).length)return e;var t=v.reduce((function(t,n,s){if(!n.id)return t;var i=u(n.id);return i?(i.forEach((function(i){var a=i.date;if(!(a<g)){var r=i.value;t[a]||(t[a]={date:a,total:0}),n.id&&(t[a][n.id]=r,s||e.total.push({date:a,value:r}))}})),t):t}),{});return e.rainbow=Object.values(t),e}),[v,o,u,g]);return(0,c.useEffect)((function(){if(h.rainbow.length)return a(!1),function(){a(!0)}}),[h]),{assets:v,performanceChartData:h,performanceChartDataLoading:i}}({assetIds:[null===$||void 0===$?void 0:$.id],timeframe:O}),se=ne.performanceChartData,ie=(0,c.useMemo)((function(){if(E)return ee?te:se}),[E,ee,te,se]),ae=(0,c.useMemo)((function(){var e,n,s,i,a,r,o=ee?null===$||void 0===$||null===(e=$.vaultPosition)||void 0===e?void 0:e.earningsPercentage:(null===ie||void 0===ie||null===(n=ie.total)||void 0===n?void 0:n.length)&&(0,m.gA)(ie.total[ie.total.length-1].value).div(ie.total[0].value).minus(1).times(100),l=null!==ie&&void 0!==ie&&null!==(s=ie.total)&&void 0!==s&&s.length?(0,m.gA)(ie.total[ie.total.length-1].date).minus(ie.total[0].date).div(1e3).div(86400):(0,m.gA)(0),c=o&&l.gt(0)?o.times(365).div(l):(0,m.gA)(0),u=(null===ie||void 0===ie?void 0:ie.total)&&ie.total.length>0&&!!E&&(!Z||H);return(0,P.jsx)(M.gC,{spacing:1,width:["100%","auto"],alignItems:["center","flex-start"],children:(0,P.jsxs)(T.N2,{noOfLines:2,isLoaded:u,children:[(0,P.jsx)(g.Translation,{translation:ee?"dashboard.portfolio.totalChart":"dashboard.portfolio.assetPerformance",component:M.xv,textStyle:"caption",textAlign:["center","left"]}),(0,P.jsx)(M.Ug,{spacing:3,width:["100%","auto"],alignItems:"baseline",children:ee?_?(0,P.jsx)(I.AssetProvider.BalanceUsd,{textStyle:"heading",textAlign:["center","left"],fontSize:"2xl"}):(0,P.jsx)(I.AssetProvider.Redeemable,{textStyle:"heading",textAlign:["center","left"],fontSize:"2xl",suffix:" ".concat(null===$||void 0===$?void 0:$.name)}):(0,P.jsxs)(M.Kq,{spacing:[0,2],alignItems:"baseline",direction:["column","row"],children:[(0,P.jsx)(d.Amount.Percentage,{value:c,suffix:" APY",textStyle:"heading",textAlign:["center","left"],fontSize:"2xl"}),(null===$||void 0===$||null===(i=$.apyBreakdown)||void 0===i?void 0:i.gauge)&&(0,m.gA)(null===$||void 0===$||null===(a=$.apyBreakdown)||void 0===a?void 0:a.gauge).gt(0)&&(0,P.jsx)(d.Amount.Percentage,{prefix:"+",value:null===$||void 0===$||null===(r=$.apyBreakdown)||void 0===r?void 0:r.gauge,suffix:" (".concat(t("assets.assetDetails.apyBreakdown.gauge"),")"),textStyle:"caption"})]})})]})})}),[$,ee,t,ie,_,Z,H,E]),re=(0,c.useMemo)((function(){return $&&ee?(0,P.jsxs)(M.MI,{width:"100%",columns:[2,4],spacing:[10,14],alignItems:"flex-start",children:[(0,P.jsxs)(M.gC,{spacing:2,justifyContent:"center",children:[(0,P.jsx)(g.Translation,{component:M.xv,translation:"defi.deposited",textStyle:"titleSmall"}),(0,P.jsx)(I.AssetProvider.DepositedUsd,{textStyle:"heading",fontSize:"h3"}),(0,P.jsxs)(M.Ug,{spacing:1,children:[(0,P.jsx)(I.AssetProvider.Deposited,{decimals:4,textStyle:"captionSmaller"}),(0,P.jsx)(I.AssetProvider.Name,{textStyle:"captionSmaller"})]})]}),(0,P.jsxs)(M.gC,{spacing:2,justifyContent:"center",children:[(0,P.jsx)(g.Translation,{component:M.xv,translation:"defi.redeemable",textStyle:"titleSmall"}),(0,P.jsx)(I.AssetProvider.BalanceUsd,{textStyle:"heading",fontSize:"h3"}),(0,P.jsxs)(M.Ug,{spacing:1,children:[(0,P.jsx)(I.AssetProvider.Redeemable,{decimals:4,textStyle:"captionSmaller"}),(0,P.jsx)(I.AssetProvider.Name,{textStyle:"captionSmaller"})]})]}),(0,P.jsxs)(M.gC,{spacing:2,justifyContent:"center",children:[(0,P.jsx)(g.Translation,{component:M.xv,translation:"defi.netEarnings",textStyle:"titleSmall"}),(0,P.jsx)(I.AssetProvider.NetEarningsUsd,{textStyle:"heading",fontSize:"h3"}),(0,P.jsxs)(M.Ug,{spacing:1,children:[(0,P.jsx)(I.AssetProvider.NetEarnings,{decimals:4,textStyle:"captionSmaller"}),(0,P.jsx)(I.AssetProvider.Name,{textStyle:"captionSmaller"})]})]}),(0,P.jsxs)(M.gC,{spacing:2,justifyContent:"center",children:[(0,P.jsx)(g.Translation,{component:M.xv,translation:"defi.realizedApy",textStyle:"titleSmall"}),(0,P.jsx)(I.AssetProvider.RealizedApy,{textStyle:"heading",fontSize:"h3"}),(0,P.jsx)(M.xv,{textStyle:"captionSmaller"})]})]}):null}),[$,ee]),oe=(0,c.useMemo)((function(){if(!X||!E)return null;var e=a.A2[X];return null!==e&&void 0!==e&&e.carouselItems?(0,P.jsx)(A.StrategyDescriptionCarousel,{color:Y,strategy:X,delay:1e4}):null}),[X,Y,E]),le=(0,c.useMemo)((function(){return K&&"description"in K&&K.description?(0,P.jsxs)(M.gC,{spacing:6,alignItems:"flex-start",children:[(0,P.jsx)(g.Translation,{component:M.X6,as:"h3",size:"md",translation:"defi.strategyDescription"}),(0,P.jsx)(r.Card.Dark,{children:(0,P.jsx)(M.xv,{dangerouslySetInnerHTML:{__html:K.description}})})]}):null}),[K]),ce=(0,c.useMemo)((function(){return!$||(0,m.xb)($.rewards)?null:Object.values($.rewards).reduce((function(e,t){return e.plus(t)}),(0,m.gA)(0)).gt(0)?(0,P.jsx)(j.VaultRewards,{assetId:null===$||void 0===$?void 0:$.id}):null}),[$]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(M.xu,{children:[(0,P.jsxs)(M.Ug,{mb:6,spacing:6,alignItems:"center",children:[(0,P.jsx)(T.N2,{noOfLines:2,isLoaded:!!E,children:(0,P.jsx)(g.Translation,{component:M.X6,as:"h3",size:"md",translation:ee?"defi.fundsOverview":"defi.historicalPerformance"})}),ee&&(0,P.jsxs)(M.Ug,{spacing:2,children:[(0,P.jsx)(I.AssetProvider.Name,{fontWeight:600}),(0,P.jsx)(k.r,{size:"md",isChecked:_,onChange:function(e){return R(e.target.checked)}}),(0,P.jsx)(M.xv,{fontWeight:600,children:"USD"})]})]}),(0,P.jsxs)(r.Card.Flex,{p:0,overflow:"hidden",direction:"column",minH:["auto",460],layerStyle:"cardDark",justifyContent:"space-between",children:[(0,P.jsxs)(M.Kq,{pt:[6,8],px:[6,8],pb:[4,0],width:"100%",alignItems:"flex-start",direction:["column","row"],justifyContent:["center","space-between"],children:[ae,(0,P.jsx)(C.TimeframeSelector,{width:["100%","auto"],justifyContent:["center","flex-end"],timeframe:O,setTimeframe:B})]}),(0,P.jsx)(y.GenericChart,{data:ie,percentChange:0,color:Y,timeframe:O,isRainbowChart:!1,assetIds:[n.asset],setPercentChange:function(){},height:U?"300px":"350px",margins:{top:10,right:0,bottom:65,left:0},formatFn:_?void 0:function(e){return"".concat((0,m.dm)(e)," ").concat(null===$||void 0===$?void 0:$.name)}})]})]}),re,(0,P.jsx)(f.MaticNFTs,{assetId:null===$||void 0===$?void 0:$.id}),ce,(0,P.jsxs)(M.gC,{spacing:4,width:"100%",children:[oe,le]}),(0,P.jsx)(S.AssetGeneralData,{assetId:null===$||void 0===$?void 0:$.id}),(0,P.jsx)(w.VaultUnderlyingProtocols,{assetId:null===$||void 0===$?void 0:$.id})]})}},77787:function(e,t,n){n.r(t),n.d(t,{AssetsIcons:function(){return c}});var s=n(1413),i=n(44925),a=n(52137),r=n(3666),o=n(37881),l=["assetIds","showTooltip"],c=function(e){var t=e.assetIds,n=e.showTooltip,c=(0,i.Z)(e,l);return(0,o.jsx)(a.Ug,{spacing:0,children:t.map((function(e,t){return(0,o.jsx)(r.AssetProvider,{assetId:e,children:(0,o.jsx)(r.AssetProvider.Icon,(0,s.Z)((0,s.Z)({},c),{},{ml:t?-1:0,showTooltip:n}))},"asset_".concat(t))}))})}},17950:function(e,t,n){n.r(t),n.d(t,{GenericChart:function(){return c}});var s=n(71233),i=n(52137),a=n(12115),r=n(12510),o=n(9579),l=n(37881),c=function(e){var t=e.data,n=e.assetIds,c=(e.accountId,e.timeframe,e.percentChange,e.isRainbowChart),d=e.height,u=void 0===d?"350px":d,f=(e.setPercentChange,e.color),m=void 0===f?"chart.stroke":f,x=e.formatFn,v=void 0===x?function(e){return"$".concat((0,a.dm)(e))}:x,g=e.margins,h=void 0===g?{top:0,right:0,bottom:0,left:0}:g,p=(0,o.w)().selectors.selectAssetsByIds,j=((0,s.useMemo)((function(){return p?p(n):[]}),[n,p]),(0,s.useMemo)((function(){return t||{total:[],rainbow:[]}}),[t])),y=(0,s.useMemo)((function(){return!j.rainbow.length}),[j]);return(0,l.jsx)(i.xu,{width:"full",p:0,height:u,children:(0,l.jsx)(r.Graph,{color:m,data:j,loading:y,margins:h,isLoaded:!y,formatFn:v,isRainbowChart:c})})}},89958:function(e,t,n){n.r(t),n.d(t,{MaticNFTs:function(){return v}});var s=n(12115),i=n(71233),a=n(24371),r=n(18975),o=n(92016),l=n(25019),c=n(96437),d=n(9579),u=n(52137),f=n(3666),m=n(17394),x=n(37881),v=function(e){var t=e.assetId,n=(0,d.w)(),v=n.maticNFTs,g=n.selectors,h=g.selectAssetById,p=g.selectVaultById,j=(0,i.useMemo)((function(){return h&&h(t)}),[h,t]),y=(0,i.useMemo)((function(){return p&&p(t)}),[p,t]);(0,i.useMemo)((function(){var e;return y&&"flags"in y&&(null===(e=y.flags)||void 0===e?void 0:e.showMaticNFTs)}),[y]);return null!==v&&void 0!==v&&v.length?(0,x.jsxs)(u.gC,{spacing:6,width:"100%",id:"vault-rewards",alignItems:"flex-start",children:[(0,x.jsx)(c.Translation,{translation:"defi.claimableNTFs",component:u.xv,textStyle:"heading",fontSize:"h3"}),(0,x.jsx)(u.MI,{spacing:6,width:"100%",columns:[1,3],children:v&&v.map((function(e){return(0,x.jsx)(a.Card,{p:6,children:(0,x.jsxs)(u.gC,{spacing:6,width:"100%",alignItems:"flex-start",children:[(0,x.jsxs)(u.Ug,{width:"100%",justifyContent:"space-between",children:[(0,x.jsx)(l.AssetLabel,{assetId:t}),(0,x.jsxs)(u.xv,{textStyle:"heading",fontSize:"h3",whiteSpace:"nowrap",children:["#",e.tokenId]})]}),(0,x.jsxs)(u.Ug,{spacing:4,width:"100%",justifyContent:"space-between",children:["available"===e.status?(0,x.jsx)(m.TransactionButton,{text:"defi.claim",vaultId:null===y||void 0===y?void 0:y.id,assetId:null===j||void 0===j?void 0:j.underlyingId,contractSendMethod:e.contractSendMethod,actionType:"claim",amount:e.amount.toString(),disabled:e.amount.lte(0)}):(0,x.jsxs)(u.gC,{spacing:1,alignItems:"flex-start",children:[(0,x.jsx)(c.Translation,{component:u.xv,translation:"defi.estUnlockDate",textStyle:"captionSmall"}),(0,x.jsx)(u.Ug,{spacing:1,children:(0,x.jsx)(u.xv,{textStyle:"tableCell",children:(0,s.p6)(e.unlockTimestamp,r.Cu)})})]}),(0,x.jsxs)(u.gC,{spacing:1,alignItems:"flex-end",children:[(0,x.jsx)(c.Translation,{component:u.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,x.jsxs)(u.Ug,{spacing:1,justifyContent:"flex-end",children:[(0,x.jsx)(o.Amount,{value:e.amount,decimals:8,textStyle:"tableCell"}),(0,x.jsx)(f.AssetProvider,{assetId:null===j||void 0===j?void 0:j.underlyingId,children:(0,x.jsx)(f.AssetProvider.Name,{textStyle:"tableCell"})})]})]})]})]})},"nft_".concat(e.tokenId))}))})]}):null}},5983:function(e,t,n){n.r(t),n.d(t,{ProtocolLabel:function(){return m}});var s=n(1413),i=n(44925),a=n(1614),r=n(62247),o=n(25227),l=n(52137),c=n(37881),d=["children","protocolId"],u=["protocolId","size"],f=function(e){e.children;var t=e.protocolId,n=(0,i.Z)(e,d),l=(0,r.i)(t);return l&&l.icon?(0,c.jsx)(o.qE,(0,s.Z)({p:0,bg:"transparent",src:l.icon,icon:(0,c.jsx)(a.HZe,{size:24}),sx:{"> img":{"object-fit":"contain"}}},n)):null},m=function(e){var t=e.protocolId,n=e.size,a=void 0===n?"sm":n,o=(0,i.Z)(e,u),d=(0,r.i)(t);return d?(0,c.jsxs)(l.Ug,{alignItems:"center",justifyContent:"flex-start",children:[(0,c.jsx)(f,{protocolId:t,size:a}),(0,c.jsx)(l.xv,(0,s.Z)((0,s.Z)({textStyle:"heading",fontSize:"h3",whiteSpace:"nowrap"},o),{},{children:d.label}))]}):null}},99966:function(e,t,n){n.r(t),n.d(t,{TimeframeSelector:function(){return c}});var s=n(1413),i=n(44925),a=(n(71233),n(28210)),r=n(52137),o=n(37881),l=["timeframe","setTimeframe"],c=function(e){var t=e.timeframe,n=e.setTimeframe,c=(0,i.Z)(e,l);return(0,o.jsx)(r.Ug,(0,s.Z)((0,s.Z)({spacing:[6,10]},c),{},{children:Object.values(a.W).map((function(e){var s=e===t;return(0,o.jsx)(r.xv,{"aria-selected":s,textStyle:["cta","dark"],onClick:function(){return n(e)},children:e.toUpperCase()},"timeframe_".concat(e))}))}))}},17394:function(e,t,n){n.r(t),n.d(t,{TransactionButton:function(){return j},TransactionButtonValue:function(){return p}});var s=n(1413),i=n(29439),a=n(44925),r=(n(77972),n(79153)),o=n(70211),l=n(71233),c=n(96437),d=n(20549),u=n(65304),f=n(62655),m=n(52137),x=n(84219),v=n(37881),g=["text","amount","assetId","vaultId","actionType","contractSendMethod"],h=["text","amount","assetId","vaultId","actionType","contractSendMethod"],p=function(e){var t,n=e.text,o=(e.amount,e.assetId,e.vaultId,e.actionType,e.contractSendMethod),x=(0,a.Z)(e,g),h=(0,u.Fg)(),p=(0,l.useRef)(null),j=(0,l.useState)(null),y=(0,i.Z)(j,2),I=y[0],S=y[1],C=(0,d.R)(),b=C.state.transaction,w=C.cleanTransaction,A=(0,l.useMemo)((function(){var e;return JSON.stringify(null===b||void 0===b||null===(e=b.contractSendMethod)||void 0===e?void 0:e._method)===JSON.stringify(o._method)}),[b,o]),M=(0,l.useMemo)((function(){return A&&b.status&&["pending","success","failed"].includes(b.status)&&b.estimatedTime}),[b,A]),T=(0,l.useMemo)((function(){return M&&"pending"===b.status?b.estimatedTime:.5}),[M,b]),k=(0,l.useCallback)((function(){if(!b.timestamp||!b.estimatedTime)return null;var e=+b.timestamp+1e3*b.estimatedTime,t=Math.max(0,Math.ceil((e-Date.now())/1e3));S(t),t&&(p.current=setTimeout((function(){k()}),1e3))}),[b]);(0,l.useEffect)((function(){var e;"success"===b.status||"failed"===b.status?(p.current&&(clearInterval(p.current),p.current=null),"success"!==b.status&&4001===(null===(e=b.error)||void 0===e?void 0:e.code)||setTimeout((function(){w()}),4e3)):"pending"!==b.status||p.current||k()}),[b.status,k,w,null===(t=b.error)||void 0===t?void 0:t.code]);var P=(0,l.useMemo)((function(){var e;if(A)switch(null===b||void 0===b?void 0:b.status){case"created":return(0,v.jsx)(f.$,{size:"sm"});case"pending":return b.timestamp&&b.estimatedTime&&I?(0,v.jsxs)(m.xv,{textStyle:"ctaStatic",children:[I,"s"]}):(0,v.jsx)(f.$,{size:"sm"});case"success":return(0,v.jsx)(m.kC,(0,s.Z)((0,s.Z)({},x),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(r.ddU,{size:24,color:h.colors.green[400]})}));case"failed":if(4001!==(null===(e=b.error)||void 0===e?void 0:e.code))return(0,v.jsx)(m.kC,(0,s.Z)((0,s.Z)({},x),{},{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(r.lTq,{size:24,color:h.colors.red[400]})}))}return(0,v.jsx)(c.Translation,{translation:n,textStyle:"ctaStatic"})}),[A,I,b,n,h,x]),D=(0,l.useMemo)((function(){switch(b.status){case"success":case"failed":return"transparent";default:return"primary"}}),[b]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m.kC,{top:0,left:0,bottom:0,bg:D,overflow:"hidden",position:"absolute",alignItems:"center",justifyContent:"center",transition:"background 0.5s ease-in-out",sx:{animationIterationCount:1,animationFillMode:"forwards",animationTimingFunction:"ease-in-out",animationDuration:"".concat(T,"s"),animationName:M?"progress":"none",animationPlayState:M?"running":"stopped"},children:(0,v.jsx)(m.kC,{left:0,width:x.width,alignItems:"center",position:"absolute",justifyContent:"center",sx:{"> *":{color:"black !important",borderColor:"black !important"}},children:P})}),P]})},j=function(e){var t=e.text,n=e.amount,r=e.assetId,c=e.vaultId,u=e.actionType,f=e.contractSendMethod,m=(0,a.Z)(e,h),g=(0,o.Z)(),j=(0,i.Z)(g,2),y=j[0],I=j[1].width,S=(0,d.R)(),C=S.sendTransaction,b=S.state.transaction,w=(0,l.useMemo)((function(){var e;return JSON.stringify(null===b||void 0===b||null===(e=b.contractSendMethod)||void 0===e?void 0:e._method)===JSON.stringify(f._method)}),[b,f]),A=(0,l.useCallback)((function(){if("created"!==b.status&&"pending"!==b.status)return C(c,r,f,u,n)}),[b,c,r,f,u,n,C]),M=(0,l.useMemo)((function(){var e;if(!w)return"primary";switch(b.status){case"success":return"green.400";case"failed":return 4001!==(null===(e=b.error)||void 0===e?void 0:e.code)?"red.400":"primary";default:return"primary"}}),[w,b]);return(0,v.jsx)(x.zx,(0,s.Z)((0,s.Z)({py:2,px:10,overflow:"hidden",position:"relative",width:I||"auto",borderColor:M,onClick:function(){return A()},ref:y,variant:"ctaPrimaryOutline",transition:"border 0.5s ease-in-out"},m),{},{children:(0,v.jsx)(p,{text:t,vaultId:c,assetId:r,contractSendMethod:f,width:I})}))}},94889:function(e,t,n){n.r(t),n.d(t,{VaultReward:function(){return d}});n(71233);var s=n(24371),i=n(92016),a=n(25019),r=n(96437),o=n(3666),l=n(52137),c=n(37881),d=function(e){var t=e.assetId,n=e.amount;return n.lte(0)?null:(0,c.jsx)(o.AssetProvider,{wrapFlex:!1,assetId:t,children:(0,c.jsx)(s.Card,{p:6,children:(0,c.jsxs)(l.Ug,{width:"100%",justifyContent:"space-between",children:[(0,c.jsx)(a.AssetLabel,{assetId:t}),(0,c.jsxs)(l.gC,{spacing:1,alignItems:"flex-end",children:[(0,c.jsx)(r.Translation,{component:l.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,c.jsxs)(l.Ug,{spacing:1,justifyContent:"flex-end",children:[(0,c.jsx)(i.Amount,{value:n,decimals:8,textStyle:"tableCell"}),(0,c.jsx)(o.AssetProvider.Name,{textStyle:"tableCell"})]})]})]})})})}},65699:function(e,t,n){n.r(t),n.d(t,{VaultRewards:function(){return u}});var s=n(12115),i=n(71233),a=n(52137),r=n(96437),o=n(94889),l=n(9579),c=n(17394),d=n(37881),u=function(e){var t=e.assetId,n=(0,l.w)().selectors,u=n.selectAssetById,f=n.selectVaultById,m=(0,i.useMemo)((function(){return f&&f(t)}),[f,t]),x=(0,i.useMemo)((function(){if(u&&t){var e=u(t);return null===e||void 0===e?void 0:e.rewards}}),[u,t]),v=(0,i.useMemo)((function(){return x?Object.values(x).reduce((function(e,t){return e.plus(t)}),(0,s.gA)(0)):(0,s.gA)(0)}),[x]),g=m.getClaimRewardsContractSendMethod();return(0,d.jsxs)(a.gC,{spacing:6,width:"100%",id:"vault-rewards",alignItems:"flex-start",children:[(0,d.jsx)(r.Translation,{translation:"assets.assetDetails.generalData.claimableRewards",component:a.xv,textStyle:"heading",fontSize:"h3"}),(0,d.jsx)(a.MI,{spacing:6,width:"100%",columns:[1,3],children:x&&Object.keys(x).map((function(e){return(0,d.jsx)(o.VaultReward,{assetId:e,amount:x[e]},"reward_".concat(e))}))}),t&&m&&v.gt(0)&&(0,d.jsx)(c.TransactionButton,{text:"assets.assetCards.rewards.claimRewards",vaultId:t,assetId:t,contractSendMethod:g,actionType:"claim",amount:v.toString(),width:["100%","150px"],disabled:v.lte(0)})]})}},57091:function(e,t,n){n.r(t),n.d(t,{VaultUnderlyingProtocols:function(){return h}});var s=n(12115),i=n(71233),a=n(24371),r=n(92016),o=n(1784),l=n(96354),c=n(77787),d=n(77586),u=n(96437),f=n(9579),m=n(59132),x=n(5983),v=n(52137),g=n(37881),h=function(e){var t,n,h=e.assetId,p=(0,l.Y)().chainId,j=(0,f.w)().selectors,y=j.selectAssetById,I=j.selectVaultById,S=(0,i.useMemo)((function(){return y&&y(h)}),[y,h]),C=(0,i.useMemo)((function(){return I&&I(h)}),[I,h]);return C&&C instanceof o.H&&"tokenConfig"in C&&null!==(t=C.tokenConfig)&&void 0!==t&&t.protocols?(0,g.jsxs)(v.gC,{spacing:6,alignItems:"flex-start",children:[(0,g.jsx)(u.Translation,{component:v.X6,as:"h3",size:"md",translation:"defi.underlyingProtocols"}),(0,g.jsx)(v.MI,{spacing:6,width:"100%",columns:[1,3],children:null===(n=C.tokenConfig)||void 0===n?void 0:n.protocols.map((function(e){var t,n,i=(0,m.iL)(e.name),o=(0,s.gA)(null===(t=S.allocations)||void 0===t?void 0:t[e.name]).div(100),l=(0,s.gA)(null===S||void 0===S?void 0:S.tvlUsd).times(o),f=null===i||void 0===i||null===(n=i.govTokens)||void 0===n?void 0:n.reduce((function(e,t){var n=(0,m.Zs)(p,t);return null!==n&&void 0!==n&&n.address&&e.push(n.address),e}),[]);return(0,g.jsx)(a.Card,{p:6,children:(0,g.jsxs)(v.gC,{spacing:6,width:"100%",alignItems:"flex-start",children:[(0,g.jsx)(x.ProtocolLabel,{protocolId:e.name,size:"xs"}),(0,g.jsxs)(v.Ug,{spacing:6,children:[(0,g.jsxs)(v.gC,{spacing:1,alignItems:"flex-start",children:[(0,g.jsx)(u.Translation,{component:v.xv,translation:"defi.poolAddress",textStyle:"captionSmall"}),(0,g.jsx)(d.AddressLink,{address:e.address})]}),(0,g.jsxs)(v.gC,{spacing:1,alignItems:"flex-start",children:[(0,g.jsx)(u.Translation,{component:v.xv,translation:"defi.govToken",textStyle:"captionSmall"}),f?(0,g.jsx)(c.AssetsIcons,{assetIds:f,showTooltip:!0,size:"xs"}):(0,g.jsx)(v.xv,{textStyle:"captionSmall",children:"-"})]}),(0,g.jsxs)(v.gC,{spacing:1,alignItems:"flex-start",children:[(0,g.jsx)(u.Translation,{component:v.xv,translation:"assets.assetDetails.generalData.allocation",textStyle:"captionSmall"}),(0,g.jsx)(r.Amount.Usd,{value:l,textStyle:"tableCell"})]})]})]})},"protocol_".concat(e.name))}))})]}):null}},63409:function(e,t,n){n.d(t,{k:function(){return u}});var s=n(1413),i=n(29439),a=n(43638),r=n.n(a),o=n(56352),l=n(71233),c=n(9579),d=n(12115),u=function(e){var t=e.assetIds,n=(e.accountId,e.strategies),a=e.timeframe,u=e.useDollarConversion,f=void 0===u||u,m=(0,c.w)(),x=m.isPortfolioLoaded,v=m.historicalPrices,g=m.historicalPricesUsd,h=m.selectors,p=h.selectAssetsByIds,j=h.selectVaultTransactions,y=h.selectAssetHistoricalPriceByTimestamp,I=h.selectAssetHistoricalPriceUsdByTimestamp,S=(0,l.useState)(!0),C=(0,i.Z)(S,2),b=C[0],w=C[1],A=(0,l.useMemo)((function(){return p?p(t).filter((function(e){return!n||!e.type||n.includes(e.type)})):[]}),[t,n,p]),M=(0,l.useMemo)((function(){return a?(0,d.pM)(a):0}),[a]),T=(0,l.useMemo)((function(){var e={total:[],rainbow:[]};if(!x||(0,d.xb)(v)||(0,d.xb)(g))return e;var t=A.reduce((function(e,t){if(null===t||void 0===t||!t.id)return e;var n=t.id,s=j(n);if(!s.length)return e;var i=s.reduce((function(e,t){var n=+r()(1e3*+t.timeStamp).startOf("day").valueOf();switch(t.action){case"deposit":e.total=e.total.plus(t.idleAmount);break;case"redeem":e.total=o.Z.maximum(0,e.total.minus(t.idleAmount))}return e.byDate[n]=e.total,e}),{total:(0,d.gA)(0),byDate:{}});return Object.keys(i.byDate).forEach((function(n){e[n]||(e[n]={}),t.id&&(e[n][t.id]=parseFloat(i.byDate[n].toFixed(8)))})),e}),{});if((0,d.xb)(t))return e;for(var n=+Object.keys(t).sort()[0],i=+r()().endOf("day").valueOf(),a=(0,d.Up)(n,i),l={},c=0,u=null;c<a.length;c++){var m=a[c];l[m]=(0,s.Z)((0,s.Z)({},u?l[u]:{}),t[m]),u=m}var h={},p={};return Object.keys(l).forEach((function(e){var t=l[e];Object.keys(t).forEach((function(n){var s=A.find((function(e){return e.id===n})),i=null===s||void 0===s?void 0:s.underlyingId,a=y(n,e)||h[n];if(a&&(t[n]=parseFloat((0,d.gA)(t[n]).times((0,d.gA)(a.value)).toFixed(8)),h[n]=a),f){var r=I(i,e)||p[n];r&&(t[n]=parseFloat((0,d.gA)(t[n]).times((0,d.gA)(r.value)).toFixed(8)),p[n]=r)}})),t.total=Object.values(t).reduce((function(e,t){return e+t}),0)})),e.total=Object.keys(l).reduce((function(e,t){return t<M||e.push({date:parseInt(t),value:l[t].total}),e}),[]),e.rainbow=Object.keys(l).reduce((function(e,t){return t<M||e.push((0,s.Z)({date:parseInt(t),total:l[t].total},l[t])),e}),[]),e}),[A,f,M,j,x,v,g,y,I]);return(0,l.useEffect)((function(){if(T.rainbow.length)return w(!1),function(){w(!0)}}),[T]),{assets:A,balanceChartData:T,balanceChartDataLoading:b}}},77972:function(e,t,n){n.r(t),t.default={}}}]);
//# sourceMappingURL=3665.9fab98d9.chunk.js.map