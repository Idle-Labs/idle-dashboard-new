"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6698,219,9220,4389],{86698:function(t,e,n){n.r(e),n.d(e,{AssetStats:function(){return U}});var a=n(93433),i=n(4942),r=n(1413),o=n(29439),s=n(23876),l=n(24974),c=n(54447),d=n(79681),u=n(86059),f=n(66288),h=n(29482),g=n(80745),x=n(61617),v=n(3717),m=n(39177),p=n(97778),j=n(85267),b=n(1669),y=n(84389),w=n(6634),C=n(75712),S=n(20910),A=n(7276),M=n(15568),Z=n(64011),D=n(18147),k=n(50026),T=n(61925),I=n(15542),O=n(3498),P=n(24606),R=n(90219),B=n(68414),z=n(98440),F=n(45263),_=function(t){var e=t.translation,n=t.address;return(0,F.jsxs)(O.Ug,{py:4,width:"full",justifyContent:"space-between",borderBottomWidth:"1px",borderBottomColor:"divider",children:[(0,F.jsx)(I.Translation,{translation:e,textStyle:"tableCell"}),(0,F.jsx)(m.AddressLink,{address:n})]})},U=function(t){var e,n,m,U,E,H,L,V,W,N=t.showHeader,q=void 0===N||N,K=t.assetOnly,G=void 0!==K&&K,X=t.showAssetStrategy,Y=void 0!==X&&X,J=t.timeframe,$=t.dateRange,Q=(0,d.qM)(),tt=(0,j.m)().params,et=(0,f.X)().isMobile,nt=(0,A.useState)({startDate:null,endDate:null}),at=(0,o.Z)(nt,2),it=at[0],rt=at[1],ot=(0,A.useState)(void 0),st=(0,o.Z)(ot,2),lt=st[0],ct=st[1],dt=(0,A.useState)(z.W.WEEK),ut=(0,o.Z)(dt,2),ft=ut[0],ht=ut[1],gt=(0,b.w)(),xt=gt.vaults,vt=gt.contracts,mt=gt.selectors,pt=mt.selectAssetById,jt=mt.selectVaultById,bt=mt.selectAssetHistoricalPriceUsdByTimestamp,yt=(0,A.useMemo)((function(){return!!it.startDate&&!!it.endDate}),[it]);(0,A.useEffect)((function(){yt&&ht(void 0)}),[yt,ht]),(0,A.useEffect)((function(){ft&&rt({endDate:null,startDate:null})}),[ft,rt]);var wt=(0,A.useMemo)((function(){return tt.asset&&pt&&pt(tt.asset)}),[pt,tt.asset]),Ct=(0,A.useMemo)((function(){return tt.asset&&jt&&jt(tt.asset)}),[jt,tt.asset]),St=(0,A.useMemo)((function(){return wt&&s.A2[wt.type]}),[wt]),At=(0,A.useMemo)((function(){return St&&St.color}),[St]),Mt=(0,A.useMemo)((function(){if(null!==wt&&void 0!==wt&&wt.type)return Y?[wt.type]:["AA","BB"].includes(wt.type)?["AA","BB"]:[wt.type]}),[wt,Y]);(0,A.useEffect)((function(){Mt&&!lt&&ct(Mt)}),[lt,Mt,ct]);var Zt=(0,A.useMemo)((function(){if(!Ct||null===wt||void 0===wt||!wt.type||!xt.length)return[];if(G)return[wt.id];switch(wt.type){case"AA":case"BB":var t=(0,S.sj)(["AA","BB"],wt.type)[0],e=xt.find((function(e){return e&&"cdoConfig"in e&&"cdoConfig"in Ct&&e.type===t&&e.cdoConfig.address===Ct.cdoConfig.address}));return[wt.id,null===e||void 0===e?void 0:e.id];default:return[wt.id]}}),[wt,Ct,xt,G]),Dt=(0,A.useMemo)((function(){return J||ft}),[ft,J]),kt=(0,A.useMemo)((function(){return $||it}),[it,$]),Tt="BY"===(null===wt||void 0===wt?void 0:wt.type),It=(0,P.U)({assetIds:Zt}),Ot=It.allocations,Pt=It.colors,Rt=It.labels,Bt=(0,M.h)({assetIds:Zt,timeframe:Dt,dateRange:kt}).rateChartData,zt=(0,k.D)({assetIds:Zt,timeframe:Dt,dateRange:kt}).volumeChartData,Ft=function(t){var e=t.assetIds,n=t.dateRange,a=t.timeframe,i=t.useDollarConversion,r=void 0===i||i,s=(0,A.useState)(!0),l=(0,o.Z)(s,2),c=l[0],d=l[1],u=(0,b.w)(),f=u.historicalTvls,h=u.selectors,g=h.selectAssetsByIds,x=h.selectVaultById,v=h.selectAssetHistoricalTvls,m=h.selectAssetHistoricalTvlsUsd,p=(0,A.useMemo)((function(){return g?g(e):[]}),[e,g]),j=(0,A.useMemo)((function(){return(0,S.yb)(a,n)}),[a,n]),y=(0,o.Z)(j,2),w=y[0],C=y[1],M=(0,A.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(f).length)return t;var e=p.reduce((function(e,n,a){if(!n.id)return e;var i=r?m(n.id):v(n.id);if(!i)return e;var o=x(n.id);return i.forEach((function(i){var r,s=i.date,l="stats"in o&&(null===(r=o.stats)||void 0===r?void 0:r.startTimestamp);if(!(s<(l&&l>w?l:w)||C&&s>C)){var c=i.value;e[s]||(e[s]={date:s,total:0}),n.id&&(e[s][n.id]=c,a||t.total.push({date:s,value:c}))}})),e}),{});return t.rainbow=Object.values(e),t}),[p,r,x,f,v,m,w,C]);return(0,A.useEffect)((function(){if(M.rainbow.length)return d(!1),function(){d(!0)}}),[M]),{assets:p,tvlChartData:M,tvlChartDataLoading:c}}({assetIds:Zt,timeframe:Dt,dateRange:kt}),_t=Ft.tvlChartData,Ut=(0,B.C)({useRates:Tt,assetIds:Zt,timeframe:Dt,dateRange:kt}).performanceChartData,Et=(0,A.useMemo)((function(){var t=Zt.reduce((function(t,e){return(0,r.Z)((0,r.Z)({},t),{},(0,i.Z)({},e,(0,S.gA)(0)))}),{});return(0,S.xb)(Ut.rainbow)?t:Zt.reduce((function(t,e){var n,o,s,l,c,d,u=pt(e),f=Ut.rainbow[0],h=(0,a.Z)(Ut.rainbow).pop(),g=(0,S.d5)(f[e]),x=(0,S.d5)(h[e]),v=(0,S.d5)(h.date).minus(f.date).div(1e3).div(86400),m=x.div(g).minus(1).times(100),p=v.gt(0)?m.times(365).div(v):(0,S.gA)(0);null!==u&&void 0!==u&&null!==(n=u.apyBreakdown)&&void 0!==n&&n.harvest&&(0,S.gA)(null===u||void 0===u||null===(o=u.apyBreakdown)||void 0===o?void 0:o.harvest).gt(0)&&(p=p.plus(null===u||void 0===u||null===(s=u.apyBreakdown)||void 0===s?void 0:s.harvest));m&&v.gt(0)&&(null!==u&&void 0!==u&&null!==(l=u.apyBreakdown)&&void 0!==l&&l.rewards&&(0,S.gA)(null===u||void 0===u||null===(c=u.apyBreakdown)||void 0===c?void 0:c.rewards).gt(0)&&(p=p.plus(null===u||void 0===u||null===(d=u.apyBreakdown)||void 0===d?void 0:d.rewards)));return(0,r.Z)((0,r.Z)({},t),{},(0,i.Z)({},e,p))}),(0,r.Z)({},t))}),[Zt,Ut,pt]),Ht=(0,A.useMemo)((function(){return(0,S.xb)(Et)?null:(0,F.jsx)(O.Ug,{spacing:4,width:"full",children:Zt.map((function(t){var e=pt(t),n=s.A2[e.type].color,a=Et[t];return(0,F.jsxs)(O.Ug,{spacing:1,alignItems:"baseline",children:[(0,F.jsx)(u.Amount.Percentage,{textStyle:"heading",fontSize:"lg",color:n,value:a}),(0,F.jsx)(I.Translation,{translation:"defi.avgApy",fontSize:"sm",color:"cta"})]},"asset_".concat(t))}))})}),[Zt,Et,pt]),Lt=(0,A.useMemo)((function(){return Zt.reduce((function(t,e){var n=pt(e);return n?t.plus(n.tvlUsd):t}),(0,S.gA)(0))}),[Zt,pt]),Vt=(0,A.useMemo)((function(){var t={data:[],colors:{}};if(!Zt)return t;if("best"===(null===St||void 0===St?void 0:St.strategy)){var e=t;return Object.keys(Ot).forEach((function(t){var n=(0,l.iL)(t),a=(0,S.gA)(Ot[t]),i=Lt.times(a.div(100));e.colors[t]=Pt[t],e.data.push({value:parseFloat(i.toFixed(2)),label:t,extraData:{icon:null===n||void 0===n?void 0:n.icon,color:Pt[t],label:Rt[t]}})})),e}return Zt.reduce((function(t,e){var n=pt(e);return n?(t.colors[e]=s.A2[n.type].color,t.data.push({value:parseFloat((0,S.gA)(n.tvlUsd).toFixed(2)),label:n.id,extraData:{asset:n}}),t):t}),t)}),[Lt,Zt,St,pt,Ot,Pt,Rt]),Wt=(0,A.useCallback)((function(t){var e,n,a,i,r=Vt.data.reduce((function(t,e){return t.plus(e.value)}),(0,S.gA)(0)),o=function(t){return"$".concat((0,S.dm)(t))},l=null===t||void 0===t||null===(e=t.extraData)||void 0===e?void 0:e.asset,c=null===t||void 0===t||null===(n=t.extraData)||void 0===n?void 0:n.icon,d=null===t||void 0===t||null===(a=t.extraData)||void 0===a?void 0:a.label,u=null===t||void 0===t||null===(i=t.extraData)||void 0===i?void 0:i.color,f=c||(null===l||void 0===l?void 0:l.icon)||(null===wt||void 0===wt?void 0:wt.icon),h=d||Q(l?s.A2[l.type].label:"dashboard.portfolio.totalChart"),g=o(t?t.value:r),x=u||(l?s.A2[null===l||void 0===l?void 0:l.type].color:"#ffffff");return(0,F.jsxs)(F.Fragment,{children:[f&&(0,F.jsx)("image",{y:"35%",href:f,height:"34",width:"34",textAnchor:"middle",x:et?"44.5%":"46.5%"}),(0,F.jsx)("text",{x:"50%",y:"54%",fontSize:26,fill:"white",fontWeight:700,textAnchor:"middle",pointerEvents:"none",children:g}),(0,F.jsx)("text",{x:"50%",y:"61%",fill:x,fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",children:h})]})}),[Vt,wt,Q,et]),Nt=(0,A.useMemo)((function(){return Bt.total.reduce((function(t,e){return(0,S.gA)(e.value).gt(9999)?t:t.plus(e.value)}),(0,S.gA)(0)).div(Bt.total.length)}),[Bt]),qt=(0,A.useMemo)((function(){return zt.total.reduce((function(t,e){return t.plus(Math.abs(e.value))}),(0,S.gA)(0))}),[zt]),Kt=(0,A.useMemo)((function(){return(0,S.yb)(Dt,it)}),[Dt,it]),Gt=(0,o.Z)(Kt,2),Xt=Gt[0],Yt=Gt[1],Jt=(0,A.useMemo)((function(){var t=Zt.reduce((function(t,e){var n=pt(e);if(!n||!n.collectedFees)return t;var i=n.collectedFees.map((function(t){t.amountUsd=t.underlyingAmount;var e=bt(t.assetId,(0,S.kZ)(1e3*+t.timeStamp));return null!==e&&void 0!==e&&e.value&&(t.amountUsd=t.amountUsd.times(e.value)),t}));return[].concat((0,a.Z)(t),(0,a.Z)(i))}),[]);return t.filter((function(t){return 1e3*+t.timeStamp>=Xt&&(!Yt||1e3*+t.timeStamp<=Yt)}))}),[Zt,pt,bt,Xt,Yt]),$t=(0,A.useMemo)((function(){return Jt.reduce((function(t,e){return t.plus((0,S.d5)(e.amountUsd))}),(0,S.gA)(0))}),[Jt]),Qt=(0,A.useMemo)((function(){var t,e=[];if(Ct&&"tranches"===(null===St||void 0===St?void 0:St.strategy))e.push({address:Ct.cdoConfig.address,translation:"about.cdo"}),e.push({address:Ct.strategyConfig.address,translation:"about.strategy"});if(Zt.forEach((function(t){var n=pt(t);if(!n)return null;e.push({address:n.id,translation:["about.".concat(n.type)]})})),null===St||void 0===St||null===(t=St.feesCollectors)||void 0===t||t.forEach((function(t){e.push({address:t,translation:"about.feeCollector"})})),"BY"===(null===wt||void 0===wt?void 0:wt.type)){var n=vt.find((function(t){return"Timelock"===t.name}));n&&e.push({address:n.id,translation:"about.timelock"});var a=vt.find((function(t){return"GovernorBravo"===t.name}));a&&e.push({address:a.id,translation:"about.governance"})}return e.map((function(t,e){return(0,F.jsx)(_,(0,r.Z)({},t),e)}))}),[Zt,St,pt,wt,Ct,vt]),te=(0,A.useMemo)((function(){return(0,F.jsxs)(O.MI,{spacing:4,width:"full",columns:[1,4],children:[(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"defi.tvl",textStyle:"captionSmall"}),(0,F.jsx)(u.Amount.Usd,{value:Lt,textStyle:"ctaStatic",fontSize:"xl"})]}),"tranches"===(null===St||void 0===St?void 0:St.strategy)?(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"defi.apyRatio",textStyle:"captionSmall"}),(0,F.jsx)(O.Ug,{spacing:5,children:Zt.map((function(t){var e=pt(t);return e?(0,F.jsx)(C.AssetProvider,{assetId:t,wrapFlex:!1,children:(0,F.jsx)(C.AssetProvider.ApyRatio,{textStyle:"ctaStatic",color:Zt.length>1?"strategies.".concat(null===e||void 0===e?void 0:e.type):"primary",fontSize:"xl"})},"asset_".concat(t)):null}))})]}):(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall"}),(0,F.jsx)(u.Amount.Percentage,{value:Nt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"stats.totalVolume",textStyle:"captionSmall"}),(0,F.jsx)(u.Amount.Usd,{value:qt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"stats.collectedFees",textStyle:"captionSmall"}),(0,F.jsx)(p.TokenAmount,{assetId:null===wt||void 0===wt?void 0:wt.id,amount:$t,showIcon:!1,textStyle:"ctaStatic",fontSize:"xl"})]})]})}),[Lt,Nt,qt,Zt,wt,$t,pt,St]);return(0,F.jsx)(C.AssetProvider,{assetId:tt.asset,wrapFlex:!1,children:(0,F.jsxs)(O.gC,{spacing:16,width:"full",children:[q&&(0,F.jsxs)(O.Kq,{mt:14,width:"100%",spacing:[4,8],alignItems:["flex-start","center"],justifyContent:"flex-start",direction:["column","row"],children:[(0,F.jsxs)(O.Ug,{spacing:2,alignItems:"center",children:[(0,F.jsx)(x.AssetLabel,{assetId:tt.asset,fontSize:"h2"}),(0,F.jsx)(C.AssetProvider.ChainIcon,{width:6,height:6})]}),(0,F.jsxs)(O.Kq,{pb:3,flex:1,spacing:[4,0],width:["full","auto"],borderBottom:"1px solid",borderColor:"divider",justifyContent:"space-between",direction:["column","row"],alignItems:["flex-start","center"],children:[(0,F.jsxs)(O.Ug,{spacing:6,width:["full","auto"],justifyContent:"flex-start",children:[(0,F.jsxs)(O.Ug,{spacing:0,position:"relative",children:[(0,F.jsx)(h.ProductTag,{type:null===St||void 0===St?void 0:St.strategy,py:2}),(0,F.jsx)(O.kC,{top:"-12px",right:"-12px",position:"absolute",children:(0,F.jsx)(C.AssetProvider.Strategies,{})})]}),null===St||void 0===St||null===(e=St.stats)||void 0===e||null===(n=e.header)||void 0===n||null===(m=n.fields)||void 0===m?void 0:m.map((function(t){return(0,F.jsx)(C.AssetProvider.GeneralData,{field:t,color:"cta"},"field_".concat(t))}))]}),(0,F.jsxs)(O.Kq,{spacing:2,width:["full","auto"],direction:["column","row"],justifyContent:["flex-start","center"],children:[(0,F.jsx)(T.TimeframeSelector,{variant:"button",timeframe:ft,setTimeframe:ht,width:["100%","auto"],justifyContent:["center","initial"]}),(0,F.jsx)(v.DatePicker,{selected:yt,setDateRange:rt})]})]})]}),te,!G&&"tranches"===(null===St||void 0===St?void 0:St.strategy)&&(0,F.jsx)(O.MI,{spacing:4,width:"full",columns:[1,2],children:Zt.map((function(t){var e,n,a=pt(t);return a?(0,F.jsx)(C.AssetProvider,{wrapFlex:!1,assetId:null===a||void 0===a?void 0:a.id,children:(0,F.jsxs)(O.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:s.A2[null===a||void 0===a?void 0:a.type].label,textStyle:"ctaStatic",fontWeight:600,fontSize:"lg"}),(0,F.jsxs)(O.MI,{spacing:4,columns:2,width:"full",children:[(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall"}),(0,F.jsx)(u.Amount.Percentage,{value:Et[t],textStyle:"ctaStatic",color:"strategies.".concat(null===a||void 0===a?void 0:a.type),fontSize:"xl"})]}),null===(e=s.A2[null===a||void 0===a?void 0:a.type].stats)||void 0===e||null===(n=e.strategyData)||void 0===n?void 0:n.fields.map((function(t){return(0,F.jsxs)(c.Card,{children:[(0,F.jsx)(I.Translation,{mb:1,translation:"stats.".concat(t),textStyle:"captionSmall"}),(0,F.jsx)(C.AssetProvider.GeneralData,{field:t,textStyle:"ctaStatic",fontSize:"xl"})]},"field_".concat(t))}))]})]})},"row_".concat(t)):null}))}),(0,F.jsxs)(O.gC,{spacing:20,width:"full",children:[(0,F.jsxs)(O.Kq,{spacing:6,width:"full",direction:["column","row"],children:[(0,F.jsxs)(O.gC,{spacing:6,width:["full",2/3],alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:"stats.performances",component:O.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,F.jsxs)(c.Card.Dark,{p:6,children:[Ut&&!(null!==(U=Ut.rainbow)&&void 0!==U&&U.length)&&(0,F.jsx)(O.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,F.jsx)(I.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,F.jsxs)(O.gC,{spacing:4,width:"full",children:[Ut&&(null===(E=Ut.rainbow)||void 0===E?void 0:E.length)>0&&(0,F.jsxs)(O.Ug,{width:"full",justifyContent:"space-between",children:[Ht,(0,F.jsx)(Z.DownloadCsvData,{chartData:Ut,isRainbowChart:!0,fileName:"performances_".concat(null===wt||void 0===wt?void 0:wt.id,"_").concat(Xt,"_").concat(Yt,".csv")})]}),(0,F.jsx)(w.GenericChart,{percentChange:0,assetIds:Zt,color:At,maxMinEnabled:!0,isRainbowChart:!0,data:Ut,setPercentChange:function(){},timeframe:Dt,height:et?"300px":"350px",scaleType:Zt.length>1?"log":"linear",margins:{top:10,right:0,bottom:60,left:0},formatFn:function(t){return"".concat((0,S.dm)(t,8)," ").concat(null===wt||void 0===wt?void 0:wt.name)}})]})]})]}),(0,F.jsxs)(O.gC,{flex:1,spacing:6,width:["full","auto"],alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:"stats.tvlDistribution",component:O.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,F.jsx)(c.Card.Dark,{p:6,flex:1,children:(0,F.jsx)(R.DonutChart,(0,r.Z)((0,r.Z)({},Vt),{},{getSliceData:Wt}))})]})]}),(0,F.jsxs)(O.MI,{spacing:6,width:"full",columns:[1,3],children:[(0,F.jsxs)(O.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:"defi.tvl",component:O.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,F.jsxs)(c.Card.Dark,{p:6,flex:1,children:[_t&&!(null!==(H=_t.rainbow)&&void 0!==H&&H.length)&&(0,F.jsx)(O.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,F.jsx)(I.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,F.jsx)(w.GenericChart,{percentChange:0,assetIds:Zt,maxMinEnabled:!0,isRainbowChart:!0,color:At,data:_t,setPercentChange:function(){},timeframe:Dt,height:et?"300px":"350px",scaleType:Zt.length>1?"log":"linear",margins:{top:10,right:0,bottom:60,left:0},fileName:_t&&(null===(L=_t.rainbow)||void 0===L?void 0:L.length)>0?"tvls_".concat(null===wt||void 0===wt?void 0:wt.id,"_").concat(Xt,"_").concat(Yt,".csv"):null})]})]}),(0,F.jsxs)(O.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:"defi.apy",component:O.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,F.jsxs)(c.Card.Dark,{p:6,flex:1,children:[Bt&&!(null!==(V=Bt.rainbow)&&void 0!==V&&V.length)&&(0,F.jsx)(O.M5,{layerStyle:"overlay",bg:"rgba(0, 0, 0, 0.4)",children:(0,F.jsx)(I.Translation,{translation:"dashboard.assetChart.empty",textAlign:"center",py:1,px:3,bg:"rgba(0, 0, 0, 0.2)",borderRadius:8})}),(0,F.jsx)(w.GenericChart,{percentChange:0,assetIds:Zt,data:Bt,color:At,maxMinEnabled:!0,isRainbowChart:!0,setPercentChange:function(){},timeframe:Dt,height:et?"300px":"350px",formatFn:function(t){return"".concat((0,S.rp)(t))},margins:{top:10,right:0,bottom:60,left:0},fileName:Bt&&(null===(W=Bt.rainbow)||void 0===W?void 0:W.length)>0?"rates_".concat(null===wt||void 0===wt?void 0:wt.id,"_").concat(Xt,"_").concat(Yt,".csv"):null})]})]}),(0,F.jsxs)(O.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,F.jsx)(I.Translation,{translation:"stats.volumes",component:O.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,F.jsx)(c.Card.Dark,{p:6,flex:1,children:(0,F.jsxs)(O.gC,{flex:1,spacing:4,width:"full",height:"full",alignItems:"flex-end",children:[(0,F.jsx)(Z.DownloadCsvData,{chartData:zt,isRainbowChart:!0,fileName:"volumes_".concat(null===wt||void 0===wt?void 0:wt.id,"_").concat(Xt,"_").concat(Yt,".csv")}),(0,F.jsx)(y.VolumeChart,{assetIds:Zt,dateRange:it,timeframe:Dt})]})})]})]})]}),(0,F.jsxs)(O.MI,{width:"full",spacing:6,columns:[1,2],children:[(0,F.jsx)(D.TransactionList,{assetIds:Zt,transactions:Jt,showTitleOnMobile:!0,title:"stats.collectedFees",emptyText:"stats.collectedFeesEmpty",maxH:600}),(0,F.jsx)(c.Card,{children:(0,F.jsxs)(O.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",justifyContent:"flex-start",children:[(0,F.jsx)(I.Translation,{component:c.Card.Heading,translation:"common.about"}),(0,F.jsx)(g.Scrollable,{maxH:600,children:Qt})]})})]})]})})}},3717:function(t,e,n){n.r(e),n.d(e,{DatePicker:function(){return v}});var a=n(29439),i=(n(89822),n(4550)),r=n.n(i),o=n(55967),s=n(7276),l=n(66288),c=n(15542),d=n(58942),u=n(7630),f=n(43127),h=n(3498),g=(n(82237),n(36358),n(51499)),x=n(45263),v=function(t){var e=t.selected,n=void 0!==e&&e,i=t.setDateRange,v=void 0===i?function(){}:i,m=(0,l.X)().isMobile,p=(0,u.qY)(),j=p.isOpen,b=p.onOpen,y=p.onClose,w=(0,s.useState)("startDate"),C=(0,a.Z)(w,2),S=C[0],A=C[1],M=(0,s.useState)({startDate:null,endDate:null}),Z=(0,a.Z)(M,2),D=Z[0],k=Z[1],T=(0,s.useCallback)((function(t){return A(t||"startDate")}),[A]),I=(0,s.useCallback)((function(){return v(D),y()}),[y,D,v]);return(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(f.zx,{px:4,border:0,textStyle:"cta",variant:"filter","aria-selected":n,leftIcon:(0,x.jsx)(o.kVv,{}),onClick:function(){return b()},children:(0,x.jsxs)(h.Ug,{spacing:2,alignItems:"center",children:[(0,x.jsx)(c.Translation,{translation:"common.calendar"}),n&&(0,x.jsx)(h.xu,{width:2,height:2,bg:"cta",borderRadius:"50%"})]})}),(0,x.jsxs)(g.u_,{size:"2xl",isOpen:j,onClose:y,isCentered:!m,blockScrollOnMount:!1,children:[(0,x.jsx)(g.ZA,{}),(0,x.jsxs)(g.hz,{children:[(0,x.jsx)(c.Translation,{component:g.xB,translation:"stats.selectDateRange",textStyle:"heading",fontSize:"md",color:"cta"}),(0,x.jsx)(g.ol,{}),(0,x.jsx)(g.fe,{children:(0,x.jsx)(d.DayPickerRangeController,{endDate:D.endDate,maxDate:r()(),focusedInput:S,startDate:D.startDate,numberOfMonths:m?1:2,renderKeyboardShortcutsButton:function(){return null},onDatesChange:function(t){return k(t)},initialVisibleMonth:function(){return r()().subtract(1,"M")},isDayBlocked:function(t){return t.isAfter(r()())},onFocusChange:function(t){return T(t)}})}),(0,x.jsx)(g.mz,{children:(0,x.jsx)(h.kC,{width:"full",justifyContent:"center",children:(0,x.jsx)(c.Translation,{component:f.zx,translation:"common.apply",variant:"ctaPrimary",px:10,onClick:I})})})]})]})]})}},90219:function(t,e,n){n.r(e),n.d(e,{DonutChart:function(){return j},PieChart:function(){return x}});var a=n(45987),i=n(1413),r=n(29439),o=n(14380),s=n(7276),l=n(28547),c=n(87563),d=n(68165),u=n(77806),f=n(45263),h=["data","colors","getSliceData"],g={top:0,right:0,bottom:0,left:0};function x(t){var e=t.data,n=t.colors,a=t.width,c=t.height,d=t.margin,h=void 0===d?g:d,x=t.donutThickness,v=void 0===x?30:x,m=t.animate,j=void 0===m||m,b=t.getSliceData,y=(0,s.useState)(null),w=(0,r.Z)(y,2),C=w[0],S=w[1],A=a-h.left-h.right,M=c-h.top-h.bottom,Z=Math.min(A,M)/2,D=M/2,k=A/2,T=e.map((function(t){return t.label})),I=T.map((function(t){return n[t]})),O=(0,l.Z)({domain:T,range:I}),P=b&&b(C);return(0,f.jsxs)("svg",{width:a,height:c,children:[(0,f.jsx)("rect",{rx:14,width:a,height:c,fill:"url('#visx-pie-gradient')"}),P,(0,f.jsx)(o.Z,{top:D+h.top,left:k+h.left,children:(0,f.jsx)(u.Z,{padAngle:0,cornerRadius:0,pieValue:function(t){return t.value},outerRadius:Z,innerRadius:Z-v,data:e,children:function(t){return(0,f.jsx)(p,(0,i.Z)((0,i.Z)({},t),{},{animate:j,onMouseOver:function(t){var e=t.data;return S(e)},getKey:function(t){return t.data.label},onMouseOut:function(){return S(null)},getColor:function(t){return O(t.data.label)}}))}})})]})}var v=function(t){var e=t.endAngle;return{startAngle:e>Math.PI?2*Math.PI:0,endAngle:e>Math.PI?2*Math.PI:0,opacity:0}},m=function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,opacity:1}};function p(t){var e=t.animate,n=t.arcs,a=t.path,r=t.getKey,o=t.getColor,s=t.onMouseOut,l=t.onMouseOver,c=t.onClickDatum;return(0,d.useTransition)(n,{from:e?v:m,enter:m,update:m,leave:e?v:m,keys:r})((function(t,e){return(0,f.jsx)("g",{children:(0,f.jsx)(d.animated.path,{d:(0,d.interpolate)([t.startAngle,t.endAngle],(function(t,n){return a((0,i.Z)((0,i.Z)({},e),{},{startAngle:t,endAngle:n}))})),fill:o(e),onClick:function(){return c&&c(e)},onMouseOver:function(){return l&&l(e)},onMouseOut:function(){return s&&s(e)},onTouchStart:function(){return c&&c(e)}})},Math.random())}))}var j=function(t){var e=t.data,n=t.colors,r=t.getSliceData,o=(0,a.Z)(t,h);return(0,f.jsx)(c.Z,{debounceTime:10,children:function(t){return(0,f.jsx)(x,(0,i.Z)({data:e,colors:n,width:t.width,height:t.height,getSliceData:r},o))}})}},9220:function(t,e,n){n.r(e),n.d(e,{HistogramChart:function(){return L}});var a=n(1413),i=n(93433),r=n(57118),o=n(20910),s=n(14380),l=n(7276),c=n(84033),d=n.n(c),u=n(64625),f=n(46177),h=n(97862),g=n(57478),x=n(25908),v=n(12528),m=n(23369),p=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},j.apply(this,arguments)}function b(t){var e=t.data,n=t.className,a=t.top,i=t.left,r=t.x,o=t.y0,c=void 0===o?f.l8:o,b=t.y1,y=void 0===b?f.xf:b,w=t.xScale,C=t.yScale,S=t.color,A=t.keys,M=t.value,Z=t.order,D=t.offset,k=t.children,T=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,p),I=(0,u.Z)();A&&I.keys(A),M&&(0,g.Z)(I.value,M),Z&&I.order((0,x.ZP)(Z)),D&&I.offset((0,v.ZP)(D));var O=I(e),P=(0,h.Z)(w),R=O.map((function(t,e){var n=t.key;return{index:e,key:n,bars:t.map((function(e,a){var i=(C(c(e))||0)-(C(y(e))||0),o=C(y(e)),s="bandwidth"in w?w(r(e.data)):Math.max((w(r(e.data))||0)-P/2);return{bar:e,key:n,index:a,height:i,width:P,x:s||0,y:o||0,color:S(t.key,a)}}))}}));return k?l.createElement(l.Fragment,null,k(R)):l.createElement(s.Z,{className:d()("visx-bar-stack",n),top:a,left:i},R.map((function(t){return t.bars.map((function(e){return l.createElement(m.Z,j({key:"bar-stack-"+t.index+"-"+e.index,x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color},T))}))})))}var y,w=n(79866),C=n(10577),S=n(27091),A=n(87563),M=n(86059),Z=n(29564),D=n(26720),k=n(96699),T=n(3498),I=n(75712),O=n(61168),P=n(5151),R=n(82173),B=n(32802),z=n(20663),F=n(48379),_=n(28547),U=n(45263),E={top:20,left:0,right:0,bottom:35},H=(0,O.Z)((function(t){var e,n=t.data,l=t.colors,c=t.width,d=t.height,u=t.events,f=void 0!==u&&u,h=t.tooltip,g=void 0===h||h,x=t.margin,v=void 0===x?E:x,m=t.tooltipOpen,p=t.tooltipTop,j=t.tooltipData,A=t.hideTooltip,O=t.showTooltip,H=(0,k.Fg)(),L=(0,Z.R)().locale,V=function(t){return t.date},W={textAnchor:"middle",fontSize:12,fontWeight:"bold",fill:H.colors.table.axisLabel},N=d-v.top-v.bottom-10,q=c-v.left-v.right,K=Object.keys(l),G=K.map((function(t){return l[t]})),X=n.map((function(t){return t.total})),Y=(0,B.Z)({padding:.2,range:[0,q],domain:n.map(V)}),J=(0,z.Z)({range:[0,q],domain:(0,r.Z)(n,(function(t){return(0,o.qF)(t.date).toDate()}))}),$=Math.max.apply(Math,(0,i.Z)(X.map((function(t){return Math.abs(t)})))),Q=-$,tt=(0,F.Z)({nice:!1,range:[N,0],domain:[Q,$]}),et=(0,_.Z)({domain:K,range:G}),nt=(0,D.ff)("white",H.colors.card.bg),at=(0,D.ff)(H.colors.gray[200],H.colors.gray[700]),it=(0,D.ff)(H.colors.gray[800],"white");return(0,U.jsxs)("div",{style:{position:"relative"},children:[(0,U.jsxs)(S.Z,{width:c,height:d,children:[(0,U.jsx)(s.Z,{top:v.top,children:(0,U.jsx)(b,{data:n,keys:K,x:V,color:et,xScale:Y,yScale:tt,offset:"diverging",children:function(t){return t.map((function(t){return t.bars.map((function(e){return(0,U.jsx)("rect",{x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color,onClick:function(){f&&alert("clicked: ".concat(JSON.stringify(e)))},onMouseLeave:function(){y=window.setTimeout((function(){A()}),300)},onMouseMove:function(t){y&&clearTimeout(y);var n=(0,C.Z)(t),a=e.x+e.width/2;O({tooltipData:e,tooltipTop:null===n||void 0===n?void 0:n.y,tooltipLeft:a})}},"bar-stack-".concat(t.index,"-").concat(e.index))}))}))}})}),(0,U.jsx)(w.Z,{strokeWidth:1,hideTicks:!0,top:N/2+v.top,scale:Y,stroke:"white",tickFormat:function(){return""}}),(0,U.jsx)(w.Z,{hideTicks:!0,hideAxisLine:!0,numTicks:5,scale:J,top:d-v.bottom,tickLabelProps:function(){return W}})]}),g&&m&&j&&(0,U.jsx)(P.Z,{top:p,left:j.x,style:(0,a.Z)((0,a.Z)({},R.j),{},{border:"none",backgroundColor:"transparent",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0}),children:(0,U.jsxs)(T.gC,{p:2,spacing:3,width:"full",alignItems:"flex-start",borderRadius:"lg",borderColor:at,borderWidth:1,color:it,bgColor:nt,children:[(0,U.jsx)(T.gC,{spacing:4,width:"full",alignItems:"flex-start",children:Object.keys(j.bar.data).filter((function(t){return!["date","total"].includes(t)})).map((function(t){return(0,U.jsxs)(T.gC,{spacing:2,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(I.AssetProvider,{assetId:t,children:(0,U.jsxs)(T.Ug,{spacing:1,children:[(0,U.jsx)(I.AssetProvider.Icon,{size:"2xs"}),(0,U.jsx)(I.AssetProvider.Name,{fontWeight:"bold"}),(0,U.jsx)(I.AssetProvider.Strategy,{color:"gray.500",fontWeight:"bold",prefix:"(",suffix:")"})]})}),(0,U.jsx)(M.Amount.Usd,{abbreviate:!1,fontWeight:"bold",fontSize:"md",value:j.bar.data[t],color:et(t)})]},t)}))}),(0,U.jsx)(T.xv,{fontSize:"xs",color:H.colors.gray[500],children:(e=j.bar.data,(0,o.qF)(V(e)).locale(L).format("LLL"))})]})},Math.random())]})})),L=function(t){var e=t.data,n=t.colors,a=t.labels,i=t.tooltip;return(0,U.jsx)(A.Z,{debounceTime:10,children:function(t){return(0,U.jsx)(H,{width:t.width,height:t.height,data:e,tooltip:i,colors:n,labels:a})}})}},18147:function(t,e,n){n.r(e),n.d(e,{TransactionList:function(){return b}});var a=n(1413),i=n(93433),r=n(29439),o=n(45987),s=n(20910),l=n(7276),c=n(54447),d=n(39195),u=n(80745),f=n(3498),h=n(89030),g=n(15542),x=n(1669),v=n(53293),m=n(48024),p=n(45263),j=["assetIds","showTitleOnMobile","fullHeightOnMobile","title","transactions","emptyText"],b=function(t){var e=t.assetIds,n=t.showTitleOnMobile,b=void 0!==n&&n,y=t.fullHeightOnMobile,w=void 0!==y&&y,C=t.title,S=t.transactions,A=t.emptyText,M=(0,o.Z)(t,j),Z=(0,d.Y)().account,D=(0,v.Z)(),k=(0,r.Z)(D,2),T=k[0],I=k[1],O=(0,x.w)(),P=O.isPortfolioLoaded,R=O.isVaultsPositionsLoaded,B=O.selectors,z=B.selectVaultTransactions,F=B.selectVaultGauge,_=(0,l.useMemo)((function(){return S||(Z&&e&&z&&F?e.reduce((function(t,e){var n=F(e),a=z(e),r=n?z(n.id):[];return[].concat((0,i.Z)(t),(0,i.Z)(a),(0,i.Z)(r))}),[]):[])}),[S,Z,e,z,F]),U=(0,l.useMemo)((function(){return P&&(!Z||R)}),[P,Z,R]),E=(0,l.useMemo)((function(){return U?_.length>0?(0,s.Pf)(_,"timeStamp","desc").map((function(t,e){return(0,p.jsx)(m.TransactionItem,{transaction:t},"tx_".concat(t.hash,"_").concat(e))})):(0,p.jsx)(f.kC,{flex:1,minH:250,width:"100%",alignItems:"center",justifyContent:"center",children:(0,p.jsx)(g.Translation,{component:f.xv,translation:A||"assets.assetDetails.assetHistory.emptyTransactions"})}):(0,p.jsxs)(f.gC,{spacing:4,width:"100%",children:[(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10}),(0,p.jsx)(h.Od,{width:"100%",height:10})]})}),[U,_,A]);return(0,p.jsx)(c.Card,(0,a.Z)((0,a.Z)({flex:1},M),{},{children:(0,p.jsxs)(f.gC,{flex:1,spacing:0,height:"100%",alignItems:"flex-start",ref:T,justifyContent:"flex-start",children:[(0,p.jsx)(g.Translation,{display:b?"block":["none","block"],component:c.Card.Heading,fontSize:"lg",translation:C||"assets.assetDetails.assetHistory.transactionHistory"}),(0,p.jsx)(u.Scrollable,{maxH:[w?"100%":280,Math.max((null===I||void 0===I?void 0:I.height)||400)],children:E})]})}))}},84389:function(t,e,n){n.r(e),n.d(e,{VolumeChart:function(){return o}});var a=n(9220),i=n(50026),r=n(45263),o=function(t){var e=t.assetIds,n=t.timeframe,o=t.dateRange,s=(0,i.D)({assetIds:e,timeframe:n,dateRange:o}),l=s.labels,c=s.colors,d=s.volumeChartData;return s.volumeChartDataLoading?null:(0,r.jsx)(a.HistogramChart,{colors:c,labels:l,data:d.rainbow})}},50026:function(t,e,n){n.d(e,{D:function(){return d}});var a=n(4942),i=n(1413),r=n(29439),o=n(23876),s=n(7276),l=n(20910),c=n(1669),d=function(t){var e=t.assetIds,n=t.dateRange,d=t.timeframe,u=t.useDollarConversion,f=void 0===u||u,h=(0,s.useState)(!0),g=(0,r.Z)(h,2),x=g[0],v=g[1],m=(0,c.w)(),p=m.historicalTvls,j=m.selectors,b=j.selectAssetsByIds,y=j.selectVaultById,w=j.selectAssetHistoricalTvls,C=j.selectAssetHistoricalTvlsUsd,S=(0,s.useMemo)((function(){return b?b(e):[]}),[e,b]),A=(0,s.useMemo)((function(){return(0,l.yb)(d,n)}),[d,n]),M=(0,r.Z)(A,2),Z=M[0],D=M[1],k=(0,s.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(p).length)return t;var e=S.reduce((function(t,e){if(!e.id)return t;var n=f?C(e.id):w(e.id);if(!n)return t;var a=y(e.id),i=null;return n.forEach((function(n){var r,o=n.date,s="stats"in a&&(null===(r=a.stats)||void 0===r?void 0:r.startTimestamp);if(!(o<(s&&s>Z?s:Z)||D&&o>D)){if(i&&e.id){t[o]||(t[o]={date:o,total:0});var c=(0,l.gA)(n.value).minus(i.value);t[o][e.id]=Number(c.toFixed(8)),t[o].total=Number((0,l.gA)(t[o].total).plus(c).toFixed(8))}i=n}})),t}),{});return t.total=Object.values(e).map((function(t){return{date:t.date,value:t.total}})),t.rainbow=Object.values(e),t}),[S,f,y,p,w,C,Z,D]),T=(0,s.useMemo)((function(){return S.length?S.reduce((function(t,e){return(0,i.Z)((0,i.Z)({},t),{},{labels:(0,i.Z)((0,i.Z)({},t.labels),{},(0,a.Z)({},e.id,e.name)),colors:(0,i.Z)((0,i.Z)({},t.colors),{},(0,a.Z)({},e.id,o.A2[e.type].color))})}),{labels:{},colors:{}}):{labels:{},colors:{}}}),[S]);return(0,s.useEffect)((function(){if(k.rainbow.length)return v(!1),function(){v(!0)}}),[k]),{volumeChartData:k,volumeChartDataLoading:x,labels:T.labels,colors:T.colors}}},36358:function(t,e,n){n.r(e),e.default={}}}]);