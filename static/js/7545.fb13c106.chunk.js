"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[7545,494,8129,7360],{60494:function(e,t,n){n.r(t),n.d(t,{SearchBar:function(){return d}});var i=n(29439),a=n(55967),r=n(79681),s=n(7276),l=n(66288),o=n(3498),c=n(3497),u=n(45263),d=function(e){var t=e.placeholder,n=e.handleSearchChange,d=(0,l.X)().theme,f=(0,r.qM)(),x=(0,s.useState)(""),p=(0,i.Z)(x,2),g=p[0],m=p[1];return(0,s.useEffect)((function(){n(g)}),[g,n]),(0,u.jsx)(o.Ug,{children:(0,u.jsxs)(c.BZ,{children:[(0,u.jsx)(c.II,{type:"text",placeholder:f(t),variant:"search",onChange:function(e){return m(e.target.value)}}),(0,u.jsx)(c.xH,{children:(0,u.jsx)(a.vU7,{size:24,color:d.colors.cta})})]})})}},87545:function(e,t,n){n.r(t),n.d(t,{Strategy:function(){return O},TableField:function(){return Z}});var i=n(93433),a=n(1413),r=n(29439),s=n(54447),l=n(79681),o=n(95173),c=n(86059),u=n(55967),d=n(39807),f=n(66288),x=n(75349),p=n(60494),g=n(39195),m=n(58194),h=n(15542),v=n(85267),j=n(1669),y=n(12056),A=n(75712),w=n(7276),b=n(88129),S=n(67360),C=n(99594),I=n(89030),z=n(3498),M=n(82137),k=n(2092),T=n(45263),Z=function(e){var t=e.field,n=e.row,i=e.value,a=n.original.id;return(0,T.jsx)(I.N2,{noOfLines:2,isLoaded:!!i,children:(0,T.jsx)(A.AssetProvider,{assetId:a,children:(0,T.jsx)(A.AssetProvider.GeneralData,{section:"strategy",field:t})})})},O=function(){var e=(0,o.s0)(),t=(0,l.qM)(),n=(0,f.X)().isMobile,A=(0,d.f)().openModal,O=(0,v.m)(),P=O.location,B=O.params,L=(0,g.Y)(),H=L.account,F=L.network,U=(0,w.useState)(null),_=(0,r.Z)(U,2),N=_[0],R=_[1],E=(0,w.useState)(null),q=(0,r.Z)(E,2),D=q[0],V=q[1],W=(0,w.useState)(null),K=(0,r.Z)(W,2),Y=K[0],X=K[1],G=(0,w.useState)(null),J=(0,r.Z)(G,2),Q=J[0],$=J[1],ee=(0,j.w)(),te=ee.isPortfolioLoaded,ne=ee.selectors,ie=ne.selectVaultsWithBalance,ae=ne.selectVaultsAssetsByType,re=ne.selectVaultsAssetsWithBalance,se=(0,w.useMemo)((function(){return Object.keys(y.A).find((function(e){return y.A[e].route===B.strategy}))}),[B]),le=(0,w.useCallback)((function(t,n,i){return(0,C.fU)(n,i,t.original),e("".concat(null===P||void 0===P?void 0:P.pathname.replace(/\/$/,""),"/").concat(t.original.id))}),[e,P]),oe=(0,w.useMemo)((function(){return se&&y.A[se].columns}),[se]),ce=(0,w.useMemo)((function(){return se&&oe?oe.map((function(e){var n=e.id,i=e.accessor,r=e.sortType,s="alpha"===r?C.YC:"numeric"===r?C._O:void 0;return{id:n,accessor:i,disableSortBy:!s,defaultCanSort:!!s,Header:t(e.title||"defi.".concat(n)),sortType:s?function(e,t){return s(e,t,i)}:void 0,Cell:function(t){var i=t.value,r=t.row;return e.extraFields&&e.extraFields.length>0?(0,T.jsxs)(z.Kq,(0,a.Z)((0,a.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,T.jsx)(Z,{field:n,value:i,row:r}),e.extraFields.map((function(e){return(0,T.jsx)(Z,{field:e,value:i,row:r},"extraField_".concat(e))}))]})):(0,T.jsx)(Z,{field:n,value:i,row:r})}}})):[]}),[se,oe,t]),ue=(0,w.useMemo)((function(){return se&&oe?oe.filter((function(e){return!e.tables||e.tables.includes("Deposited")})).map((function(e){var n=e.id,i=e.accessor,r=e.sortType,s="alpha"===r?C.YC:"numeric"===r?C._O:void 0;return{id:n,accessor:i,disableSortBy:!s,defaultCanSort:!!s,Header:t(e.title||"defi.".concat(n)),sortType:s?function(e,t){return s(e,t,i)}:void 0,Cell:function(t){var i=t.value,r=t.row;return e.extraFields&&e.extraFields.length>0?(0,T.jsxs)(z.Kq,(0,a.Z)((0,a.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,T.jsx)(Z,{field:n,value:i,row:r}),e.extraFields.map((function(e){return(0,T.jsx)(Z,{field:e,value:i,row:r},"extraField_".concat(e))}))]})):(0,T.jsx)(Z,{field:n,value:i,row:r})}}})):[]}),[se,oe,t]),de=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,i.Z)(ue),[{accessor:"balanceUsd",Header:t("defi.balance"),Cell:function(e){var t=e.value;return(0,T.jsx)(I.N2,{noOfLines:2,isLoaded:!!t,children:(0,T.jsx)(c.Amount.Usd,{value:t,textStyle:"tableCell"})})},sortType:C._O},{accessor:"vaultPosition",Header:t("defi.realizedApy"),Cell:function(e){var t=e.value;return(0,T.jsx)(I.N2,{noOfLines:2,isLoaded:!!t,children:t&&(0,T.jsxs)(M.kN,{children:[(0,T.jsx)(M.Jf,{children:(0,T.jsxs)(z.kC,{direction:"row",alignItems:"center",children:[!t.realizedApy.isNaN()&&(0,T.jsx)(M.uY,{type:"increase"}),(0,T.jsx)(c.Amount.Percentage,{value:t.realizedApy,textStyle:"tableCell"})]})}),(0,T.jsx)(c.Amount.Usd,{prefix:"+",value:t.usd.earnings,textStyle:"captionSmall"})]})})},sortType:function(e,t){return(0,C._O)(e,t,"vaultPosition.earningsPercentage")}}])}),[t,ue]),fe=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,i.Z)(ce))}),[ce]),xe=(0,w.useMemo)((function(){return ie&&te?re(se):[]}),[te,ie,re,se]),pe=(0,w.useMemo)((function(){return ae&&te?ae(se):[]}),[te,ae,se]),ge=(0,w.useMemo)((function(){return ae&&te?ae(se).filter((function(e){return!xe.map((function(e){return e.id})).includes(e.id)})):[]}),[te,ae,xe,se]),me=(0,w.useMemo)((function(){return se?"".concat(se,"_deposited"):""}),[se]),he=(0,w.useMemo)((function(){if(!se)return"";var e=t(y.A[se].label);return"".concat(e," - ").concat(t("defi.deposited"))}),[se,t]),ve=(0,w.useMemo)((function(){return se?"".concat(se,"_available"):""}),[se]),je=(0,w.useMemo)((function(){if(!se)return"";var e=t(y.A[se].label);return"".concat(e," - ").concat(t("common.available"))}),[se,t]);(0,w.useEffect)((function(){if(se&&Q!==se&&xe.length){var e=xe.map((function(e){return(0,C.ym)(e,me,he)}));(0,C.y6)(me,he,e),$(se)}}),[H,se,t,me,he,xe,Q,$]),(0,w.useEffect)((function(){if(se&&Y!==se&&ge.length){var e=ge.map((function(e){return(0,C.ym)(e,ve,je)}));(0,C.y6)(ve,je,e),X(se)}}),[H,t,ve,je,Y,X,se,ge]);var ye=(0,w.useMemo)((function(){if(!xe.length)return null;var e=xe.filter((function(e){return!D||!D.length||null!==new RegExp(D,"i").exec(e.name)}));return n?(0,T.jsxs)(z.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,T.jsx)(h.Translation,{translation:"defi.depositedAssets",component:z.X6,as:"h3",fontSize:"lg"}),(0,T.jsx)(z.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:e.map((function(e){return e.id&&(0,T.jsx)(x.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})]}):(0,T.jsxs)(s.Card,{mt:10,children:[(0,T.jsxs)(z.Ug,{width:"full",alignItems:"flex-start",justifyContent:"space-between",children:[(0,T.jsx)(h.Translation,{translation:"defi.depositedAssets",component:s.Card.Heading,fontSize:"lg"}),(0,T.jsx)(p.SearchBar,{placeholder:"defi.searchToken",handleSearchChange:V})]}),(0,T.jsx)(m.ReactTable,{columns:de,data:e,initialState:{sortBy:[{id:"balanceUsd",desc:!1}]},onRowClick:function(e){return le(e,me,he)}})]})}),[n,de,D,V,me,he,xe,le]),Ae=(0,w.useMemo)((function(){if(te&&!ge.length)return null;var e=ge.filter((function(e){return!N||!N.length||null!==new RegExp(N,"i").exec(e.name)}));return n?(0,T.jsxs)(z.gC,{mt:20,spacing:6,width:"full",alignItems:"flex-start",children:[(0,T.jsx)(h.Translation,{translation:"defi.availableAssets",component:z.X6,as:"h3",fontSize:"lg"}),(0,T.jsx)(z.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:e.map((function(e){return e.id&&(0,T.jsx)(x.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})]}):(0,T.jsxs)(s.Card,{mt:10,children:[(0,T.jsxs)(z.Ug,{width:"full",alignItems:"flex-start",justifyContent:"space-between",children:[(0,T.jsx)(h.Translation,{translation:"defi.availableAssets",component:s.Card.Heading,fontSize:"lg"}),(0,T.jsx)(p.SearchBar,{placeholder:"defi.searchToken",handleSearchChange:R})]}),te?(0,T.jsx)(m.ReactTable,{columns:fe,data:e,initialState:{sortBy:[{id:"tvl",desc:!1}]},onRowClick:function(e){return le(e,ve,je)}}):(0,T.jsxs)(z.Kq,{children:[(0,T.jsx)(I.Od,{}),(0,T.jsx)(I.Od,{})]})]})}),[n,te,N,R,fe,ve,je,ge,le]),we=(0,w.useMemo)((function(){var e,t,n,i;if(!se||!y.A[se].banner)return null;var a=null===(e=y.A[se].banner)||void 0===e?void 0:e.modal;return(0,T.jsx)(s.Card.Dark,{p:[4,5],border:0,position:"relative",children:(0,T.jsxs)(z.Kq,{width:"full",spacing:[2,3],alignItems:"center",justifyContent:"center",direction:["column","row"],children:[(0,T.jsx)(h.Translation,{component:z.xu,width:"auto",textAlign:"center",translation:"common.new",layerStyle:"gradientBadge"}),(0,T.jsx)(h.Translation,{textAlign:"center",translation:null===(t=y.A[se].banner)||void 0===t?void 0:t.text,isHtml:!0,textStyle:"caption"}),"BY"===se&&(0,T.jsxs)(z.Ug,{spacing:2,children:[(0,T.jsx)(k.Ee,{src:"images/strategies/AA.svg",width:6}),(0,T.jsx)(k.Ee,{src:"images/strategies/BB.svg",width:6})]}),(null===(n=y.A[se].banner)||void 0===n?void 0:n.cta)&&(0,T.jsxs)(z.Ug,{spacing:2,right:[0,6],alignItems:"center",justifyContent:"center",position:["relative","absolute"],children:[(0,T.jsx)(h.Translation,{translation:null===(i=y.A[se].banner)||void 0===i?void 0:i.cta,textAlign:"center",textStyle:"cta",onClick:function(){return A(a)}}),(0,T.jsx)(u.KEG,{})]})]})})}),[se,A]),be=(0,w.useMemo)((function(){return se?(0,T.jsxs)(z.gC,{width:"full",spacing:10,children:[we,(0,T.jsxs)(z.Kq,{spacing:[8,0],direction:["column","row"],alignItems:["center","flex-start"],width:["100%","100%","100%","100%","70%"],children:[(0,T.jsxs)(z.gC,{pr:[0,14],pt:[0,20],spacing:10,direction:"column",width:["100%","65%"],alignItems:["center","flex-start"],children:[(0,T.jsx)(h.Translation,{isHtml:!0,translation:y.A[se].title||y.A[se].label,component:z.X6,fontFamily:"body",as:"h2",size:"3xl",fontWeight:"bold"}),!n&&(0,T.jsx)(z.kC,{width:["100%","80%"],children:(0,T.jsx)(h.Translation,{translation:y.A[se].description,textAlign:["center","left"]})}),!n&&(0,T.jsx)(b.StrategyOverview,{showLoading:!1,strategies:[se]})]}),(0,T.jsx)(k.Ee,{width:["60%","33%"],src:y.A[se].image}),n&&(0,T.jsx)(h.Translation,{translation:y.A[se].description,textAlign:["center","left"]}),n&&(0,T.jsx)(b.StrategyOverview,{showLoading:!1,strategies:[se]})]})]}):null}),[se,we,n]),Se=(0,w.useMemo)((function(){return te&&se?!pe||(0,C.xb)(pe)?(0,T.jsxs)(z.gC,{mt:10,spacing:4,width:["full","35%"],alignItems:"center",children:[(0,T.jsx)(h.Translation,{translation:"defi.noVaultsAvailable",textStyle:"ctaStatic",textAlign:"center"}),(0,T.jsx)(h.Translation,{translation:"strategies.".concat(y.A[se].strategy,".noVaultsAvailable"),params:{network:null===F||void 0===F?void 0:F.chainName},textAlign:"center",textStyle:"caption"}),(0,T.jsx)(S.SwitchNetworkButton,{chainId:1})]}):void 0:null}),[te,pe,se,F]);return(0,T.jsxs)(z.kC,{mt:14,width:"100%",direction:"column",alignItems:"center",children:[be,Se,ye,Ae]})}},88129:function(e,t,n){n.r(t),n.d(t,{StrategyOverview:function(){return m}});var i=n(1413),a=n(29439),r=n(99594),s=n(7276),l=n(86059),o=n(15542),c=n(1669),u=n(9597),d=n(3498),f=n(43127),x=n(89030),p=n(1494),g=n(45263),m=function(e){var t=e.textProps,n=e.showHeader,m=void 0===n||n,h=e.showLoading,v=void 0===h||h,j=e.strategies,y=(0,s.useState)(!0),A=(0,a.Z)(y,2),w=A[0],b=A[1],S=(0,c.w)(),C=S.isVaultsPositionsLoaded,I=S.vaultsPositions,z=(0,p.O)({assetIds:Object.keys(I),strategies:j}).compositions,M=(0,s.useMemo)((function(){return z.strategies.filter((function(e){return j.includes(e.extraData.strategy.type)})).reduce((function(e,t){return e.redeemable=e.redeemable.plus(t.value),e.deposited=e.deposited.plus(t.extraData.deposited),e.realizedApy=e.realizedApy.plus((0,r.gA)(t.extraData.avgRealizedApy).times(t.value)),e}),{deposited:(0,r.gA)(0),redeemable:(0,r.gA)(0),realizedApy:(0,r.gA)(0)})}),[z,j]);return M.realizedApy=M.realizedApy.div(M.redeemable),v||C&&!M.deposited.lte(0)?(0,g.jsxs)(d.gC,{spacing:6,alignItems:"flex-start",children:[m&&(0,g.jsxs)(d.Ug,{spacing:2,children:[(0,g.jsx)(o.Translation,{translation:"defi.yourWallet",textStyle:"heading",color:"primary",fontSize:"lg"}),(0,g.jsx)(f.zx,{variant:"unstyled",onClick:function(){return b((function(e){return!e}))},children:w?(0,g.jsx)(u.Zju,{size:24,color:"white"}):(0,g.jsx)(u.I0d,{size:24,color:"white"})})]}),(0,g.jsxs)(d.MI,{columns:3,spacing:[2,10],children:[(0,g.jsxs)(d.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(o.Translation,{translation:"defi.deposited",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,g.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,g.jsx)(l.Amount.Usd,(0,i.Z)({value:M.deposited,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:w?{}:{filter:"blur(7px)"}},t))})]}),(0,g.jsxs)(d.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(o.Translation,{translation:"defi.earnings",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,g.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,g.jsx)(l.Amount.Usd,(0,i.Z)({value:M.redeemable.minus(M.deposited),textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:w?{}:{filter:"blur(7px)"}},t))})]}),(0,g.jsxs)(d.gC,{spacing:2,alignItems:"flex-start",children:[(0,g.jsx)(o.Translation,{translation:"defi.realizedApy",textStyle:"captionSmall",fontSize:["xs","sm"]}),(0,g.jsx)(x.N2,{noOfLines:2,isLoaded:!!C,minW:"100%",children:(0,g.jsx)(l.Amount.Percentage,(0,i.Z)({value:M.realizedApy,textStyle:"ctaStatic",fontSize:"xl",lineHeight:"initial",sx:w?{}:{filter:"blur(7px)"}},t))})]})]})]}):null}},67360:function(e,t,n){n.r(t),n.d(t,{SwitchNetworkButton:function(){return d}});var i=n(1413),a=n(45987),r=(n(7276),n(65963)),s=n(43127),l=n(39195),o=n(15542),c=n(45263),u=["chainId"],d=function(e){var t=e.chainId,n=(0,a.Z)(e,u),d=(0,l.Y)().setChainId;return(0,c.jsx)(o.Translation,(0,i.Z)({component:s.zx,translation:"network.switchTo",params:{network:r.QW[t].name},onClick:function(){return d(t)},variant:"ctaPrimary",width:["full","auto"],px:10,py:2},n))}},1494:function(e,t,n){n.d(t,{O:function(){return d}});var i=n(93433),a=n(4942),r=n(1413),s=n(7276),l=n(99594),o=n(79681),c=n(12056),u=n(1669),d=function(e){var t=e.assetIds,n=e.strategies,d=(0,o.qM)(),f=(0,u.w)().selectors,x=f.selectAssetById,p=f.selectAssetsByIds,g=(0,s.useMemo)((function(){return p?p(t):[]}),[t,p]),m=Object.keys(c.A).reduce((function(e,t){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},t,{balance:(0,l.gA)(0),deposited:(0,l.gA)(0),weightedRealizedApy:(0,l.gA)(0)}))}),{}),h=(0,s.useMemo)((function(){return g.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,l.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),m)}),[g,n,m]),v=(0,s.useMemo)((function(){return g.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=x(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,l.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[g,n,x]),j={assets:[],strategies:[]};j.strategies=(0,s.useMemo)((function(){return Object.keys(h).map((function(e){return{label:d(c.A[e].label),extraData:{avgRealizedApy:h[e].balance.gt(0)?parseFloat(h[e].weightedRealizedApy.div(h[e].balance)):0,strategy:c.A[e],deposited:parseFloat(h[e].deposited)},value:parseFloat(h[e].balance)}}))}),[h,d]),j.assets=(0,s.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var a=x(t);return!a||a.type&&(!n||n.includes(a.type))?e:[].concat((0,i.Z)(e),[{label:a.name,extraData:{asset:a},value:parseFloat(v[t])}])}),[])}),[v,x,n]);var y={assets:{},strategies:{}};return y.strategies=(0,s.useMemo)((function(){return Object.values(c.A).reduce((function(e,t){var n=d(t.label);return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,t.color))}),{})}),[d]),y.assets=(0,s.useMemo)((function(){return Object.keys(v).reduce((function(e,t){var n=x(t);if(!n)return e;var i=n.name;return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},i,n.color))}),{})}),[v,x]),{colors:y,compositions:j}}}}]);