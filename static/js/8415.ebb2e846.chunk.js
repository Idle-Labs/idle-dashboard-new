"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[8415,9949,9058,1805],{19949:function(t,e,n){n.r(e),n.d(e,{DiscountedFeesTable:function(){return y}});var a=n(1413),i=n(29439),s=n(45987),o=n(79681),l=n(813),r=n(54447),c=n(66288),d=n(58316),u=n(1805),p=n(7276),x=n(10956),m=n(97778),h=n(15542),g=n(1669),f=n(3498),v=n(89030),j=n(10658),k=n(21031),w=n(45263),S=["showHeader"],y=function(t){var e=t.showHeader,n=void 0===e||e,y=(0,s.Z)(t,S),C=(0,o.qM)(),I=(0,c.X)().theme,b=(0,p.useState)(1),T=(0,i.Z)(b,2),D=T[0],M=T[1],A=(0,g.w)(),E=A.isPortfolioLoaded,z=A.discountedFees,L=(0,p.useMemo)((function(){return(0,k.xb)(z)?[]:(0,k.Pf)((0,k.mB)(Object.values(z).flat(),"hash"),"timeStamp","desc")}),[z]),P=(0,p.useMemo)((function(){return Math.ceil(L.length/l.qh)}),[L]),F=(0,p.useCallback)((function(){return!!D&&(M((function(t){return Math.max(1,t-1)})),!0)}),[M,D]),U=(0,p.useCallback)((function(){if(D===P)return!1;M((function(t){return Math.min(P,t+1)}))}),[M,D,P]),Z=(0,p.useMemo)((function(){return{sortBy:[{id:"tier",desc:!0}]}}),[]),W=(0,p.useMemo)((function(){return[{id:"id",Header:"#",accessor:"hash",display:"none"},{id:"asset",accessor:"assetId",Header:C("defi.asset"),Cell:function(t){var e=t.value;return(0,w.jsxs)(f.Ug,{spacing:2,width:"full",alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(u.TableField,{field:"asset",value:E,assetId:e}),(0,w.jsx)(u.TableField,{field:"productTagWithRisk",value:E,assetId:e})]})}},{accessor:"value",Header:C("transactionRow.amount"),Cell:function(t){var e=t.value,n=t.row;return(0,w.jsx)(v.N2,{noOfLines:2,isLoaded:!!e,children:(0,w.jsx)(m.TokenAmount,{assetId:n.original.assetId,amount:e,showIcon:!1,textStyle:"tableCell"})})},sortType:k._O},{accessor:"timeStamp",Header:C("transactionRow.date"),Cell:function(t){var e=t.value;return(0,w.jsx)(f.xv,{textStyle:"tableCell",children:(0,k.p6)(e,"YYYY/MM/DD HH:mm",!0)})},sortType:k._O},{id:"hash",accessor:"hash",Header:C("transactionRow.hash"),Cell:function(t){var e=t.value,n=t.row;return(0,w.jsx)(f.Ug,{width:"full",justifyContent:"flex-start",children:(0,w.jsx)(j.TransactionLink,{hash:e,chainId:n.original.chainId})})},sortType:k._O}]}),[C,E]);return L.length?(0,w.jsxs)(r.Card,(0,a.Z)((0,a.Z)({p:0},y),{},{children:[n&&(0,w.jsx)(h.Translation,{translation:"defi.discountedFees",fontSize:"lg",component:r.Card.Heading}),(0,k.xb)(L)?(0,w.jsx)(f.gC,{py:6,width:"full",alignItems:"center",justifyContent:"center",children:(0,w.jsx)(h.Translation,{textAlign:"center",translation:"feeDiscount.table.stakingEmpty",color:"cta",isHtml:!0})}):(0,w.jsx)(d.ReactTable,{columns:W,data:L,page:D,rowsPerPage:l.qh,initialState:Z,onRowClick:function(t){return(0,k.xw)((0,k.QG)(t.original.chainId,t.original.hash))}}),P>1&&(0,w.jsx)(x.Pagination,{activePage:D,pages:P,justifyContent:"center",onPrevArrowClick:function(){D&&F()},onNextArrowClick:function(){D<P&&U()},prevArrowColor:1===D?I.colors.ctaDisabled:I.colors.primary,nextArrowColor:D===P?I.colors.ctaDisabled:I.colors.primary})]})):null}},59058:function(t,e,n){n.r(e),n.d(e,{Unstake:function(){return S}});var a=n(74165),i=n(15861),s=n(813),o=n(42828),l=n(33482),r=n(55967),c=n(82172),d=n(7276),u=n(43127),p=n(3498),x=n(15542),m=n(1669),h=n(23023),g=n(78951),f=n(53465),v=n(86393),j=n(75712),k=n(21031),w=n(45263),S=function(t){var e,n,S,y=t.itemIndex,C=t.chainIds,I=void 0===C?[]:C,b=(0,j.useAssetProvider)(),T=b.asset,D=b.vault,M=(0,c.Y)(),A=M.account,E=M.setChainId,z=M.checkChainEnabled,L=(0,f.useOperativeComponent)(),P=L.dispatch,F=L.activeItem,U=L.setActionIndex,Z=(0,m.w)(),W=Z.stakingData,H=Z.selectors.selectVaultPrice,_=(0,h.R)(),B=_.sendTransaction,O=_.setGasLimit,Y=_.state.block,G=(0,d.useMemo)((function(){return z(I)}),[I,z]),N=(0,d.useMemo)((function(){var t;return(0,k.d5)(null===W||void 0===W||null===(t=W.position)||void 0===t?void 0:t.deposited)}),[W]),R=(0,d.useMemo)((function(){var t,e;return!(null===W||void 0===W||null===(t=W.position)||void 0===t||!t.lockEnd||!Y)&&(0,k.qF)(null===W||void 0===W||null===(e=W.position)||void 0===e?void 0:e.lockEnd).isSameOrBefore((0,k.qF)(1e3*Y.timestamp))}),[W,Y]),q=(0,d.useMemo)((function(){var t,e;return null!==W&&void 0!==W&&null!==(t=W.position)&&void 0!==t&&t.lockEnd?(0,k.p6)(null===W||void 0===W||null===(e=W.position)||void 0===e?void 0:e.lockEnd,"YYYY-MM-DD HH:mm",!0):null}),[W]),K=(0,d.useCallback)((function(){A&&R&&D&&"getWithdrawContractSendMethod"in D&&"getWithdrawParams"in D&&D instanceof l.y&&(0,i.Z)((0,a.Z)().mark((function t(){var e,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=D.getWithdrawParams(),n=D.getWithdrawContractSendMethod(e),B(D.id,D.id,n);case 3:case"end":return t.stop()}}),t)})))()}),[A,R,D,B]),V=(0,d.useCallback)((0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,s,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(D&&"getWithdrawContractSendMethod"in D&&"getWithdrawParams"in D&&D instanceof l.y){t.next=2;break}return t.abrupt("return");case 2:if(e=D.getMethodDefaultGasLimit("unstake"),A&&R){t.next=5;break}return t.abrupt("return",e);case 5:return n={from:null===A||void 0===A?void 0:A.address},i=D.getWithdrawParams(),s=D.getWithdrawContractSendMethod(i),t.next=10,(0,k.$K)(s,n);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0=e;case 13:return o=t.t0,t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)}))),[A,D,R]);(0,d.useEffect)((function(){F===y&&(0,i.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:e=t.sent,O(e);case 4:case"end":return t.stop()}}),t)})))()}),[F,y,V,O]),(0,d.useEffect)((function(){F===y&&(P({type:"SET_ASSET",payload:T}),H&&D&&(P({type:"SET_AMOUNT",payload:(0,k.gA)(N).toString()}),P({type:"SET_DEFAULT_AMOUNT",payload:(0,k.gA)(N).toString()})))}),[D,T,N,H,F,y,P,K]);var X=(0,d.useMemo)((function(){return A?(0,w.jsx)(x.Translation,{component:u.zx,translation:"common.withdraw",disabled:!R,onClick:K,variant:"ctaFull"}):(0,w.jsx)(v.ConnectWalletButton,{variant:"ctaFull"})}),[A,R,K]);return(0,w.jsx)(j.AssetProvider,{flex:1,width:"100%",assetId:null===T||void 0===T?void 0:T.id,children:(0,w.jsxs)(p.gC,{flex:1,spacing:6,width:"100%",height:"100%",id:"withdraw-container",alignItems:"space-between",justifyContent:"flex-start",pt:G&&null!==W&&void 0!==W&&null!==(e=W.position)&&void 0!==e&&e.lockEnd?8:0,children:[(0,w.jsx)(p.gC,{flex:1,spacing:0,id:"confirm-on-wallet",alignItems:"flex-start",children:G?null!==W&&void 0!==W&&null!==(n=W.position)&&void 0!==n&&n.lockEnd?R?(0,w.jsx)(p.M5,{py:14,flex:1,px:[4,10],width:"100%",children:(0,w.jsxs)(p.gC,{spacing:6,children:[(0,w.jsx)(r.ppH,{size:72}),(0,w.jsxs)(p.gC,{spacing:4,children:[(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.lockExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.canWithdrawLock",params:{amount:(0,k.dm)(N),asset:null===T||void 0===T?void 0:T.name},textStyle:"captionSmall",textAlign:"center"})]})]})}):(0,w.jsxs)(p.gC,{py:20,flex:1,spacing:6,px:[6,10],width:"100%",children:[(0,w.jsx)(r.FKe,{size:72}),(0,w.jsxs)(p.gC,{spacing:4,children:[(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.lockNotExpired",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.waitUntilLockExpired",params:{lockEndDate:q},textStyle:"captionSmall",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:u.zx,translation:"staking.increaseLock",onClick:function(){return U(0)},variant:"ctaPrimary",px:10})]})]}):(0,w.jsx)(p.M5,{px:6,flex:1,width:"100%",children:(0,w.jsxs)(p.gC,{spacing:5,children:[(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.noStake",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.stakeBeforeUnstake",textStyle:"captionSmall",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:u.zx,translation:"common.stake",onClick:function(){return U(0)},variant:"ctaPrimary",px:10})]})}):(0,w.jsx)(p.M5,{px:10,flex:1,width:"100%",children:(0,w.jsxs)(p.gC,{spacing:6,children:[(0,w.jsx)(o.p8b,{size:72}),(0,w.jsxs)(p.gC,{spacing:4,children:[(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.networkNotSupported",textStyle:"heading",fontSize:"h3",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:p.xv,translation:"staking.switchToMainnet",textStyle:"captionSmall",textAlign:"center"}),(0,w.jsx)(x.Translation,{component:u.zx,translation:"common.switchNetwork",onClick:function(){return E(s.zS)},variant:"ctaPrimary",px:10})]})]})})}),(null===W||void 0===W||null===(S=W.position)||void 0===S?void 0:S.lockEnd)&&R&&(0,w.jsxs)(p.gC,{spacing:4,id:"footer",alignItems:"flex-start",children:[R&&(0,w.jsx)(g.EstimatedGasFees,{}),X]})]})})}},48415:function(t,e,n){n.r(e),n.d(e,{Staking:function(){return A}});var a=n(1413),i=n(21031),s=n(7276),o=n(54447),l=n(813),r=n(86059),c=n(24974),d=n(55967),u=n(66288),p=n(67041),x=n(82172),m=n(61617),h=n(59058),g=n(96362),f=n(97778),v=n(15542),j=n(87099),k=n(1669),w=n(75712),S=n(61838),y=n(72258),C=n(19949),I=n(37658),b=n(3148),T=n(3498),D=n(2092),M=n(45263),A=function(){var t=(0,x.Y)().account,e=(0,u.X)().isMobile,n=(0,k.w)(),A=n.isVaultsPositionsLoaded,E=n.stakingData,z=n.selectors,L=z.selectVaultsByType,P=z.selectAssetById,F=z.selectVaultTransactions,U=(0,s.useMemo)((function(){if(P){var t=(0,c.Zs)(l.zS,j.MI);return t&&P(t.address)}}),[P]),Z=(0,s.useMemo)((function(){var t;return L&&(null===(t=L("STK"))||void 0===t?void 0:t[0])}),[L]),W=(0,s.useMemo)((function(){return P&&Z&&P(Z.id)}),[P,Z]),H=(0,s.useMemo)((function(){return A&&Z&&F(Z.id)}),[A,Z,F]),_=(0,s.useMemo)((function(){return(H&&H.reduce((function(t,e){switch(e.action){case"stake":t.totalDeposited=t.totalDeposited.plus(e.underlyingAmount);break;case"unstake":t.totalDeposited=t.totalDeposited.minus(e.underlyingAmount)}return t.totalDeposited.lte(0)?t.startTimestamp=null:t.startTimestamp||(t.startTimestamp=e.timeStamp),t}),{startTimestamp:null,totalDeposited:(0,i.gA)(0)})).startTimestamp}),[H]),B=(0,s.useMemo)((function(){if(!_||!E)return null;var t=Math.round(Date.now()/1e3)-_;return(0,i.gA)(E.position.claimable).div(E.position.deposited).times(j.eG).div(t).times(100)}),[_,E]),O=[{type:"stake",component:p.Stake,label:"common.stake",chainIds:[l.zS],steps:[{type:"approve",component:g.Approve,props:{amountUsd:null},label:"modals.approve.header"}]},{type:"unstake",component:h.Unstake,label:"common.unstake",chainIds:[l.zS],steps:[]}],Y=(0,s.useMemo)((function(){if(!t||!E||E.position.deposited.lte(0))return null;return(0,M.jsxs)(T.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"staking.yourstkIDLE",component:T.xv,textStyle:"heading",fontSize:"h3"}),(0,M.jsx)(T.MI,{columns:[2,4],spacing:[6,20],children:[{field:"stakingDeposited",props:{fontSize:"h3",textStyle:"heading"},label:"assets.assetDetails.generalData.totalIDLEStaked",tooltip:"assets.assetDetails.tooltips.totalIDLEStaked"},{field:"stkIDLEBalance",props:{fontSize:"h3",textStyle:"heading"},label:"common.balance",tooltip:"assets.assetDetails.tooltips.stkIDLEBalance"},{field:"stakingEndDate",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.lockEndDate",label:"assets.assetDetails.generalData.lockedUntil"},{field:"stakingShare",props:{fontSize:"h3",textStyle:"heading"},tooltip:"assets.assetDetails.tooltips.stakingShare",label:"defi.share"}].map((function(t){return(0,M.jsx)(b.AssetGeneralDataField,{generalData:t},"field_".concat(t.field))}))})]})}),[t,E]),G=(0,s.useMemo)((function(){var n,a;if(!t||!E||E.position.claimable.lte(0)||!Z)return null;var i=Z.getClaimRewardsContractSendMethod();return e?(0,M.jsx)(w.AssetProvider,{wrapFlex:!1,assetId:null===U||void 0===U?void 0:U.id,children:(0,M.jsx)(o.Card,{p:6,children:(0,M.jsxs)(T.gC,{spacing:4,width:"100%",alignItems:"flex-start",children:[(0,M.jsx)(T.Ug,{width:"full",justifyContent:"space-between",children:(0,M.jsx)(m.AssetLabel,{assetId:null===U||void 0===U?void 0:U.id})}),(0,M.jsxs)(T.Ug,{width:"full",justifyContent:"space-between",children:[(0,M.jsxs)(T.gC,{spacing:1,alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{component:T.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(T.Ug,{spacing:1,justifyContent:"flex-start",children:(0,M.jsx)(r.Amount.Percentage,{value:B,textStyle:"heading",fontSize:"h3"})})]}),(0,M.jsxs)(T.gC,{spacing:1,alignItems:"flex-end",children:[(0,M.jsx)(v.Translation,{component:T.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===E||void 0===E||null===(n=E.IDLE.asset)||void 0===n?void 0:n.id,showIcon:!1,amount:E.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:Z.id,assetId:Z.id,contractSendMethod:i,actionType:"claim",amount:E.position.claimable.toString(),width:"100%",chainIds:[l.zS],disabled:E.position.claimable.lte(0)})]})})}):(0,M.jsx)(o.Card,{p:6,px:8,width:"100%",children:(0,M.jsxs)(T.Kq,{width:"100%",spacing:[0,6],direction:["column","row"],flexWrap:["wrap","nowrap"],justifyContent:["flex-start","space-between"],children:[(0,M.jsx)(m.AssetLabel,{assetId:null===U||void 0===U?void 0:U.id}),(0,M.jsxs)(T.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:T.xv,translation:"defi.realizedApy",textStyle:"captionSmall"}),(0,M.jsx)(r.Amount.Percentage,{value:B,fontSize:"h3",textStyle:"heading"})]}),(0,M.jsxs)(T.gC,{pb:[2,0],spacing:[1,2],width:["50%","auto"],alignItems:"flex-start",justifyContent:"flex-start",children:[(0,M.jsx)(v.Translation,{component:T.xv,translation:"defi.claimable",textStyle:"captionSmall"}),(0,M.jsx)(f.TokenAmount,{assetId:null===E||void 0===E||null===(a=E.IDLE.asset)||void 0===a?void 0:a.id,showIcon:!1,amount:E.position.claimable,decimals:2,textStyle:"heading",fontSize:"h3"})]}),(0,M.jsx)(y.TransactionButton,{text:"defi.claim",vaultId:Z.id,assetId:Z.id,contractSendMethod:i,actionType:"claim",amount:E.position.claimable.toString(),width:["100%","150px"],chainIds:[l.zS],disabled:E.position.claimable.lte(0)})]})})}),[t,e,E,U,B,Z]),N=(0,s.useMemo)((function(){var t=[{image:"images/staking/get-idle.png",translation:"strategies.staking.howItWorks.steps.cta1",props:{justifyContent:"flex-end"}},{image:"images/staking/stake.png",translation:"strategies.staking.howItWorks.steps.cta2",props:{justifyContent:"center"}},{image:"images/staking/fee-discount.png",translation:"strategies.staking.howItWorks.steps.cta3",props:{justifyContent:"flex-start"}}];return(0,M.jsxs)(T.gC,{spacing:4,width:"full",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"strategies.staking.howItWorks.title",textStyle:"ctaStatic"}),(0,M.jsx)(o.Card.Flex,{py:6,px:10,width:"full",alignItems:"center",justifyContent:"center",children:(0,M.jsx)(T.MI,{columns:3,spacing:6,width:"fit-content",children:t.map((function(e,n){return(0,s.createElement)(T.Ug,(0,a.Z)((0,a.Z)({spacing:4},e.props),{},{key:"step_".concat(n)}),(0,M.jsx)(D.Ee,{src:e.image,width:14}),e.link?(0,M.jsx)(v.Translation,{component:T.rU,translation:e.translation,textDecoration:"underline",isExternal:!0,href:e.link}):(0,M.jsx)(v.Translation,{translation:e.translation}),n<t.length-1&&(0,M.jsx)(T.Ug,{pl:2,children:(0,M.jsx)(d.KEG,{size:16})}))}))})})]})}),[]);return(0,M.jsxs)(T.xu,{width:"100%",children:[(0,M.jsx)(T.gC,{spacing:6,my:[10,14],width:"100%",direction:["column","row"],justifyContent:"flex-start",alignItems:["center","flex-start"],children:(0,M.jsx)(v.Translation,{translation:"navBar.stakeIDLE",component:T.X6,as:"h2",size:"3xl"})}),(0,M.jsxs)(T.Ug,{width:"100%",spacing:[0,10],alignItems:"space-between",children:[(0,M.jsx)(T.Kq,{flex:1,mb:[20,0],spacing:10,width:["100%",.7],children:(0,M.jsxs)(T.gC,{spacing:10,width:"100%",alignItems:"flex-start",children:[(0,M.jsx)(v.Translation,{translation:"strategies.staking.description",isHtml:!0}),(0,M.jsxs)(T.gC,{spacing:4,width:"full",alignItems:"flex-start",children:[N,(0,M.jsx)(b.AssetGeneralData,{assetId:null===W||void 0===W?void 0:W.id})]}),Y,G,(0,M.jsx)(C.DiscountedFeesTable,{p:10}),(0,M.jsx)(S.FeeDiscountTable,{p:10})]})}),(0,M.jsx)(I.InteractiveComponent,{vaultId:null===W||void 0===W?void 0:W.id,assetId:null===Z||void 0===Z?void 0:Z.id,actions:O})]})]})}},1805:function(t,e,n){n.r(e),n.d(e,{TableField:function(){return l}});var a=n(1413),i=n(89030),s=n(75712),o=n(45263),l=function(t){var e=t.assetId,n=t.field,l=t.value,r=t.section,c=t.props;return(0,o.jsx)(i.N2,{noOfLines:2,isLoaded:!!l,children:(0,o.jsx)(s.AssetProvider,{assetId:e,children:(0,o.jsx)(s.AssetProvider.GeneralData,(0,a.Z)({section:r,field:n},c))})})}}}]);