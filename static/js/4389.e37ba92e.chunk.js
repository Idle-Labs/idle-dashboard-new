"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[4389,9220],{9220:function(t,e,o){o.r(e),o.d(e,{HistogramChart:function(){return R}});var r=o(1413),a=o(93433),n=o(57118),i=o(99594),l=o(14380),s=o(7276),c=o(84033),d=o.n(c),u=o(64625),f=o(46177),h=o(97862),m=o(57478),p=o(25908),g=o(12528),v=o(23369),b=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function x(){return x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},x.apply(this,arguments)}function y(t){var e=t.data,o=t.className,r=t.top,a=t.left,n=t.x,i=t.y0,c=void 0===i?f.l8:i,y=t.y1,Z=void 0===y?f.xf:y,j=t.xScale,k=t.yScale,w=t.color,C=t.keys,T=t.value,A=t.order,M=t.offset,O=t.children,S=function(t,e){if(null==t)return{};var o,r,a={},n=Object.keys(t);for(r=0;r<n.length;r++)o=n[r],e.indexOf(o)>=0||(a[o]=t[o]);return a}(t,b),L=(0,u.Z)();C&&L.keys(C),T&&(0,m.Z)(L.value,T),A&&L.order((0,p.ZP)(A)),M&&L.offset((0,g.ZP)(M));var D=L(e),I=(0,h.Z)(j),P=D.map((function(t,e){var o=t.key;return{index:e,key:o,bars:t.map((function(e,r){var a=(k(c(e))||0)-(k(Z(e))||0),i=k(Z(e)),l="bandwidth"in j?j(n(e.data)):Math.max((j(n(e.data))||0)-I/2);return{bar:e,key:o,index:r,height:a,width:I,x:l||0,y:i||0,color:w(t.key,r)}}))}}));return O?s.createElement(s.Fragment,null,O(P)):s.createElement(l.Z,{className:d()("visx-bar-stack",o),top:r,left:a},P.map((function(t){return t.bars.map((function(e){return s.createElement(v.Z,x({key:"bar-stack-"+t.index+"-"+e.index,x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color},S))}))})))}var Z,j=o(79866),k=o(10577),w=o(27091),C=o(87563),T=o(86059),A=o(29564),M=o(26720),O=o(96699),S=o(3498),L=o(75712),D=o(61168),I=o(5151),P=o(82173),F=o(32802),N=o(20663),W=o(48379),E=o(28547),z=o(45263),H={top:20,left:0,right:0,bottom:35},_=(0,D.Z)((function(t){var e,o=t.data,s=t.colors,c=t.width,d=t.height,u=t.events,f=void 0!==u&&u,h=t.tooltip,m=void 0===h||h,p=t.margin,g=void 0===p?H:p,v=t.tooltipOpen,b=t.tooltipTop,x=t.tooltipData,C=t.hideTooltip,D=t.showTooltip,_=(0,O.Fg)(),R=(0,A.R)().locale,U=function(t){return t.date},q={textAnchor:"middle",fontSize:12,fontWeight:"bold",fill:_.colors.table.axisLabel},B=d-g.top-g.bottom-10,J=c-g.left-g.right,V=Object.keys(s),G=V.map((function(t){return s[t]})),K=o.map((function(t){return t.total})),Q=(0,F.Z)({padding:.2,range:[0,J],domain:o.map(U)}),X=(0,N.Z)({range:[0,J],domain:(0,n.Z)(o,(function(t){return(0,i.qF)(t.date).toDate()}))}),Y=Math.max.apply(Math,(0,a.Z)(K.map((function(t){return Math.abs(t)})))),$=-Y,tt=(0,W.Z)({nice:!1,range:[B,0],domain:[$,Y]}),et=(0,E.Z)({domain:V,range:G}),ot=(0,M.ff)("white",_.colors.card.bg),rt=(0,M.ff)(_.colors.gray[200],_.colors.gray[700]),at=(0,M.ff)(_.colors.gray[800],"white");return(0,z.jsxs)("div",{style:{position:"relative"},children:[(0,z.jsxs)(w.Z,{width:c,height:d,children:[(0,z.jsx)(l.Z,{top:g.top,children:(0,z.jsx)(y,{data:o,keys:V,x:U,color:et,xScale:Q,yScale:tt,offset:"diverging",children:function(t){return t.map((function(t){return t.bars.map((function(e){return(0,z.jsx)("rect",{x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color,onClick:function(){f&&alert("clicked: ".concat(JSON.stringify(e)))},onMouseLeave:function(){Z=window.setTimeout((function(){C()}),300)},onMouseMove:function(t){Z&&clearTimeout(Z);var o=(0,k.Z)(t),r=e.x+e.width/2;D({tooltipData:e,tooltipTop:null===o||void 0===o?void 0:o.y,tooltipLeft:r})}},"bar-stack-".concat(t.index,"-").concat(e.index))}))}))}})}),(0,z.jsx)(j.Z,{strokeWidth:1,hideTicks:!0,top:B/2+g.top,scale:Q,stroke:"white",tickFormat:function(){return""}}),(0,z.jsx)(j.Z,{hideTicks:!0,hideAxisLine:!0,numTicks:5,scale:X,top:d-g.bottom,tickLabelProps:function(){return q}})]}),m&&v&&x&&(0,z.jsx)(I.Z,{top:b,left:x.x,style:(0,r.Z)((0,r.Z)({},P.j),{},{border:"none",backgroundColor:"transparent",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0}),children:(0,z.jsxs)(S.gC,{p:2,spacing:3,width:"full",alignItems:"flex-start",borderRadius:"lg",borderColor:rt,borderWidth:1,color:at,bgColor:ot,children:[(0,z.jsx)(S.gC,{spacing:4,width:"full",alignItems:"flex-start",children:Object.keys(x.bar.data).filter((function(t){return!["date","total"].includes(t)})).map((function(t){return(0,z.jsxs)(S.gC,{spacing:2,width:"full",alignItems:"flex-start",children:[(0,z.jsx)(L.AssetProvider,{assetId:t,children:(0,z.jsxs)(S.Ug,{spacing:1,children:[(0,z.jsx)(L.AssetProvider.Icon,{size:"2xs"}),(0,z.jsx)(L.AssetProvider.Name,{fontWeight:"bold"}),(0,z.jsx)(L.AssetProvider.Strategy,{color:et(t),fontWeight:"bold",prefix:"(",suffix:")"})]})}),(0,z.jsx)(T.Amount.Usd,{abbreviate:!1,fontWeight:"bold",fontSize:"md",value:x.bar.data[t]})]},t)}))}),(0,z.jsx)(S.xv,{fontSize:"xs",color:_.colors.gray[500],children:(e=x.bar.data,(0,i.qF)(U(e)).locale(R).format("LLL"))})]})},Math.random())]})})),R=function(t){var e=t.data,o=t.colors,r=t.labels,a=t.tooltip;return(0,z.jsx)(C.Z,{debounceTime:10,children:function(t){return(0,z.jsx)(_,{width:t.width,height:t.height,data:e,tooltip:a,colors:o,labels:r})}})}},84389:function(t,e,o){o.r(e),o.d(e,{VolumeChart:function(){return i}});var r=o(9220),a=o(50026),n=o(45263),i=function(t){var e=t.assetIds,o=t.timeframe,i=(0,a.D)({assetIds:e,timeframe:o}),l=i.labels,s=i.colors,c=i.volumeChartData;return i.volumeChartDataLoading?null:(0,n.jsx)(r.HistogramChart,{colors:s,labels:l,data:c.rainbow})}},50026:function(t,e,o){o.d(e,{D:function(){return d}});var r=o(4942),a=o(1413),n=o(29439),i=o(44888),l=o(7276),s=o(99594),c=o(1669),d=function(t){var e=t.assetIds,o=t.timeframe,d=t.useDollarConversion,u=void 0===d||d,f=(0,l.useState)(!0),h=(0,n.Z)(f,2),m=h[0],p=h[1],g=(0,c.w)(),v=g.historicalTvls,b=g.selectors,x=b.selectAssetsByIds,y=b.selectAssetHistoricalTvls,Z=b.selectAssetHistoricalTvlsUsd,j=(0,l.useMemo)((function(){return x?x(e):[]}),[e,x]),k=(0,l.useMemo)((function(){return o?(0,s.pM)(o):0}),[o]),w=(0,l.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(v).length)return t;var e=j.reduce((function(t,e){if(!e.id)return t;var o=u?Z(e.id):y(e.id);if(!o)return t;var r=null;return o.forEach((function(o){var a=o.date;if(!(a<k)){if(r&&e.id){t[a]||(t[a]={date:a,total:0});var n=(0,s.gA)(o.value).minus(r.value);t[a][e.id]=Number(n.toFixed(8)),t[a].total=Number((0,s.gA)(t[a].total).plus(n).toFixed(8))}r=o}})),t}),{});return t.total=Object.values(e).map((function(t){return{date:t.date,value:t.total}})),t.rainbow=Object.values(e),t}),[j,u,v,y,Z,k]),C=(0,l.useMemo)((function(){return j.length?j.reduce((function(t,e){return(0,a.Z)((0,a.Z)({},t),{},{labels:(0,a.Z)((0,a.Z)({},t.labels),{},(0,r.Z)({},e.id,e.name)),colors:(0,a.Z)((0,a.Z)({},t.colors),{},(0,r.Z)({},e.id,i.A2[e.type].color))})}),{labels:{},colors:{}}):{labels:{},colors:{}}}),[j]);return(0,l.useEffect)((function(){if(w.rainbow.length)return p(!1),function(){p(!0)}}),[w]),{volumeChartData:w,volumeChartDataLoading:m,labels:C.labels,colors:C.colors}}}}]);