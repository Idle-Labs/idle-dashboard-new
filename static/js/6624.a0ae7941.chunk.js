"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return g}});var n=l(1413),i=l(45987),r=l(5128),u=l(7276),o=l(12056),a=l(86059),s=l(60062),d=l(99594),v=l(15542),m=l(1669),c=l(3498),p=l(45263),y=["assetId","field","amount","amountUsd","stakingPower"],f=function(e){var t,l,o,v,f,g=e.assetId,x=e.field,A=e.amount,Z=e.amountUsd,S=e.stakingPower,w=(0,i.Z)(e,y),k=(0,m.w)(),b=k.stakingData,h=k.helpers.vaultFunctionsHelper,j=k.selectors,B=j.selectAssetById,I=j.selectVaultById,P=j.selectVaultGauge,M=(0,u.useMemo)((function(){return g&&B&&B(g)}),[g,B]),C=(0,u.useMemo)((function(){return g&&I&&I(g)}),[g,I]),D=(0,u.useMemo)((function(){return g&&P&&P(g)}),[g,P]),F=(0,u.useMemo)((function(){return D&&B&&B(D.id)}),[D,B]),U=(0,u.useMemo)((function(){return(0,d.gA)(M.tvl).plus((0,d.d5)(A))}),[M,A]),_=(0,u.useMemo)((function(){return null===h||void 0===h?void 0:h.getVaultNewApr(M,C,(0,d.gA)(A))}),[M,C,A,h]),E=(0,u.useMemo)((function(){if((0,d.d5)(_).gt(0)){var e=(0,d.Bs)((0,d.d5)(_).div(100)).times(100),t=M.apyBreakdown?Object.keys(M.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===F||void 0===F?void 0:F.gaugeData;if(l){var n=(0,d.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,d.d5)(A)),i=(0,d.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),r=M.apyBreakdown[t].times(i);return e.plus(r)}return e.plus(M.apyBreakdown[t]);case"harvest":var u=(0,d.gA)(M.tvl).div(U),o=M.apyBreakdown[t].times(u);return e.plus(o);default:return e.plus(M.apyBreakdown[t])}}),(0,d.gA)(0)):(0,d.gA)(0);return(0,d.gA)(e).plus(t)}return(0,d.d5)(null===M||void 0===M?void 0:M.apy)}),[M,A,U,F,_]),L=(0,d.d5)(Z).gt(0),V=(0,d.d5)(null===M||void 0===M||null===(t=M.vaultPosition)||void 0===t?void 0:t.underlying.redeemable),G=(0,d.d5)(null===M||void 0===M||null===(l=M.vaultPosition)||void 0===l?void 0:l.usd.redeemable),T=r.Z.maximum(0,(0,d.d5)(null===M||void 0===M||null===(o=M.vaultPosition)||void 0===o?void 0:o.usd.earnings)),H=r.Z.minimum(1,(0,d.d5)(Z).div(G)),N=r.Z.minimum(T,H.times(T)),O=r.Z.maximum(0,(0,d.d5)(null===M||void 0===M||null===(v=M.vaultPosition)||void 0===v?void 0:v.usd.earnings).times(null===M||void 0===M?void 0:M.fee)),q=r.Z.minimum(O,(0,d.d5)(N).times(null===M||void 0===M?void 0:M.fee));C instanceof s.C&&(T=T.plus(q),N=N.plus(q));var z=L&&(0,d.d5)(A).lte(V);switch(x){case"boost":var J=E&&null!==M&&void 0!==M&&null!==(f=M.baseApr)&&void 0!==f&&f.gt(0)?E.div(null===M||void 0===M?void 0:M.baseApr):(0,d.gA)(0);return(0,p.jsxs)(c.xv,(0,n.Z)((0,n.Z)({},w),{},{textStyle:"titleSmall",color:"primary",children:[J.toFixed(2),"x"]}));case"overperformance":var K=(0,d.d5)(Z).times((0,d.gA)(null===M||void 0===M?void 0:M.baseApr).div(100)),Q=(0,d.d5)(Z).times((0,d.gA)(null===M||void 0===M?void 0:M.apy).div(100)),R=L?Q.minus(K):null;return(0,p.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:R,suffix:"/year"}));case"newApy":return(0,p.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:E}));case"totalGain":return(0,p.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:z?N:null}));case"fee":return(0,p.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:z?q:null}));case"netGain":var W=r.Z.minimum(T.minus(q),(0,d.d5)(N).minus(q));return(0,p.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:z?W:null}));case"coverage":var X=B(null===C||void 0===C?void 0:C.vaultConfig.Tranches.BB.address),Y=X.tvl&&U?X.tvl.div(U).times(100):0;return(0,p.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:Y}));case"stakingPoolShare":if(!b)return null;var $=(0,d.d5)(A).div(b.stkIDLE.totalSupply.plus((0,d.d5)(A))).times(100);return(0,p.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:$}));case"stkIDLE":case"stkIDLEAfterIncrease":return(0,p.jsx)(a.Amount,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},w),{},{value:A}));case"stakingApy":if(!b)return null;var ee=(0,d.d5)(S).times(b.maxApr);return(0,p.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},w),{},{value:ee}));default:return null}},g=function(e){var t,l=(0,m.w)().selectors.selectVaultById,i=e.assetId,r=e.action,a=(0,u.useMemo)((function(){return i&&l&&l(i)}),[i,l]),s=(0,u.useMemo)((function(){return(null===a||void 0===a?void 0:a.type)&&o.A[a.type]}),[a]);if(null===s||void 0===s||null===(t=s.dynamicActionFields)||void 0===t||!t[r])return null;var d=null===s||void 0===s?void 0:s.dynamicActionFields[r];return(0,p.jsx)(c.gC,{spacing:2,width:"100%",children:d.map((function(t){return(0,p.jsxs)(c.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(v.Translation,{component:c.xv,translation:"dynamicActionFields.".concat(t),textStyle:"captionSmall"}),(0,p.jsx)(f,(0,n.Z)((0,n.Z)({},e),{},{field:t}))]},"dynamicField_".concat(t))}))})}}}]);