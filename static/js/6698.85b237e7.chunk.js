"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6698,219,9220,6957,4389],{86698:function(t,e,n){n.r(e),n.d(e,{AssetStats:function(){return T}});var a=n(1413),r=n(29439),i=n(58383),o=n(54447),l=n(79681),s=n(86059),c=n(12056),u=n(66288),d=n(61617),f=n(96957),h=n(15542),g=n(97778),x=n(85267),m=n(1669),v=n(84389),p=n(6634),b=n(75712),j=n(99594),y=n(7276),w=n(98440),C=n(15568),S=n(3498),A=n(50026),M=n(61925),Z=n(24606),I=n(90219),k=n(68414),D=n(45263),T=function(t){var e,n,T,O=t.showHeader,P=void 0===O||O,z=t.assetOnly,F=void 0!==z&&z,E=t.showAssetStrategy,B=void 0!==E&&E,L=t.timeframe,U=(0,l.qM)(),W=(0,x.m)().params,R=(0,u.X)().isMobile,_=(0,y.useState)(w.W.WEEK),H=(0,r.Z)(_,2),N=H[0],q=H[1],K=(0,m.w)(),V=K.vaults,X=K.selectors,G=X.selectAssetById,$=X.selectVaultById,J=(0,y.useState)(void 0),Y=(0,r.Z)(J,2),Q=Y[0],tt=Y[1],et=(0,y.useMemo)((function(){return W.asset&&G&&G(W.asset)}),[G,W.asset]),nt=(0,y.useMemo)((function(){return W.asset&&$&&$(W.asset)}),[$,W.asset]),at=(0,y.useMemo)((function(){return et&&c.A[et.type]}),[et]),rt=(0,y.useMemo)((function(){return at&&at.color}),[at]),it=(0,y.useMemo)((function(){if(null!==et&&void 0!==et&&et.type)return B?[et.type]:["AA","BB"].includes(et.type)?["AA","BB"]:[et.type]}),[et,B]);(0,y.useEffect)((function(){it&&!Q&&tt(it)}),[Q,it,tt]);var ot=(0,y.useMemo)((function(){if(null===et||void 0===et||!et.type)return[];if(F)return[et.id];switch(et.type){case"AA":case"BB":var t=(0,j.sj)(["AA","BB"],et.type)[0],e=V.find((function(e){return"cdoConfig"in e&&"cdoConfig"in nt&&e.type===t&&e.cdoConfig.address===nt.cdoConfig.address}));return[et.id,null===e||void 0===e?void 0:e.id];default:return[et.id]}}),[et,nt,V,F]),lt=(0,y.useMemo)((function(){return L||N}),[N,L]),st="BY"===(null===et||void 0===et?void 0:et.type),ct=(0,C.h)({assetIds:ot,timeframe:lt}).rateChartData,ut=(0,A.D)({assetIds:ot,timeframe:lt}).volumeChartData,dt=function(t){var e=t.assetIds,n=t.timeframe,a=t.useDollarConversion,i=void 0===a||a,o=(0,y.useState)(!0),l=(0,r.Z)(o,2),s=l[0],c=l[1],u=(0,m.w)(),d=u.historicalTvls,f=u.selectors,h=f.selectAssetsByIds,g=f.selectAssetHistoricalTvls,x=f.selectAssetHistoricalTvlsUsd,v=(0,y.useMemo)((function(){return h?h(e):[]}),[e,h]),p=(0,y.useMemo)((function(){return n?(0,j.pM)(n):0}),[n]),b=(0,y.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(d).length)return t;var e=v.reduce((function(e,n,a){if(!n.id)return e;var r=i?x(n.id):g(n.id);return r?(r.forEach((function(r){var i=r.date;if(!(i<p)){var o=r.value;e[i]||(e[i]={date:i,total:0}),n.id&&(e[i][n.id]=o,a||t.total.push({date:i,value:o}))}})),e):e}),{});return t.rainbow=Object.values(e),t}),[v,i,d,g,x,p]);return(0,y.useEffect)((function(){if(b.rainbow.length)return c(!1),function(){c(!0)}}),[b]),{assets:v,tvlChartData:b,tvlChartDataLoading:s}}({assetIds:ot,timeframe:lt}),ft=dt.tvlChartData,ht=(0,Z.U)({assetIds:ot}),gt=ht.allocations,xt=ht.colors,mt=ht.labels,vt=(0,k.C)({useRates:st,assetIds:ot,timeframe:lt}).performanceChartData,pt=(0,y.useMemo)((function(){var t;return null!==ct&&void 0!==ct&&null!==(t=ct.rainbow)&&void 0!==t&&t.length?(0,D.jsx)(S.Ug,{spacing:4,width:"full",children:ot.map((function(t){var e=G(t),n=c.A[e.type].color,a=ct.rainbow.reduce((function(t,n){return(0,j.gA)(n[e.id]).gt(9999)?t:t.plus(n[e.id])}),(0,j.gA)(0)).div(ct.rainbow.length);return(0,D.jsxs)(S.Ug,{spacing:1,alignItems:"baseline",children:[(0,D.jsx)(s.Amount.Percentage,{textStyle:"heading",fontSize:"lg",color:n,value:a}),(0,D.jsx)(h.Translation,{translation:"defi.apy",fontSize:"sm",color:n})]},"asset_".concat(t))}))}):null}),[ot,G,ct]),bt=(0,y.useMemo)((function(){return ot.reduce((function(t,e){var n=G(e);return t=t.plus(n.tvlUsd)}),(0,j.gA)(0))}),[ot,G]),jt=(0,y.useMemo)((function(){var t={data:[],colors:{}};if(!ot)return t;if("best"===(null===at||void 0===at?void 0:at.strategy)){var e=t;return Object.keys(gt).forEach((function(t){var n=(0,i.iL)(t),a=(0,j.gA)(gt[t]),r=bt.times(a.div(100));e.colors[t]=xt[t],e.data.push({value:parseFloat(r.toFixed(2)),label:t,extraData:{icon:null===n||void 0===n?void 0:n.icon,color:xt[t],label:mt[t]}})})),e}return ot.reduce((function(t,e){var n=G(e);return n?(t.colors[e]=c.A[n.type].color,t.data.push({value:parseFloat((0,j.gA)(n.tvlUsd).toFixed(2)),label:n.id,extraData:{asset:n}}),t):t}),t)}),[bt,ot,at,G,gt,xt,mt]),yt=(0,y.useCallback)((function(t){var e,n,a,r,i=jt.data.reduce((function(t,e){return t.plus(e.value)}),(0,j.gA)(0)),o=function(t){return"$".concat((0,j.dm)(t))},l=null===t||void 0===t||null===(e=t.extraData)||void 0===e?void 0:e.asset,s=null===t||void 0===t||null===(n=t.extraData)||void 0===n?void 0:n.icon,u=null===t||void 0===t||null===(a=t.extraData)||void 0===a?void 0:a.label,d=null===t||void 0===t||null===(r=t.extraData)||void 0===r?void 0:r.color,f=s||(null===l||void 0===l?void 0:l.icon)||(null===et||void 0===et?void 0:et.icon),h=u||U(l?c.A[l.type].label:"dashboard.portfolio.totalChart"),g=o(t?t.value:i),x=d||(l?c.A[null===l||void 0===l?void 0:l.type].color:"#ffffff");return(0,D.jsxs)(D.Fragment,{children:[f&&(0,D.jsx)("image",{y:"35%",href:f,height:"34",width:"34",textAnchor:"middle",x:R?"44.5%":"46.5%"}),(0,D.jsx)("text",{x:"50%",y:"54%",fontSize:26,fill:"white",fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:g}),(0,D.jsx)("text",{x:"50%",y:"61%",fill:x,fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",children:h})]})}),[jt,et,U,R]),wt=(0,y.useMemo)((function(){return ct.total.reduce((function(t,e){return(0,j.gA)(e.value).gt(9999)?t:t.plus(e.value)}),(0,j.gA)(0)).div(ct.total.length)}),[ct]),Ct=(0,y.useMemo)((function(){var t=ct.rainbow.reduce((function(t,e){return ot.forEach((function(n){t[n]||(t[n]=(0,j.gA)(0)),t[n]=t[n].plus(e[n])})),t}),{});return Object.keys(t).reduce((function(e,n){return e[n]=t[n].div(ct.rainbow.length),e}),{})}),[ot,ct]),St=(0,y.useMemo)((function(){return ut.total.reduce((function(t,e){return t.plus(Math.abs(e.value))}),(0,j.gA)(0))}),[ut]),At=(0,y.useMemo)((function(){return lt?(0,j.pM)(lt):0}),[lt]),Mt=(0,y.useMemo)((function(){return null!==et&&void 0!==et&&et.collectedFees?et.collectedFees.filter((function(t){return t.date>=At})).reduce((function(t,e){return t.plus(e.value)}),(0,j.gA)(0)):(0,j.gA)(0)}),[et,At]);return(0,D.jsx)(b.AssetProvider,{assetId:W.asset,wrapFlex:!1,children:(0,D.jsxs)(S.gC,{spacing:16,width:"full",children:[P&&(0,D.jsxs)(S.Kq,{mt:14,width:"100%",spacing:[4,10],alignItems:["flex-start","center"],justifyContent:"flex-start",direction:["column","row"],children:[(0,D.jsx)(d.AssetLabel,{assetId:W.asset,fontSize:"h2"}),(0,D.jsxs)(S.Kq,{pb:3,flex:1,spacing:[4,0],borderBottom:"1px solid",borderColor:"divider",justifyContent:"space-between",direction:["column","row"],alignItems:["flex-start","center"],children:[(0,D.jsxs)(S.Ug,{spacing:4,width:["full","auto"],justifyContent:"flex-start",children:[(0,D.jsx)(f.StrategyTag,{strategy:null===at||void 0===at?void 0:at.strategy,py:2}),null===at||void 0===at||null===(e=at.stats)||void 0===e||null===(n=e.header)||void 0===n||null===(T=n.fields)||void 0===T?void 0:T.map((function(t){return(0,D.jsx)(b.AssetProvider.GeneralData,{field:t},"field_".concat(t))}))]}),(0,D.jsx)(M.TimeframeSelector,{variant:"button",timeframe:N,setTimeframe:q,width:["100%","auto"],justifyContent:["center","initial"]})]})]}),(0,D.jsxs)(S.MI,{spacing:4,width:"full",columns:[1,4],children:[(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"defi.tvl",textStyle:"captionSmall"}),(0,D.jsx)(s.Amount.Usd,{value:bt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall"}),(0,D.jsx)(s.Amount.Percentage,{value:wt,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"stats.totalVolume",textStyle:"captionSmall"}),(0,D.jsx)(s.Amount.Usd,{value:St,textStyle:"ctaStatic",fontSize:"xl"})]}),(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"stats.collectedFees",textStyle:"captionSmall"}),(0,D.jsx)(g.TokenAmount,{assetId:null===et||void 0===et?void 0:et.id,amount:Mt,showIcon:!1,textStyle:"ctaStatic",fontSize:"xl"})]})]}),!F&&"tranches"===(null===at||void 0===at?void 0:at.strategy)&&(0,D.jsx)(S.MI,{spacing:4,width:"full",columns:[1,2],children:ot.map((function(t){var e,n,a=G(t);return(0,D.jsx)(b.AssetProvider,{wrapFlex:!1,assetId:a.id,children:(0,D.jsxs)(S.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:c.A[a.type].label,textStyle:"ctaStatic",fontWeight:600,fontSize:"lg"}),(0,D.jsxs)(S.MI,{spacing:4,columns:2,width:"full",children:[(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"defi.avgApy",textStyle:"captionSmall",color:"strategies.".concat(a.type)}),(0,D.jsx)(s.Amount.Percentage,{value:Ct[t],textStyle:"ctaStatic",fontSize:"xl"})]}),null===(e=c.A[a.type].stats)||void 0===e||null===(n=e.strategyData)||void 0===n?void 0:n.fields.map((function(t){return(0,D.jsxs)(o.Card,{children:[(0,D.jsx)(h.Translation,{mb:1,translation:"stats.".concat(t),textStyle:"captionSmall"}),(0,D.jsx)(b.AssetProvider.GeneralData,{field:t,textStyle:"ctaStatic",fontSize:"xl"})]},"field_".concat(t))}))]})]})},"row_".concat(t))}))}),(0,D.jsxs)(S.gC,{spacing:20,width:"full",children:[(0,D.jsxs)(S.Kq,{spacing:6,width:"full",direction:["column","row"],children:[(0,D.jsxs)(S.gC,{spacing:6,width:["full",2/3],alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:"stats.performances",component:S.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,D.jsx)(o.Card.Dark,{p:6,children:(0,D.jsxs)(S.gC,{spacing:4,width:"full",children:[pt,(0,D.jsx)(p.GenericChart,{percentChange:0,assetIds:ot,color:rt,isRainbowChart:!0,data:vt,setPercentChange:function(){},timeframe:lt,height:R?"300px":"350px",margins:{top:10,right:0,bottom:40,left:0},formatFn:function(t){return"$".concat((0,j.dm)(t,3))}})]})})]}),(0,D.jsxs)(S.gC,{flex:1,spacing:6,width:["full","auto"],alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:"stats.tvlDistribution",component:S.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,D.jsx)(o.Card.Dark,{p:6,flex:1,children:(0,D.jsx)(I.DonutChart,(0,a.Z)((0,a.Z)({},jt),{},{getSliceData:yt}))})]})]}),(0,D.jsxs)(S.MI,{spacing:6,width:"full",columns:[1,3],children:[(0,D.jsxs)(S.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:"defi.tvl",component:S.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,D.jsx)(o.Card.Dark,{p:6,children:(0,D.jsx)(p.GenericChart,{percentChange:0,data:ft,assetIds:ot,color:rt,maxMinEnabled:!1,isRainbowChart:!0,setPercentChange:function(){},timeframe:lt,height:R?"300px":"350px",margins:{top:10,right:0,bottom:40,left:0}})})]}),(0,D.jsxs)(S.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:"defi.apy",component:S.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,D.jsx)(o.Card.Dark,{p:6,children:(0,D.jsx)(p.GenericChart,{percentChange:0,assetIds:ot,data:ct,color:rt,maxMinEnabled:!1,isRainbowChart:!0,setPercentChange:function(){},timeframe:lt,height:R?"300px":"350px",formatFn:function(t){return"".concat((0,j.rp)(t))},margins:{top:10,right:0,bottom:40,left:0}})})]}),(0,D.jsxs)(S.gC,{spacing:6,width:"full",alignItems:"flex-start",children:[(0,D.jsx)(h.Translation,{translation:"stats.volumes",component:S.X6,as:"h3",textStyle:"heading",fontSize:"lg"}),(0,D.jsx)(o.Card.Dark,{p:6,flex:1,children:(0,D.jsx)(v.VolumeChart,{timeframe:lt,assetIds:ot})})]})]})]})]})})}},90219:function(t,e,n){n.r(e),n.d(e,{DonutChart:function(){return v},PieChart:function(){return h}});var a=n(1413),r=n(29439),i=n(14380),o=n(7276),l=n(28547),s=n(87563),c=n(68165),u=n(77806),d=n(45263),f={top:0,right:0,bottom:0,left:0};function h(t){var e=t.data,n=t.colors,s=t.width,c=t.height,h=t.margin,g=void 0===h?f:h,x=t.animate,v=void 0===x||x,p=t.getSliceData,b=(0,o.useState)(null),j=(0,r.Z)(b,2),y=j[0],w=j[1],C=s-g.left-g.right,S=c-g.top-g.bottom,A=Math.min(C,S)/2,M=S/2,Z=C/2,I=e.map((function(t){return t.label})),k=I.map((function(t){return n[t]})),D=(0,l.Z)({domain:I,range:k}),T=p&&p(y);return(0,d.jsxs)("svg",{width:s,height:c,children:[(0,d.jsx)("rect",{rx:14,width:s,height:c,fill:"url('#visx-pie-gradient')"}),T,(0,d.jsx)(i.Z,{top:M+g.top,left:Z+g.left,children:(0,d.jsx)(u.Z,{padAngle:0,cornerRadius:0,pieValue:function(t){return t.value},outerRadius:A,innerRadius:A-30,data:e,children:function(t){return(0,d.jsx)(m,(0,a.Z)((0,a.Z)({},t),{},{animate:v,onMouseOver:function(t){var e=t.data;return w(e)},getKey:function(t){return t.data.label},onMouseOut:function(){return w(null)},getColor:function(t){return D(t.data.label)}}))}})})]})}var g=function(t){var e=t.endAngle;return{startAngle:e>Math.PI?2*Math.PI:0,endAngle:e>Math.PI?2*Math.PI:0,opacity:0}},x=function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,opacity:1}};function m(t){var e=t.animate,n=t.arcs,r=t.path,i=t.getKey,o=t.getColor,l=t.onMouseOut,s=t.onMouseOver,u=t.onClickDatum;return(0,c.useTransition)(n,{from:e?g:x,enter:x,update:x,leave:e?g:x,keys:i})((function(t,e){return(0,d.jsx)("g",{children:(0,d.jsx)(c.animated.path,{d:(0,c.interpolate)([t.startAngle,t.endAngle],(function(t,n){return r((0,a.Z)((0,a.Z)({},e),{},{startAngle:t,endAngle:n}))})),fill:o(e),onClick:function(){return u&&u(e)},onMouseOver:function(){return s&&s(e)},onMouseOut:function(){return l&&l(e)},onTouchStart:function(){return u&&u(e)}})},Math.random())}))}var v=function(t){var e=t.data,n=t.colors,a=t.getSliceData;return(0,d.jsx)(s.Z,{debounceTime:10,children:function(t){return(0,d.jsx)(h,{data:e,colors:n,width:t.width,height:t.height,getSliceData:a})}})}},9220:function(t,e,n){n.r(e),n.d(e,{HistogramChart:function(){return _}});var a=n(1413),r=n(93433),i=n(57118),o=n(99594),l=n(14380),s=n(7276),c=n(84033),u=n.n(c),d=n(64625),f=n(46177),h=n(97862),g=n(57478),x=n(25908),m=n(12528),v=n(23369),p=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function b(){return b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},b.apply(this,arguments)}function j(t){var e=t.data,n=t.className,a=t.top,r=t.left,i=t.x,o=t.y0,c=void 0===o?f.l8:o,j=t.y1,y=void 0===j?f.xf:j,w=t.xScale,C=t.yScale,S=t.color,A=t.keys,M=t.value,Z=t.order,I=t.offset,k=t.children,D=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,p),T=(0,d.Z)();A&&T.keys(A),M&&(0,g.Z)(T.value,M),Z&&T.order((0,x.ZP)(Z)),I&&T.offset((0,m.ZP)(I));var O=T(e),P=(0,h.Z)(w),z=O.map((function(t,e){var n=t.key;return{index:e,key:n,bars:t.map((function(e,a){var r=(C(c(e))||0)-(C(y(e))||0),o=C(y(e)),l="bandwidth"in w?w(i(e.data)):Math.max((w(i(e.data))||0)-P/2);return{bar:e,key:n,index:a,height:r,width:P,x:l||0,y:o||0,color:S(t.key,a)}}))}}));return k?s.createElement(s.Fragment,null,k(z)):s.createElement(l.Z,{className:u()("visx-bar-stack",n),top:a,left:r},z.map((function(t){return t.bars.map((function(e){return s.createElement(v.Z,b({key:"bar-stack-"+t.index+"-"+e.index,x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color},D))}))})))}var y,w=n(79866),C=n(10577),S=n(27091),A=n(87563),M=n(86059),Z=n(29564),I=n(26720),k=n(96699),D=n(3498),T=n(75712),O=n(61168),P=n(5151),z=n(82173),F=n(32802),E=n(20663),B=n(48379),L=n(28547),U=n(45263),W={top:20,left:0,right:0,bottom:35},R=(0,O.Z)((function(t){var e,n=t.data,s=t.colors,c=t.width,u=t.height,d=t.events,f=void 0!==d&&d,h=t.tooltip,g=void 0===h||h,x=t.margin,m=void 0===x?W:x,v=t.tooltipOpen,p=t.tooltipTop,b=t.tooltipData,A=t.hideTooltip,O=t.showTooltip,R=(0,k.Fg)(),_=(0,Z.R)().locale,H=function(t){return t.date},N={textAnchor:"middle",fontSize:12,fontWeight:"bold",fill:R.colors.table.axisLabel},q=u-m.top-m.bottom-10,K=c-m.left-m.right,V=Object.keys(s),X=V.map((function(t){return s[t]})),G=n.map((function(t){return t.total})),$=(0,F.Z)({padding:.2,range:[0,K],domain:n.map(H)}),J=(0,E.Z)({range:[0,K],domain:(0,i.Z)(n,(function(t){return(0,o.qF)(t.date).toDate()}))}),Y=Math.max.apply(Math,(0,r.Z)(G.map((function(t){return Math.abs(t)})))),Q=-Y,tt=(0,B.Z)({nice:!1,range:[q,0],domain:[Q,Y]}),et=(0,L.Z)({domain:V,range:X}),nt=(0,I.ff)("white",R.colors.card.bg),at=(0,I.ff)(R.colors.gray[200],R.colors.gray[700]),rt=(0,I.ff)(R.colors.gray[800],"white");return(0,U.jsxs)("div",{style:{position:"relative"},children:[(0,U.jsxs)(S.Z,{width:c,height:u,children:[(0,U.jsx)(l.Z,{top:m.top,children:(0,U.jsx)(j,{data:n,keys:V,x:H,color:et,xScale:$,yScale:tt,offset:"diverging",children:function(t){return t.map((function(t){return t.bars.map((function(e){return(0,U.jsx)("rect",{x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color,onClick:function(){f&&alert("clicked: ".concat(JSON.stringify(e)))},onMouseLeave:function(){y=window.setTimeout((function(){A()}),300)},onMouseMove:function(t){y&&clearTimeout(y);var n=(0,C.Z)(t),a=e.x+e.width/2;O({tooltipData:e,tooltipTop:null===n||void 0===n?void 0:n.y,tooltipLeft:a})}},"bar-stack-".concat(t.index,"-").concat(e.index))}))}))}})}),(0,U.jsx)(w.Z,{strokeWidth:1,hideTicks:!0,top:q/2+m.top,scale:$,stroke:"white",tickFormat:function(){return""}}),(0,U.jsx)(w.Z,{hideTicks:!0,hideAxisLine:!0,numTicks:5,scale:J,top:u-m.bottom,tickLabelProps:function(){return N}})]}),g&&v&&b&&(0,U.jsx)(P.Z,{top:p,left:b.x,style:(0,a.Z)((0,a.Z)({},z.j),{},{border:"none",backgroundColor:"transparent",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0}),children:(0,U.jsxs)(D.gC,{p:2,spacing:3,width:"full",alignItems:"flex-start",borderRadius:"lg",borderColor:at,borderWidth:1,color:rt,bgColor:nt,children:[(0,U.jsx)(D.gC,{spacing:4,width:"full",alignItems:"flex-start",children:Object.keys(b.bar.data).filter((function(t){return!["date","total"].includes(t)})).map((function(t){return(0,U.jsxs)(D.gC,{spacing:2,width:"full",alignItems:"flex-start",children:[(0,U.jsx)(T.AssetProvider,{assetId:t,children:(0,U.jsxs)(D.Ug,{spacing:1,children:[(0,U.jsx)(T.AssetProvider.Icon,{size:"2xs"}),(0,U.jsx)(T.AssetProvider.Name,{fontWeight:"bold"}),(0,U.jsx)(T.AssetProvider.Strategy,{color:et(t),fontWeight:"bold",prefix:"(",suffix:")"})]})}),(0,U.jsx)(M.Amount.Usd,{abbreviate:!1,fontWeight:"bold",fontSize:"md",value:b.bar.data[t]})]},t)}))}),(0,U.jsx)(D.xv,{fontSize:"xs",color:R.colors.gray[500],children:(e=b.bar.data,(0,o.qF)(H(e)).locale(_).format("LLL"))})]})},Math.random())]})})),_=function(t){var e=t.data,n=t.colors,a=t.labels,r=t.tooltip;return(0,U.jsx)(A.Z,{debounceTime:10,children:function(t){return(0,U.jsx)(R,{width:t.width,height:t.height,data:e,tooltip:r,colors:n,labels:a})}})}},96957:function(t,e,n){n.r(e),n.d(e,{StrategyTag:function(){return c}});var a=n(1413),r=n(45987),i=n(94586),o=n(15542),l=n(45263),s=["strategy"],c=function(t){var e=t.strategy,n=(0,r.Z)(t,s);return e?(0,l.jsx)(o.Translation,(0,a.Z)({component:i.Vp,translation:"strategies.".concat(e,".label"),bg:"tags.".concat(e),fontWeight:600,color:"primary",px:4,py:"5px"},n)):null}},84389:function(t,e,n){n.r(e),n.d(e,{VolumeChart:function(){return o}});var a=n(9220),r=n(50026),i=n(45263),o=function(t){var e=t.assetIds,n=t.timeframe,o=(0,r.D)({assetIds:e,timeframe:n}),l=o.labels,s=o.colors,c=o.volumeChartData;return o.volumeChartDataLoading?null:(0,i.jsx)(a.HistogramChart,{colors:s,labels:l,data:c.rainbow})}},50026:function(t,e,n){n.d(e,{D:function(){return u}});var a=n(4942),r=n(1413),i=n(29439),o=n(44888),l=n(7276),s=n(99594),c=n(1669),u=function(t){var e=t.assetIds,n=t.timeframe,u=t.useDollarConversion,d=void 0===u||u,f=(0,l.useState)(!0),h=(0,i.Z)(f,2),g=h[0],x=h[1],m=(0,c.w)(),v=m.historicalTvls,p=m.selectors,b=p.selectAssetsByIds,j=p.selectAssetHistoricalTvls,y=p.selectAssetHistoricalTvlsUsd,w=(0,l.useMemo)((function(){return b?b(e):[]}),[e,b]),C=(0,l.useMemo)((function(){return n?(0,s.pM)(n):0}),[n]),S=(0,l.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(v).length)return t;var e=w.reduce((function(t,e){if(!e.id)return t;var n=d?y(e.id):j(e.id);if(!n)return t;var a=null;return n.forEach((function(n){var r=n.date;if(!(r<C)){if(a&&e.id){t[r]||(t[r]={date:r,total:0});var i=(0,s.gA)(n.value).minus(a.value);t[r][e.id]=Number(i.toFixed(8)),t[r].total=Number((0,s.gA)(t[r].total).plus(i).toFixed(8))}a=n}})),t}),{});return t.total=Object.values(e).map((function(t){return{date:t.date,value:t.total}})),t.rainbow=Object.values(e),t}),[w,d,v,j,y,C]),A=(0,l.useMemo)((function(){return w.length?w.reduce((function(t,e){return(0,r.Z)((0,r.Z)({},t),{},{labels:(0,r.Z)((0,r.Z)({},t.labels),{},(0,a.Z)({},e.id,e.name)),colors:(0,r.Z)((0,r.Z)({},t.colors),{},(0,a.Z)({},e.id,o.A2[e.type].color))})}),{labels:{},colors:{}}):{labels:{},colors:{}}}),[w]);return(0,l.useEffect)((function(){if(S.rainbow.length)return x(!1),function(){x(!0)}}),[S]),{volumeChartData:S,volumeChartDataLoading:g,labels:A.labels,colors:A.colors}}}}]);