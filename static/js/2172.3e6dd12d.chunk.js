"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[2172,8194],{58194:function(e,t,n){n.r(t),n.d(t,{ReactTable:function(){return x}});var r=n(1413),i=n(29439),a=n(7276),l=n(55967),s=n(63591),o=n(96699),c=n(3498),d=n(26720),u=n(67503),f=n(45263),g=function(e){var t=e.column,n=(0,o.Fg)();return(0,f.jsxs)(c.kC,{alignItems:"center",layerStyle:"tableHeader",justifyContent:"space-between",children:[t.render("Header"),t.canSort&&(0,f.jsxs)(c.kC,{direction:"column",children:[(0,f.jsx)(l.rWj,{size:20,fill:t.isSorted&&t.isSortedDesc?n.colors.primary:n.colors.table.arrow,"aria-label":"sorted ascending",style:{position:"absolute"}}),(0,f.jsx)(l.Ix0,{size:20,fill:t.isSorted?t.isSortedDesc?n.colors.table.arrow:n.colors.primary:n.colors.table.arrow,"aria-label":"sorted descending",style:{marginTop:10}})]})]})},x=function(e){var t=e.columns,n=e.data,x=e.page,p=e.rowsPerPage,h=e.displayHeaders,m=void 0===h||h,v=e.onRowClick,j=e.onToggleRow,y=e.initialState,b=(0,o.Fg)(),w=(0,d.ff)("black","white"),C=(0,a.useState)(null),S=(0,i.Z)(C,2),T=S[0],A=S[1],k=(0,s.useTable)({columns:t,data:n,initialState:y},s.useSortBy),R=k.getTableProps,I=k.getTableBodyProps,P=k.headerGroups,Z=k.rows,M=k.prepareRow,B=(0,a.useCallback)((function(e){A((function(t){return t===e?null:e}))}),[A]);(0,a.useEffect)((function(){if(j)return j(T)}),[j,T]);var z=(0,a.useMemo)((function(){return p&&x?Z.slice(p*(x-1),p*x):Z}),[Z,x,p]),H=(0,a.useMemo)((function(){return z.map((function(e,t){var n=!1;M(e);var i=t===z.length-1,s=i&&!T?{borderBottom:0}:{};return(0,f.jsxs)(f.Fragment,{children:[(0,a.createElement)(u.Tr,(0,r.Z)((0,r.Z)({},e.getRowProps()),{},{tabIndex:e.index,layerStyle:"tableRow",backgroundColor:T===e?"card.bgLight":"initial",onClick:function(){var t;return(null===(t=e.subRows)||void 0===t?void 0:t.length)>0?B(e):null===v||void 0===v?void 0:v(e)},cursor:v?"pointer":void 0,sx:s,key:t}),e.cells.map((function(t,i){var s,o=!n&&"none"!==t.column.display,d=i===e.cells.length-1;o&&(n=!0);var g=o?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:d?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,a.createElement)(u.Td,(0,r.Z)((0,r.Z)({},t.getCellProps()),{},{display:t.column.display,sx:g,key:i}),(0,f.jsxs)(c.Ug,{flex:1,width:"full",justifyContent:"space-between",children:[t.render("Cell"),d&&(null===(s=e.subRows)||void 0===s?void 0:s.length)>0&&(T===e?(0,f.jsx)(l.rWj,{size:24,color:b.colors.primary}):(0,f.jsx)(l.Ix0,{size:24,color:b.colors.primary}))]}))}))),T===e&&e.subRows.map((function(t,l){M(t);var s=l===e.subRows.length-1,o=i&&s?{borderBottom:0}:{};return(0,a.createElement)(u.Tr,(0,r.Z)((0,r.Z)({},t.getRowProps()),{},{tabIndex:t.index,layerStyle:"tableRow",backgroundColor:"button.bgHover",onClick:function(){return null===v||void 0===v?void 0:v(t)},cursor:v?"pointer":void 0,sx:o,key:l}),t.cells.map((function(e,i){var l=!n&&"none"!==e.column.display,s=i===t.cells.length-1;l&&(n=!0);var o=l?{borderTopLeftRadius:8,borderBottomLeftRadius:8}:s?{borderTopRightRadius:8,borderBottomRightRadius:8}:{};return(0,a.createElement)(u.Td,(0,r.Z)((0,r.Z)({},e.getCellProps()),{},{display:e.column.display,sx:o,key:i}),e.render("Cell"))})))}))]})}))}),[B,T,M,b,z,v]);return(0,f.jsxs)(u.iA,(0,r.Z)((0,r.Z)({variant:"clickable",size:{base:"sm",md:"md"}},R()),{},{children:[m&&(0,f.jsx)(u.hr,{children:P.map((function(e,t){var n=!1;return(0,a.createElement)(u.Tr,(0,r.Z)((0,r.Z)({},e.getHeaderGroupProps()),{},{key:t}),e.headers.map((function(t,i){var l=!n&&"none"!==t.display,s=i===e.headers.length-1;l&&(n=!0);var o=l?{paddingLeft:0,paddingRight:4}:s?{paddingLeft:4,paddingRight:0}:{paddingLeft:4,paddingRight:4};return(0,a.createElement)(u.Th,(0,r.Z)((0,r.Z)({},t.getHeaderProps(t.getSortByToggleProps({title:void 0}))),{},{color:"gray.500",fontWeight:400,display:t.display,textAlign:t.textAlign,_hover:{color:t.canSort?w:"gray.500"},style:o,key:"th_".concat(i)}),(0,f.jsx)(g,{column:t}))})))}))}),(0,f.jsx)(u.p3,(0,r.Z)((0,r.Z)({},I()),{},{children:H}))]}))}},52172:function(e,t,n){n.r(t),n.d(t,{TableField:function(){return Z},Tranches:function(){return M}});var r=n(93433),i=n(1413),a=n(29439),l=n(54447),s=n(79681),o=n(56292),c=n(95173),d=n(86059),u=n(55967),f=n(4432),g=n(80265),x=n(66288),p=n(75349),h=n(88935),m=n(58194),v=n(15542),j=n(1669),y=n(12056),b=n(75712),w=n(7276),C=n(88129),S=n(99594),T=n(89030),A=n(3498),k=n(2092),R=n(43127),I=n(82137),P=n(45263),Z=function(e){var t=e.field,n=e.row,r=e.value,i=n.original.id;return(0,P.jsx)(T.N2,{noOfLines:2,isLoaded:!!r,children:(0,P.jsx)(b.AssetProvider,{assetId:i,children:(0,P.jsx)(b.AssetProvider.GeneralData,{section:"strategy",field:t})})})},M=function(){var e=(0,c.s0)(),t=(0,s.qM)(),n=(0,h.Y)().account,M=(0,x.X)().isMobile,B=(0,g.f)(),z=B.openModal,H=B.closeModal,L=(0,w.useState)(null),U=(0,a.Z)(L,2),_=U[0],F=U[1],E=(0,w.useState)(null),O=(0,a.Z)(E,2),V=O[0],W=O[1],K=(0,j.w)(),N=K.isPortfolioLoaded,q=K.selectors,G=q.selectVaultById,D=q.selectAssetById,X=q.selectVaultsWithBalance,Y=q.selectVaultsAssetsByType,J=q.selectVaultsAssetsWithBalance,Q=(0,w.useMemo)((function(){return o.R.find((function(e){return"yield-tranches"===e.route}))}),[]),$=(0,w.useMemo)((function(){return(null===Q||void 0===Q?void 0:Q.strategies)||[]}),[Q]),ee=(0,w.useMemo)((function(){return null===$||void 0===$?void 0:$[0]}),[$]),te=(0,w.useCallback)((function(t,n,r){(0,S.fU)(n,r,t.original);var i=y.A[t.original.type];return e("/earn/".concat(i.route,"/").concat(t.original.id))}),[e]),ne=(0,w.useCallback)((function(t){var n=G(t),r={AA:D(null===n||void 0===n?void 0:n.vaultConfig.Tranches.AA.address),BB:D(null===n||void 0===n?void 0:n.vaultConfig.Tranches.BB.address)};return(0,P.jsx)(A.MI,{mb:6,spacing:6,width:"full",columns:[1,2],children:$.map((function(t){var n,i,a,s=y.A[t].route,o=null===(n=r[t])||void 0===n?void 0:n.id;return(0,P.jsx)(b.AssetProvider,{assetId:o,wrapFlex:!1,children:(0,P.jsxs)(l.Card,{p:4,borderRadius:24,overflow:"hidden",position:"relative",layerStyle:"cardLight",children:[(0,P.jsx)(A.xu,{sx:{zIndex:0,top:"30%",width:"205%",right:"-115%",position:"absolute",height:M?"145%":"125%",background:"radial-gradient(circle, rgba(".concat((0,S.oo)(null===(i=y.A[t])||void 0===i?void 0:i.color).join(","),",0.8) 0%, rgba(50,61,83,0) 70%)")}}),(0,P.jsxs)(A.xu,{zIndex:1,width:"full",position:"relative",children:[(0,P.jsx)(A.Ug,{width:"full",justifyContent:"flex-end",children:(0,P.jsx)(k.Ee,{w:6,h:6,src:"".concat(f.P5).concat(t,".svg")})}),(0,P.jsxs)(A.gC,{px:2,width:"full",spacing:4,children:[(0,P.jsx)(A.Ug,{width:"full",justifyContent:"flex-start",children:(0,P.jsx)(v.Translation,{translation:y.A[t].label,textStyle:"ctaStatic",fontSize:"cardTitle",lineHeight:"initial"})}),(0,P.jsx)(A.gC,{spacing:2,children:null===(a=y.A[t].features)||void 0===a?void 0:a.map((function(e){return(0,P.jsxs)(A.Ug,{spacing:1,alignItems:"flex-start",children:[(0,P.jsx)(A.xu,{pt:1,children:(0,P.jsx)(u.KEG,{color:"white",size:12})}),(0,P.jsx)(v.Translation,{translation:e,textStyle:"captionSmall"})]})}))}),(0,P.jsxs)(A.gC,{spacing:0,width:"full",alignItems:"flex-start",children:[(0,P.jsxs)(A.Ug,{spacing:1,width:"full",alignItems:"baseline",children:[(0,P.jsx)(b.AssetProvider.Apy,{showTooltip:!1,color:y.A[t].color,textStyle:"heading",fontSize:"h3"}),(0,P.jsx)(v.Translation,{translation:"defi.apy",color:y.A[t].color,textStyle:"ctaStatic",fontSize:"sm"})]}),(0,P.jsxs)(A.Ug,{spacing:2,width:"full",children:[(0,P.jsx)(v.Translation,{translation:"defi.currentTVL",textStyle:"captionSmall"}),(0,P.jsx)(b.AssetProvider.PoolUsd,{textStyle:"captionSmall",color:"primary",fontSize:"md",fontWeight:"700"})]})]}),"AA"===t?(0,P.jsxs)(A.gC,{spacing:1,width:"full",alignItems:"flex-start",children:[(0,P.jsx)(v.Translation,{translation:"defi.seniorCoverage",textStyle:"ctaStatic"}),(0,P.jsx)(b.AssetProvider.Coverage,{textStyle:"captionSmall",color:"primary"})]}):(0,P.jsxs)(A.gC,{spacing:1,width:"full",alignItems:"flex-start",children:[(0,P.jsx)(v.Translation,{translation:"defi.apyBoost",textStyle:"ctaStatic"}),(0,P.jsxs)(A.Ug,{spacing:1,children:[(0,P.jsx)(b.AssetProvider.ApyBoost,{textStyle:"captionSmall",color:"primary"}),(0,P.jsx)(v.Translation,{translation:"defi.moreThanUnderlying",textStyle:"captionSmall",color:"primary"})]})]}),(0,P.jsx)(A.xu,{width:"full",children:(0,P.jsx)(v.Translation,{translation:"trade.vaults.".concat(t,".cta"),mt:4,component:R.zx,width:"full",variant:"ctaPrimary",onClick:function(){e("/earn/".concat(s,"/").concat(o)),H()}})})]})]})]})})}))})}),[e,H,$,M,G,D]),re=(0,w.useCallback)((function(e,t,n){(0,S.fU)(t,n,e);var r={subtitle:"defi.chooseTranche",body:ne(e.id)};return z(r,"2xl")}),[z,ne]),ie=(0,w.useMemo)((function(){return(null===Q||void 0===Q?void 0:Q.columns)||ee&&y.A[ee].columns}),[Q,ee]),ae=(0,w.useMemo)((function(){return ee&&ie?ie.filter((function(e){return!e.tables||e.tables.includes("Available")})).map((function(e){var n=e.id,r=e.accessor,a=e.sortType,l="alpha"===a?S.YC:"numeric"===a?S._O:void 0;return{id:n,accessor:r,disableSortBy:!l,defaultCanSort:!!l,Header:t(e.title||"defi.".concat(n)),sortType:l?function(e,t){return l(e,t,r)}:void 0,Cell:function(t){var r=t.value,a=t.row;return e.extraFields&&e.extraFields.length>0?(0,P.jsxs)(A.Kq,(0,i.Z)((0,i.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,P.jsx)(Z,{field:n,value:r,row:a}),e.extraFields.map((function(e){return(0,P.jsx)(Z,{field:e,value:r,row:a},"extraField_".concat(e))}))]})):(0,P.jsx)(Z,{field:n,value:r,row:a})}}})):[]}),[ee,ie,t]),le=(0,w.useMemo)((function(){return ee&&ie?ie.filter((function(e){return!e.tables||e.tables.includes("Deposited")})).map((function(e){var n=e.id,r=e.accessor,a=e.sortType,l="alpha"===a?S.YC:"numeric"===a?S._O:void 0;return{id:n,accessor:r,disableSortBy:!l,defaultCanSort:!!l,Header:t(e.title||"defi.".concat(n)),sortType:l?function(e,t){return l(e,t,r)}:void 0,Cell:function(t){var r=t.value,a=t.row;return e.extraFields&&e.extraFields.length>0?(0,P.jsxs)(A.Kq,(0,i.Z)((0,i.Z)({spacing:2,width:"full",direction:"row",alignItems:"center"},e.stackProps),{},{children:[(0,P.jsx)(Z,{field:n,value:r,row:a}),e.extraFields.map((function(e){return(0,P.jsx)(Z,{field:e,value:r,row:a},"extraField_".concat(e))}))]})):(0,P.jsx)(Z,{field:n,value:r,row:a})}}})):[]}),[ee,ie,t]),se=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,r.Z)(le),[{accessor:"balanceUsd",Header:t("defi.balance"),Cell:function(e){var t=e.value;return(0,P.jsx)(T.N2,{noOfLines:2,isLoaded:!!t,children:(0,P.jsx)(d.Amount.Usd,{value:t,textStyle:"tableCell"})})},sortType:S._O},{accessor:"vaultPosition",Header:t("defi.realizedApy"),Cell:function(e){var t=e.value;return(0,P.jsx)(T.N2,{noOfLines:2,isLoaded:!!t,children:t&&(0,P.jsxs)(I.kN,{children:[(0,P.jsx)(I.Jf,{children:(0,P.jsxs)(A.kC,{direction:"row",alignItems:"center",children:[!t.realizedApy.isNaN()&&(0,P.jsx)(I.uY,{type:"increase"}),(0,P.jsx)(d.Amount.Percentage,{value:t.realizedApy,textStyle:"tableCell"})]})}),(0,P.jsx)(d.Amount.Usd,{prefix:"+",value:t.usd.earnings,textStyle:"captionSmall"})]})})},sortType:function(e,t){return(0,S._O)(e,t,"vaultPosition.earningsPercentage")}}])}),[t,le]),oe=(0,w.useMemo)((function(){return[{Header:"#",accessor:"id",display:"none"}].concat((0,r.Z)(ae))}),[ae]),ce=(0,w.useMemo)((function(){return X&&N&&$?null===$||void 0===$?void 0:$.reduce((function(e,t){var n=J(t);return[].concat((0,r.Z)(e),(0,r.Z)(n||[]))}),[]):[]}),[N,X,J,$]),de=(0,w.useMemo)((function(){return Y&&N?Y(ee).filter((function(e){return!ce.map((function(e){return e.id})).includes(e.id)})):[]}),[N,Y,ce,ee]),ue=(0,w.useMemo)((function(){return ee?"".concat(ee,"_deposited"):""}),[ee]),fe=(0,w.useMemo)((function(){if(!ee)return"";var e=t(y.A[ee].label);return"".concat(e," - ").concat(t("defi.deposited"))}),[ee,t]),ge=(0,w.useMemo)((function(){return ee?"".concat(ee,"_available"):""}),[ee]),xe=(0,w.useMemo)((function(){if(!ee)return"";var e=t(y.A[ee].label);return"".concat(e," - ").concat(t("common.available"))}),[ee,t]);(0,w.useEffect)((function(){if(ee&&V!==ee&&ce.length){var e=ce.map((function(e){return(0,S.ym)(e,ue,fe)}));(0,S.y6)(ue,fe,e),W(ee)}}),[n,ee,t,ue,fe,ce,V,W]),(0,w.useEffect)((function(){if(ee&&_!==ee&&de.length){var e=de.map((function(e){return(0,S.ym)(e,ge,xe)}));(0,S.y6)(ge,xe,e),F(ee)}}),[n,t,ge,xe,_,F,ee,de]);var pe=(0,w.useMemo)((function(){if(!ce.length)return null;return M?(0,P.jsxs)(A.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,P.jsx)(v.Translation,{translation:"defi.depositedAssets",component:A.X6,as:"h3",fontSize:"lg"}),(0,P.jsx)(A.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:ce.map((function(e){return e.id&&(0,P.jsx)(p.VaultCard,{assetId:e.id},"vault_".concat(e.id))}))})]}):(0,P.jsxs)(l.Card,{mt:10,children:[(0,P.jsx)(v.Translation,{translation:"defi.depositedAssets",component:l.Card.Heading,fontSize:"lg"}),(0,P.jsx)(m.ReactTable,{columns:se,data:ce,initialState:{sortBy:[{id:"balanceUsd",desc:!1}]},onRowClick:function(e){return te(e,ue,fe)}})]})}),[M,se,ue,fe,ce,te]),he=(0,w.useMemo)((function(){if(N&&!de.length)return null;return M?(0,P.jsxs)(A.gC,{mt:20,spacing:6,width:"100%",alignItems:"flex-start",children:[(0,P.jsx)(v.Translation,{translation:"defi.availableAssets",component:A.X6,as:"h3",fontSize:"lg"}),(0,P.jsx)(A.gC,{spacing:2,width:"100%",alignItems:"flex-start",children:de.map((function(e){return e.id&&(0,P.jsx)(p.VaultCard,{assetId:e.id,onClick:function(){return re(e,ge,xe)}},"vault_".concat(e.id))}))})]}):(0,P.jsxs)(l.Card,{mt:10,children:[(0,P.jsx)(v.Translation,{translation:"defi.availableAssets",component:l.Card.Heading,fontSize:"lg"}),de.length?(0,P.jsx)(m.ReactTable,{columns:oe,data:de,initialState:{sortBy:[{id:"trancheTotalTvl",desc:!1}]},onRowClick:function(e){return re(e.original,ge,xe)}}):(0,P.jsxs)(A.Kq,{children:[(0,P.jsx)(T.Od,{}),(0,P.jsx)(T.Od,{})]})]})}),[M,N,oe,ge,xe,de,re]),me=(0,w.useMemo)((function(){if(!ee)return null;var e=null===Q||void 0===Q?void 0:Q.modal;return(0,P.jsx)(A.gC,{width:"full",spacing:10,children:(0,P.jsxs)(A.Kq,{spacing:[8,0],direction:["column","row"],alignItems:["center","flex-start"],width:["100%","100%","100%","100%","80%"],children:[(0,P.jsxs)(A.gC,{pr:[0,0],spacing:10,direction:"column",width:["100%","50%"],alignItems:["center","flex-start"],children:[(0,P.jsx)(v.Translation,{isHtml:!0,translation:"strategies.tranches.title",component:A.X6,fontFamily:"body",as:"h2",size:"3xl",fontWeight:"bold",lineHeight:"normal"}),!M&&(0,P.jsxs)(A.gC,{spacing:1,width:["100%","90%"],alignItems:"flex-start",children:[(0,P.jsx)(v.Translation,{isHtml:!0,translation:"strategies.tranches.description",textAlign:["center","left"]}),e&&(0,P.jsxs)(A.Ug,{spacing:2,children:[(0,P.jsx)(v.Translation,{translation:"defi.modals.learnMore.cta.learnMore",textStyle:"cta",onClick:function(){return z(e)}}),(0,P.jsx)(u.KEG,{})]})]}),!M&&(0,P.jsx)(C.StrategyOverview,{strategies:$})]}),(0,P.jsx)(k.Ee,{width:["100%","50%"],src:null===Q||void 0===Q?void 0:Q.image}),M&&(0,P.jsx)(v.Translation,{translation:"strategies.tranches.description",textAlign:["center","left"]}),M&&(0,P.jsx)(C.StrategyOverview,{strategies:$})]})})}),[ee,Q,$,M,z]);return(0,P.jsxs)(A.kC,{mt:20,width:"100%",direction:"column",alignItems:"center",children:[me,pe,he]})}}}]);