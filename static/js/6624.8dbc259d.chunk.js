"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return f}});var n=l(1413),i=l(45987),r=l(5128),u=l(7276),o=l(12056),a=l(86059),s=l(99594),d=l(15542),v=l(1669),m=l(3498),c=l(45263),p=["assetId","field","amount","amountUsd","stakingPower"],y=function(e){var t,l,o,d,y,f=e.assetId,g=e.field,x=e.amount,A=e.amountUsd,Z=e.stakingPower,S=(0,i.Z)(e,p),w=(0,v.w)(),k=w.stakingData,b=w.helpers.vaultFunctionsHelper,h=w.selectors,j=h.selectAssetById,B=h.selectVaultById,I=h.selectVaultGauge,P=(0,u.useMemo)((function(){return f&&j&&j(f)}),[f,j]),M=(0,u.useMemo)((function(){return f&&B&&B(f)}),[f,B]),D=(0,u.useMemo)((function(){return f&&I&&I(f)}),[f,I]),F=(0,u.useMemo)((function(){return D&&j&&j(D.id)}),[D,j]),U=(0,u.useMemo)((function(){return(0,s.gA)(P.tvl).plus((0,s.d5)(x))}),[P,x]),C=(0,u.useMemo)((function(){return null===b||void 0===b?void 0:b.getVaultNewApr(P,M,(0,s.gA)(x))}),[P,M,x,b]),_=(0,u.useMemo)((function(){if((0,s.d5)(C).gt(0)){var e=(0,s.Bs)((0,s.d5)(C).div(100)).times(100),t=P.apyBreakdown?Object.keys(P.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===F||void 0===F?void 0:F.gaugeData;if(l){var n=(0,s.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,s.d5)(x)),i=(0,s.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),r=P.apyBreakdown[t].times(i);return e.plus(r)}return e.plus(P.apyBreakdown[t]);case"harvest":var u=(0,s.gA)(P.tvl).div(U),o=P.apyBreakdown[t].times(u);return e.plus(o);default:return e.plus(P.apyBreakdown[t])}}),(0,s.gA)(0)):(0,s.gA)(0);return(0,s.gA)(e).plus(t)}return(0,s.d5)(null===P||void 0===P?void 0:P.apy)}),[P,x,U,F,C]),E=(0,s.d5)(A).gt(0),L=(0,s.d5)(null===P||void 0===P||null===(t=P.vaultPosition)||void 0===t?void 0:t.underlying.redeemable),V=(0,s.d5)(null===P||void 0===P||null===(l=P.vaultPosition)||void 0===l?void 0:l.usd.redeemable),G=r.Z.maximum(0,(0,s.d5)(null===P||void 0===P||null===(o=P.vaultPosition)||void 0===o?void 0:o.usd.earnings)),T=r.Z.minimum(1,(0,s.d5)(A).div(V)),H=r.Z.minimum(G,T.times(G)),N=r.Z.maximum(0,(0,s.d5)(null===P||void 0===P||null===(d=P.vaultPosition)||void 0===d?void 0:d.usd.earnings).times(null===P||void 0===P?void 0:P.fee)),O=r.Z.minimum(N,(0,s.d5)(H).times(null===P||void 0===P?void 0:P.fee)),q=E&&(0,s.d5)(x).lte(L);switch(g){case"boost":var z=_&&null!==P&&void 0!==P&&null!==(y=P.baseApr)&&void 0!==y&&y.gt(0)?_.div(null===P||void 0===P?void 0:P.baseApr):(0,s.gA)(0);return(0,c.jsxs)(m.xv,(0,n.Z)((0,n.Z)({},S),{},{textStyle:"titleSmall",color:"primary",children:[z.toFixed(2),"x"]}));case"overperformance":var J=(0,s.d5)(A).times((0,s.gA)(null===P||void 0===P?void 0:P.baseApr).div(100)),K=(0,s.d5)(A).times((0,s.gA)(null===P||void 0===P?void 0:P.apy).div(100)),Q=E?K.minus(J):null;return(0,c.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:Q,suffix:"/year"}));case"newApy":return(0,c.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:_}));case"gain":return(0,c.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:q?H:null}));case"fee":return(0,c.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:q?O:null}));case"netGain":var R=r.Z.minimum(G.minus(O),(0,s.d5)(H).minus(O));return(0,c.jsx)(a.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:q?R:null}));case"coverage":var W=j(null===M||void 0===M?void 0:M.vaultConfig.Tranches.BB.address),X=W.tvl&&U?W.tvl.div(U).times(100):0;return(0,c.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:X}));case"stakingPoolShare":if(!k)return null;var Y=(0,s.d5)(x).div(k.stkIDLE.totalSupply.plus((0,s.d5)(x))).times(100);return(0,c.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:Y}));case"stkIDLE":case"stkIDLEAfterIncrease":return(0,c.jsx)(a.Amount,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},S),{},{value:x}));case"stakingApy":if(!k)return null;var $=(0,s.d5)(Z).times(k.maxApr);return(0,c.jsx)(a.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},S),{},{value:$}));default:return null}},f=function(e){var t,l=(0,v.w)().selectors.selectVaultById,i=e.assetId,r=e.action,a=(0,u.useMemo)((function(){return i&&l&&l(i)}),[i,l]),s=(0,u.useMemo)((function(){return(null===a||void 0===a?void 0:a.type)&&o.A[a.type]}),[a]);if(null===s||void 0===s||null===(t=s.dynamicActionFields)||void 0===t||!t[r])return null;var p=null===s||void 0===s?void 0:s.dynamicActionFields[r];return(0,c.jsx)(m.gC,{spacing:2,width:"100%",children:p.map((function(t){return(0,c.jsxs)(m.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,c.jsx)(d.Translation,{component:m.xv,translation:"dynamicActionFields.".concat(t),textStyle:"captionSmall"}),(0,c.jsx)(y,(0,n.Z)((0,n.Z)({},e),{},{field:t}))]},"dynamicField_".concat(t))}))})}}}]);