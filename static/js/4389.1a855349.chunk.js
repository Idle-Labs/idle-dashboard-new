"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[4389,9220],{9220:function(t,e,o){o.r(e),o.d(e,{HistogramChart:function(){return _}});var r=o(1413),a=o(93433),n=o(57118),i=o(20910),l=o(14380),s=o(7276),c=o(84033),d=o.n(c),u=o(64625),f=o(46177),h=o(97862),g=o(57478),m=o(25908),p=o(12528),v=o(23369),b=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function x(){return x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},x.apply(this,arguments)}function y(t){var e=t.data,o=t.className,r=t.top,a=t.left,n=t.x,i=t.y0,c=void 0===i?f.l8:i,y=t.y1,Z=void 0===y?f.xf:y,j=t.xScale,k=t.yScale,w=t.color,C=t.keys,T=t.value,A=t.order,M=t.offset,O=t.children,S=function(t,e){if(null==t)return{};var o,r,a={},n=Object.keys(t);for(r=0;r<n.length;r++)o=n[r],e.indexOf(o)>=0||(a[o]=t[o]);return a}(t,b),L=(0,u.Z)();C&&L.keys(C),T&&(0,g.Z)(L.value,T),A&&L.order((0,m.ZP)(A)),M&&L.offset((0,p.ZP)(M));var D=L(e),I=(0,h.Z)(j),P=D.map((function(t,e){var o=t.key;return{index:e,key:o,bars:t.map((function(e,r){var a=(k(c(e))||0)-(k(Z(e))||0),i=k(Z(e)),l="bandwidth"in j?j(n(e.data)):Math.max((j(n(e.data))||0)-I/2);return{bar:e,key:o,index:r,height:a,width:I,x:l||0,y:i||0,color:w(t.key,r)}}))}}));return O?s.createElement(s.Fragment,null,O(P)):s.createElement(l.Z,{className:d()("visx-bar-stack",o),top:r,left:a},P.map((function(t){return t.bars.map((function(e){return s.createElement(v.Z,x({key:"bar-stack-"+t.index+"-"+e.index,x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color},S))}))})))}var Z,j=o(79866),k=o(10577),w=o(27091),C=o(87563),T=o(86059),A=o(29564),M=o(26720),O=o(96699),S=o(3498),L=o(75712),D=o(61168),I=o(5151),P=o(82173),F=o(32802),N=o(20663),R=o(48379),W=o(28547),E=o(45263),z={top:20,left:0,right:0,bottom:35},H=(0,D.Z)((function(t){var e,o=t.data,s=t.colors,c=t.width,d=t.height,u=t.events,f=void 0!==u&&u,h=t.tooltip,g=void 0===h||h,m=t.margin,p=void 0===m?z:m,v=t.tooltipOpen,b=t.tooltipTop,x=t.tooltipData,C=t.hideTooltip,D=t.showTooltip,H=(0,O.Fg)(),_=(0,A.R)().locale,B=function(t){return t.date},U={textAnchor:"middle",fontSize:12,fontWeight:"bold",fill:H.colors.table.axisLabel},q=d-p.top-p.bottom-10,V=c-p.left-p.right,J=Object.keys(s),G=J.map((function(t){return s[t]})),K=o.map((function(t){return t.total})),Q=(0,F.Z)({padding:.2,range:[0,V],domain:o.map(B)}),X=(0,N.Z)({range:[0,V],domain:(0,n.Z)(o,(function(t){return(0,i.qF)(t.date).toDate()}))}),Y=Math.max.apply(Math,(0,a.Z)(K.map((function(t){return Math.abs(t)})))),$=-Y,tt=(0,R.Z)({nice:!1,range:[q,0],domain:[$,Y]}),et=(0,W.Z)({domain:J,range:G}),ot=(0,M.ff)("white",H.colors.card.bg),rt=(0,M.ff)(H.colors.gray[200],H.colors.gray[700]),at=(0,M.ff)(H.colors.gray[800],"white");return(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsxs)(w.Z,{width:c,height:d,children:[(0,E.jsx)(l.Z,{top:p.top,children:(0,E.jsx)(y,{data:o,keys:J,x:B,color:et,xScale:Q,yScale:tt,offset:"diverging",children:function(t){return t.map((function(t){return t.bars.map((function(e){return(0,E.jsx)("rect",{x:e.x,y:e.y,height:e.height,width:e.width,fill:e.color,onClick:function(){f&&alert("clicked: ".concat(JSON.stringify(e)))},onMouseLeave:function(){Z=window.setTimeout((function(){C()}),300)},onMouseMove:function(t){Z&&clearTimeout(Z);var o=(0,k.Z)(t),r=e.x+e.width/2;D({tooltipData:e,tooltipTop:null===o||void 0===o?void 0:o.y,tooltipLeft:r})}},"bar-stack-".concat(t.index,"-").concat(e.index))}))}))}})}),(0,E.jsx)(j.Z,{strokeWidth:1,hideTicks:!0,top:q/2+p.top,scale:Q,stroke:"white",tickFormat:function(){return""}}),(0,E.jsx)(j.Z,{hideTicks:!0,hideAxisLine:!0,numTicks:5,scale:X,top:d-p.bottom,tickLabelProps:function(){return U}})]}),g&&v&&x&&(0,E.jsx)(I.Z,{top:b,left:x.x,style:(0,r.Z)((0,r.Z)({},P.j),{},{border:"none",backgroundColor:"transparent",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0}),children:(0,E.jsxs)(S.gC,{p:2,spacing:3,width:"full",alignItems:"flex-start",borderRadius:"lg",borderColor:rt,borderWidth:1,color:at,bgColor:ot,children:[(0,E.jsx)(S.gC,{spacing:4,width:"full",alignItems:"flex-start",children:Object.keys(x.bar.data).filter((function(t){return!["date","total"].includes(t)})).map((function(t){return(0,E.jsxs)(S.gC,{spacing:2,width:"full",alignItems:"flex-start",children:[(0,E.jsx)(L.AssetProvider,{assetId:t,children:(0,E.jsxs)(S.Ug,{spacing:1,children:[(0,E.jsx)(L.AssetProvider.Icon,{size:"2xs"}),(0,E.jsx)(L.AssetProvider.Name,{fontWeight:"bold"}),(0,E.jsx)(L.AssetProvider.Strategy,{color:"gray.500",fontWeight:"bold",prefix:"(",suffix:")"})]})}),(0,E.jsx)(T.Amount.Usd,{abbreviate:!1,fontWeight:"bold",fontSize:"md",value:x.bar.data[t],color:et(t)})]},t)}))}),(0,E.jsx)(S.xv,{fontSize:"xs",color:H.colors.gray[500],children:(e=x.bar.data,(0,i.qF)(B(e)).locale(_).format("LLL"))})]})},Math.random())]})})),_=function(t){var e=t.data,o=t.colors,r=t.labels,a=t.tooltip;return(0,E.jsx)(C.Z,{debounceTime:10,children:function(t){return(0,E.jsx)(H,{width:t.width,height:t.height,data:e,tooltip:a,colors:o,labels:r})}})}},84389:function(t,e,o){o.r(e),o.d(e,{VolumeChart:function(){return i}});var r=o(9220),a=o(50026),n=o(45263),i=function(t){var e=t.assetIds,o=t.timeframe,i=t.dateRange,l=(0,a.D)({assetIds:e,timeframe:o,dateRange:i}),s=l.labels,c=l.colors,d=l.volumeChartData;return l.volumeChartDataLoading?null:(0,n.jsx)(r.HistogramChart,{colors:c,labels:s,data:d.rainbow})}},50026:function(t,e,o){o.d(e,{D:function(){return d}});var r=o(4942),a=o(1413),n=o(29439),i=o(82627),l=o(7276),s=o(20910),c=o(1669),d=function(t){var e=t.assetIds,o=t.dateRange,d=t.timeframe,u=t.useDollarConversion,f=void 0===u||u,h=(0,l.useState)(!0),g=(0,n.Z)(h,2),m=g[0],p=g[1],v=(0,c.w)(),b=v.historicalTvls,x=v.selectors,y=x.selectAssetsByIds,Z=x.selectVaultById,j=x.selectAssetHistoricalTvls,k=x.selectAssetHistoricalTvlsUsd,w=(0,l.useMemo)((function(){return y?y(e):[]}),[e,y]),C=(0,l.useMemo)((function(){return(0,s.yb)(d,o)}),[d,o]),T=(0,n.Z)(C,2),A=T[0],M=T[1],O=(0,l.useMemo)((function(){var t={total:[],rainbow:[]};if(!Object.keys(b).length)return t;var e=w.reduce((function(t,e){if(!e.id)return t;var o=f?k(e.id):j(e.id);if(!o)return t;var r=Z(e.id),a=null;return o.forEach((function(o){var n,i=o.date,l="stats"in r&&(null===(n=r.stats)||void 0===n?void 0:n.startTimestamp);if(!(i<(l&&l>A?l:A)||M&&i>M)){if(a&&e.id){t[i]||(t[i]={date:i,total:0});var c=(0,s.gA)(o.value).minus(a.value);t[i][e.id]=Number(c.toFixed(8)),t[i].total=Number((0,s.gA)(t[i].total).plus(c).toFixed(8))}a=o}})),t}),{});return t.total=Object.values(e).map((function(t){return{date:t.date,value:t.total}})),t.rainbow=Object.values(e),t}),[w,f,Z,b,j,k,A,M]),S=(0,l.useMemo)((function(){return w.length?w.reduce((function(t,e){return(0,a.Z)((0,a.Z)({},t),{},{labels:(0,a.Z)((0,a.Z)({},t.labels),{},(0,r.Z)({},e.id,e.name)),colors:(0,a.Z)((0,a.Z)({},t.colors),{},(0,r.Z)({},e.id,i.A2[e.type].color))})}),{labels:{},colors:{}}):{labels:{},colors:{}}}),[w]);return(0,l.useEffect)((function(){if(O.rainbow.length)return p(!1),function(){p(!0)}}),[O]),{volumeChartData:O,volumeChartDataLoading:m,labels:S.labels,colors:S.colors}}}}]);