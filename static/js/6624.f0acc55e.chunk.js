"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return A}});var n=l(93433),i=l(1413),o=l(45987),u=l(5128),a=l(7276),r=l(87099),s=l(12056),d=l(86059),m=l(60062),v=l(99594),c=l(15542),f=l(1669),p=l(3498),g=l(45263),y=["assetId","field","amount","amountUsd","stakingPower"],x=function(e){var t,l,n=e.assetId,r=e.field,s=e.amount,x=e.amountUsd,A=e.stakingPower,Z=(0,o.Z)(e,y),k=(0,f.w)(),S=k.stakingData,w=k.helpers.vaultFunctionsHelper,b=k.selectors,M=b.selectAssetById,h=b.selectVaultById,j=b.selectVaultGauge,B=(0,a.useMemo)((function(){return n&&M&&M(n)}),[n,M]),I=(0,a.useMemo)((function(){return B&&M&&M(B.underlyingId)}),[B,M]),P=(0,a.useMemo)((function(){return n&&h&&h(n)}),[n,h]),F=(0,a.useMemo)((function(){return n&&j&&j(n)}),[n,j]),U=(0,a.useMemo)((function(){return F&&M&&M(F.id)}),[F,M]),C=(0,a.useMemo)((function(){return(0,v.gA)(B.tvl).plus((0,v.d5)(s))}),[B,s]),D=(0,a.useMemo)((function(){return null===w||void 0===w?void 0:w.getVaultNewApr(B,P,(0,v.gA)(s))}),[B,P,s,w]),L=(0,a.useMemo)((function(){if((0,v.d5)(D).gt(0)){var e=(0,v.Bs)((0,v.d5)(D).div(100)).times(100),t=B.apyBreakdown?Object.keys(B.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===U||void 0===U?void 0:U.gaugeData;if(l){var n=(0,v.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,v.d5)(s)),i=(0,v.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),o=B.apyBreakdown[t].times(i);return e.plus(o)}return e.plus(B.apyBreakdown[t]);case"harvest":var u=(0,v.gA)(B.tvl).div(C),a=B.apyBreakdown[t].times(u);return e.plus(a);default:return e.plus(B.apyBreakdown[t])}}),(0,v.gA)(0)):(0,v.gA)(0);return(0,v.gA)(e).plus(t)}return(0,v.d5)(null===B||void 0===B?void 0:B.apy)}),[B,s,C,U,D]),_=(0,a.useMemo)((function(){return(0,v.d5)(x).gt(0)}),[x]),E=(0,a.useMemo)((function(){var e;return(0,v.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[B]),T=(0,a.useMemo)((function(){var e;return(0,v.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[B]),V=(0,a.useMemo)((function(){var e,t;return"flags"in P&&(0,v.d5)(null===(e=P.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?T.times(null===(t=P.flags)||void 0===t?void 0:t.withdrawFee):(0,v.gA)(0)}),[P,T]),G=(0,a.useMemo)((function(){var e;return u.Z.maximum(0,(0,v.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(V))}),[V,B]),q=(0,a.useMemo)((function(){return u.Z.minimum(1,(0,v.d5)(x).div(T))}),[x,T]),H=(0,a.useMemo)((function(){return u.Z.minimum(G,q.times(G))}),[G,q]),N=(0,a.useMemo)((function(){var e;return u.Z.maximum(0,(0,v.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===B||void 0===B?void 0:B.fee))}),[B]),O=(0,a.useMemo)((function(){return u.Z.minimum(N,(0,v.d5)(H).times(null===B||void 0===B?void 0:B.fee))}),[N,H,B]);P instanceof m.C&&(G=G.plus(O),H=H.plus(O));var z=_&&(0,v.d5)(s).lte(E),J="cta",K=null;switch(r){case"boost":var Q=L&&null!==B&&void 0!==B&&null!==(t=B.baseApr)&&void 0!==t&&t.gt(0)?L.div(null===B||void 0===B?void 0:B.baseApr):(0,v.gA)(0);K=(0,g.jsxs)(p.xv,(0,i.Z)((0,i.Z)({},Z),{},{textStyle:"titleSmall",color:"primary",children:[Q.toFixed(2),"x"]}));break;case"overperformance":var R=(0,v.d5)(x).times((0,v.gA)(null===B||void 0===B?void 0:B.baseApr).div(100)),W=(0,v.d5)(x).times((0,v.gA)(null===B||void 0===B?void 0:B.apy).div(100)),X=_?W.minus(R):null;K=(0,g.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},Z),{},{value:X,suffix:"/year"}));break;case"newApy":K=(0,g.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},Z),{},{value:L}));break;case"totalGain":K=(0,g.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:H.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},Z),{},{value:z?H:null}));break;case"fee":K=(0,g.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:O.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},Z),{},{value:z?-O:null}));break;case"withdrawFee":(0,v.d5)(null===(l=P.flags)||void 0===l?void 0:l.withdrawFee).gt(0)&&(J="orange",K=(0,g.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:V.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},Z),{},{value:z?-V:null})));break;case"depositLimit":J="orange";var Y=u.Z.maximum(0,(0,v.d5)(B.limit).minus(B.totalTvl).minus((0,v.d5)(s)));K=(0,g.jsx)(d.Amount,(0,i.Z)((0,i.Z)({suffix:" ".concat(I.token),decimals:2,textStyle:"titleSmall",color:J},Z),{},{value:Y}));break;case"netGain":var $=u.Z.minimum(G.minus(O),(0,v.d5)(H).minus(O));K=(0,g.jsx)(d.Amount.Usd,(0,i.Z)((0,i.Z)({decimals:$.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},Z),{},{value:z?$:null}));break;case"coverage":var ee=M(null===P||void 0===P?void 0:P.vaultConfig.Tranches.BB.address),te=ee.tvl&&C?ee.tvl.div(C).times(100):0;K=(0,g.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},Z),{},{value:te}));break;case"stakingPoolShare":if(S){var le=(0,v.d5)(s).div(S.stkIDLE.totalSupply.plus((0,v.d5)(s))).times(100);K=(0,g.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},Z),{},{value:le}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":K=(0,g.jsx)(d.Amount,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},Z),{},{value:s}));break;case"stakingApy":if(S){var ne=(0,v.d5)(A).times(S.maxApr);K=(0,g.jsx)(d.Amount.Percentage,(0,i.Z)((0,i.Z)({textStyle:"titleSmall",color:"primary"},Z),{},{value:ne}))}break;default:return null}return K?(0,g.jsxs)(p.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,g.jsx)(c.Translation,{component:p.xv,translation:"dynamicActionFields.".concat(r),textStyle:"captionSmall",color:J}),K]}):null},A=function(e){var t=(0,f.w)().selectors,l=t.selectAssetById,o=t.selectVaultById,u=e.assetId,d=e.action,m=(0,a.useMemo)((function(){return u&&l&&l(u)}),[u,l]),c=(0,a.useMemo)((function(){return u&&o&&o(u)}),[u,o]),y=(0,a.useMemo)((function(){return(null===c||void 0===c?void 0:c.type)&&s.A[c.type]}),[c]),A=(0,a.useMemo)((function(){return(0,v.d5)(null===m||void 0===m?void 0:m.limit).lt(r.jq)?(0,v.d5)(null===m||void 0===m?void 0:m.limit):(0,v.gA)(0)}),[m]),Z=(0,a.useMemo)((function(){return!!A.gt(0)&&(0,v.gA)(null===m||void 0===m?void 0:m.totalTvl).gte(A)}),[m,A]),k=(0,a.useMemo)((function(){var e;if(null===y||void 0===y||null===(e=y.dynamicActionFields)||void 0===e||!e[d])return null;var t=null===y||void 0===y?void 0:y.dynamicActionFields[d];return"deposit"===d&&A.gt(0)&&!Z&&(t=["depositLimit"].concat((0,n.Z)(t))),t}),[d,y,Z,A]);return k?(0,g.jsx)(p.gC,{spacing:2,width:"100%",children:k.map((function(t){return(0,g.jsx)(x,(0,i.Z)((0,i.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}}}]);