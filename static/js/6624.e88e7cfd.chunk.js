"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return g}});var n=l(1413),i=l(45987),o=l(5128),a=l(7276),u=l(12056),r=l(86059),s=l(60062),d=l(99594),m=l(15542),v=l(1669),c=l(3498),p=l(45263),f=["assetId","field","amount","amountUsd","stakingPower"],y=function(e){var t,l,u=e.assetId,y=e.field,g=e.amount,x=e.amountUsd,A=e.stakingPower,k=(0,i.Z)(e,f),Z=(0,v.w)(),w=Z.stakingData,S=Z.helpers.vaultFunctionsHelper,b=Z.selectors,h=b.selectAssetById,M=b.selectVaultById,j=b.selectVaultGauge,B=(0,a.useMemo)((function(){return u&&h&&h(u)}),[u,h]),I=(0,a.useMemo)((function(){return u&&M&&M(u)}),[u,M]),P=(0,a.useMemo)((function(){return u&&j&&j(u)}),[u,j]),F=(0,a.useMemo)((function(){return P&&h&&h(P.id)}),[P,h]),U=(0,a.useMemo)((function(){return(0,d.gA)(B.tvl).plus((0,d.d5)(g))}),[B,g]),C=(0,a.useMemo)((function(){return null===S||void 0===S?void 0:S.getVaultNewApr(B,I,(0,d.gA)(g))}),[B,I,g,S]),D=(0,a.useMemo)((function(){if((0,d.d5)(C).gt(0)){var e=(0,d.Bs)((0,d.d5)(C).div(100)).times(100),t=B.apyBreakdown?Object.keys(B.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===F||void 0===F?void 0:F.gaugeData;if(l){var n=(0,d.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,d.d5)(g)),i=(0,d.d5)(null===l||void 0===l?void 0:l.totalSupply).div(n),o=B.apyBreakdown[t].times(i);return e.plus(o)}return e.plus(B.apyBreakdown[t]);case"harvest":var a=(0,d.gA)(B.tvl).div(U),u=B.apyBreakdown[t].times(a);return e.plus(u);default:return e.plus(B.apyBreakdown[t])}}),(0,d.gA)(0)):(0,d.gA)(0);return(0,d.gA)(e).plus(t)}return(0,d.d5)(null===B||void 0===B?void 0:B.apy)}),[B,g,U,F,C]),_=(0,a.useMemo)((function(){return(0,d.d5)(x).gt(0)}),[x]),E=(0,a.useMemo)((function(){var e;return(0,d.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[B]),L=(0,a.useMemo)((function(){var e;return(0,d.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[B]),V=(0,a.useMemo)((function(){var e,t;return"flags"in I&&(0,d.d5)(null===(e=I.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?L.times(null===(t=I.flags)||void 0===t?void 0:t.withdrawFee):(0,d.gA)(0)}),[I,L]),G=(0,a.useMemo)((function(){var e;return o.Z.maximum(0,(0,d.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(V))}),[V,B]),T=(0,a.useMemo)((function(){return o.Z.minimum(1,(0,d.d5)(x).div(L))}),[x,L]),H=(0,a.useMemo)((function(){return o.Z.minimum(G,T.times(G))}),[G,T]),N=(0,a.useMemo)((function(){var e;return o.Z.maximum(0,(0,d.d5)(null===B||void 0===B||null===(e=B.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===B||void 0===B?void 0:B.fee))}),[B]),O=(0,a.useMemo)((function(){return o.Z.minimum(N,(0,d.d5)(H).times(null===B||void 0===B?void 0:B.fee))}),[N,H,B]);I instanceof s.C&&(G=G.plus(O),H=H.plus(O));var q=_&&(0,d.d5)(g).lte(E),z="cta",J=null;switch(y){case"boost":var K=D&&null!==B&&void 0!==B&&null!==(t=B.baseApr)&&void 0!==t&&t.gt(0)?D.div(null===B||void 0===B?void 0:B.baseApr):(0,d.gA)(0);J=(0,p.jsxs)(c.xv,(0,n.Z)((0,n.Z)({},k),{},{textStyle:"titleSmall",color:"primary",children:[K.toFixed(2),"x"]}));break;case"overperformance":var Q=(0,d.d5)(x).times((0,d.gA)(null===B||void 0===B?void 0:B.baseApr).div(100)),R=(0,d.d5)(x).times((0,d.gA)(null===B||void 0===B?void 0:B.apy).div(100)),W=_?R.minus(Q):null;J=(0,p.jsx)(r.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:W,suffix:"/year"}));break;case"newApy":J=(0,p.jsx)(r.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:D}));break;case"totalGain":J=(0,p.jsx)(r.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:H.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:q?H:null}));break;case"fee":J=(0,p.jsx)(r.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:O.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:q?-O:null}));break;case"withdrawFee":(0,d.d5)(null===(l=I.flags)||void 0===l?void 0:l.withdrawFee).gt(0)&&(z="orange",J=(0,p.jsx)(r.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:V.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},k),{},{value:q?-V:null})));break;case"netGain":var X=o.Z.minimum(G.minus(O),(0,d.d5)(H).minus(O));J=(0,p.jsx)(r.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:X.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:q?X:null}));break;case"coverage":var Y=h(null===I||void 0===I?void 0:I.vaultConfig.Tranches.BB.address),$=Y.tvl&&U?Y.tvl.div(U).times(100):0;J=(0,p.jsx)(r.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:$}));break;case"stakingPoolShare":if(w){var ee=(0,d.d5)(g).div(w.stkIDLE.totalSupply.plus((0,d.d5)(g))).times(100);J=(0,p.jsx)(r.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:ee}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":J=(0,p.jsx)(r.Amount,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},k),{},{value:g}));break;case"stakingApy":if(w){var te=(0,d.d5)(A).times(w.maxApr);J=(0,p.jsx)(r.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:te}))}break;default:return null}return J?(0,p.jsxs)(c.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,p.jsx)(m.Translation,{component:c.xv,translation:"dynamicActionFields.".concat(y),textStyle:"captionSmall",color:z}),J]}):null},g=function(e){var t=(0,v.w)().selectors.selectVaultById,l=e.assetId,i=e.action,o=(0,a.useMemo)((function(){return l&&t&&t(l)}),[l,t]),r=(0,a.useMemo)((function(){return(null===o||void 0===o?void 0:o.type)&&u.A[o.type]}),[o]),s=(0,a.useMemo)((function(){var e;return null!==r&&void 0!==r&&null!==(e=r.dynamicActionFields)&&void 0!==e&&e[i]?null===r||void 0===r?void 0:r.dynamicActionFields[i]:null}),[i,r]);return s?(0,p.jsx)(c.gC,{spacing:2,width:"100%",children:s.map((function(t){return(0,p.jsx)(y,(0,n.Z)((0,n.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}}}]);