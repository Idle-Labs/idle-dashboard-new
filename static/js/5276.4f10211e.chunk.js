"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[5276,219],{75276:function(e,t,n){n.r(t),n.d(t,{CompositionChart:function(){return h}});var r=n(7276),i=n(99594),a=n(79681),o=n(96699),u=n(3498),l=n(66288),s=n(90219),d=n(1669),c=n(1494),f=n(45263),h=function(e){var t=e.assetIds,n=e.strategies,h=e.type,g=(0,o.Fg)(),p=(0,a.qM)(),v=(0,l.X)().isMobile,m=(0,d.w)().protocolToken,y=(0,c.O)({assetIds:t,strategies:n}),x=y.colors,A=y.compositions,b=(0,r.useCallback)((function(e){var t;if("assets"===h){var n=A[h].reduce((function(e,t){return e+t.value}),0),r=function(e){return"$".concat((0,i.dm)(e))},a=null===e||void 0===e||null===(t=e.extraData)||void 0===t?void 0:t.asset,o=(null===a||void 0===a?void 0:a.icon)||(null===m||void 0===m?void 0:m.icon),u=(null===a||void 0===a?void 0:a.name)||p("dashboard.portfolio.totalChart"),l=r(e?e.value:n);return e&&!a?null:(0,f.jsxs)(f.Fragment,{children:[o&&(0,f.jsx)("image",{y:"35%",href:o,height:"34",width:"34",textAnchor:"middle",x:v?"44.5%":"46.5%"}),(0,f.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:l}),(0,f.jsx)("text",{x:"50%",y:"61%",fontSize:14,fontWeight:400,textAnchor:"middle",pointerEvents:"none",fill:g.colors.cta,children:u})]})}}),[m,A,g,p,h,v]),j=(0,r.useCallback)((function(){var e;return(0,f.jsx)("text",{x:"50%",y:"54%",fill:"white",fontSize:26,fontWeight:600,textAnchor:"middle",pointerEvents:"none",children:(e=0,"$".concat((0,i.dm)(e)))})}),[]);return(0,f.jsx)(u.xu,{height:350,width:"100%",children:A&&A[h]&&A[h].length?(0,f.jsx)(s.DonutChart,{colors:x[h],data:A[h],getSliceData:b}):(0,f.jsx)(s.DonutChart,{getSliceData:j,colors:{placeholder1:"#555B67"},data:[{value:100,label:"placeholder1"}]})})}},90219:function(e,t,n){n.r(t),n.d(t,{DonutChart:function(){return m},PieChart:function(){return h}});var r=n(1413),i=n(29439),a=n(14380),o=n(7276),u=n(28547),l=n(87563),s=n(68165),d=n(77806),c=n(45263),f={top:0,right:0,bottom:0,left:0};function h(e){var t=e.data,n=e.colors,l=e.width,s=e.height,h=e.margin,g=void 0===h?f:h,p=e.animate,m=void 0===p||p,y=e.getSliceData,x=(0,o.useState)(null),A=(0,i.Z)(x,2),b=A[0],j=A[1],M=l-g.left-g.right,w=s-g.top-g.bottom,Z=Math.min(M,w)/2,C=w/2,k=M/2,O=t.map((function(e){return e.label})),P=O.map((function(e){return n[e]})),D=(0,u.Z)({domain:O,range:P}),I=y&&y(b);return(0,c.jsxs)("svg",{width:l,height:s,children:[(0,c.jsx)("rect",{rx:14,width:l,height:s,fill:"url('#visx-pie-gradient')"}),I,(0,c.jsx)(a.Z,{top:C+g.top,left:k+g.left,children:(0,c.jsx)(d.Z,{padAngle:0,cornerRadius:0,pieValue:function(e){return e.value},outerRadius:Z,innerRadius:Z-30,data:t,children:function(e){return(0,c.jsx)(v,(0,r.Z)((0,r.Z)({},e),{},{animate:m,onMouseOver:function(e){var t=e.data;return j(t)},getKey:function(e){return e.data.label},onMouseOut:function(){return j(null)},getColor:function(e){return D(e.data.label)}}))}})})]})}var g=function(e){var t=e.endAngle;return{startAngle:t>Math.PI?2*Math.PI:0,endAngle:t>Math.PI?2*Math.PI:0,opacity:0}},p=function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,opacity:1}};function v(e){var t=e.animate,n=e.arcs,i=e.path,a=e.getKey,o=e.getColor,u=e.onMouseOut,l=e.onMouseOver,d=e.onClickDatum;return(0,s.useTransition)(n,{from:t?g:p,enter:p,update:p,leave:t?g:p,keys:a})((function(e,t){return(0,c.jsx)("g",{children:(0,c.jsx)(s.animated.path,{d:(0,s.interpolate)([e.startAngle,e.endAngle],(function(e,n){return i((0,r.Z)((0,r.Z)({},t),{},{startAngle:e,endAngle:n}))})),fill:o(t),onClick:function(){return d&&d(t)},onMouseOver:function(){return l&&l(t)},onMouseOut:function(){return u&&u(t)},onTouchStart:function(){return d&&d(t)}})},Math.random())}))}var m=function(e){var t=e.data,n=e.colors,r=e.getSliceData;return(0,c.jsx)(l.Z,{debounceTime:10,children:function(e){return(0,c.jsx)(h,{data:t,colors:n,width:e.width,height:e.height,getSliceData:r})}})}},1494:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(93433),i=n(4942),a=n(1413),o=n(7276),u=n(99594),l=n(79681),s=n(12056),d=n(1669),c=function(e){var t=e.assetIds,n=e.strategies,c=(0,l.qM)(),f=(0,d.w)().selectors,h=f.selectAssetById,g=f.selectAssetsByIds,p=(0,o.useMemo)((function(){return g?g(t):[]}),[t,g]),v=Object.keys(s.A).reduce((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},t,{balance:(0,u.gA)(0),deposited:(0,u.gA)(0),weightedRealizedApy:(0,u.gA)(0)}))}),{}),m=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){var n;return t.type&&t.vaultPosition?(e[t.type].balance=e[t.type].balance.plus(t.vaultPosition.usd.redeemable),e[t.type].deposited=e[t.type].deposited.plus(t.vaultPosition.usd.deposited),(0,u.gA)(null===(n=t.vaultPosition)||void 0===n?void 0:n.realizedApy).gt(0)&&(e[t.type].weightedRealizedApy=e[t.type].weightedRealizedApy.plus(t.vaultPosition.realizedApy.times(t.vaultPosition.usd.redeemable))),e):e}),v)}),[p,n,v]),y=(0,o.useMemo)((function(){return p.filter((function(e){return e.type&&(!n||n.includes(e.type))})).reduce((function(e,t){if(!t.underlyingId||!t.vaultPosition)return e;var n=h(t.underlyingId);return n?(e[n.id]||(e[n.id]=(0,u.gA)(0)),e[n.id]=e[n.id].plus(t.vaultPosition.usd.redeemable),e):e}),{})}),[p,n,h]),x={assets:[],strategies:[]};x.strategies=(0,o.useMemo)((function(){return Object.keys(m).map((function(e){return{label:c(s.A[e].label),extraData:{avgRealizedApy:m[e].balance.gt(0)?parseFloat(m[e].weightedRealizedApy.div(m[e].balance)):0,strategy:s.A[e],deposited:parseFloat(m[e].deposited)},value:parseFloat(m[e].balance)}}))}),[m,c]),x.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var i=h(t);return!i||i.type&&(!n||n.includes(i.type))?e:[].concat((0,r.Z)(e),[{label:i.name,extraData:{asset:i},value:parseFloat(y[t])}])}),[])}),[y,h,n]);var A={assets:{},strategies:{}};return A.strategies=(0,o.useMemo)((function(){return Object.values(s.A).reduce((function(e,t){var n=c(t.label);return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},n,t.color))}),{})}),[c]),A.assets=(0,o.useMemo)((function(){return Object.keys(y).reduce((function(e,t){var n=h(t);if(!n)return e;var r=n.name;return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},r,n.color))}),{})}),[y,h]),{colors:A,compositions:x}}}}]);